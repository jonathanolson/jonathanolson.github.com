var ke=Object.defineProperty;var Te=(s,t,r)=>t in s?ke(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var n=(s,t,r)=>(Te(s,typeof t!="symbol"?t+"":t,r),r);import{o as Ue,P as Me,B as Ce,E as X,d as j,R as J,O as We}from"./Vector2Property-DCXaH-JP.js";import{V as q,T as Le,N as ye,f as qe,e as g,M as K,H as T,G as Xe,F as je,g as $e}from"./PhetioControlledVisibilityProperty-BRVDbtg_.js";import{P as Qe}from"./PatternRuleNode-DFIuwzgk.js";import{a as Ye,L as _,b as ee,c as Ze,d as Je,A as te,S as Ke}from"./TextPushButton-CXcXt4ga.js";import{h as _e,x as et,y as tt,z as at,A as ot,B as nt,V as rt,f as ae}from"./UIAquaRadioButtonGroup-ClrMOOFa.js";import{_ as oe,a as st,b as lt,p as it}from"./getCoordinateClusteredMap-DCjAm76-.js";import{s as ne,a as re,b as se,c as le,d as ie,e as ce,f as de,g as ue,h as we,i as pe,j as ge,k as me,l as be,p as ct}from"./patternBoards-Hmq_9LOt.js";import{c as dt,p as U,d as M,f as ut,g as wt,h as pt,i as gt,j as mt,k as bt,U as m,l as Et,D as Ee}from"./standardSolverFactory-DvvOIRLV.js";import{e as ht,c as fe,t as Pt,f as Ct,u as Lt,a as yt}from"./Theme-CvstiQLg.js";import{B as u}from"./BoardPatternBoard-BqXHqDjx.js";import"./PatternNode-CLzdEy8s.js";import"./FaceColorDualFeature-DKZsSiFX.js";import"./logic-solver-O3GFcRDa.js";import"./ShadedSphereNode-GgOLtD-k.js";import"./SATSolver-t5tsio6h.js";import"./BasicPuzzle-Bfe5BzDw.js";import"./BinaryRuleCollection-Co2eOjDC.js";import"./PatternRule-CrjXMziT.js";import"./FeatureSet-DDOmfIdB.js";import"./HighlanderPruner-DdNF9lmw.js";import"./getPeriodicTilingGenerator-o-Elo7dg.js";class O extends q{constructor(t,r,w,P){const C=Ue()({stretch:!0,align:"left",spacing:10,radioButtonGroupOptions:{orientation:"vertical",align:"left"}},P),x=new _e(r,w,C.radioButtonGroupOptions);C.children=[new Le(t,{font:ht,fill:fe.uiForegroundColorProperty}),x],super(C)}}window.assertions.enableAssert();const Re=new ye,ft=new ye({renderer:"svg",children:[Re]}),N=new qe(ft,{allowWebGL:!0,allowBackingScaleAntialiasing:!0,allowSceneOverflow:!1,accessibility:!0,backgroundColor:"#333",assumeFullWindow:!0,listenToOnlyElement:!1});document.body.appendChild(N.domElement);dt.theme.uiBackgroundColorProperty.link(s=>{N.backgroundColor=s});window.oncontextmenu=s=>s.preventDefault();const W=new Me(new Ce(0,0,window.innerWidth,window.innerHeight)),d=class d extends X{};n(d,"EDGE",new d),n(d,"COLOR",new d),n(d,"EDGE_COLOR",new d),n(d,"EDGE_SECTOR",new d),n(d,"ALL",new d),n(d,"enumeration",new j(d));let o=d;const b=class b extends X{};n(b,"REGULAR",new b),n(b,"HIGHLANDER",new b),n(b,"ALL",new b),n(b,"enumeration",new j(b));let f=b;const a=class a extends X{constructor(t,r,w){super(),this.displayName=t,this.board=r,this.boardPatternBoard=w}};n(a,"SQUARE",new a("Square",ne,new u(ne))),n(a,"HEXAGONAL",new a("Hexagonal",re,new u(re))),n(a,"CAIRO",new a("Cairo",se,new u(se))),n(a,"TRIANGULAR",new a("Triangular",le,new u(le))),n(a,"RHOMBILLE",new a("Rhombille",ie,new u(ie))),n(a,"SNUB_SQUARE",new a("Snub Square",ce,new u(ce))),n(a,"TRIHEXAGONAL",new a("Trihexagonal",de,new u(de))),n(a,"FLORET_PENTAGONAL",new a("Floret Pentagonal",ue,new u(ue))),n(a,"DELTOIDAL_TRIHEXAGONAL",new a("Deltoidal Trihexagonal",we,new u(we))),n(a,"PORTUGAL",new a("Portugal",pe,new u(pe))),n(a,"RHOMBITRIHEXAGONAL",new a("Rhombitrihexagonal",ge,new u(ge))),n(a,"PRISMATIC_PENTAGONAL",new a("Prismatic Pentagonal",me,new u(me))),n(a,"ELONGATED_TRIANGULAR",new a("Elongated Triangular",be,new u(be))),n(a,"enumeration",new j(a));let I=a;const he=new Map,Pe=(s,t)=>{let r=he.get(s);r||(r=new Map,he.set(s,r));let w=r.get(t);if(w===void 0){const P=Ee.findBestEmbedding(s,t.boardPatternBoard,t.board);P?w=Ee.getDisplayEmbedding(s,t.boardPatternBoard,t.board,P):w=null,r.set(t,w)}return w};(async()=>{const s=new Ye("explorerPuzzleStyleProperty",{serialize:e=>Object.keys(U).find(l=>U[l]===e),deserialize:e=>e?U[e]??M:M}),t=ut(s),r=new _("collectionModeProperty",o.EDGE),w=new _("highlanderModeProperty",f.REGULAR),P=new ee("includeFallbackProperty",!1),C=new Ze("displayTilingProperty",I.enumeration,null),x=new ee("showEmbeddedProperty",!1),Ae=new g([r],e=>{switch(e){case o.EDGE:return nt();case o.COLOR:return ot();case o.EDGE_COLOR:return at();case o.EDGE_SECTOR:return tt();case o.ALL:return et();default:throw new Error(`unhandled collection mode: ${e}`)}}),Q=new g([Ae,w,P,C],(e,l,h,c)=>{let i=e;return l===f.REGULAR?i=i.withoutHighlander():l===f.HIGHLANDER&&(i=i.withOnlyHighlander()),h||(i=i.withoutFallback()),c&&(i=i.withPatternBoardFilter(y=>Pe(y,c)!==null)),i});K.multilink([t.edgesVisibleProperty,t.faceColorsVisibleProperty,t.sectorsVisibleProperty],(e,l,h)=>{const c=r.value,i=c!==o.COLOR,y=c===o.COLOR||c===o.EDGE_COLOR||c===o.ALL,k=c===o.EDGE_SECTOR||c===o.ALL;i&&!e?r.value=o.COLOR:(y&&!l&&(r.value=c===o.ALL?o.EDGE_SECTOR:o.EDGE),k&&!h&&(r.value=c===o.ALL?o.EDGE_COLOR:o.EDGE))});const v=6,F=new g([Q],e=>new J(0,Math.max(0,Math.ceil(e.size/v)-1))),L=new Je("pageIndexProperty",0),Be=new g([Q,L],(e,l)=>{const h=l*v,c=Math.min(h,e.size),i=Math.min(h+v,e.size);return console.log(e.size/v),oe.range(c,i).map(y=>e.getRule(y))}),R=rt.getIcons(),A=(e,l)=>new T({spacing:5,children:[new m(l),e]}),Se=new O("View Style",s,[{value:M,createNode:()=>A(R.classicIcon,"Classic"),labelContent:"Classic"},{value:wt,createNode:()=>A(R.basicLinesIcon,"Basic Lines"),labelContent:"Basic Lines"},{value:pt,createNode:()=>A(R.basicFaceColoringIcon,"Basic Face Colors"),labelContent:"Basic Face Colors"},{value:gt,createNode:()=>A(R.pureFaceColoringIcon,"Pure Face Colors"),labelContent:"Pure Face Colors"},{value:mt,createNode:()=>A(R.basicSectorsIcon,"Basic Sectors"),labelContent:"Basic Sectors"},{value:bt,createNode:()=>A(R.sectorsWithColorsIcon,"Sectors With Colors"),labelContent:"Sectors With Colors"}]),Ge=new O("Theme",Pt,Ct.map(e=>({value:e,createNode:()=>new Le(e.name,{font:Lt,fill:fe.uiForegroundColorProperty}),a11yName:e.name}))),Oe=new O("Collection",r,[{value:o.EDGE,labelContent:"Edge",createNode:()=>new m("Edge"),options:{enabledProperty:t.edgesVisibleProperty}},{value:o.COLOR,labelContent:"Color",createNode:()=>new m("Color"),options:{enabledProperty:t.faceColorsVisibleProperty}},{value:o.EDGE_COLOR,labelContent:"Edge + Color",createNode:()=>new m("Edge + Color"),options:{enabledProperty:g.and([t.edgesVisibleProperty,t.faceColorsVisibleProperty])}},{value:o.EDGE_SECTOR,labelContent:"Edge + Sector",createNode:()=>new m("Edge + Sector"),options:{enabledProperty:g.and([t.edgesVisibleProperty,t.sectorsVisibleProperty])}},{value:o.ALL,labelContent:"Edge + Color + Sector",createNode:()=>new m("Edge + Color + Sector"),options:{enabledProperty:g.and([t.edgesVisibleProperty,t.faceColorsVisibleProperty,t.sectorsVisibleProperty])}}]),Ne=new O("Highlander",w,[{value:f.REGULAR,labelContent:"Regular",createNode:()=>new m("Regular")},{value:f.HIGHLANDER,labelContent:"Highlander Only",createNode:()=>new m("Highlander Only")}]),xe=new ae("Include Fallback",P),ve=new ae("Show Embedded",x),ze=new O("Compatible Tiling",C,[{value:null,labelContent:"All",createNode:()=>new m("All")},...I.enumeration.values.map(e=>({value:e,labelContent:e.displayName,createNode:()=>new m(e.displayName)}))]),Ie=new te("left",()=>{L.value--},{touchAreaXDilation:5,touchAreaYDilation:5,enabledProperty:new g([L,F],(e,l)=>e>l.min)}),Fe=new te("right",()=>{L.value++},{touchAreaXDilation:5,touchAreaYDilation:5,enabledProperty:new g([L,F],(e,l)=>e<l.max)}),He=new Ke(L,new g([F],e=>new J(e.min,Math.max(.1,e.max))),{orientation:We.HORIZONTAL,constrainValue:e=>Math.round(e)}),Ve=new m(new g([L],e=>`Page ${e}`),{fontWeight:"bold"}),De=new q({spacing:5,children:[Ve,new T({spacing:5,children:[Ie,He,Fe]})]}),H=new q({align:"left",spacing:20,children:[Oe,Ne,xe,ze,ve,Se,Ge,De]}),V=10,Y=30,E=new Xe({xSpacing:40,ySpacing:20});K.multilink([Be,W,C,x],(e,l,h,c)=>{const i=l.height-2*V;H.maxHeight=i;const y=l.width-2*V-H.width-Y,k=E.children.slice();if(e.length?E.children=e.map(p=>{const S=ct.get(p.patternBoard);st()&&lt(S);const G=new je({fire:()=>{yt(p.getBinaryIdentifier()),console.log(p.getBinaryIdentifier())}});let B=null;return c&&h&&(B=Pe(p.patternBoard,h)),B?new Et(p,B,{cursor:"pointer",inputListeners:[G],scale:30,style:t}):new Qe(p,S,{cursor:"pointer",inputListeners:[G]})}):E.removeAllChildren(),k.forEach(p=>p.dispose()),e.length){let p=0,S=0;oe.range(1,11).forEach(G=>{E.autoColumns=G;const B=Math.min(y/E.localBounds.width,i/E.localBounds.height);B>p&&(p=B,S=G)}),E.autoColumns=S,E.setScaleMagnitude(p)}}),Re.addChild(new $e(new T({spacing:Y,align:"top",children:[H,E]}),{margin:V,xAlign:"left",yAlign:"top",alignBoundsProperty:W})),N.initializeEvents();let D=!0;const Z=()=>{D=!1;const e=new Ce(0,0,window.innerWidth,window.innerHeight);N.setWidthHeight(e.width,e.height),W.value=e,it.mobileSafari&&window.scrollTo(0,0)},z=()=>{D=!0};$(window).resize(z),window.addEventListener("resize",z),window.addEventListener("orientationchange",z),window.visualViewport&&window.visualViewport.addEventListener("resize",z),Z(),N.updateOnRequestAnimationFrame(e=>{D&&Z()})})();
