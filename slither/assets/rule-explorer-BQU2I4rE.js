var ke=Object.defineProperty;var Me=(s,t,r)=>t in s?ke(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var n=(s,t,r)=>(Me(s,typeof t!="symbol"?t+"":t,r),r);import{o as Te,P as Ue,B as Ce,E as X,d as j,R as J,O as We}from"./Vector2Property-DCXaH-JP.js";import{V as q,T as Le,N as ye,f as qe,e as g,M as K,H as M,G as Xe,F as je,g as $e}from"./PhetioControlledVisibilityProperty-sdyDHryr.js";import{P as Qe}from"./PatternRuleNode-RM4dMDYF.js";import{a as Ye,L as _,b as ee,c as Ze,d as Je,A as te,S as Ke}from"./TextPushButton-F5WNyFmI.js";import{_ as oe,a as _e,b as et,p as tt}from"./createBoardDescriptor-DQiPBFka.js";import{p as ot}from"./getEmbeddings-BW9bZEIh.js";import{c as at,p as T,d as U,f as nt,g as rt,h as st,i as it,j as lt,k as ct,U as m,l as dt,D as ae}from"./standardSolverFactory-u1dqHpQB.js";import{h as ut,x as wt,y as pt,z as mt,A as gt,B as bt,V as Et,f as ne}from"./UIAquaRadioButtonGroup-Dj5DYhaT.js";import{e as ht,c as fe,t as Pt,f as Ct,u as Lt,a as yt}from"./Theme-Bnv1SKXL.js";import{s as re,a as se,b as ie,c as le,d as ce,e as de,f as ue,g as we,h as pe,i as me,j as ge,k as be,l as Ee}from"./patternBoards-BWMN3hEW.js";import{B as u}from"./BoardPatternBoard-Bz8J-OFJ.js";import"./PatternNode-AMPkGiSl.js";import"./FaceColorDualFeature-D9dVWw2V.js";import"./operations-BoJEwKFC.js";import"./logic-solver-PjryYC9f.js";import"./ShadedSphereNode-CfSdIz5V.js";import"./computeEmbeddings-DgNcEsIq.js";import"./BasicPuzzle-CWyNbg6B.js";import"./getCoordinateClusteredMap-BFcIYRrL.js";import"./SATSolver-DjD4IKFy.js";import"./BinaryRuleCollection-BKRM-FAV.js";import"./PatternRule-DoiK-ly1.js";import"./FeatureSet-CUuwAkcj.js";import"./PatternBoardSolver-FUiAf3Qg.js";import"./HighlanderPruner-ClXsMd3n.js";import"./BinaryMixedRuleGroup-BYk59YZ5.js";import"./getPeriodicTilingGenerator-9D05ORtn.js";class O extends q{constructor(t,r,w,C){const L=Te()({stretch:!0,align:"left",spacing:10,radioButtonGroupOptions:{orientation:"vertical",align:"left"}},C),x=new ut(r,w,L.radioButtonGroupOptions);L.children=[new Le(t,{font:ht,fill:fe.uiForegroundColorProperty}),x],super(L)}}window.assertions.enableAssert();const Ae=new ye,ft=new ye({renderer:"svg",children:[Ae]}),N=new qe(ft,{allowWebGL:!0,allowBackingScaleAntialiasing:!0,allowSceneOverflow:!1,accessibility:!0,backgroundColor:"#333",assumeFullWindow:!0,listenToOnlyElement:!1});document.body.appendChild(N.domElement);at.theme.uiBackgroundColorProperty.link(s=>{N.backgroundColor=s});window.oncontextmenu=s=>s.preventDefault();const W=new Ue(new Ce(0,0,window.innerWidth,window.innerHeight)),d=class d extends X{};n(d,"EDGE",new d),n(d,"COLOR",new d),n(d,"EDGE_COLOR",new d),n(d,"EDGE_SECTOR",new d),n(d,"ALL",new d),n(d,"enumeration",new j(d));let a=d;const b=class b extends X{};n(b,"REGULAR",new b),n(b,"HIGHLANDER",new b),n(b,"ALL",new b),n(b,"enumeration",new j(b));let P=b;const o=class o extends X{constructor(t,r,w){super(),this.displayName=t,this.board=r,this.boardPatternBoard=w}};n(o,"SQUARE",new o("Square",re,new u(re))),n(o,"HEXAGONAL",new o("Hexagonal",se,new u(se))),n(o,"CAIRO",new o("Cairo",ie,new u(ie))),n(o,"TRIANGULAR",new o("Triangular",le,new u(le))),n(o,"RHOMBILLE",new o("Rhombille",ce,new u(ce))),n(o,"SNUB_SQUARE",new o("Snub Square",de,new u(de))),n(o,"TRIHEXAGONAL",new o("Trihexagonal",ue,new u(ue))),n(o,"FLORET_PENTAGONAL",new o("Floret Pentagonal",we,new u(we))),n(o,"DELTOIDAL_TRIHEXAGONAL",new o("Deltoidal Trihexagonal",pe,new u(pe))),n(o,"PORTUGAL",new o("Portugal",me,new u(me))),n(o,"RHOMBITRIHEXAGONAL",new o("Rhombitrihexagonal",ge,new u(ge))),n(o,"PRISMATIC_PENTAGONAL",new o("Prismatic Pentagonal",be,new u(be))),n(o,"ELONGATED_TRIANGULAR",new o("Elongated Triangular",Ee,new u(Ee))),n(o,"enumeration",new j(o));let I=o;const he=new Map,Pe=(s,t)=>{let r=he.get(s);r||(r=new Map,he.set(s,r));let w=r.get(t);if(w===void 0){const C=ae.findBestEmbedding(s,t.boardPatternBoard,t.board);C?w=ae.getDisplayEmbedding(s,t.boardPatternBoard,t.board,C):w=null,r.set(t,w)}return w};(async()=>{const s=new Ye("explorerPuzzleStyleProperty",{serialize:e=>Object.keys(T).find(i=>T[i]===e),deserialize:e=>e?T[e]??U:U}),t=nt(s),r=new _("collectionModeProperty",a.EDGE),w=new _("highlanderModeProperty",P.ALL),C=new ee("includeFallbackProperty",!1),L=new Ze("displayTilingProperty",I.enumeration,null),x=new ee("showEmbeddedProperty",!1),Be=new g([r],e=>{switch(e){case a.EDGE:return bt();case a.COLOR:return gt();case a.EDGE_COLOR:return mt();case a.EDGE_SECTOR:return pt();case a.ALL:return wt();default:throw new Error(`unhandled collection mode: ${e}`)}}),Q=new g([Be,w,C,L],(e,i,h,c)=>{let l=e;return i===P.REGULAR?l=l.withoutHighlander():i===P.HIGHLANDER&&(l=l.withOnlyHighlander()),h||(l=l.withoutFallback()),c&&(l=l.withPatternBoardFilter(f=>Pe(f,c)!==null)),l});K.multilink([t.edgesVisibleProperty,t.faceColorsVisibleProperty,t.sectorsVisibleProperty],(e,i,h)=>{const c=r.value,l=c!==a.COLOR,f=c===a.COLOR||c===a.EDGE_COLOR||c===a.ALL,k=c===a.EDGE_SECTOR||c===a.ALL;l&&!e?r.value=a.COLOR:(f&&!i&&(r.value=c===a.ALL?a.EDGE_SECTOR:a.EDGE),k&&!h&&(r.value=c===a.ALL?a.EDGE_COLOR:a.EDGE))});const v=6,F=new g([Q],e=>new J(0,Math.max(0,Math.ceil(e.size/v)-1))),y=new Je("pageIndexProperty",0),Re=new g([Q,y],(e,i)=>{const h=i*v,c=Math.min(h,e.size),l=Math.min(h+v,e.size);return console.log(e.size/v),oe.range(c,l).map(f=>e.getRule(f))}),A=Et.getIcons(),B=(e,i)=>new M({spacing:5,children:[new m(i),e]}),Se=new O("View Style",s,[{value:U,createNode:()=>B(A.classicIcon,"Classic"),labelContent:"Classic"},{value:rt,createNode:()=>B(A.basicLinesIcon,"Basic Lines"),labelContent:"Basic Lines"},{value:st,createNode:()=>B(A.basicFaceColoringIcon,"Basic Face Colors"),labelContent:"Basic Face Colors"},{value:it,createNode:()=>B(A.pureFaceColoringIcon,"Pure Face Colors"),labelContent:"Pure Face Colors"},{value:lt,createNode:()=>B(A.basicSectorsIcon,"Basic Sectors"),labelContent:"Basic Sectors"},{value:ct,createNode:()=>B(A.sectorsWithColorsIcon,"Sectors With Colors"),labelContent:"Sectors With Colors"}]),Ge=new O("Theme",Pt,Ct.map(e=>({value:e,createNode:()=>new Le(e.name,{font:Lt,fill:fe.uiForegroundColorProperty}),a11yName:e.name}))),Oe=new O("Collection",r,[{value:a.EDGE,labelContent:"Edge",createNode:()=>new m("Edge"),options:{enabledProperty:t.edgesVisibleProperty}},{value:a.COLOR,labelContent:"Color",createNode:()=>new m("Color"),options:{enabledProperty:t.faceColorsVisibleProperty}},{value:a.EDGE_COLOR,labelContent:"Edge + Color",createNode:()=>new m("Edge + Color"),options:{enabledProperty:g.and([t.edgesVisibleProperty,t.faceColorsVisibleProperty])}},{value:a.EDGE_SECTOR,labelContent:"Edge + Sector",createNode:()=>new m("Edge + Sector"),options:{enabledProperty:g.and([t.edgesVisibleProperty,t.sectorsVisibleProperty])}},{value:a.ALL,labelContent:"Edge + Color + Sector",createNode:()=>new m("Edge + Color + Sector"),options:{enabledProperty:g.and([t.edgesVisibleProperty,t.faceColorsVisibleProperty,t.sectorsVisibleProperty])}}]),Ne=new O("Highlander",w,[{value:P.ALL,labelContent:"All",createNode:()=>new m("All")},{value:P.REGULAR,labelContent:"Regular",createNode:()=>new m("Regular")},{value:P.HIGHLANDER,labelContent:"Highlander Only",createNode:()=>new m("Highlander Only")}]),xe=new ne("Include Fallback",C),ve=new ne("Show Embedded",x),ze=new O("Compatible Tiling",L,[{value:null,labelContent:"All",createNode:()=>new m("All")},...I.enumeration.values.map(e=>({value:e,labelContent:e.displayName,createNode:()=>new m(e.displayName)}))]),Ie=new te("left",()=>{y.value--},{touchAreaXDilation:5,touchAreaYDilation:5,enabledProperty:new g([y,F],(e,i)=>e>i.min)}),Fe=new te("right",()=>{y.value++},{touchAreaXDilation:5,touchAreaYDilation:5,enabledProperty:new g([y,F],(e,i)=>e<i.max)}),He=new Ke(y,new g([F],e=>new J(e.min,Math.max(.1,e.max))),{orientation:We.HORIZONTAL,constrainValue:e=>Math.round(e)}),Ve=new m(new g([y],e=>`Page ${e}`),{fontWeight:"bold"}),De=new q({spacing:5,children:[Ve,new M({spacing:5,children:[Ie,He,Fe]})]}),H=new q({align:"left",spacing:20,children:[Oe,Ne,xe,ze,ve,Se,Ge,De]}),V=10,Y=30,E=new Xe({xSpacing:40,ySpacing:20});K.multilink([Re,W,L,x],(e,i,h,c)=>{const l=i.height-2*V;H.maxHeight=l;const f=i.width-2*V-H.width-Y,k=E.children.slice();if(e.length?E.children=e.map(p=>{const S=ot.get(p.patternBoard);_e()&&et(S);const G=new je({fire:()=>{yt(p.getBinaryIdentifier()),console.log(p.getBinaryIdentifier())}});let R=null;return c&&h&&(R=Pe(p.patternBoard,h)),R?new dt(p,R,{cursor:"pointer",inputListeners:[G],scale:30,style:t}):new Qe(p,S,{cursor:"pointer",inputListeners:[G]})}):E.removeAllChildren(),k.forEach(p=>p.dispose()),e.length){let p=0,S=0;oe.range(1,11).forEach(G=>{E.autoColumns=G;const R=Math.min(f/E.localBounds.width,l/E.localBounds.height);R>p&&(p=R,S=G)}),E.autoColumns=S,E.setScaleMagnitude(p)}}),Ae.addChild(new $e(new M({spacing:Y,align:"top",children:[H,E]}),{margin:V,xAlign:"left",yAlign:"top",alignBoundsProperty:W})),N.initializeEvents();let D=!0;const Z=()=>{D=!1;const e=new Ce(0,0,window.innerWidth,window.innerHeight);N.setWidthHeight(e.width,e.height),W.value=e,tt.mobileSafari&&window.scrollTo(0,0)},z=()=>{D=!0};$(window).resize(z),window.addEventListener("resize",z),window.addEventListener("orientationchange",z),window.visualViewport&&window.visualViewport.addEventListener("resize",z),Z(),N.updateOnRequestAnimationFrame(e=>{D&&Z()})})();
