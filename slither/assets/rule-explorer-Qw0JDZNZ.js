var Ze=Object.defineProperty;var Je=(l,t,r)=>t in l?Ze(l,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):l[t]=r;var a=(l,t,r)=>(Je(l,typeof t!="symbol"?t+"":t,r),r);import{o as Ke,P as _e,B as xe,E as M,d as U,R as ce,O as et}from"./Vector2Property-DCXaH-JP.js";import{V as T,T as ve,N as ee,f as tt,e as E,M as de,H as Q,G as nt,F as at,g as ot}from"./PhetioControlledVisibilityProperty-sdyDHryr.js";import{P as rt}from"./PatternRuleNode-CF1St5aY.js";import{a as st,L as Z,b as ue,c as lt,d as it,A as we,S as ct}from"./TextPushButton-F5WNyFmI.js";import{_ as pe,a as dt,b as ut,p as wt}from"./createBoardDescriptor-DQiPBFka.js";import{p as pt}from"./getEmbeddings-BW9bZEIh.js";import{c as gt,p as J,d as K,f as mt,g as Et,h as bt,i as ht,j as Pt,k as ft,U as d,l as Lt,D as ge}from"./standardSolverFactory-ZoPEDVkS.js";import{h as yt,x as Ct,y as Nt,z as Rt,A as At,B as Bt,V as Ot,f as me}from"./UIAquaRadioButtonGroup-BE161e4b.js";import{e as St,c as Ie,t as Gt,f as xt,u as vt,a as It}from"./Theme-Bnv1SKXL.js";import{s as Ee,a as be,b as he,c as Pe,d as fe,e as Le,f as ye,g as Ce,h as Ne,i as Re,j as Ae,k as Be,l as Oe}from"./patternBoards-BWMN3hEW.js";import{B as p}from"./BoardPatternBoard-Bz8J-OFJ.js";import{F as zt,R as Ft}from"./FaceColorDualFeature-CyAHgR8K.js";import"./PatternNode-5zUA3i1D.js";import"./ShadedSphereNode-CfSdIz5V.js";import"./computeEmbeddings-DgNcEsIq.js";import"./BasicPuzzle-CWyNbg6B.js";import"./getCoordinateClusteredMap-BFcIYRrL.js";import"./SATSolver-DjD4IKFy.js";import"./logic-solver-PjryYC9f.js";import"./BinaryRuleCollection-BwiA065R.js";import"./PatternRule-Do7pu5aL.js";import"./FeatureSet-DIi2f52c.js";import"./PatternBoardSolver-FUiAf3Qg.js";import"./operations-BoJEwKFC.js";import"./HighlanderPruner-jdtCBH_X.js";import"./BinaryMixedRuleGroup-MoDXqgs1.js";import"./getPeriodicTilingGenerator-9D05ORtn.js";class v extends T{constructor(t,r,g,N){const S=Ke()({stretch:!0,align:"left",spacing:10,radioButtonGroupOptions:{orientation:"vertical",align:"left"}},N),I=new yt(r,g,S.radioButtonGroupOptions);S.children=[new ve(t,{font:St,fill:Ie.uiForegroundColorProperty}),I],super(S)}}window.assertions.enableAssert();const ze=new ee,Ht=new ee({renderer:"svg",children:[ze]}),z=new tt(Ht,{allowWebGL:!0,allowBackingScaleAntialiasing:!0,allowSceneOverflow:!1,accessibility:!0,backgroundColor:"#333",assumeFullWindow:!0,listenToOnlyElement:!1});document.body.appendChild(z.domElement);gt.theme.uiBackgroundColorProperty.link(l=>{z.backgroundColor=l});window.oncontextmenu=l=>l.preventDefault();const _=new _e(new xe(0,0,window.innerWidth,window.innerHeight)),u=class u extends M{};a(u,"EDGE",new u),a(u,"COLOR",new u),a(u,"EDGE_COLOR",new u),a(u,"EDGE_SECTOR",new u),a(u,"ALL",new u),a(u,"enumeration",new U(u));let o=u;const P=class P extends M{};a(P,"REGULAR",new P),a(P,"HIGHLANDER",new P),a(P,"ALL",new P),a(P,"enumeration",new U(P));let y=P;const C=class C extends M{};a(C,"NONE",new C),a(C,"ONLY_NUMBERS_AND_EXIT_RED",new C),a(C,"enumeration",new U(C));let O=C;const n=class n extends M{constructor(t,r,g){super(),this.displayName=t,this.board=r,this.boardPatternBoard=g}};a(n,"SQUARE",new n("Square",Ee,new p(Ee))),a(n,"HEXAGONAL",new n("Hexagonal",be,new p(be))),a(n,"CAIRO",new n("Cairo",he,new p(he))),a(n,"TRIANGULAR",new n("Triangular",Pe,new p(Pe))),a(n,"RHOMBILLE",new n("Rhombille",fe,new p(fe))),a(n,"SNUB_SQUARE",new n("Snub Square",Le,new p(Le))),a(n,"TRIHEXAGONAL",new n("Trihexagonal",ye,new p(ye))),a(n,"FLORET_PENTAGONAL",new n("Floret Pentagonal",Ce,new p(Ce))),a(n,"DELTOIDAL_TRIHEXAGONAL",new n("Deltoidal Trihexagonal",Ne,new p(Ne))),a(n,"PORTUGAL",new n("Portugal",Re,new p(Re))),a(n,"RHOMBITRIHEXAGONAL",new n("Rhombitrihexagonal",Ae,new p(Ae))),a(n,"PRISMATIC_PENTAGONAL",new n("Prismatic Pentagonal",Be,new p(Be))),a(n,"ELONGATED_TRIANGULAR",new n("Elongated Triangular",Oe,new p(Oe))),a(n,"enumeration",new U(n));let k=n;const Se=new Map,Ge=(l,t)=>{let r=Se.get(l);r||(r=new Map,Se.set(l,r));let g=r.get(t);if(g===void 0){const N=ge.findBestEmbedding(l,t.boardPatternBoard,t.board);N?g=ge.getDisplayEmbedding(l,t.boardPatternBoard,t.board,N):g=null,r.set(t,g)}return g};(async()=>{const l=new st("explorerPuzzleStyleProperty",{serialize:e=>Object.keys(J).find(s=>J[s]===e),deserialize:e=>e?J[e]??K:K}),t=mt(l),r=new Z("collectionModeProperty",o.EDGE),g=new Z("highlanderModeProperty",y.ALL),N=new Z("filterModeProperty",O.NONE),S=new ue("includeFallbackProperty",!1),I=new lt("displayTilingProperty",k.enumeration,null),te=new ue("showEmbeddedProperty",!1),Fe=new E([r],e=>{switch(e){case o.EDGE:return Bt();case o.COLOR:return At();case o.EDGE_COLOR:return Rt();case o.EDGE_SECTOR:return Nt();case o.ALL:return Ct();default:throw new Error(`unhandled collection mode: ${e}`)}}),ne=new E([Fe,g,N,S,I],(e,s,b,i,m)=>{let w=e;const A=s===y.REGULAR,D=s===y.HIGHLANDER,V=!i,c=!!m,B=b!==O.NONE;return(A||D||V||c||B)&&(w=w.filterIndex(h=>{if(A&&w.isRuleIndexHighlander(h)||D&&!w.isRuleIndexHighlander(h)||V&&w.isRuleIndexFallback(h))return!1;const L=w.getRule(h);return!(m&&Ge(L.patternBoard,m)===null||b===O.ONLY_NUMBERS_AND_EXIT_RED&&!L.inputFeatureSet.getFeaturesArray().every(j=>j instanceof zt||j instanceof Ft&&j.edge.isExit))})),w});de.multilink([t.edgesVisibleProperty,t.faceColorsVisibleProperty,t.sectorsVisibleProperty],(e,s,b)=>{const i=r.value,m=i!==o.COLOR,w=i===o.COLOR||i===o.EDGE_COLOR||i===o.ALL,A=i===o.EDGE_SECTOR||i===o.ALL;m&&!e?r.value=o.COLOR:(w&&!s&&(r.value=i===o.ALL?o.EDGE_SECTOR:o.EDGE),A&&!b&&(r.value=i===o.ALL?o.EDGE_COLOR:o.EDGE))});const W=6,F=new E([ne],e=>new ce(0,Math.max(0,Math.ceil(e.size/W)-1))),R=new it("pageIndexProperty",0),He=new E([ne,R],(e,s)=>{const b=s*W,i=Math.min(b,e.size),m=Math.min(b+W,e.size);return pe.range(i,m).map(w=>e.getRule(w))}),G=Ot.getIcons(),x=(e,s)=>new Q({spacing:5,children:[new d(s),e]}),De=new v("View Style",l,[{value:K,createNode:()=>x(G.classicIcon,"Classic"),labelContent:"Classic"},{value:Et,createNode:()=>x(G.basicLinesIcon,"Basic Lines"),labelContent:"Basic Lines"},{value:bt,createNode:()=>x(G.basicFaceColoringIcon,"Basic Face Colors"),labelContent:"Basic Face Colors"},{value:ht,createNode:()=>x(G.pureFaceColoringIcon,"Pure Face Colors"),labelContent:"Pure Face Colors"},{value:Pt,createNode:()=>x(G.basicSectorsIcon,"Basic Sectors"),labelContent:"Basic Sectors"},{value:ft,createNode:()=>x(G.sectorsWithColorsIcon,"Sectors With Colors"),labelContent:"Sectors With Colors"}]),Ve=new v("Theme",Gt,xt.map(e=>({value:e,createNode:()=>new ve(e.name,{font:vt,fill:Ie.uiForegroundColorProperty}),a11yName:e.name}))),Te=new v("Collection",r,[{value:o.EDGE,labelContent:"Edge",createNode:()=>new d("Edge"),options:{enabledProperty:t.edgesVisibleProperty}},{value:o.COLOR,labelContent:"Color",createNode:()=>new d("Color"),options:{enabledProperty:t.faceColorsVisibleProperty}},{value:o.EDGE_COLOR,labelContent:"Edge + Color",createNode:()=>new d("Edge + Color"),options:{enabledProperty:E.and([t.edgesVisibleProperty,t.faceColorsVisibleProperty])}},{value:o.EDGE_SECTOR,labelContent:"Edge + Sector",createNode:()=>new d("Edge + Sector"),options:{enabledProperty:E.and([t.edgesVisibleProperty,t.sectorsVisibleProperty])}},{value:o.ALL,labelContent:"Edge + Color + Sector",createNode:()=>new d("Edge + Color + Sector"),options:{enabledProperty:E.and([t.edgesVisibleProperty,t.faceColorsVisibleProperty,t.sectorsVisibleProperty])}}]),ke=new v("Highlander",g,[{value:y.ALL,labelContent:"All",createNode:()=>new d("All")},{value:y.REGULAR,labelContent:"Regular",createNode:()=>new d("Regular")},{value:y.HIGHLANDER,labelContent:"Highlander Only",createNode:()=>new d("Highlander Only")}]),Me=new v("Filter",N,[{value:O.NONE,labelContent:"None",createNode:()=>new d("None")},{value:O.ONLY_NUMBERS_AND_EXIT_RED,labelContent:"Only Numbers and Red",createNode:()=>new d("Only Numbers and Red")}]),Ue=new me("Include Fallback",S),We=new me("Show Embedded",te),Xe=new v("Compatible Tiling",I,[{value:null,labelContent:"All",createNode:()=>new d("All")},...k.enumeration.values.map(e=>({value:e,labelContent:e.displayName,createNode:()=>new d(e.displayName)}))]),qe=new we("left",()=>{R.value--},{touchAreaXDilation:5,touchAreaYDilation:5,enabledProperty:new E([R,F],(e,s)=>e>s.min)}),Ye=new we("right",()=>{R.value++},{touchAreaXDilation:5,touchAreaYDilation:5,enabledProperty:new E([R,F],(e,s)=>e<s.max)}),je=new ct(R,new E([F],e=>new ce(e.min,Math.max(.1,e.max))),{orientation:et.HORIZONTAL,constrainValue:e=>Math.round(e)}),$e=new d(new E([R,F],(e,s)=>`Page ${e} of ${s.max+1}`),{fontWeight:"bold"}),Qe=new T({spacing:5,children:[$e,new Q({spacing:5,children:[qe,je,Ye]})]}),X=new ee({children:[new T({align:"left",spacing:20,children:[Te,ke,Me,Ue,Xe,We,De,Ve]})]}),ae=Qe,q=10,oe=30,re=30,f=new nt({xSpacing:40,ySpacing:20}),se=new T({spacing:re,justify:"spaceBetween",layoutOptions:{grow:1,stretch:!0},children:[f,ae]}),le=new Q({spacing:oe,align:"top",children:[X,se]});de.multilink([He,_,I,te],(e,s,b,i)=>{const m=s.height-2*q,w=m-ae.height-re;X.maxHeight=m,se.preferredHeight=m;const A=s.width-2*q,D=A-X.width-oe;le.preferredWidth=A;const V=f.children.slice();if(e.length?f.children=e.map(c=>{const B=pt.get(c.patternBoard);dt()&&ut(B);const h=new at({fire:()=>{It(c.getBinaryIdentifier()),console.log(c.getBinaryIdentifier())}});let L=null;return i&&b&&(L=Ge(c.patternBoard,b)),L?new Lt(c,L,{cursor:"pointer",inputListeners:[h],scale:30,style:t}):new rt(c,B,{cursor:"pointer",inputListeners:[h]})}):f.removeAllChildren(),V.forEach(c=>c.dispose()),e.length){let c=0,B=0;pe.range(1,11).forEach(h=>{f.autoColumns=h;const L=Math.min(D/f.localBounds.width,w/f.localBounds.height);L>c&&(c=L,B=h)}),f.autoColumns=B,f.setScaleMagnitude(c)}}),ze.addChild(new ot(le,{margin:q,xAlign:"left",yAlign:"top",alignBoundsProperty:_})),z.initializeEvents();let Y=!0;const ie=()=>{Y=!1;const e=new xe(0,0,window.innerWidth,window.innerHeight);z.setWidthHeight(e.width,e.height),_.value=e,wt.mobileSafari&&window.scrollTo(0,0)},H=()=>{Y=!0};$(window).resize(H),window.addEventListener("resize",H),window.addEventListener("orientationchange",H),window.visualViewport&&window.visualViewport.addEventListener("resize",H),ie(),z.updateOnRequestAnimationFrame(e=>{Y&&ie()})})();
