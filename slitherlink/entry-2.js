var Se=Object.defineProperty;var Ae=(o,E,d)=>E in o?Se(o,E,{enumerable:!0,configurable:!0,writable:!0,value:d}):o[E]=d;var a=(o,E,d)=>Ae(o,typeof E!="symbol"?E+"":E,d);import{o as ye,P as Oe,B as ce,E as F,f as U,R as ae,O as Ge}from"./chunk-16.js";import{V as T,T as ue,N as M,D as Be,a as u,d as se,B as Ie,H as Z,G as xe,F as ve,A as De}from"./chunk-17.js";import{q as ze,_ as le,p as He,d as Te,e as Fe,l as Ue}from"./chunk-18.js";import{A as ie,S as ke,P as We}from"./chunk-19.js";import{g as Ve,a as $e,b as Xe,c as Ye}from"./chunk-38.js";import{g as qe}from"./chunk-41.js";import{a as Ze,R as je}from"./chunk-20.js";import{b as Ke,c as de,K as H,S as Me,T as Qe,e as Je,d as _e,u as et}from"./chunk-23.js";import{U as tt}from"./chunk-35.js";import{ai as nt,ak as rt,h as ot,l as at,m as st,U as s,E as lt}from"./chunk-25.js";import{D as j,g as it}from"./chunk-24.js";import{P as ct}from"./chunk-26.js";import"./chunk-39.js";import"./chunk-40.js";import"./chunk-27.js";import"./chunk-28.js";import"./chunk-30.js";import"./chunk-31.js";import"./chunk-32.js";import"./chunk-29.js";import"./chunk-33.js";class G extends T{constructor(E,d,x,v){const b=ye()({stretch:!0,align:"left",spacing:10,radioButtonGroupOptions:{orientation:"vertical",align:"left"}},v),k=new tt(d,x,b.radioButtonGroupOptions);b.children=[new ue(E,{font:Ke,fill:de.uiForegroundColorProperty}),k],super(b)}}self.assertions.enableAssert();const pe=new M,ut=new M({renderer:"svg",children:[pe]}),I=new Be(ut,{allowWebGL:!0,allowBackingScaleAntialiasing:!0,allowSceneOverflow:!1,accessibility:!0,backgroundColor:"#333",assumeFullWindow:!0,listenToOnlyElement:!1});document.body.appendChild(I.domElement);nt.theme.uiBackgroundColorProperty.link(o=>{I.backgroundColor=o});self.oncontextmenu=o=>o.preventDefault();const K=new Oe(new ce(0,0,self.innerWidth,self.innerHeight)),c=class c extends F{};a(c,"EDGE",new c),a(c,"COLOR",new c),a(c,"EDGE_COLOR",new c),a(c,"EDGE_SECTOR",new c),a(c,"ALL",new c),a(c,"enumeration",new U(c));let t=c;const f=class f extends F{};a(f,"REGULAR",new f),a(f,"HIGHLANDER",new f),a(f,"ALL",new f),a(f,"enumeration",new U(f));let N=f;const R=class R extends F{};a(R,"NONE",new R),a(R,"ONLY_NUMBERS_AND_EXIT_RED",new R),a(R,"enumeration",new U(R));let O=R;const p=class p extends F{};a(p,"CLASSIC",new p),a(p,"GENERIC",new p),a(p,"LINES",new p),a(p,"COLORS",new p),a(p,"enumeration",new U(p));let r=p;(async()=>{const o=new H("viewStyleModeProperty",r.CLASSIC),E=rt(new u([o],e=>{if(e===r.CLASSIC||e===r.GENERIC)return ot;if(e===r.LINES)return at;if(e===r.COLORS)return st;throw new Error(`unhandled view style: ${e}`)})),d=new H("collectionModeProperty",t.EDGE),x=new H("highlanderModeProperty",N.ALL),v=new H("filterModeProperty",O.NONE),b=new Me("displayTilingProperty",j.enumeration,j.SQUARE),k=new u([d],e=>{switch(e){case t.EDGE:return Ye;case t.COLOR:return qe;case t.EDGE_COLOR:return Xe;case t.EDGE_SECTOR:return $e;case t.ALL:return Ve;default:throw new Error(`unhandled collection mode: ${e}`)}}),Q=new u([k,x,v,b],(e,l,m,w)=>{let n=e;const h=l===N.REGULAR,S=l===N.HIGHLANDER,B=!!w,q=m!==O.NONE,i=new Set(w?n.collection.patternBoards.filter(g=>ze(g,w.boardPatternBoard,!0).length>0):[]);return(h||S||B||q)&&(n=n.filterIndex(g=>{if(h&&n.isRuleIndexHighlander(g)||S&&!n.isRuleIndexHighlander(g))return!1;const L=n.getRule(g);return!(w&&!i.has(L.patternBoard)||m===O.ONLY_NUMBERS_AND_EXIT_RED&&!L.inputFeatureSet.getFeaturesArray().every(y=>y instanceof Ze||y instanceof je&&y.edge.isExit))})),n});se.multilink([o],e=>{const m=e!==r.CLASSIC&&e!==r.LINES,w=e!==r.CLASSIC,n=d.value,h=n!==t.COLOR,S=n===t.COLOR||n===t.EDGE_COLOR||n===t.ALL,B=n===t.EDGE_SECTOR||n===t.ALL;S&&!m&&(d.value=n===t.ALL?t.EDGE_SECTOR:t.EDGE),B&&!w&&(d.value=n===t.ALL?t.EDGE_COLOR:t.EDGE)});const W=6,D=new u([Q],e=>new ae(0,Math.max(0,Math.ceil(e.size/W)-1))),P=new Qe("pageIndexProperty",0),Ee=new u([Q,P],(e,l)=>{const m=l*W,w=Math.min(m,e.size),n=Math.min(m+W,e.size);return le.range(w,n).map(h=>e.getRule(h))}),ge=new G("View Style",o,[{value:r.CLASSIC,createNode:()=>new s("Classic"),labelContent:"Classic"},{value:r.GENERIC,createNode:()=>new s("Generic"),labelContent:"Generic"},{value:r.LINES,createNode:()=>new s("Lines"),labelContent:"Lines"},{value:r.COLORS,createNode:()=>new s("Colors"),labelContent:"Colors"}]),me=new G("Theme",Je,_e.slice(0,3).map(e=>({value:e,createNode:()=>new ue(e.name,{font:et,fill:de.uiForegroundColorProperty}),a11yName:e.name}))),we=new G("Collection",d,[{value:t.EDGE,labelContent:"Edge",createNode:()=>new s("Edge"),options:{enabledProperty:new Ie(!0)}},{value:t.COLOR,labelContent:"Color",createNode:()=>new s("Color"),options:{enabledProperty:new u([o],e=>e!==r.CLASSIC&&e!==r.LINES)}},{value:t.EDGE_COLOR,labelContent:"Edge + Color",createNode:()=>new s("Edge + Color"),options:{enabledProperty:new u([o],e=>e!==r.CLASSIC&&e!==r.LINES)}},{value:t.EDGE_SECTOR,labelContent:"Edge + Sector",createNode:()=>new s("Edge + Sector"),options:{enabledProperty:new u([o],e=>e!==r.CLASSIC)}},{value:t.ALL,labelContent:"Edge + Color + Sector",createNode:()=>new s("Edge + Color + Sector"),options:{enabledProperty:new u([o],e=>e!==r.CLASSIC&&e!==r.LINES)}}]),fe=new G("Highlander",x,[{value:N.ALL,labelContent:"All",createNode:()=>new s("All")},{value:N.REGULAR,labelContent:"Regular",createNode:()=>new s("Regular")},{value:N.HIGHLANDER,labelContent:"Highlander Only",createNode:()=>new s("Highlander Only")}]),Ce=new G("Filter",v,[{value:O.NONE,labelContent:"None",createNode:()=>new s("None")},{value:O.ONLY_NUMBERS_AND_EXIT_RED,labelContent:"Only Numbers and Red",createNode:()=>new s("Only Numbers and Red")}]),he=new G("Compatible Tiling",b,[{value:null,labelContent:"All",createNode:()=>new s("All")},...j.enumeration.values.map(e=>({value:e,labelContent:e.displayName,createNode:()=>new s(e.displayName)}))]),Le=new ie("left",()=>{P.value--},{touchAreaXDilation:5,touchAreaYDilation:5,enabledProperty:new u([P,D],(e,l)=>e>l.min)}),Ne=new ie("right",()=>{P.value++},{touchAreaXDilation:5,touchAreaYDilation:5,enabledProperty:new u([P,D],(e,l)=>e<l.max)}),Re=new ke(P,new u([D],e=>new ae(e.min,Math.max(.1,e.max))),{orientation:Ge.HORIZONTAL,constrainValue:e=>Math.round(e)}),be=new s(new u([P,D],(e,l)=>`Page ${e} of ${l.max+1}`),{fontWeight:"bold"}),Pe=new T({spacing:5,layoutOptions:{align:"center"},children:[be,new Z({spacing:5,children:[Le,Re,Ne]})]}),V=new M({children:[new T({align:"left",spacing:20,children:[we,fe,Ce,he]})]}),J=new Z({spacing:30,align:"top",children:[ge,Pe,me]}),X=10,_=30,ee=30,C=new xe({xSpacing:40,ySpacing:20}),te=new T({spacing:ee,justify:"spaceBetween",layoutOptions:{grow:1,stretch:!0},children:[J,C]}),ne=new Z({spacing:_,align:"top",children:[V,te]});se.multilink([Ee,K,b,o],(e,l,m,w)=>{const n=l.height-2*X,h=n-J.height-ee;V.maxHeight=n,te.preferredHeight=n;const S=l.width-2*X,B=S-V.width-_;ne.preferredWidth=S;const q=C.children.slice();if(e.length?C.children=e.map(i=>{const g=He.get(i.patternBoard);Te()&&Fe(g);const L=new ve({fire:()=>{console.log(i.getBinaryIdentifier());const oe=self.open(`./rule?r=${encodeURIComponent(i.getBinaryIdentifier())}`,"_blank");oe&&oe.focus()}});let A=null;w!==r.GENERIC&&m&&(A=it(i,m));let y;return A?y=new lt(i,A,{cursor:"pointer",inputListeners:[L],scale:30,style:E}):y=new We(new ct(i,g,{cursor:"pointer"}),{fill:"#333",stroke:null,inputListeners:[L]}),y}):C.removeAllChildren(),q.forEach(i=>i.dispose()),e.length){let i=0,g=0;le.range(1,11).forEach(L=>{C.autoColumns=L;const A=Math.min(B/C.localBounds.width,h/C.localBounds.height);A>i&&(i=A,g=L)}),C.autoColumns=g,C.setScaleMagnitude(i)}}),pe.addChild(new De(ne,{margin:X,xAlign:"left",yAlign:"top",alignBoundsProperty:K})),I.initializeEvents();let Y=!0;const re=()=>{Y=!1;const e=new ce(0,0,self.innerWidth,self.innerHeight);I.setWidthHeight(e.width,e.height),K.value=e,Ue.mobileSafari&&self.scrollTo(0,0)},z=()=>{Y=!0};$(self).resize(z),self.addEventListener("resize",z),self.addEventListener("orientationchange",z),self.visualViewport&&self.visualViewport.addEventListener("resize",z),re(),I.updateOnRequestAnimationFrame(e=>{Y&&re()})})();
