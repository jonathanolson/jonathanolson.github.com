import{d as s,l as c,m as i,H as p,n as l}from"./patternBoards-DKw4bfen.js";import{V as a}from"./UnivariatePolynomial-CzQEP6td.js";import{C as u,G as m,a as w,b as f,B as g}from"./BasicPuzzle-BMlBNSWn.js";const y=e=>{if(e.type==="BaseBoard"){const t=e.vertices.map(n=>({logicalCoordinates:new a(n.x,n.y),viewCoordinates:new a(n.vx,n.vy)})),r=e.faces.map(n=>({logicalCoordinates:new a(n.x,n.y),vertices:n.vertices.map(o=>t[o])}));return new s(c({vertices:t,faces:r}))}else{if(e.type==="SquareBoard")return new i(e.width,e.height);if(e.type==="HexagonalBoard")return new p(e.radius,e.scale,e.isPointyTop,e.holeRadius);throw new Error("Unknown board")}},D=(e,t)=>{const r=t.type;if(r==="CompleteData")return u.deserializeState(e,t);if(r==="FaceValueData")return m.deserializeState(e,t);if(r==="EdgeData")return w.deserializeState(e,t);if(r==="SimpleRegionData")return f.deserializeState(e,t);throw new Error(`Unknown action type: ${r}, could not deserialize`)},S=e=>{if(e.version!==1)throw new Error(`Unsupported puzzle version: ${e.version}`);const t=y(e.board),r=D(t,e.state);return new g(t,r)},C=e=>{try{const t=JSON.parse(l(e));return S(t)}catch(t){return console.error(t),null}};export{C as p};
