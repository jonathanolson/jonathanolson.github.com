var Pe=Object.defineProperty;var Se=(o,w,u)=>w in o?Pe(o,w,{enumerable:!0,configurable:!0,writable:!0,value:u}):o[w]=u;var a=(o,w,u)=>(Se(o,typeof w!="symbol"?w+"":w,u),u);import{o as ye,P as Ae,B as le,E as F,d as U,R as oe,O as Oe}from"./UnivariatePolynomial-1rLpyqfN.js";import{V as T,T as ce,N as Q,D as Ge,c as d,M as ae,B as Be,H as M,G as xe,F as Ie,e as ve}from"./PhetioControlledVisibilityProperty-B_Gl7maC.js";import{P as De}from"./PatternRuleNode-DuL0c4yi.js";import{a as H,d as ze,e as He,A as ie,S as Te,P as Fe}from"./TextPushButton-BlKBVbG9.js";import{_ as se,e as Ue,f as We,p as ke}from"./getCoordinateClusteredMap-Bd_wM-c0.js";import{p as Ve}from"./patternBoards-C9AJudHo.js";import{e as $e,x as Xe,n as Ye,o as qe,q as Me,U as i,E as Ze}from"./DisplayEmbedding-CtbnXw0U.js";import{U as je,d as Qe,c as Je,b as Ke,a as _e,g as et}from"./UIAquaRadioButtonGroup-DCjA-ada.js";import{a as tt,c as ue,t as nt,d as rt,u as ot}from"./Theme-Bm_Rw3jP.js";import{d as at,R as it}from"./SectorOnlyOneFeature-B6gNVzOk.js";import{D as Z,g as st}from"./getBestDisplayEmbedding-8gSizLpI.js";import{c as lt}from"./getPeriodicTilingGenerator-zRiID_iR.js";import"./PatternNode-CUQJieYR.js";import"./ShadedSphereNode-DjM1OiL_.js";import"./BasicPuzzle-BvzExADk.js";import"./autoSolver-Bsgd1vdv.js";import"./BinaryMixedRuleGroup-BtO90Zn9.js";import"./BinaryRuleCollection-BStHuDJq.js";import"./PatternRule-I4DPfHDP.js";import"./FeatureSet-DlqxrGj9.js";import"./PatternBoardSolver-vRQRWARQ.js";import"./logic-solver-DfsVuGQ5.js";import"./operations-BMyV0DHx.js";import"./compression-CFlaLHJe.js";import"./Highlander-3djJERbj.js";import"./BoardPatternBoard-DaZtb2ww.js";class G extends T{constructor(w,u,I,v){const b=ye()({stretch:!0,align:"left",spacing:10,radioButtonGroupOptions:{orientation:"vertical",align:"left"}},v),W=new je(u,I,b.radioButtonGroupOptions);b.children=[new ce(w,{font:tt,fill:ue.uiForegroundColorProperty}),W],super(b)}}window.assertions.enableAssert();const de=new Q,ct=new Q({renderer:"svg",children:[de]}),x=new Ge(ct,{allowWebGL:!0,allowBackingScaleAntialiasing:!0,allowSceneOverflow:!1,accessibility:!0,backgroundColor:"#333",assumeFullWindow:!0,listenToOnlyElement:!1});document.body.appendChild(x.domElement);$e.theme.uiBackgroundColorProperty.link(o=>{x.backgroundColor=o});window.oncontextmenu=o=>o.preventDefault();const j=new Ae(new le(0,0,window.innerWidth,window.innerHeight)),c=class c extends F{};a(c,"EDGE",new c),a(c,"COLOR",new c),a(c,"EDGE_COLOR",new c),a(c,"EDGE_SECTOR",new c),a(c,"ALL",new c),a(c,"enumeration",new U(c));let t=c;const C=class C extends F{};a(C,"REGULAR",new C),a(C,"HIGHLANDER",new C),a(C,"ALL",new C),a(C,"enumeration",new U(C));let N=C;const R=class R extends F{};a(R,"NONE",new R),a(R,"ONLY_NUMBERS_AND_EXIT_RED",new R),a(R,"enumeration",new U(R));let A=R;const p=class p extends F{};a(p,"CLASSIC",new p),a(p,"GENERIC",new p),a(p,"LINES",new p),a(p,"COLORS",new p),a(p,"enumeration",new U(p));let r=p;(async()=>{const o=new H("viewStyleModeProperty",r.CLASSIC),w=Xe(new d([o],e=>{if(e===r.CLASSIC||e===r.GENERIC)return Ye;if(e===r.LINES)return qe;if(e===r.COLORS)return Me;throw new Error(`unhandled view style: ${e}`)})),u=new H("collectionModeProperty",t.EDGE),I=new H("highlanderModeProperty",N.ALL),v=new H("filterModeProperty",A.NONE),b=new ze("displayTilingProperty",Z.enumeration,Z.SQUARE),W=new d([u],e=>{switch(e){case t.EDGE:return et;case t.COLOR:return _e;case t.EDGE_COLOR:return Ke;case t.EDGE_SECTOR:return Je;case t.ALL:return Qe;default:throw new Error(`unhandled collection mode: ${e}`)}}),J=new d([W,I,v,b],(e,s,g,m)=>{let n=e;const L=s===N.REGULAR,S=s===N.HIGHLANDER,B=!!m,q=g!==A.NONE,l=new Set(m?n.collection.patternBoards.filter(E=>lt(E,m.boardPatternBoard,!0).length>0):[]);return(L||S||B||q)&&(n=n.filterIndex(E=>{if(L&&n.isRuleIndexHighlander(E)||S&&!n.isRuleIndexHighlander(E))return!1;const f=n.getRule(E);return!(m&&!l.has(f.patternBoard)||g===A.ONLY_NUMBERS_AND_EXIT_RED&&!f.inputFeatureSet.getFeaturesArray().every(O=>O instanceof at||O instanceof it&&O.edge.isExit))})),n});ae.multilink([o],e=>{const g=e!==r.CLASSIC&&e!==r.LINES,m=e!==r.CLASSIC,n=u.value,L=n!==t.COLOR,S=n===t.COLOR||n===t.EDGE_COLOR||n===t.ALL,B=n===t.EDGE_SECTOR||n===t.ALL;S&&!g&&(u.value=n===t.ALL?t.EDGE_SECTOR:t.EDGE),B&&!m&&(u.value=n===t.ALL?t.EDGE_COLOR:t.EDGE)});const k=6,D=new d([J],e=>new oe(0,Math.max(0,Math.ceil(e.size/k)-1))),P=new He("pageIndexProperty",0),pe=new d([J,P],(e,s)=>{const g=s*k,m=Math.min(g,e.size),n=Math.min(g+k,e.size);return se.range(m,n).map(L=>e.getRule(L))}),we=new G("View Style",o,[{value:r.CLASSIC,createNode:()=>new i("Classic"),labelContent:"Classic"},{value:r.GENERIC,createNode:()=>new i("Generic"),labelContent:"Generic"},{value:r.LINES,createNode:()=>new i("Lines"),labelContent:"Lines"},{value:r.COLORS,createNode:()=>new i("Colors"),labelContent:"Colors"}]),Ee=new G("Theme",nt,rt.slice(0,3).map(e=>({value:e,createNode:()=>new ce(e.name,{font:ot,fill:ue.uiForegroundColorProperty}),a11yName:e.name}))),ge=new G("Collection",u,[{value:t.EDGE,labelContent:"Edge",createNode:()=>new i("Edge"),options:{enabledProperty:new Be(!0)}},{value:t.COLOR,labelContent:"Color",createNode:()=>new i("Color"),options:{enabledProperty:new d([o],e=>e!==r.CLASSIC&&e!==r.LINES)}},{value:t.EDGE_COLOR,labelContent:"Edge + Color",createNode:()=>new i("Edge + Color"),options:{enabledProperty:new d([o],e=>e!==r.CLASSIC&&e!==r.LINES)}},{value:t.EDGE_SECTOR,labelContent:"Edge + Sector",createNode:()=>new i("Edge + Sector"),options:{enabledProperty:new d([o],e=>e!==r.CLASSIC)}},{value:t.ALL,labelContent:"Edge + Color + Sector",createNode:()=>new i("Edge + Color + Sector"),options:{enabledProperty:new d([o],e=>e!==r.CLASSIC&&e!==r.LINES)}}]),me=new G("Highlander",I,[{value:N.ALL,labelContent:"All",createNode:()=>new i("All")},{value:N.REGULAR,labelContent:"Regular",createNode:()=>new i("Regular")},{value:N.HIGHLANDER,labelContent:"Highlander Only",createNode:()=>new i("Highlander Only")}]),Ce=new G("Filter",v,[{value:A.NONE,labelContent:"None",createNode:()=>new i("None")},{value:A.ONLY_NUMBERS_AND_EXIT_RED,labelContent:"Only Numbers and Red",createNode:()=>new i("Only Numbers and Red")}]),he=new G("Compatible Tiling",b,[{value:null,labelContent:"All",createNode:()=>new i("All")},...Z.enumeration.values.map(e=>({value:e,labelContent:e.displayName,createNode:()=>new i(e.displayName)}))]),Le=new ie("left",()=>{P.value--},{touchAreaXDilation:5,touchAreaYDilation:5,enabledProperty:new d([P,D],(e,s)=>e>s.min)}),fe=new ie("right",()=>{P.value++},{touchAreaXDilation:5,touchAreaYDilation:5,enabledProperty:new d([P,D],(e,s)=>e<s.max)}),Ne=new Te(P,new d([D],e=>new oe(e.min,Math.max(.1,e.max))),{orientation:Oe.HORIZONTAL,constrainValue:e=>Math.round(e)}),Re=new i(new d([P,D],(e,s)=>`Page ${e} of ${s.max+1}`),{fontWeight:"bold"}),be=new T({spacing:5,layoutOptions:{align:"center"},children:[Re,new M({spacing:5,children:[Le,Ne,fe]})]}),V=new Q({children:[new T({align:"left",spacing:20,children:[ge,me,Ce,he]})]}),K=new M({spacing:30,align:"top",children:[we,be,Ee]}),X=10,_=30,ee=30,h=new xe({xSpacing:40,ySpacing:20}),te=new T({spacing:ee,justify:"spaceBetween",layoutOptions:{grow:1,stretch:!0},children:[K,h]}),ne=new M({spacing:_,align:"top",children:[V,te]});ae.multilink([pe,j,b,o],(e,s,g,m)=>{const n=s.height-2*X,L=n-K.height-ee;V.maxHeight=n,te.preferredHeight=n;const S=s.width-2*X,B=S-V.width-_;ne.preferredWidth=S;const q=h.children.slice();if(e.length?h.children=e.map(l=>{const E=Ve.get(l.patternBoard);Ue()&&We(E);const f=new Ie({fire:()=>{console.log(l.getBinaryIdentifier());const O=window.open(`./rule?r=${encodeURIComponent(l.getBinaryIdentifier())}`,"_blank");O&&O.focus()}});let y=null;return m!==r.GENERIC&&g&&(y=st(l.patternBoard,g)),y?new Ze(l,y,{cursor:"pointer",inputListeners:[f],scale:30,style:w}):new Fe(new De(l,E,{cursor:"pointer"}),{fill:"#333",stroke:null,inputListeners:[f]})}):h.removeAllChildren(),q.forEach(l=>l.dispose()),e.length){let l=0,E=0;se.range(1,11).forEach(f=>{h.autoColumns=f;const y=Math.min(B/h.localBounds.width,L/h.localBounds.height);y>l&&(l=y,E=f)}),h.autoColumns=E,h.setScaleMagnitude(l)}}),de.addChild(new ve(ne,{margin:X,xAlign:"left",yAlign:"top",alignBoundsProperty:j})),x.initializeEvents();let Y=!0;const re=()=>{Y=!1;const e=new le(0,0,window.innerWidth,window.innerHeight);x.setWidthHeight(e.width,e.height),j.value=e,ke.mobileSafari&&window.scrollTo(0,0)},z=()=>{Y=!0};$(window).resize(z),window.addEventListener("resize",z),window.addEventListener("orientationchange",z),window.visualViewport&&window.visualViewport.addEventListener("resize",z),re(),x.updateOnRequestAnimationFrame(e=>{Y&&re()})})();
