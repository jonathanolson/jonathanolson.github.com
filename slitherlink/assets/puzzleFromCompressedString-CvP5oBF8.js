import{p as s}from"./polygonGenerators-B6WeaZhu.js";import{d as p,e as c,P as i,i as l,l as u,S as m,H as g,m as w}from"./patternBoards-DzVBPT7g.js";import{V as o}from"./Vector2Property-CFyCN_2h.js";import{d as f,G as y,e as D,f as S,B as h}from"./BasicPuzzle-Bt7fJ87M.js";const v=e=>{if(e.type==="PolygonGeneratorBoard"){const t=s.find(r=>r.name===e.generator);return p()&&c(t),i.get(t,e.parameters)}else if(e.type==="BaseBoard"){const t=e.vertices.map(n=>({logicalCoordinates:new o(n.x,n.y),viewCoordinates:new o(n.vx,n.vy)})),r=e.faces.map(n=>({logicalCoordinates:new o(n.x,n.y),vertices:n.vertices.map(a=>t[a])}));return new l(u({vertices:t,faces:r}))}else{if(e.type==="SquareBoard")return new m(e.width,e.height);if(e.type==="HexagonalBoard")return new g(e.radius,e.scale,e.isPointyTop,e.holeRadius);throw new Error("Unknown board")}},G=(e,t)=>{const r=t.type;if(r==="CompleteData")return f.deserializeState(e,t);if(r==="FaceValueData")return y.deserializeState(e,t);if(r==="EdgeData")return D.deserializeState(e,t);if(r==="SimpleRegionData")return S.deserializeState(e,t);throw new Error(`Unknown action type: ${r}, could not deserialize`)},d=e=>{if(e.version!==1)throw new Error(`Unsupported puzzle version: ${e.version}`);const t=v(e.board),r=G(t,e.state);return new h(t,r)},V=e=>{try{const t=JSON.parse(w(e));return d(t)}catch(t){return console.error(t),null}};export{V as p};
