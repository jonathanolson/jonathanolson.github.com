<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>ring-puzzle-solo</title>

  <style>
    body {
      background-color: #666;
    }
  </style>
</head>
<body>
  <script type="text/javascript">
!function(){"use strict";window.assertions=window.assertions||{},window.assertions.assertFunction=window.assertions.assertFunction||function(t,e){if(!t){if(window.navigator&&"Microsoft Internet Explorer"===window.navigator.appName)try{throw new Error}catch(i){e=e+", stack=\n"+i.stack}const t=e?"Assertion failed: "+e:"Assertion failed";throw console&&console.log&&console.log(t),new Error(t)}},window.assert=window.assert||null,window.assertSlow=window.assertSlow||null,window.assertions.enableAssert=function(){window.assert=window.assertions.assertFunction,window.console&&window.console.log&&window.console.log("enabling assert")},window.assertions.disableAssert=function(){window.assert=null,window.console&&window.console.log&&window.console.log("disabling assert")},window.assertions.enableAssertSlow=function(){window.assertSlow=window.assertions.assertFunction,window.console&&window.console.log&&window.console.log("enabling assertSlow")},window.assertions.disableAssertSlow=function(){window.assertSlow=null,window.console&&window.console.log&&window.console.log("disabling assertSlow")}}(),function(){"use strict";window.phetio=window.phetio||{};window.phetio.PhetioIDUtils={append:function(t,...e){return e.forEach(e=>{t+="."+e}),t},getComponentName:function(t){const e=t.lastIndexOf(".");return-1===e?t:t.substring(e+1,t.length)},getParentID:function(t){const e=t.lastIndexOf(".");return-1===e?null:t.substring(0,e)},getDOMElementID:function(t){return"phetioID:"+t},getGeneralID:function(t,...e){return window.phetio.PhetioIDUtils.append(t.CAMEL_CASE_SIMULATION_NAME,"general",...e)},getScreenID:function(t){const e=[],i=t.split(".");for(let n=0;n<i.length;n++){const t=i[n];e.push(t);const s="Screen",r=t.indexOf(s);if(r>0&&r+s.length===t.length)return e.join(".")}return null},getGroupElementIndex:function(t){return parseInt(t.split(window.phetio.PhetioIDUtils.GROUP_SEPARATOR)[1],10)},SEPARATOR:".",GROUP_SEPARATOR:"_",GENERAL_COMPONENT_NAME:"general",GLOBAL_COMPONENT_NAME:"global",HOME_SCREEN_COMPONENT_NAME:"homeScreen",MODEL_COMPONENT_NAME:"model",VIEW_COMPONENT_NAME:"view"}}(),
/*!
 * jQuery JavaScript Library v2.1.0
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-01-23T21:10Z
 */
function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,(function(t,e){var i=[],n=i.slice,s=i.concat,r=i.push,o=i.indexOf,a={},l=a.toString,h=a.hasOwnProperty,u="".trim,c={},d=t.document,p=function(t,e){return new p.fn.init(t,e)},f=/^-ms-/,m=/-([\da-z])/gi,g=function(t,e){return e.toUpperCase()};function y(t){var e=t.length,i=p.type(t);return"function"!==i&&!p.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t))}p.fn=p.prototype={jquery:"2.1.0",constructor:p,selector:"",length:0,toArray:function(){return n.call(this)},get:function(t){return null!=t?t<0?this[t+this.length]:this[t]:n.call(this)},pushStack:function(t){var e=p.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return p.each(this,t,e)},map:function(t){return this.pushStack(p.map(this,(function(e,i){return t.call(e,i,e)})))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:r,sort:i.sort,splice:i.splice},p.extend=p.fn.extend=function(){var t,e,i,n,s,r,o=arguments[0]||{},a=1,l=arguments.length,h=!1;for("boolean"==typeof o&&(h=o,o=arguments[a]||{},a++),"object"==typeof o||p.isFunction(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=o[e],o!==(n=t[e])&&(h&&n&&(p.isPlainObject(n)||(s=p.isArray(n)))?(s?(s=!1,r=i&&p.isArray(i)?i:[]):r=i&&p.isPlainObject(i)?i:{},o[e]=p.extend(h,r,n)):void 0!==n&&(o[e]=n));return o},p.extend({expando:"jQuery"+("2.1.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===p.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return t-parseFloat(t)>=0},isPlainObject:function(t){if("object"!==p.type(t)||t.nodeType||p.isWindow(t))return!1;try{if(t.constructor&&!h.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?a[l.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;(t=p.trim(t))&&(1===t.indexOf("use strict")?((e=d.createElement("script")).text=t,d.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(f,"ms-").replace(m,g)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var n=0,s=t.length,r=y(t);if(i){if(r)for(;n<s&&!1!==e.apply(t[n],i);n++);else for(n in t)if(!1===e.apply(t[n],i))break}else if(r)for(;n<s&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":u.call(t)},makeArray:function(t,e){var i=e||[];return null!=t&&(y(Object(t))?p.merge(i,"string"==typeof t?[t]:t):r.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:o.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;n<i;n++)t[s++]=e[n];return t.length=s,t},grep:function(t,e,i){for(var n=[],s=0,r=t.length,o=!i;s<r;s++)!e(t[s],s)!==o&&n.push(t[s]);return n},map:function(t,e,i){var n,r=0,o=t.length,a=[];if(y(t))for(;r<o;r++)null!=(n=e(t[r],r,i))&&a.push(n);else for(r in t)null!=(n=e(t[r],r,i))&&a.push(n);return s.apply([],a)},guid:1,proxy:function(t,e){var i,s,r;if("string"==typeof e&&(i=t[e],e=t,t=i),p.isFunction(t))return s=n.call(arguments,2),(r=function(){return t.apply(e||this,s.concat(n.call(arguments)))}).guid=t.guid=t.guid||p.guid++,r},now:Date.now,support:c}),p.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(t,e){a["[object "+e+"]"]=e.toLowerCase()}));var b=
/*!
 * Sizzle CSS Selector Engine v1.10.16
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-01-13
 */
function(t){var e,i,n,s,r,o,a,l,h,u,c,d,p,f,m,g,y,b="sizzle"+-new Date,v=t.document,_=0,A=0,w=et(),x=et(),S=et(),T=function(t,e){return t===e&&(h=!0),0},D={}.hasOwnProperty,E=[],C=E.pop,P=E.push,k=E.push,I=E.slice,L=E.indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(this[e]===t)return e;return-1},O="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",M=N.replace("w","w#"),B="\\["+R+"*("+N+")"+R+"*(?:([*^$|!~]?=)"+R+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+M+")|)|)"+R+"*\\]",F=":("+N+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+B.replace(3,8)+")*)|.*)\\)|)",V=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),q=new RegExp("^"+R+"*,"+R+"*"),H=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),Y=new RegExp("="+R+"*([^\\]'\"]*?)"+R+"*\\]","g"),j=new RegExp(F),G=new RegExp("^"+M+"$"),z={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+O+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,U=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,Z=/'|\\/g,J=new RegExp("\\\\([\\da-f]{1,6}"+R+"?|("+R+")|.)","ig"),$=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{k.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(bt){k={apply:E.length?function(t,e){P.apply(t,I.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function tt(t,e,s,r){var a,l,h,d,m,g,_,A,w,x;if((e?e.ownerDocument||e:v)!==c&&u(e),s=s||[],!t||"string"!=typeof t)return s;if(1!==(d=(e=e||c).nodeType)&&9!==d)return[];if(p&&!r){if(a=K.exec(t))if(h=a[1]){if(9===d){if(!(l=e.getElementById(h))||!l.parentNode)return s;if(l.id===h)return s.push(l),s}else if(e.ownerDocument&&(l=e.ownerDocument.getElementById(h))&&y(e,l)&&l.id===h)return s.push(l),s}else{if(a[2])return k.apply(s,e.getElementsByTagName(t)),s;if((h=a[3])&&i.getElementsByClassName&&e.getElementsByClassName)return k.apply(s,e.getElementsByClassName(h)),s}if(i.qsa&&(!f||!f.test(t))){if(A=_=b,w=e,x=9===d&&t,1===d&&"object"!==e.nodeName.toLowerCase()){for(g=ct(t),(_=e.getAttribute("id"))?A=_.replace(Z,"\\$&"):e.setAttribute("id",A),A="[id='"+A+"'] ",m=g.length;m--;)g[m]=A+dt(g[m]);w=Q.test(t)&&ht(e.parentNode)||e,x=g.join(",")}if(x)try{return k.apply(s,w.querySelectorAll(x)),s}catch(S){}finally{_||e.removeAttribute("id")}}}return function(t,e,s,r){var a,l,h,u,c,d=ct(t);if(!r&&1===d.length){if((l=d[0]=d[0].slice(0)).length>2&&"ID"===(h=l[0]).type&&i.getById&&9===e.nodeType&&p&&n.relative[l[1].type]){if(!(e=(n.find.ID(h.matches[0].replace(J,$),e)||[])[0]))return s;t=t.slice(l.shift().value.length)}for(a=z.needsContext.test(t)?0:l.length;a--&&(h=l[a],!n.relative[u=h.type]);)if((c=n.find[u])&&(r=c(h.matches[0].replace(J,$),Q.test(l[0].type)&&ht(e.parentNode)||e))){if(l.splice(a,1),!(t=r.length&&dt(l)))return k.apply(s,r),s;break}}return o(t,d)(r,e,!p,s,Q.test(t)&&ht(e.parentNode)||e),s}(t.replace(V,"$1"),e,s,r)}function et(){var t=[];return function e(i,s){return t.push(i+" ")>n.cacheLength&&delete e[t.shift()],e[i+" "]=s}}function it(t){return t[b]=!0,t}function nt(t){var e=c.createElement("div");try{return!!t(e)}catch(bt){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function st(t,e){for(var i=t.split("|"),s=t.length;s--;)n.attrHandle[i[s]]=e}function rt(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||1<<31)-(~t.sourceIndex||1<<31);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function ot(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function at(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function lt(t){return it((function(e){return e=+e,it((function(i,n){for(var s,r=t([],i.length,e),o=r.length;o--;)i[s=r[o]]&&(i[s]=!(n[s]=i[s]))}))}))}function ht(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in i=tt.support={},r=tt.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},u=tt.setDocument=function(t){var e,s=t?t.ownerDocument||t:v,o=s.defaultView;return s!==c&&9===s.nodeType&&s.documentElement?(c=s,d=s.documentElement,p=!r(s),o&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",(function(){u()}),!1):o.attachEvent&&o.attachEvent("onunload",(function(){u()}))),i.attributes=nt((function(t){return t.className="i",!t.getAttribute("className")})),i.getElementsByTagName=nt((function(t){return t.appendChild(s.createComment("")),!t.getElementsByTagName("*").length})),i.getElementsByClassName=X.test(s.getElementsByClassName)&&nt((function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length})),i.getById=nt((function(t){return d.appendChild(t).id=b,!s.getElementsByName||!s.getElementsByName(b).length})),i.getById?(n.find.ID=function(t,e){if(void 0!==e.getElementById&&p){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},n.filter.ID=function(t){var e=t.replace(J,$);return function(t){return t.getAttribute("id")===e}}):(delete n.find.ID,n.filter.ID=function(t){var e=t.replace(J,$);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}}),n.find.TAG=i.getElementsByTagName?function(t,e){if(void 0!==e.getElementsByTagName)return e.getElementsByTagName(t)}:function(t,e){var i,n=[],s=0,r=e.getElementsByTagName(t);if("*"===t){for(;i=r[s++];)1===i.nodeType&&n.push(i);return n}return r},n.find.CLASS=i.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&p)return e.getElementsByClassName(t)},m=[],f=[],(i.qsa=X.test(s.querySelectorAll))&&(nt((function(t){t.innerHTML="<select t=''><option selected=''></option></select>",t.querySelectorAll("[t^='']").length&&f.push("[*^$]="+R+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||f.push("\\["+R+"*(?:value|"+O+")"),t.querySelectorAll(":checked").length||f.push(":checked")})),nt((function(t){var e=s.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&f.push("name"+R+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||f.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),f.push(",.*:")}))),(i.matchesSelector=X.test(g=d.webkitMatchesSelector||d.mozMatchesSelector||d.oMatchesSelector||d.msMatchesSelector))&&nt((function(t){i.disconnectedMatch=g.call(t,"div"),g.call(t,"[s!='']:x"),m.push("!=",F)})),f=f.length&&new RegExp(f.join("|")),m=m.length&&new RegExp(m.join("|")),e=X.test(d.compareDocumentPosition),y=e||X.test(d.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},T=e?function(t,e){if(t===e)return h=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===n?t===s||t.ownerDocument===v&&y(v,t)?-1:e===s||e.ownerDocument===v&&y(v,e)?1:l?L.call(l,t)-L.call(l,e):0:4&n?-1:1)}:function(t,e){if(t===e)return h=!0,0;var i,n=0,r=t.parentNode,o=e.parentNode,a=[t],u=[e];if(!r||!o)return t===s?-1:e===s?1:r?-1:o?1:l?L.call(l,t)-L.call(l,e):0;if(r===o)return rt(t,e);for(i=t;i=i.parentNode;)a.unshift(i);for(i=e;i=i.parentNode;)u.unshift(i);for(;a[n]===u[n];)n++;return n?rt(a[n],u[n]):a[n]===v?-1:u[n]===v?1:0},s):c},tt.matches=function(t,e){return tt(t,null,null,e)},tt.matchesSelector=function(t,e){if((t.ownerDocument||t)!==c&&u(t),e=e.replace(Y,"='$1']"),i.matchesSelector&&p&&(!m||!m.test(e))&&(!f||!f.test(e)))try{var n=g.call(t,e);if(n||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(bt){}return tt(e,c,null,[t]).length>0},tt.contains=function(t,e){return(t.ownerDocument||t)!==c&&u(t),y(t,e)},tt.attr=function(t,e){(t.ownerDocument||t)!==c&&u(t);var s=n.attrHandle[e.toLowerCase()],r=s&&D.call(n.attrHandle,e.toLowerCase())?s(t,e,!p):void 0;return void 0!==r?r:i.attributes||!p?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},tt.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},tt.uniqueSort=function(t){var e,n=[],s=0,r=0;if(h=!i.detectDuplicates,l=!i.sortStable&&t.slice(0),t.sort(T),h){for(;e=t[r++];)e===t[r]&&(s=n.push(r));for(;s--;)t.splice(n[s],1)}return l=null,t},s=tt.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=s(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=s(e);return i},(n=tt.selectors={cacheLength:50,createPseudo:it,match:z,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(J,$),t[3]=(t[4]||t[5]||"").replace(J,$),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||tt.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&tt.error(t[0]),t},PSEUDO:function(t){var e,i=!t[5]&&t[2];return z.CHILD.test(t[0])?null:(t[3]&&void 0!==t[4]?t[2]=t[4]:i&&j.test(i)&&(e=ct(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(J,$).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=w[t+" "];return e||(e=new RegExp("(^|"+R+")"+t+"("+R+"|$)"))&&w(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,i){return function(n){var s=tt.attr(n,t);return null==s?"!="===e:!e||(s+="","="===e?s===i:"!="===e?s!==i:"^="===e?i&&0===s.indexOf(i):"*="===e?i&&s.indexOf(i)>-1:"$="===e?i&&s.slice(-i.length)===i:"~="===e?(" "+s+" ").indexOf(i)>-1:"|="===e&&(s===i||s.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,s){var r="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,l){var h,u,c,d,p,f,m=r!==o?"nextSibling":"previousSibling",g=e.parentNode,y=a&&e.nodeName.toLowerCase(),v=!l&&!a;if(g){if(r){for(;m;){for(c=e;c=c[m];)if(a?c.nodeName.toLowerCase()===y:1===c.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&v){for(p=(h=(u=g[b]||(g[b]={}))[t]||[])[0]===_&&h[1],d=h[0]===_&&h[2],c=p&&g.childNodes[p];c=++p&&c&&c[m]||(d=p=0)||f.pop();)if(1===c.nodeType&&++d&&c===e){u[t]=[_,p,d];break}}else if(v&&(h=(e[b]||(e[b]={}))[t])&&h[0]===_)d=h[1];else for(;(c=++p&&c&&c[m]||(d=p=0)||f.pop())&&((a?c.nodeName.toLowerCase()!==y:1!==c.nodeType)||!++d||(v&&((c[b]||(c[b]={}))[t]=[_,d]),c!==e)););return(d-=s)===n||d%n==0&&d/n>=0}}},PSEUDO:function(t,e){var i,s=n.pseudos[t]||n.setFilters[t.toLowerCase()]||tt.error("unsupported pseudo: "+t);return s[b]?s(e):s.length>1?(i=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?it((function(t,i){for(var n,r=s(t,e),o=r.length;o--;)t[n=L.call(t,r[o])]=!(i[n]=r[o])})):function(t){return s(t,0,i)}):s}},pseudos:{not:it((function(t){var e=[],i=[],n=o(t.replace(V,"$1"));return n[b]?it((function(t,e,i,s){for(var r,o=n(t,null,s,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))})):function(t,s,r){return e[0]=t,n(e,null,r,i),!i.pop()}})),has:it((function(t){return function(e){return tt(t,e).length>0}})),contains:it((function(t){return function(e){return(e.textContent||e.innerText||s(e)).indexOf(t)>-1}})),lang:it((function(t){return G.test(t||"")||tt.error("unsupported lang: "+t),t=t.replace(J,$).toLowerCase(),function(e){var i;do{if(i=p?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===d},focus:function(t){return t===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return!1===t.disabled},disabled:function(t){return!0===t.disabled},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return U.test(t.nodeName)},input:function(t){return W.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:lt((function(){return[0]})),last:lt((function(t,e){return[e-1]})),eq:lt((function(t,e,i){return[i<0?i+e:i]})),even:lt((function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t})),odd:lt((function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t})),lt:lt((function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t})),gt:lt((function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t}))}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=ot(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=at(e);function ut(){}function ct(t,e){var i,s,r,o,a,l,h,u=x[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],h=n.preFilter;a;){for(o in i&&!(s=q.exec(a))||(s&&(a=a.slice(s[0].length)||a),l.push(r=[])),i=!1,(s=H.exec(a))&&(i=s.shift(),r.push({value:i,type:s[0].replace(V," ")}),a=a.slice(i.length)),n.filter)!(s=z[o].exec(a))||h[o]&&!(s=h[o](s))||(i=s.shift(),r.push({value:i,type:o,matches:s}),a=a.slice(i.length));if(!i)break}return e?a.length:a?tt.error(t):x(t,l).slice(0)}function dt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function pt(t,e,i){var n=e.dir,s=i&&"parentNode"===n,r=A++;return e.first?function(e,i,r){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,r)}:function(e,i,o){var a,l,h=[_,r];if(o){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,o))return!0}else for(;e=e[n];)if(1===e.nodeType||s){if((a=(l=e[b]||(e[b]={}))[n])&&a[0]===_&&a[1]===r)return h[2]=a[2];if(l[n]=h,h[2]=t(e,i,o))return!0}}}function ft(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function mt(t,e,i,n,s){for(var r,o=[],a=0,l=t.length,h=null!=e;a<l;a++)(r=t[a])&&(i&&!i(r,n,s)||(o.push(r),h&&e.push(a)));return o}function gt(t,e,i,n,s,r){return n&&!n[b]&&(n=gt(n)),s&&!s[b]&&(s=gt(s,r)),it((function(r,o,a,l){var h,u,c,d=[],p=[],f=o.length,m=r||function(t,e,i){for(var n=0,s=e.length;n<s;n++)tt(t,e[n],i);return i}(e||"*",a.nodeType?[a]:a,[]),g=!t||!r&&e?m:mt(m,d,t,a,l),y=i?s||(r?t:f||n)?[]:o:g;if(i&&i(g,y,a,l),n)for(h=mt(y,p),n(h,[],a,l),u=h.length;u--;)(c=h[u])&&(y[p[u]]=!(g[p[u]]=c));if(r){if(s||t){if(s){for(h=[],u=y.length;u--;)(c=y[u])&&h.push(g[u]=c);s(null,y=[],h,l)}for(u=y.length;u--;)(c=y[u])&&(h=s?L.call(r,c):d[u])>-1&&(r[h]=!(o[h]=c))}}else y=mt(y===o?y.splice(f,y.length):y),s?s(null,o,y,l):k.apply(o,y)}))}function yt(t){for(var e,i,s,r=t.length,o=n.relative[t[0].type],l=o||n.relative[" "],h=o?1:0,u=pt((function(t){return t===e}),l,!0),c=pt((function(t){return L.call(e,t)>-1}),l,!0),d=[function(t,i,n){return!o&&(n||i!==a)||((e=i).nodeType?u(t,i,n):c(t,i,n))}];h<r;h++)if(i=n.relative[t[h].type])d=[pt(ft(d),i)];else{if((i=n.filter[t[h].type].apply(null,t[h].matches))[b]){for(s=++h;s<r&&!n.relative[t[s].type];s++);return gt(h>1&&ft(d),h>1&&dt(t.slice(0,h-1).concat({value:" "===t[h-2].type?"*":""})).replace(V,"$1"),i,h<s&&yt(t.slice(h,s)),s<r&&yt(t=t.slice(s)),s<r&&dt(t))}d.push(i)}return ft(d)}return ut.prototype=n.filters=n.pseudos,n.setFilters=new ut,o=tt.compile=function(t,e){var i,s=[],r=[],o=S[t+" "];if(!o){for(e||(e=ct(t)),i=e.length;i--;)(o=yt(e[i]))[b]?s.push(o):r.push(o);o=S(t,function(t,e){var i=e.length>0,s=t.length>0,r=function(r,o,l,h,u){var d,p,f,m=0,g="0",y=r&&[],b=[],v=a,A=r||s&&n.find.TAG("*",u),w=_+=null==v?1:Math.random()||.1,x=A.length;for(u&&(a=o!==c&&o);g!==x&&null!=(d=A[g]);g++){if(s&&d){for(p=0;f=t[p++];)if(f(d,o,l)){h.push(d);break}u&&(_=w)}i&&((d=!f&&d)&&m--,r&&y.push(d))}if(m+=g,i&&g!==m){for(p=0;f=e[p++];)f(y,b,o,l);if(r){if(m>0)for(;g--;)y[g]||b[g]||(b[g]=C.call(h));b=mt(b)}k.apply(h,b),u&&!r&&b.length>0&&m+e.length>1&&tt.uniqueSort(h)}return u&&(_=w,a=v),y};return i?it(r):r}(r,s))}return o},i.sortStable=b.split("").sort(T).join("")===b,i.detectDuplicates=!!h,u(),i.sortDetached=nt((function(t){return 1&t.compareDocumentPosition(c.createElement("div"))})),nt((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||st("type|href|height|width",(function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),i.attributes&&nt((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||st("value",(function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),nt((function(t){return null==t.getAttribute("disabled")}))||st(O,(function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null})),tt}(t);p.find=b,p.expr=b.selectors,p.expr[":"]=p.expr.pseudos,p.unique=b.uniqueSort,p.text=b.getText,p.isXMLDoc=b.isXML,p.contains=b.contains;var v=p.expr.match.needsContext,_=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,A=/^.[^:#\[\.,]*$/;function w(t,e,i){if(p.isFunction(e))return p.grep(t,(function(t,n){return!!e.call(t,n,t)!==i}));if(e.nodeType)return p.grep(t,(function(t){return t===e!==i}));if("string"==typeof e){if(A.test(e))return p.filter(e,t,i);e=p.filter(e,t)}return p.grep(t,(function(t){return o.call(e,t)>=0!==i}))}p.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?p.find.matchesSelector(n,t)?[n]:[]:p.find.matches(t,p.grep(e,(function(t){return 1===t.nodeType})))},p.fn.extend({find:function(t){var e,i=this.length,n=[],s=this;if("string"!=typeof t)return this.pushStack(p(t).filter((function(){for(e=0;e<i;e++)if(p.contains(s[e],this))return!0})));for(e=0;e<i;e++)p.find(t,s[e],n);return(n=this.pushStack(i>1?p.unique(n):n)).selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(w(this,t||[],!1))},not:function(t){return this.pushStack(w(this,t||[],!0))},is:function(t){return!!w(this,"string"==typeof t&&v.test(t)?p(t):t||[],!1).length}});var x,S=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(p.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:S.exec(t))||!i[1]&&e)return!e||e.jquery?(e||x).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof p?e[0]:e,p.merge(this,p.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:d,!0)),_.test(i[1])&&p.isPlainObject(e))for(i in e)p.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(n=d.getElementById(i[2]))&&n.parentNode&&(this.length=1,this[0]=n),this.context=d,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):p.isFunction(t)?void 0!==x.ready?x.ready(t):t(p):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),p.makeArray(t,this))}).prototype=p.fn,x=p(d);var T=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function E(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}p.extend({dir:function(t,e,i){for(var n=[],s=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&p(t).is(i))break;n.push(t)}return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),p.fn.extend({has:function(t){var e=p(t,this),i=e.length;return this.filter((function(){for(var t=0;t<i;t++)if(p.contains(this,e[t]))return!0}))},closest:function(t,e){for(var i,n=0,s=this.length,r=[],o=v.test(t)||"string"!=typeof t?p(t,e||this.context):0;n<s;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&p.find.matchesSelector(i,t))){r.push(i);break}return this.pushStack(r.length>1?p.unique(r):r)},index:function(t){return t?"string"==typeof t?o.call(p(t),this[0]):o.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(p.unique(p.merge(this.get(),p(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),p.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return p.dir(t,"parentNode")},parentsUntil:function(t,e,i){return p.dir(t,"parentNode",i)},next:function(t){return E(t,"nextSibling")},prev:function(t){return E(t,"previousSibling")},nextAll:function(t){return p.dir(t,"nextSibling")},prevAll:function(t){return p.dir(t,"previousSibling")},nextUntil:function(t,e,i){return p.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return p.dir(t,"previousSibling",i)},siblings:function(t){return p.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return p.sibling(t.firstChild)},contents:function(t){return t.contentDocument||p.merge([],t.childNodes)}},(function(t,e){p.fn[t]=function(i,n){var s=p.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=p.filter(n,s)),this.length>1&&(D[t]||p.unique(s),T.test(t)&&s.reverse()),this.pushStack(s)}}));var C,P=/\S+/g,k={};function I(){d.removeEventListener("DOMContentLoaded",I,!1),t.removeEventListener("load",I,!1),p.ready()}p.Callbacks=function(t){t="string"==typeof t?k[t]||function(t){var e=k[t]={};return p.each(t.match(P)||[],(function(t,i){e[i]=!0})),e}(t):p.extend({},t);var e,i,n,s,r,o,a=[],l=!t.once&&[],h=function(c){for(e=t.memory&&c,i=!0,o=s||0,s=0,r=a.length,n=!0;a&&o<r;o++)if(!1===a[o].apply(c[0],c[1])&&t.stopOnFalse){e=!1;break}n=!1,a&&(l?l.length&&h(l.shift()):e?a=[]:u.disable())},u={add:function(){if(a){var i=a.length;!function e(i){p.each(i,(function(i,n){var s=p.type(n);"function"===s?t.unique&&u.has(n)||a.push(n):n&&n.length&&"string"!==s&&e(n)}))}(arguments),n?r=a.length:e&&(s=i,h(e))}return this},remove:function(){return a&&p.each(arguments,(function(t,e){for(var i;(i=p.inArray(e,a,i))>-1;)a.splice(i,1),n&&(i<=r&&r--,i<=o&&o--)})),this},has:function(t){return t?p.inArray(t,a)>-1:!(!a||!a.length)},empty:function(){return a=[],r=0,this},disable:function(){return a=l=e=void 0,this},disabled:function(){return!a},lock:function(){return l=void 0,e||u.disable(),this},locked:function(){return!l},fireWith:function(t,e){return!a||i&&!l||(e=[t,(e=e||[]).slice?e.slice():e],n?l.push(e):h(e)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},p.extend({Deferred:function(t){var e=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return p.Deferred((function(i){p.each(e,(function(e,r){var o=p.isFunction(t[e])&&t[e];s[r[1]]((function(){var t=o&&o.apply(this,arguments);t&&p.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r[0]+"With"](this===n?i.promise():this,o?[t]:arguments)}))})),t=null})).promise()},promise:function(t){return null!=t?p.extend(t,n):n}},s={};return n.pipe=n.then,p.each(e,(function(t,r){var o=r[2],a=r[3];n[r[1]]=o.add,a&&o.add((function(){i=a}),e[1^t][2].disable,e[2][2].lock),s[r[0]]=function(){return s[r[0]+"With"](this===s?n:this,arguments),this},s[r[0]+"With"]=o.fireWith})),n.promise(s),t&&t.call(s,s),s},when:function(t){var e,i,s,r=0,o=n.call(arguments),a=o.length,l=1!==a||t&&p.isFunction(t.promise)?a:0,h=1===l?t:p.Deferred(),u=function(t,i,s){return function(r){i[t]=this,s[t]=arguments.length>1?n.call(arguments):r,s===e?h.notifyWith(i,s):--l||h.resolveWith(i,s)}};if(a>1)for(e=new Array(a),i=new Array(a),s=new Array(a);r<a;r++)o[r]&&p.isFunction(o[r].promise)?o[r].promise().done(u(r,s,o)).fail(h.reject).progress(u(r,i,e)):--l;return l||h.resolveWith(s,o),h.promise()}}),p.fn.ready=function(t){return p.ready.promise().done(t),this},p.extend({isReady:!1,readyWait:1,holdReady:function(t){t?p.readyWait++:p.ready(!0)},ready:function(t){(!0===t?--p.readyWait:p.isReady)||(p.isReady=!0,!0!==t&&--p.readyWait>0||(C.resolveWith(d,[p]),p.fn.trigger&&p(d).trigger("ready").off("ready")))}}),p.ready.promise=function(e){return C||(C=p.Deferred(),"complete"===d.readyState?setTimeout(p.ready):(d.addEventListener("DOMContentLoaded",I,!1),t.addEventListener("load",I,!1))),C.promise(e)},p.ready.promise();var L=p.access=function(t,e,i,n,s,r,o){var a=0,l=t.length,h=null==i;if("object"===p.type(i))for(a in s=!0,i)p.access(t,e,a,i[a],!0,r,o);else if(void 0!==n&&(s=!0,p.isFunction(n)||(o=!0),h&&(o?(e.call(t,n),e=null):(h=e,e=function(t,e,i){return h.call(p(t),i)})),e))for(;a<l;a++)e(t[a],i,o?n:n.call(t[a],a,e(t[a],i)));return s?t:h?e.call(t):l?e(t[0],i):r};function O(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=p.expando+Math.random()}p.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},O.uid=1,O.accepts=p.acceptData,O.prototype={key:function(t){if(!O.accepts(t))return 0;var e={},i=t[this.expando];if(!i){i=O.uid++;try{e[this.expando]={value:i},Object.defineProperties(t,e)}catch(n){e[this.expando]=i,p.extend(t,e)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,e,i){var n,s=this.key(t),r=this.cache[s];if("string"==typeof e)r[e]=i;else if(p.isEmptyObject(r))p.extend(this.cache[s],e);else for(n in e)r[n]=e[n];return r},get:function(t,e){var i=this.cache[this.key(t)];return void 0===e?i:i[e]},access:function(t,e,i){var n;return void 0===e||e&&"string"==typeof e&&void 0===i?void 0!==(n=this.get(t,e))?n:this.get(t,p.camelCase(e)):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,s,r=this.key(t),o=this.cache[r];if(void 0===e)this.cache[r]={};else{p.isArray(e)?n=e.concat(e.map(p.camelCase)):(s=p.camelCase(e),n=e in o?[e,s]:(n=s)in o?[n]:n.match(P)||[]),i=n.length;for(;i--;)delete o[n[i]]}},hasData:function(t){return!p.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var R=new O,N=new O,M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,B=/([A-Z])/g;function F(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(B,"-$1").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i="true"===i||"false"!==i&&("null"===i?null:+i+""===i?+i:M.test(i)?p.parseJSON(i):i)}catch(s){}N.set(t,e,i)}else i=void 0;return i}p.extend({hasData:function(t){return N.hasData(t)||R.hasData(t)},data:function(t,e,i){return N.access(t,e,i)},removeData:function(t,e){N.remove(t,e)},_data:function(t,e,i){return R.access(t,e,i)},_removeData:function(t,e){R.remove(t,e)}}),p.fn.extend({data:function(t,e){var i,n,s,r=this[0],o=r&&r.attributes;if(void 0===t){if(this.length&&(s=N.get(r),1===r.nodeType&&!R.get(r,"hasDataAttrs"))){for(i=o.length;i--;)0===(n=o[i].name).indexOf("data-")&&(n=p.camelCase(n.slice(5)),F(r,n,s[n]));R.set(r,"hasDataAttrs",!0)}return s}return"object"==typeof t?this.each((function(){N.set(this,t)})):L(this,(function(e){var i,n=p.camelCase(t);if(r&&void 0===e)return void 0!==(i=N.get(r,t))||void 0!==(i=N.get(r,n))||void 0!==(i=F(r,n,void 0))?i:void 0;this.each((function(){var i=N.get(this,n);N.set(this,n,e),-1!==t.indexOf("-")&&void 0!==i&&N.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){N.remove(this,t)}))}}),p.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=R.get(t,e),i&&(!n||p.isArray(i)?n=R.access(t,e,p.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=p.queue(t,e),n=i.length,s=i.shift(),r=p._queueHooks(t,e);"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete r.stop,s.call(t,(function(){p.dequeue(t,e)}),r)),!n&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return R.get(t,i)||R.access(t,i,{empty:p.Callbacks("once memory").add((function(){R.remove(t,[e+"queue",i])}))})}}),p.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?p.queue(this[0],t):void 0===e?this:this.each((function(){var i=p.queue(this,t,e);p._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&p.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){p.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=p.Deferred(),r=this,o=this.length,a=function(){--n||s.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(i=R.get(r[o],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),s.promise(e)}});var V,q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,H=["Top","Right","Bottom","Left"],Y=function(t,e){return t=e||t,"none"===p.css(t,"display")||!p.contains(t.ownerDocument,t)},j=/^(?:checkbox|radio)$/i;(V=d.createDocumentFragment().appendChild(d.createElement("div"))).innerHTML="<input type='radio' checked='checked' name='t'/>",c.checkClone=V.cloneNode(!0).cloneNode(!0).lastChild.checked,V.innerHTML="<textarea>x</textarea>",c.noCloneChecked=!!V.cloneNode(!0).lastChild.defaultValue;c.focusinBubbles="onfocusin"in t;var G=/^key/,z=/^(?:mouse|contextmenu)|click/,W=/^(?:focusinfocus|focusoutblur)$/,U=/^([^.]*)(?:\.(.+)|)$/;function X(){return!0}function K(){return!1}function Q(){try{return d.activeElement}catch(t){}}p.event={global:{},add:function(t,e,i,n,s){var r,o,a,l,h,u,c,d,f,m,g,y=R.get(t);if(y)for(i.handler&&(i=(r=i).handler,s=r.selector),i.guid||(i.guid=p.guid++),(l=y.events)||(l=y.events={}),(o=y.handle)||(o=y.handle=function(e){return void 0!==p&&p.event.triggered!==e.type?p.event.dispatch.apply(t,arguments):void 0}),h=(e=(e||"").match(P)||[""]).length;h--;)f=g=(a=U.exec(e[h])||[])[1],m=(a[2]||"").split(".").sort(),f&&(c=p.event.special[f]||{},f=(s?c.delegateType:c.bindType)||f,c=p.event.special[f]||{},u=p.extend({type:f,origType:g,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&p.expr.match.needsContext.test(s),namespace:m.join(".")},r),(d=l[f])||((d=l[f]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,n,m,o)||t.addEventListener&&t.addEventListener(f,o,!1)),c.add&&(c.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),s?d.splice(d.delegateCount++,0,u):d.push(u),p.event.global[f]=!0)},remove:function(t,e,i,n,s){var r,o,a,l,h,u,c,d,f,m,g,y=R.hasData(t)&&R.get(t);if(y&&(l=y.events)){for(h=(e=(e||"").match(P)||[""]).length;h--;)if(f=g=(a=U.exec(e[h])||[])[1],m=(a[2]||"").split(".").sort(),f){for(c=p.event.special[f]||{},d=l[f=(n?c.delegateType:c.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=d.length;r--;)u=d[r],!s&&g!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(d.splice(r,1),u.selector&&d.delegateCount--,c.remove&&c.remove.call(t,u));o&&!d.length&&(c.teardown&&!1!==c.teardown.call(t,m,y.handle)||p.removeEvent(t,f,y.handle),delete l[f])}else for(f in l)p.event.remove(t,f+e[h],i,n,!0);p.isEmptyObject(l)&&(delete y.handle,R.remove(t,"events"))}},trigger:function(e,i,n,s){var r,o,a,l,u,c,f,m=[n||d],g=h.call(e,"type")?e.type:e,y=h.call(e,"namespace")?e.namespace.split("."):[];if(o=a=n=n||d,3!==n.nodeType&&8!==n.nodeType&&!W.test(g+p.event.triggered)&&(g.indexOf(".")>=0&&(y=g.split("."),g=y.shift(),y.sort()),u=g.indexOf(":")<0&&"on"+g,(e=e[p.expando]?e:new p.Event(g,"object"==typeof e&&e)).isTrigger=s?2:3,e.namespace=y.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:p.makeArray(i,[e]),f=p.event.special[g]||{},s||!f.trigger||!1!==f.trigger.apply(n,i))){if(!s&&!f.noBubble&&!p.isWindow(n)){for(l=f.delegateType||g,W.test(l+g)||(o=o.parentNode);o;o=o.parentNode)m.push(o),a=o;a===(n.ownerDocument||d)&&m.push(a.defaultView||a.parentWindow||t)}for(r=0;(o=m[r++])&&!e.isPropagationStopped();)e.type=r>1?l:f.bindType||g,(c=(R.get(o,"events")||{})[e.type]&&R.get(o,"handle"))&&c.apply(o,i),(c=u&&o[u])&&c.apply&&p.acceptData(o)&&(e.result=c.apply(o,i),!1===e.result&&e.preventDefault());return e.type=g,s||e.isDefaultPrevented()||f._default&&!1!==f._default.apply(m.pop(),i)||!p.acceptData(n)||u&&p.isFunction(n[g])&&!p.isWindow(n)&&((a=n[u])&&(n[u]=null),p.event.triggered=g,n[g](),p.event.triggered=void 0,a&&(n[u]=a)),e.result}},dispatch:function(t){t=p.event.fix(t);var e,i,s,r,o,a=[],l=n.call(arguments),h=(R.get(this,"events")||{})[t.type]||[],u=p.event.special[t.type]||{};if(l[0]=t,t.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,t)){for(a=p.event.handlers.call(this,t,h),e=0;(r=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!t.isImmediatePropagationStopped();)t.namespace_re&&!t.namespace_re.test(o.namespace)||(t.handleObj=o,t.data=o.data,void 0!==(s=((p.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(t.result=s)&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,s,r,o=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==t.type){for(n=[],i=0;i<a;i++)void 0===n[s=(r=e[i]).selector+" "]&&(n[s]=r.needsContext?p(s,this).index(l)>=0:p.find(s,this,null,[l]).length),n[s]&&n.push(r);n.length&&o.push({elem:l,handlers:n})}return a<e.length&&o.push({elem:this,handlers:e.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,s,r=e.button;return null==t.pageX&&null!=e.clientX&&(n=(i=t.target.ownerDocument||d).documentElement,s=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||s&&s.scrollLeft||0)-(n&&n.clientLeft||s&&s.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||s&&s.scrollTop||0)-(n&&n.clientTop||s&&s.clientTop||0)),t.which||void 0===r||(t.which=1&r?1:2&r?3:4&r?2:0),t}},fix:function(t){if(t[p.expando])return t;var e,i,n,s=t.type,r=t,o=this.fixHooks[s];for(o||(this.fixHooks[s]=o=z.test(s)?this.mouseHooks:G.test(s)?this.keyHooks:{}),n=o.props?this.props.concat(o.props):this.props,t=new p.Event(r),e=n.length;e--;)t[i=n[e]]=r[i];return t.target||(t.target=d),3===t.target.nodeType&&(t.target=t.target.parentNode),o.filter?o.filter(t,r):t},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Q()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Q()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&p.nodeName(this,"input"))return this.click(),!1},_default:function(t){return p.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var s=p.extend(new p.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?p.event.trigger(s,null,e):p.event.dispatch.call(e,s),s.isDefaultPrevented()&&i.preventDefault()}},p.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)},p.Event=function(t,e){if(!(this instanceof p.Event))return new p.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.getPreventDefault&&t.getPreventDefault()?X:K):this.type=t,e&&p.extend(this,e),this.timeStamp=t&&t.timeStamp||p.now(),this[p.expando]=!0},p.Event.prototype={isDefaultPrevented:K,isPropagationStopped:K,isImmediatePropagationStopped:K,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=X,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=X,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=X,this.stopPropagation()}},p.each({mouseenter:"mouseover",mouseleave:"mouseout"},(function(t,e){p.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,s=t.relatedTarget,r=t.handleObj;return s&&(s===n||p.contains(n,s))||(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=e),i}}})),c.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},(function(t,e){var i=function(t){p.event.simulate(e,t.target,p.event.fix(t),!0)};p.event.special[e]={setup:function(){var n=this.ownerDocument||this,s=R.access(n,e);s||n.addEventListener(t,i,!0),R.access(n,e,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=R.access(n,e)-1;s?R.access(n,e,s):(n.removeEventListener(t,i,!0),R.remove(n,e))}}})),p.fn.extend({on:function(t,e,i,n,s){var r,o;if("object"==typeof t){for(o in"string"!=typeof e&&(i=i||e,e=void 0),t)this.on(o,e,i,t[o],s);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),!1===n)n=K;else if(!n)return this;return 1===s&&(r=n,(n=function(t){return p().off(t),r.apply(this,arguments)}).guid=r.guid||(r.guid=p.guid++)),this.each((function(){p.event.add(this,t,n,i,e)}))},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,p(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=K),this.each((function(){p.event.remove(this,t,i,e)}))},trigger:function(t,e){return this.each((function(){p.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var i=this[0];if(i)return p.event.trigger(t,e,i,!0)}});var Z=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,J=/<([\w:]+)/,$=/<|&#?\w+;/,tt=/<(?:script|style|link)/i,et=/checked\s*(?:[^=]|=\s*.checked.)/i,it=/^$|\/(?:java|ecma)script/i,nt=/^true\/(.*)/,st=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ot(t,e){return p.nodeName(t,"table")&&p.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function at(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function lt(t){var e=nt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function ht(t,e){for(var i=0,n=t.length;i<n;i++)R.set(t[i],"globalEval",!e||R.get(e[i],"globalEval"))}function ut(t,e){var i,n,s,r,o,a,l,h;if(1===e.nodeType){if(R.hasData(t)&&(r=R.access(t),o=R.set(e,r),h=r.events))for(s in delete o.handle,o.events={},h)for(i=0,n=h[s].length;i<n;i++)p.event.add(e,s,h[s][i]);N.hasData(t)&&(a=N.access(t),l=p.extend({},a),N.set(e,l))}}function ct(t,e){var i=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&p.nodeName(t,e)?p.merge([t],i):i}rt.optgroup=rt.option,rt.tbody=rt.tfoot=rt.colgroup=rt.caption=rt.thead,rt.th=rt.td,p.extend({clone:function(t,e,i){var n,s,r,o,a,l,h,u=t.cloneNode(!0),d=p.contains(t.ownerDocument,t);if(!(c.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||p.isXMLDoc(t)))for(o=ct(u),n=0,s=(r=ct(t)).length;n<s;n++)a=r[n],l=o[n],h=void 0,"input"===(h=l.nodeName.toLowerCase())&&j.test(a.type)?l.checked=a.checked:"input"!==h&&"textarea"!==h||(l.defaultValue=a.defaultValue);if(e)if(i)for(r=r||ct(t),o=o||ct(u),n=0,s=r.length;n<s;n++)ut(r[n],o[n]);else ut(t,u);return(o=ct(u,"script")).length>0&&ht(o,!d&&ct(t,"script")),u},buildFragment:function(t,e,i,n){for(var s,r,o,a,l,h,u=e.createDocumentFragment(),c=[],d=0,f=t.length;d<f;d++)if((s=t[d])||0===s)if("object"===p.type(s))p.merge(c,s.nodeType?[s]:s);else if($.test(s)){for(r=r||u.appendChild(e.createElement("div")),o=(J.exec(s)||["",""])[1].toLowerCase(),a=rt[o]||rt._default,r.innerHTML=a[1]+s.replace(Z,"<$1></$2>")+a[2],h=a[0];h--;)r=r.lastChild;p.merge(c,r.childNodes),(r=u.firstChild).textContent=""}else c.push(e.createTextNode(s));for(u.textContent="",d=0;s=c[d++];)if((!n||-1===p.inArray(s,n))&&(l=p.contains(s.ownerDocument,s),r=ct(u.appendChild(s),"script"),l&&ht(r),i))for(h=0;s=r[h++];)it.test(s.type||"")&&i.push(s);return u},cleanData:function(t){for(var e,i,n,s,r,o,a=p.event.special,l=0;void 0!==(i=t[l]);l++){if(p.acceptData(i)&&(r=i[R.expando])&&(e=R.cache[r])){if((n=Object.keys(e.events||{})).length)for(o=0;void 0!==(s=n[o]);o++)a[s]?p.event.remove(i,s):p.removeEvent(i,s,e.handle);R.cache[r]&&delete R.cache[r]}delete N.cache[i[N.expando]]}}}),p.fn.extend({text:function(t){return L(this,(function(t){return void 0===t?p.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return this.domManip(arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ot(this,t).appendChild(t)}))},prepend:function(){return this.domManip(arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=ot(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return this.domManip(arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return this.domManip(arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},remove:function(t,e){for(var i,n=t?p.filter(t,this):this,s=0;null!=(i=n[s]);s++)e||1!==i.nodeType||p.cleanData(ct(i)),i.parentNode&&(e&&p.contains(i.ownerDocument,i)&&ht(ct(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(p.cleanData(ct(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return p.clone(this,t,e)}))},html:function(t){return L(this,(function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!tt.test(t)&&!rt[(J.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Z,"<$1></$2>");try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(p.cleanData(ct(e,!1)),e.innerHTML=t);e=0}catch(s){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,(function(e){t=this.parentNode,p.cleanData(ct(this)),t&&t.replaceChild(e,this)})),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=s.apply([],t);var i,n,r,o,a,l,h=0,u=this.length,d=this,f=u-1,m=t[0],g=p.isFunction(m);if(g||u>1&&"string"==typeof m&&!c.checkClone&&et.test(m))return this.each((function(i){var n=d.eq(i);g&&(t[0]=m.call(this,i,n.html())),n.domManip(t,e)}));if(u&&(n=(i=p.buildFragment(t,this[0].ownerDocument,!1,this)).firstChild,1===i.childNodes.length&&(i=n),n)){for(o=(r=p.map(ct(i,"script"),at)).length;h<u;h++)a=i,h!==f&&(a=p.clone(a,!0,!0),o&&p.merge(r,ct(a,"script"))),e.call(this[h],a,h);if(o)for(l=r[r.length-1].ownerDocument,p.map(r,lt),h=0;h<o;h++)a=r[h],it.test(a.type||"")&&!R.access(a,"globalEval")&&p.contains(l,a)&&(a.src?p._evalUrl&&p._evalUrl(a.src):p.globalEval(a.textContent.replace(st,"")))}return this}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){p.fn[t]=function(t){for(var i,n=[],s=p(t),o=s.length-1,a=0;a<=o;a++)i=a===o?this:this.clone(!0),p(s[a])[e](i),r.apply(n,i.get());return this.pushStack(n)}}));var dt,pt={};function ft(e,i){var n=p(i.createElement(e)).appendTo(i.body),s=t.getDefaultComputedStyle?t.getDefaultComputedStyle(n[0]).display:p.css(n[0],"display");return n.detach(),s}function mt(t){var e=d,i=pt[t];return i||("none"!==(i=ft(t,e))&&i||((e=(dt=(dt||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement))[0].contentDocument).write(),e.close(),i=ft(t,e),dt.detach()),pt[t]=i),i}var gt=/^margin/,yt=new RegExp("^("+q+")(?!px)[a-z%]+$","i"),bt=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)};function vt(t,e,i){var n,s,r,o,a=t.style;return(i=i||bt(t))&&(o=i.getPropertyValue(e)||i[e]),i&&(""!==o||p.contains(t.ownerDocument,t)||(o=p.style(t,e)),yt.test(o)&&gt.test(e)&&(n=a.width,s=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=s,a.maxWidth=r)),void 0!==o?o+"":o}function _t(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){var e,i,n=d.documentElement,s=d.createElement("div"),r=d.createElement("div");function o(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%",n.appendChild(s);var o=t.getComputedStyle(r,null);e="1%"!==o.top,i="4px"===o.width,n.removeChild(s)}r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",c.clearCloneStyle="content-box"===r.style.backgroundClip,s.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",s.appendChild(r),t.getComputedStyle&&p.extend(c,{pixelPosition:function(){return o(),e},boxSizingReliable:function(){return null==i&&o(),i},reliableMarginRight:function(){var e,i=r.appendChild(d.createElement("div"));return i.style.cssText=r.style.cssText="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",i.style.marginRight=i.style.width="0",r.style.width="1px",n.appendChild(s),e=!parseFloat(t.getComputedStyle(i,null).marginRight),n.removeChild(s),r.innerHTML="",e}})}(),p.swap=function(t,e,i,n){var s,r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];for(r in s=i.apply(t,n||[]),e)t.style[r]=o[r];return s};var At=/^(none|table(?!-c[ea]).+)/,wt=new RegExp("^("+q+")(.*)$","i"),xt=new RegExp("^([+-])=("+q+")","i"),St={position:"absolute",visibility:"hidden",display:"block"},Tt={letterSpacing:0,fontWeight:400},Dt=["Webkit","O","Moz","ms"];function Et(t,e){if(e in t)return e;for(var i=e[0].toUpperCase()+e.slice(1),n=e,s=Dt.length;s--;)if((e=Dt[s]+i)in t)return e;return n}function Ct(t,e,i){var n=wt.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function Pt(t,e,i,n,s){for(var r=i===(n?"border":"content")?4:"width"===e?1:0,o=0;r<4;r+=2)"margin"===i&&(o+=p.css(t,i+H[r],!0,s)),n?("content"===i&&(o-=p.css(t,"padding"+H[r],!0,s)),"margin"!==i&&(o-=p.css(t,"border"+H[r]+"Width",!0,s))):(o+=p.css(t,"padding"+H[r],!0,s),"padding"!==i&&(o+=p.css(t,"border"+H[r]+"Width",!0,s)));return o}function kt(t,e,i){var n=!0,s="width"===e?t.offsetWidth:t.offsetHeight,r=bt(t),o="border-box"===p.css(t,"boxSizing",!1,r);if(s<=0||null==s){if(((s=vt(t,e,r))<0||null==s)&&(s=t.style[e]),yt.test(s))return s;n=o&&(c.boxSizingReliable()||s===t.style[e]),s=parseFloat(s)||0}return s+Pt(t,e,i||(o?"border":"content"),n,r)+"px"}function It(t,e){for(var i,n,s,r=[],o=0,a=t.length;o<a;o++)(n=t[o]).style&&(r[o]=R.get(n,"olddisplay"),i=n.style.display,e?(r[o]||"none"!==i||(n.style.display=""),""===n.style.display&&Y(n)&&(r[o]=R.access(n,"olddisplay",mt(n.nodeName)))):r[o]||(s=Y(n),(i&&"none"!==i||!s)&&R.set(n,"olddisplay",s?i:p.css(n,"display"))));for(o=0;o<a;o++)(n=t[o]).style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?r[o]||"":"none"));return t}function Lt(t,e,i,n,s){return new Lt.prototype.init(t,e,i,n,s)}p.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=vt(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,r,o,a=p.camelCase(e),l=t.style;if(e=p.cssProps[a]||(p.cssProps[a]=Et(l,a)),o=p.cssHooks[e]||p.cssHooks[a],void 0===i)return o&&"get"in o&&void 0!==(s=o.get(t,!1,n))?s:l[e];"string"===(r=typeof i)&&(s=xt.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(p.css(t,e)),r="number"),null!=i&&i==i&&("number"!==r||p.cssNumber[a]||(i+="px"),c.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(i=o.set(t,i,n))||(l[e]="",l[e]=i))}},css:function(t,e,i,n){var s,r,o,a=p.camelCase(e);return e=p.cssProps[a]||(p.cssProps[a]=Et(t.style,a)),(o=p.cssHooks[e]||p.cssHooks[a])&&"get"in o&&(s=o.get(t,!0,i)),void 0===s&&(s=vt(t,e,n)),"normal"===s&&e in Tt&&(s=Tt[e]),""===i||i?(r=parseFloat(s),!0===i||p.isNumeric(r)?r||0:s):s}}),p.each(["height","width"],(function(t,e){p.cssHooks[e]={get:function(t,i,n){if(i)return 0===t.offsetWidth&&At.test(p.css(t,"display"))?p.swap(t,St,(function(){return kt(t,e,n)})):kt(t,e,n)},set:function(t,i,n){var s=n&&bt(t);return Ct(0,i,n?Pt(t,e,n,"border-box"===p.css(t,"boxSizing",!1,s),s):0)}}})),p.cssHooks.marginRight=_t(c.reliableMarginRight,(function(t,e){if(e)return p.swap(t,{display:"inline-block"},vt,[t,"marginRight"])})),p.each({margin:"",padding:"",border:"Width"},(function(t,e){p.cssHooks[t+e]={expand:function(i){for(var n=0,s={},r="string"==typeof i?i.split(" "):[i];n<4;n++)s[t+H[n]+e]=r[n]||r[n-2]||r[0];return s}},gt.test(t)||(p.cssHooks[t+e].set=Ct)})),p.fn.extend({css:function(t,e){return L(this,(function(t,e,i){var n,s,r={},o=0;if(p.isArray(e)){for(n=bt(t),s=e.length;o<s;o++)r[e[o]]=p.css(t,e[o],!1,n);return r}return void 0!==i?p.style(t,e,i):p.css(t,e)}),t,e,arguments.length>1)},show:function(){return It(this,!0)},hide:function(){return It(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){Y(this)?p(this).show():p(this).hide()}))}}),p.Tween=Lt,Lt.prototype={constructor:Lt,init:function(t,e,i,n,s,r){this.elem=t,this.prop=i,this.easing=s||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=r||(p.cssNumber[i]?"":"px")},cur:function(){var t=Lt.propHooks[this.prop];return t&&t.get?t.get(this):Lt.propHooks._default.get(this)},run:function(t){var e,i=Lt.propHooks[this.prop];return this.options.duration?this.pos=e=p.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Lt.propHooks._default.set(this),this}},Lt.prototype.init.prototype=Lt.prototype,Lt.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=p.css(t.elem,t.prop,""))&&"auto"!==e?e:0:t.elem[t.prop]},set:function(t){p.fx.step[t.prop]?p.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[p.cssProps[t.prop]]||p.cssHooks[t.prop])?p.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},Lt.propHooks.scrollTop=Lt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},p.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},p.fx=Lt.prototype.init,p.fx.step={};var Ot,Rt,Nt,Mt,Bt,Ft=/^(?:toggle|show|hide)$/,Vt=new RegExp("^(?:([+-])=|)("+q+")([a-z%]*)$","i"),qt=/queueHooks$/,Ht=[function(t,e,i){var n,s,r,o,a,l,h,u=this,c={},d=t.style,f=t.nodeType&&Y(t),m=R.get(t,"fxshow");i.queue||(null==(a=p._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,u.always((function(){u.always((function(){a.unqueued--,p.queue(t,"fx").length||a.empty.fire()}))})));1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],"none"===(h=p.css(t,"display"))&&(h=mt(t.nodeName)),"inline"===h&&"none"===p.css(t,"float")&&(d.display="inline-block"));i.overflow&&(d.overflow="hidden",u.always((function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]})));for(n in e)if(s=e[n],Ft.exec(s)){if(delete e[n],r=r||"toggle"===s,s===(f?"hide":"show")){if("show"!==s||!m||void 0===m[n])continue;f=!0}c[n]=m&&m[n]||p.style(t,n)}if(!p.isEmptyObject(c))for(n in m?"hidden"in m&&(f=m.hidden):m=R.access(t,"fxshow",{}),r&&(m.hidden=!f),f?p(t).show():u.done((function(){p(t).hide()})),u.done((function(){var e;for(e in R.remove(t,"fxshow"),c)p.style(t,e,c[e])})),c)o=zt(f?m[n]:0,n,u),n in m||(m[n]=o.start,f&&(o.end=o.start,o.start="width"===n||"height"===n?1:0))}],Yt={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),s=Vt.exec(e),r=s&&s[3]||(p.cssNumber[t]?"":"px"),o=(p.cssNumber[t]||"px"!==r&&+n)&&Vt.exec(p.css(i.elem,t)),a=1,l=20;if(o&&o[3]!==r){r=r||o[3],s=s||[],o=+n||1;do{o/=a=a||".5",p.style(i.elem,t,o+r)}while(a!==(a=i.cur()/n)&&1!==a&&--l)}return s&&(o=i.start=+o||+n||0,i.unit=r,i.end=s[1]?o+(s[1]+1)*s[2]:+s[2]),i}]};function jt(){return setTimeout((function(){Ot=void 0})),Ot=p.now()}function Gt(t,e){var i,n=0,s={height:t};for(e=e?1:0;n<4;n+=2-e)s["margin"+(i=H[n])]=s["padding"+i]=t;return e&&(s.opacity=s.width=t),s}function zt(t,e,i){for(var n,s=(Yt[e]||[]).concat(Yt["*"]),r=0,o=s.length;r<o;r++)if(n=s[r].call(i,e,t))return n}function Wt(t,e,i){var n,s,r=0,o=Ht.length,a=p.Deferred().always((function(){delete l.elem})),l=function(){if(s)return!1;for(var e=Ot||jt(),i=Math.max(0,h.startTime+h.duration-e),n=1-(i/h.duration||0),r=0,o=h.tweens.length;r<o;r++)h.tweens[r].run(n);return a.notifyWith(t,[h,n,i]),n<1&&o?i:(a.resolveWith(t,[h]),!1)},h=a.promise({elem:t,props:p.extend({},e),opts:p.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:Ot||jt(),duration:i.duration,tweens:[],createTween:function(e,i){var n=p.Tween(t,h.opts,e,i,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(n),n},stop:function(e){var i=0,n=e?h.tweens.length:0;if(s)return this;for(s=!0;i<n;i++)h.tweens[i].run(1);return e?a.resolveWith(t,[h,e]):a.rejectWith(t,[h,e]),this}}),u=h.props;for(!function(t,e){var i,n,s,r,o;for(i in t)if(s=e[n=p.camelCase(i)],r=t[i],p.isArray(r)&&(s=r[1],r=t[i]=r[0]),i!==n&&(t[n]=r,delete t[i]),(o=p.cssHooks[n])&&"expand"in o)for(i in r=o.expand(r),delete t[n],r)i in t||(t[i]=r[i],e[i]=s);else e[n]=s}(u,h.opts.specialEasing);r<o;r++)if(n=Ht[r].call(h,t,u,h.opts))return n;return p.map(u,zt,h),p.isFunction(h.opts.start)&&h.opts.start.call(t,h),p.fx.timer(p.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}p.Animation=p.extend(Wt,{tweener:function(t,e){p.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,s=t.length;n<s;n++)i=t[n],Yt[i]=Yt[i]||[],Yt[i].unshift(e)},prefilter:function(t,e){e?Ht.unshift(t):Ht.push(t)}}),p.speed=function(t,e,i){var n=t&&"object"==typeof t?p.extend({},t):{complete:i||!i&&e||p.isFunction(t)&&t,duration:t,easing:i&&e||e&&!p.isFunction(e)&&e};return n.duration=p.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in p.fx.speeds?p.fx.speeds[n.duration]:p.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){p.isFunction(n.old)&&n.old.call(this),n.queue&&p.dequeue(this,n.queue)},n},p.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Y).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=p.isEmptyObject(t),r=p.speed(e,i,n),o=function(){var e=Wt(this,p.extend({},t),r);(s||R.get(this,"finish"))&&e.stop(!0)};return o.finish=o,s||!1===r.queue?this.each(o):this.queue(r.queue,o)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each((function(){var e=!0,s=null!=t&&t+"queueHooks",r=p.timers,o=R.get(this);if(s)o[s]&&o[s].stop&&n(o[s]);else for(s in o)o[s]&&o[s].stop&&qt.test(s)&&n(o[s]);for(s=r.length;s--;)r[s].elem!==this||null!=t&&r[s].queue!==t||(r[s].anim.stop(i),e=!1,r.splice(s,1));!e&&i||p.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,i=R.get(this),n=i[t+"queue"],s=i[t+"queueHooks"],r=p.timers,o=n?n.length:0;for(i.finish=!0,p.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish}))}}),p.each(["toggle","show","hide"],(function(t,e){var i=p.fn[e];p.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(Gt(e,!0),t,n,s)}})),p.each({slideDown:Gt("show"),slideUp:Gt("hide"),slideToggle:Gt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){p.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}})),p.timers=[],p.fx.tick=function(){var t,e=0,i=p.timers;for(Ot=p.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||p.fx.stop(),Ot=void 0},p.fx.timer=function(t){p.timers.push(t),t()?p.fx.start():p.timers.pop()},p.fx.interval=13,p.fx.start=function(){Rt||(Rt=setInterval(p.fx.tick,p.fx.interval))},p.fx.stop=function(){clearInterval(Rt),Rt=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(t,e){return t=p.fx&&p.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}}))},Nt=d.createElement("input"),Mt=d.createElement("select"),Bt=Mt.appendChild(d.createElement("option")),Nt.type="checkbox",c.checkOn=""!==Nt.value,c.optSelected=Bt.selected,Mt.disabled=!0,c.optDisabled=!Bt.disabled,(Nt=d.createElement("input")).value="t",Nt.type="radio",c.radioValue="t"===Nt.value;var Ut,Xt=p.expr.attrHandle;p.fn.extend({attr:function(t,e){return L(this,p.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){p.removeAttr(this,t)}))}}),p.extend({attr:function(t,e,i){var n,s,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?p.prop(t,e,i):(1===r&&p.isXMLDoc(t)||(e=e.toLowerCase(),n=p.attrHooks[e]||(p.expr.match.bool.test(e)?Ut:void 0)),void 0===i?n&&"get"in n&&null!==(s=n.get(t,e))?s:null==(s=p.find.attr(t,e))?void 0:s:null!==i?n&&"set"in n&&void 0!==(s=n.set(t,i,e))?s:(t.setAttribute(e,i+""),i):void p.removeAttr(t,e))},removeAttr:function(t,e){var i,n,s=0,r=e&&e.match(P);if(r&&1===t.nodeType)for(;i=r[s++];)n=p.propFix[i]||i,p.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)},attrHooks:{type:{set:function(t,e){if(!c.radioValue&&"radio"===e&&p.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),Ut={set:function(t,e,i){return!1===e?p.removeAttr(t,i):t.setAttribute(i,i),i}},p.each(p.expr.match.bool.source.match(/\w+/g),(function(t,e){var i=Xt[e]||p.find.attr;Xt[e]=function(t,e,n){var s,r;return n||(r=Xt[e],Xt[e]=s,s=null!=i(t,e,n)?e.toLowerCase():null,Xt[e]=r),s}}));var Kt=/^(?:input|select|textarea|button)$/i;p.fn.extend({prop:function(t,e){return L(this,p.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[p.propFix[t]||t]}))}}),p.extend({propFix:{for:"htmlFor",class:"className"},prop:function(t,e,i){var n,s,r=t.nodeType;if(t&&3!==r&&8!==r&&2!==r)return(1!==r||!p.isXMLDoc(t))&&(e=p.propFix[e]||e,s=p.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||Kt.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),c.optSelected||(p.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){p.propFix[this.toLowerCase()]=this}));var Qt=/[\t\r\n\f]/g;p.fn.extend({addClass:function(t){var e,i,n,s,r,o,a="string"==typeof t&&t,l=0,h=this.length;if(p.isFunction(t))return this.each((function(e){p(this).addClass(t.call(this,e,this.className))}));if(a)for(e=(t||"").match(P)||[];l<h;l++)if(n=1===(i=this[l]).nodeType&&(i.className?(" "+i.className+" ").replace(Qt," "):" ")){for(r=0;s=e[r++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");o=p.trim(n),i.className!==o&&(i.className=o)}return this},removeClass:function(t){var e,i,n,s,r,o,a=0===arguments.length||"string"==typeof t&&t,l=0,h=this.length;if(p.isFunction(t))return this.each((function(e){p(this).removeClass(t.call(this,e,this.className))}));if(a)for(e=(t||"").match(P)||[];l<h;l++)if(n=1===(i=this[l]).nodeType&&(i.className?(" "+i.className+" ").replace(Qt," "):"")){for(r=0;s=e[r++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");o=t?p.trim(n):"",i.className!==o&&(i.className=o)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):p.isFunction(t)?this.each((function(i){p(this).toggleClass(t.call(this,i,this.className,e),e)})):this.each((function(){if("string"===i)for(var e,n=0,s=p(this),r=t.match(P)||[];e=r[n++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else"undefined"!==i&&"boolean"!==i||(this.className&&R.set(this,"__className__",this.className),this.className=this.className||!1===t?"":R.get(this,"__className__")||"")}))},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Qt," ").indexOf(e)>=0)return!0;return!1}});var Zt=/\r/g;p.fn.extend({val:function(t){var e,i,n,s=this[0];return arguments.length?(n=p.isFunction(t),this.each((function(i){var s;1===this.nodeType&&(null==(s=n?t.call(this,i,p(this).val()):t)?s="":"number"==typeof s?s+="":p.isArray(s)&&(s=p.map(s,(function(t){return null==t?"":t+""}))),(e=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))}))):s?(e=p.valHooks[s.type]||p.valHooks[s.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:"string"==typeof(i=s.value)?i.replace(Zt,""):null==i?"":i:void 0}}),p.extend({valHooks:{select:{get:function(t){for(var e,i,n=t.options,s=t.selectedIndex,r="select-one"===t.type||s<0,o=r?null:[],a=r?s+1:n.length,l=s<0?a:r?s:0;l<a;l++)if(((i=n[l]).selected||l===s)&&(c.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!p.nodeName(i.parentNode,"optgroup"))){if(e=p(i).val(),r)return e;o.push(e)}return o},set:function(t,e){for(var i,n,s=t.options,r=p.makeArray(e),o=s.length;o--;)((n=s[o]).selected=p.inArray(p(n).val(),r)>=0)&&(i=!0);return i||(t.selectedIndex=-1),r}}}}),p.each(["radio","checkbox"],(function(){p.valHooks[this]={set:function(t,e){if(p.isArray(e))return t.checked=p.inArray(p(t).val(),e)>=0}},c.checkOn||(p.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),(function(t,e){p.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}})),p.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var Jt=p.now(),$t=/\?/;p.parseJSON=function(t){return JSON.parse(t+"")},p.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new DOMParser).parseFromString(t,"text/xml")}catch(i){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||p.error("Invalid XML: "+t),e};var te,ee,ie=/#.*$/,ne=/([?&])_=[^&]*/,se=/^(.*?):[ \t]*([^\r\n]*)$/gm,re=/^(?:GET|HEAD)$/,oe=/^\/\//,ae=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,le={},he={},ue="*/".concat("*");try{ee=location.href}catch(Ie){(ee=d.createElement("a")).href="",ee=ee.href}function ce(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,r=e.toLowerCase().match(P)||[];if(p.isFunction(i))for(;n=r[s++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function de(t,e,i,n){var s={},r=t===he;function o(a){var l;return s[a]=!0,p.each(t[a]||[],(function(t,a){var h=a(e,i,n);return"string"!=typeof h||r||s[h]?r?!(l=h):void 0:(e.dataTypes.unshift(h),o(h),!1)})),l}return o(e.dataTypes[0])||!s["*"]&&o("*")}function pe(t,e){var i,n,s=p.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((s[i]?t:n||(n={}))[i]=e[i]);return n&&p.extend(!0,t,n),t}te=ae.exec(ee.toLowerCase())||[],p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ee,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(te[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ue,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?pe(pe(t,p.ajaxSettings),e):pe(p.ajaxSettings,t)},ajaxPrefilter:ce(le),ajaxTransport:ce(he),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,n,s,r,o,a,l,h,u=p.ajaxSetup({},e),c=u.context||u,d=u.context&&(c.nodeType||c.jquery)?p(c):p.event,f=p.Deferred(),m=p.Callbacks("once memory"),g=u.statusCode||{},y={},b={},v=0,_="canceled",A={readyState:0,getResponseHeader:function(t){var e;if(2===v){if(!r)for(r={};e=se.exec(s);)r[e[1].toLowerCase()]=e[2];e=r[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===v?s:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return v||(t=b[i]=b[i]||t,y[t]=e),this},overrideMimeType:function(t){return v||(u.mimeType=t),this},statusCode:function(t){var e;if(t)if(v<2)for(e in t)g[e]=[g[e],t[e]];else A.always(t[A.status]);return this},abort:function(t){var e=t||_;return i&&i.abort(e),w(0,e),this}};if(f.promise(A).complete=m.add,A.success=A.done,A.error=A.fail,u.url=((t||u.url||ee)+"").replace(ie,"").replace(oe,te[1]+"//"),u.type=e.method||e.type||u.method||u.type,u.dataTypes=p.trim(u.dataType||"*").toLowerCase().match(P)||[""],null==u.crossDomain&&(a=ae.exec(u.url.toLowerCase()),u.crossDomain=!(!a||a[1]===te[1]&&a[2]===te[2]&&(a[3]||("http:"===a[1]?"80":"443"))===(te[3]||("http:"===te[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=p.param(u.data,u.traditional)),de(le,u,e,A),2===v)return A;for(h in(l=u.global)&&0==p.active++&&p.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!re.test(u.type),n=u.url,u.hasContent||(u.data&&(n=u.url+=($t.test(n)?"&":"?")+u.data,delete u.data),!1===u.cache&&(u.url=ne.test(n)?n.replace(ne,"$1_="+Jt++):n+($t.test(n)?"&":"?")+"_="+Jt++)),u.ifModified&&(p.lastModified[n]&&A.setRequestHeader("If-Modified-Since",p.lastModified[n]),p.etag[n]&&A.setRequestHeader("If-None-Match",p.etag[n])),(u.data&&u.hasContent&&!1!==u.contentType||e.contentType)&&A.setRequestHeader("Content-Type",u.contentType),A.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+ue+"; q=0.01":""):u.accepts["*"]),u.headers)A.setRequestHeader(h,u.headers[h]);if(u.beforeSend&&(!1===u.beforeSend.call(c,A,u)||2===v))return A.abort();for(h in _="abort",{success:1,error:1,complete:1})A[h](u[h]);if(i=de(he,u,e,A)){A.readyState=1,l&&d.trigger("ajaxSend",[A,u]),u.async&&u.timeout>0&&(o=setTimeout((function(){A.abort("timeout")}),u.timeout));try{v=1,i.send(y,w)}catch(Ie){if(!(v<2))throw Ie;w(-1,Ie)}}else w(-1,"No Transport");function w(t,e,r,a){var h,y,b,_,w,x=e;2!==v&&(v=2,o&&clearTimeout(o),i=void 0,s=a||"",A.readyState=t>0?4:0,h=t>=200&&t<300||304===t,r&&(_=function(t,e,i){for(var n,s,r,o,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(s in a)if(a[s]&&a[s].test(n)){l.unshift(s);break}if(l[0]in i)r=l[0];else{for(s in i){if(!l[0]||t.converters[s+" "+l[0]]){r=s;break}o||(o=s)}r=r||o}if(r)return r!==l[0]&&l.unshift(r),i[r]}(u,A,r)),_=function(t,e,i,n){var s,r,o,a,l,h={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)h[o.toLowerCase()]=t.converters[o];for(r=u.shift();r;)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(o=h[l+" "+r]||h["* "+r]))for(s in h)if((a=s.split(" "))[1]===r&&(o=h[l+" "+a[0]]||h["* "+a[0]])){!0===o?o=h[s]:!0!==h[s]&&(r=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(Ie){return{state:"parsererror",error:o?Ie:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(u,_,A,h),h?(u.ifModified&&((w=A.getResponseHeader("Last-Modified"))&&(p.lastModified[n]=w),(w=A.getResponseHeader("etag"))&&(p.etag[n]=w)),204===t||"HEAD"===u.type?x="nocontent":304===t?x="notmodified":(x=_.state,y=_.data,h=!(b=_.error))):(b=x,!t&&x||(x="error",t<0&&(t=0))),A.status=t,A.statusText=(e||x)+"",h?f.resolveWith(c,[y,x,A]):f.rejectWith(c,[A,x,b]),A.statusCode(g),g=void 0,l&&d.trigger(h?"ajaxSuccess":"ajaxError",[A,u,h?y:b]),m.fireWith(c,[A,x]),l&&(d.trigger("ajaxComplete",[A,u]),--p.active||p.event.trigger("ajaxStop")))}return A},getJSON:function(t,e,i){return p.get(t,e,i,"json")},getScript:function(t,e){return p.get(t,void 0,e,"script")}}),p.each(["get","post"],(function(t,e){p[e]=function(t,i,n,s){return p.isFunction(i)&&(s=s||n,n=i,i=void 0),p.ajax({url:t,type:e,dataType:s,data:i,success:n})}})),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){p.fn[e]=function(t){return this.on(e,t)}})),p._evalUrl=function(t){return p.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},p.fn.extend({wrapAll:function(t){var e;return p.isFunction(t)?this.each((function(e){p(this).wrapAll(t.call(this,e))})):(this[0]&&(e=p(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this)},wrapInner:function(t){return p.isFunction(t)?this.each((function(e){p(this).wrapInner(t.call(this,e))})):this.each((function(){var e=p(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)}))},wrap:function(t){var e=p.isFunction(t);return this.each((function(i){p(this).wrapAll(e?t.call(this,i):t)}))},unwrap:function(){return this.parent().each((function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)})).end()}}),p.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},p.expr.filters.visible=function(t){return!p.expr.filters.hidden(t)};var fe=/%20/g,me=/\[\]$/,ge=/\r?\n/g,ye=/^(?:submit|button|image|reset|file)$/i,be=/^(?:input|select|textarea|keygen)/i;function ve(t,e,i,n){var s;if(p.isArray(e))p.each(e,(function(e,s){i||me.test(t)?n(t,s):ve(t+"["+("object"==typeof s?e:"")+"]",s,i,n)}));else if(i||"object"!==p.type(e))n(t,e);else for(s in e)ve(t+"["+s+"]",e[s],i,n)}p.param=function(t,e){var i,n=[],s=function(t,e){e=p.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=p.ajaxSettings&&p.ajaxSettings.traditional),p.isArray(t)||t.jquery&&!p.isPlainObject(t))p.each(t,(function(){s(this.name,this.value)}));else for(i in t)ve(i,t[i],e,s);return n.join("&").replace(fe,"+")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=p.prop(this,"elements");return t?p.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!p(this).is(":disabled")&&be.test(this.nodeName)&&!ye.test(t)&&(this.checked||!j.test(t))})).map((function(t,e){var i=p(this).val();return null==i?null:p.isArray(i)?p.map(i,(function(t){return{name:e.name,value:t.replace(ge,"\r\n")}})):{name:e.name,value:i.replace(ge,"\r\n")}})).get()}}),p.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(Ie){}};var _e=0,Ae={},we={0:200,1223:204},xe=p.ajaxSettings.xhr();t.ActiveXObject&&p(t).on("unload",(function(){for(var t in Ae)Ae[t]()})),c.cors=!!xe&&"withCredentials"in xe,c.ajax=xe=!!xe,p.ajaxTransport((function(t){var e;if(c.cors||xe&&!t.crossDomain)return{send:function(i,n){var s,r=t.xhr(),o=++_e;if(r.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)r[s]=t.xhrFields[s];for(s in t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)r.setRequestHeader(s,i[s]);e=function(t){return function(){e&&(delete Ae[o],e=r.onload=r.onerror=null,"abort"===t?r.abort():"error"===t?n(r.status,r.statusText):n(we[r.status]||r.status,r.statusText,"string"==typeof r.responseText?{text:r.responseText}:void 0,r.getAllResponseHeaders()))}},r.onload=e(),r.onerror=e("error"),e=Ae[o]=e("abort"),r.send(t.hasContent&&t.data||null)},abort:function(){e&&e()}}})),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return p.globalEval(t),t}}}),p.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),p.ajaxTransport("script",(function(t){var e,i;if(t.crossDomain)return{send:function(n,s){e=p("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&s("error"===t.type?404:200,t.type)}),d.head.appendChild(e[0])},abort:function(){i&&i()}}}));var Se=[],Te=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Se.pop()||p.expando+"_"+Jt++;return this[t]=!0,t}}),p.ajaxPrefilter("json jsonp",(function(e,i,n){var s,r,o,a=!1!==e.jsonp&&(Te.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Te.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return s=e.jsonpCallback=p.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Te,"$1"+s):!1!==e.jsonp&&(e.url+=($t.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return o||p.error(s+" was not called"),o[0]},e.dataTypes[0]="json",r=t[s],t[s]=function(){o=arguments},n.always((function(){t[s]=r,e[s]&&(e.jsonpCallback=i.jsonpCallback,Se.push(s)),o&&p.isFunction(r)&&r(o[0]),o=r=void 0})),"script"})),p.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||d;var n=_.exec(t),s=!i&&[];return n?[e.createElement(n[1])]:(n=p.buildFragment([t],e,s),s&&s.length&&p(s).remove(),p.merge([],n.childNodes))};var De=p.fn.load;p.fn.load=function(t,e,i){if("string"!=typeof t&&De)return De.apply(this,arguments);var n,s,r,o=this,a=t.indexOf(" ");return a>=0&&(n=t.slice(a),t=t.slice(0,a)),p.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(s="POST"),o.length>0&&p.ajax({url:t,type:s,dataType:"html",data:e}).done((function(t){r=arguments,o.html(n?p("<div>").append(p.parseHTML(t)).find(n):t)})).complete(i&&function(t,e){o.each(i,r||[t.responseText,e,t])}),this},p.expr.filters.animated=function(t){return p.grep(p.timers,(function(e){return t===e.elem})).length};var Ee=t.document.documentElement;function Ce(t){return p.isWindow(t)?t:9===t.nodeType&&t.defaultView}p.offset={setOffset:function(t,e,i){var n,s,r,o,a,l,h=p.css(t,"position"),u=p(t),c={};"static"===h&&(t.style.position="relative"),a=u.offset(),r=p.css(t,"top"),l=p.css(t,"left"),("absolute"===h||"fixed"===h)&&(r+l).indexOf("auto")>-1?(o=(n=u.position()).top,s=n.left):(o=parseFloat(r)||0,s=parseFloat(l)||0),p.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(c.top=e.top-a.top+o),null!=e.left&&(c.left=e.left-a.left+s),"using"in e?e.using.call(t,c):u.css(c)}},p.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){p.offset.setOffset(this,t,e)}));var e,i,n=this[0],s={top:0,left:0},r=n&&n.ownerDocument;return r?(e=r.documentElement,p.contains(e,n)?(void 0!==n.getBoundingClientRect&&(s=n.getBoundingClientRect()),i=Ce(r),{top:s.top+i.pageYOffset-e.clientTop,left:s.left+i.pageXOffset-e.clientLeft}):s):void 0},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===p.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),p.nodeName(t[0],"html")||(n=t.offset()),n.top+=p.css(t[0],"borderTopWidth",!0),n.left+=p.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-p.css(i,"marginTop",!0),left:e.left-n.left-p.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent||Ee;t&&!p.nodeName(t,"html")&&"static"===p.css(t,"position");)t=t.offsetParent;return t||Ee}))}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,i){var n="pageYOffset"===i;p.fn[e]=function(s){return L(this,(function(e,s,r){var o=Ce(e);if(void 0===r)return o?o[i]:e[s];o?o.scrollTo(n?t.pageXOffset:r,n?r:t.pageYOffset):e[s]=r}),e,s,arguments.length,null)}})),p.each(["top","left"],(function(t,e){p.cssHooks[e]=_t(c.pixelPosition,(function(t,i){if(i)return i=vt(t,e),yt.test(i)?p(t).position()[e]+"px":i}))})),p.each({Height:"height",Width:"width"},(function(t,e){p.each({padding:"inner"+t,content:e,"":"outer"+t},(function(i,n){p.fn[n]=function(n,s){var r=arguments.length&&(i||"boolean"!=typeof n),o=i||(!0===n||!0===s?"margin":"border");return L(this,(function(e,i,n){var s;return p.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===n?p.css(e,i,o):p.style(e,i,n,o)}),e,r?n:void 0,r,null)}}))})),p.fn.size=function(){return this.length},p.fn.andSelf=p.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],(function(){return p}));var Pe=t.jQuery,ke=t.$;return p.noConflict=function(e){return t.$===p&&(t.$=ke),e&&t.jQuery===p&&(t.jQuery=Pe),p},void 0===e&&(t.jQuery=t.$=p),p})),function(){function t(t,e){return t.set(e[0],e[1]),t}function e(t,e){return t.add(e),t}function i(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function n(t,e,i,n){for(var s=-1,r=null==t?0:t.length;++s<r;){var o=t[s];e(n,o,i(o),t)}return n}function s(t,e){for(var i=-1,n=null==t?0:t.length;++i<n&&!1!==e(t[i],i,t););return t}function r(t,e){for(var i=null==t?0:t.length;i--&&!1!==e(t[i],i,t););return t}function o(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(!e(t[i],i,t))return!1;return!0}function a(t,e){for(var i=-1,n=null==t?0:t.length,s=0,r=[];++i<n;){var o=t[i];e(o,i,t)&&(r[s++]=o)}return r}function l(t,e){return!(null==t||!t.length)&&-1<y(t,e,0)}function h(t,e,i){for(var n=-1,s=null==t?0:t.length;++n<s;)if(i(e,t[n]))return!0;return!1}function u(t,e){for(var i=-1,n=null==t?0:t.length,s=Array(n);++i<n;)s[i]=e(t[i],i,t);return s}function c(t,e){for(var i=-1,n=e.length,s=t.length;++i<n;)t[s+i]=e[i];return t}function d(t,e,i,n){var s=-1,r=null==t?0:t.length;for(n&&r&&(i=t[++s]);++s<r;)i=e(i,t[s],s,t);return i}function p(t,e,i,n){var s=null==t?0:t.length;for(n&&s&&(i=t[--s]);s--;)i=e(i,t[s],s,t);return i}function f(t,e){for(var i=-1,n=null==t?0:t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function m(t,e,i){var n;return i(t,(function(t,i,s){if(e(t,i,s))return n=i,!1})),n}function g(t,e,i,n){var s=t.length;for(i+=n?1:-1;n?i--:++i<s;)if(e(t[i],i,t))return i;return-1}function y(t,e,i){if(e==e)t:{--i;for(var n=t.length;++i<n;)if(t[i]===e){t=i;break t}t=-1}else t=g(t,v,i);return t}function b(t,e,i,n){--i;for(var s=t.length;++i<s;)if(n(t[i],e))return i;return-1}function v(t){return t!=t}function _(t,e){var i=null==t?0:t.length;return i?S(t,e)/i:q}function A(t){return function(e){return null==e?F:e[t]}}function w(t){return function(e){return null==t?F:t[e]}}function x(t,e,i,n,s){return s(t,(function(t,s,r){i=n?(n=!1,t):e(i,t,s,r)})),i}function S(t,e){for(var i,n=-1,s=t.length;++n<s;){var r=e(t[n]);r!==F&&(i=i===F?r:i+r)}return i}function T(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}function D(t){return function(e){return t(e)}}function E(t,e){return u(e,(function(e){return t[e]}))}function C(t,e){return t.has(e)}function P(t,e){for(var i=-1,n=t.length;++i<n&&-1<y(e,t[i],0););return i}function k(t,e){for(var i=t.length;i--&&-1<y(e,t[i],0););return i}function I(t){return"\\"+Rt[t]}function L(t){var e=-1,i=Array(t.size);return t.forEach((function(t,n){i[++e]=[n,t]})),i}function O(t,e){return function(i){return t(e(i))}}function R(t,e){for(var i=-1,n=t.length,s=0,r=[];++i<n;){var o=t[i];o!==e&&"__lodash_placeholder__"!==o||(t[i]="__lodash_placeholder__",r[s++]=i)}return r}function N(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}function M(t){if(Ct.test(t)){for(var e=Dt.lastIndex=0;Dt.test(t);)++e;t=e}else t=Qt(t);return t}function B(t){return Ct.test(t)?t.match(Dt)||[]:t.split("")}var F,V=1/0,q=NaN,H=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Y=/\b__p\+='';/g,j=/\b(__p\+=)''\+/g,G=/(__e\(.*?\)|\b__t\))\+'';/g,z=/&(?:amp|lt|gt|quot|#39);/g,W=/[&<>"']/g,U=RegExp(z.source),X=RegExp(W.source),K=/<%-([\s\S]+?)%>/g,Q=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$=/^\w*$/,tt=/^\./,et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,it=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(it.source),st=/^\s+|\s+$/g,rt=/^\s+/,ot=/\s+$/,at=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,lt=/\{\n\/\* \[wrapped with (.+)\] \*/,ht=/,? & /,ut=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/\\(\\)?/g,dt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pt=/\w*$/,ft=/^[-+]0x[0-9a-f]+$/i,mt=/^0b[01]+$/i,gt=/^\[object .+?Constructor\]$/,yt=/^0o[0-7]+$/i,bt=/^(?:0|[1-9]\d*)$/,vt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,_t=/($^)/,At=/['\n\r\u2028\u2029\\]/g,wt="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",xt="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+wt,St=RegExp("[']","g"),Tt=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),Dt=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])"+wt,"g"),Et=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)|\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)|\\d+",xt].join("|"),"g"),Ct=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Pt=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,kt="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),It={};It["[object Float32Array]"]=It["[object Float64Array]"]=It["[object Int8Array]"]=It["[object Int16Array]"]=It["[object Int32Array]"]=It["[object Uint8Array]"]=It["[object Uint8ClampedArray]"]=It["[object Uint16Array]"]=It["[object Uint32Array]"]=!0,It["[object Arguments]"]=It["[object Array]"]=It["[object ArrayBuffer]"]=It["[object Boolean]"]=It["[object DataView]"]=It["[object Date]"]=It["[object Error]"]=It["[object Function]"]=It["[object Map]"]=It["[object Number]"]=It["[object Object]"]=It["[object RegExp]"]=It["[object Set]"]=It["[object String]"]=It["[object WeakMap]"]=!1;var Lt={};Lt["[object Arguments]"]=Lt["[object Array]"]=Lt["[object ArrayBuffer]"]=Lt["[object DataView]"]=Lt["[object Boolean]"]=Lt["[object Date]"]=Lt["[object Float32Array]"]=Lt["[object Float64Array]"]=Lt["[object Int8Array]"]=Lt["[object Int16Array]"]=Lt["[object Int32Array]"]=Lt["[object Map]"]=Lt["[object Number]"]=Lt["[object Object]"]=Lt["[object RegExp]"]=Lt["[object Set]"]=Lt["[object String]"]=Lt["[object Symbol]"]=Lt["[object Uint8Array]"]=Lt["[object Uint8ClampedArray]"]=Lt["[object Uint16Array]"]=Lt["[object Uint32Array]"]=!0,Lt["[object Error]"]=Lt["[object Function]"]=Lt["[object WeakMap]"]=!1;var Ot,Rt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Nt=parseFloat,Mt=parseInt,Bt="object"==typeof global&&global&&global.Object===Object&&global,Ft="object"==typeof self&&self&&self.Object===Object&&self,Vt=Bt||Ft||Function("return this")(),qt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ht=qt&&"object"==typeof module&&module&&!module.nodeType&&module,Yt=Ht&&Ht.exports===qt,jt=Yt&&Bt.process;t:{try{Ot=jt&&jt.binding&&jt.binding("util");break t}catch(t){}Ot=void 0}var Gt=Ot&&Ot.isArrayBuffer,zt=Ot&&Ot.isDate,Wt=Ot&&Ot.isMap,Ut=Ot&&Ot.isRegExp,Xt=Ot&&Ot.isSet,Kt=Ot&&Ot.isTypedArray,Qt=A("length"),Zt=w({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),Jt=w({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),$t=w({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),te=function w(wt){function xt(t){if(Jn(t)&&!qo(t)&&!(t instanceof Rt)){if(t instanceof Ot)return t;if(qs.call(t,"__wrapped__"))return Sn(t)}return new Ot(t)}function Dt(){}function Ot(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=F}function Rt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Bt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Ft(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function qt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var n=t[e];this.set(n[0],n[1])}}function Ht(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new qt;++e<i;)this.add(t[e])}function jt(t){this.size=(this.__data__=new Ft(t)).size}function Qt(t,e){var i,n=qo(t),s=!n&&Vo(t),r=!n&&!s&&Yo(t),o=!n&&!s&&!r&&Uo(t),a=(s=(n=n||s||r||o)?T(t.length,Rs):[]).length;for(i in t)!e&&!qs.call(t,i)||n&&("length"==i||r&&("offset"==i||"parent"==i)||o&&("buffer"==i||"byteLength"==i||"byteOffset"==i)||cn(i,a))||s.push(i);return s}function ee(t){var e=t.length;return e?t[Ue(0,e-1)]:F}function ie(t,e){return _n(xi(t),ce(e,0,t.length))}function ne(t){return _n(xi(t))}function se(t,e,i){(i===F||Gn(t[e],i))&&(i!==F||e in t)||he(t,e,i)}function re(t,e,i){var n=t[e];qs.call(t,e)&&Gn(n,i)&&(i!==F||e in t)||he(t,e,i)}function oe(t,e){for(var i=t.length;i--;)if(Gn(t[i][0],e))return i;return-1}function ae(t,e,i,n){return Fr(t,(function(t,s,r){e(n,t,i(t),r)})),n}function le(t,e){return t&&Si(e,ds(e),t)}function he(t,e,i){"__proto__"==e&&sr?sr(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function ue(t,e){for(var i=-1,n=e.length,s=Es(n),r=null==t;++i<n;)s[i]=r?F:us(t,e[i]);return s}function ce(t,e,i){return t==t&&(i!==F&&(t=t<=i?t:i),e!==F&&(t=t>=e?t:e)),t}function de(t,e,i,n,r,o){var a,l=1&e,h=2&e,u=4&e;if(i&&(a=r?i(t,n,r,o):i(t)),a!==F)return a;if(!Zn(t))return t;if(n=qo(t)){if(a=function(t){var e=t.length,i=t.constructor(e);return e&&"string"==typeof t[0]&&qs.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!l)return xi(t,a)}else{var c=Kr(t),d="[object Function]"==c||"[object GeneratorFunction]"==c;if(Yo(t))return yi(t,l);if("[object Object]"==c||"[object Arguments]"==c||d&&!r){if(a=h||d?{}:ln(t),!l)return h?function(t,e){return Si(t,Xr(t),e)}(t,function(t,e){return t&&Si(e,ps(e),t)}(a,t)):function(t,e){return Si(t,Ur(t),e)}(t,le(a,t))}else{if(!Lt[c])return r?t:{};a=hn(t,c,de,l)}}if(o||(o=new jt),r=o.get(t))return r;o.set(t,a);h=u?h?$i:Ji:h?ps:ds;var p=n?F:h(t);return s(p||t,(function(n,s){p&&(n=t[s=n]),re(a,s,de(n,e,i,s,t,o))})),a}function pe(t,e,i){var n=i.length;if(null==t)return!n;for(t=Ls(t);n--;){var s=i[n],r=e[s],o=t[s];if(o===F&&!(s in t)||!r(o))return!1}return!0}function fe(t,e,i){if("function"!=typeof t)throw new Ns("Expected a function");return Jr((function(){t.apply(F,i)}),e)}function me(t,e,i,n){var s=-1,r=l,o=!0,a=t.length,c=[],d=e.length;if(!a)return c;i&&(e=u(e,D(i))),n?(r=h,o=!1):200<=e.length&&(r=C,o=!1,e=new Ht(e));t:for(;++s<a;){var p=t[s],f=null==i?p:i(p);p=n||0!==p?p:0;if(o&&f==f){for(var m=d;m--;)if(e[m]===f)continue t;c.push(p)}else r(e,f,n)||c.push(p)}return c}function ge(t,e){var i=!0;return Fr(t,(function(t,n,s){return i=!!e(t,n,s)})),i}function ye(t,e,i){for(var n=-1,s=t.length;++n<s;){var r=t[n],o=e(r);if(null!=o&&(a===F?o==o&&!is(o):i(o,a)))var a=o,l=r}return l}function be(t,e){var i=[];return Fr(t,(function(t,n,s){e(t,n,s)&&i.push(t)})),i}function ve(t,e,i,n,s){var r=-1,o=t.length;for(i||(i=un),s||(s=[]);++r<o;){var a=t[r];0<e&&i(a)?1<e?ve(a,e-1,i,n,s):c(s,a):n||(s[s.length]=a)}return s}function _e(t,e){return t&&qr(t,e,ds)}function Ae(t,e){return t&&Hr(t,e,ds)}function we(t,e){return a(e,(function(e){return Xn(t[e])}))}function xe(t,e){for(var i=0,n=(e=mi(e,t)).length;null!=t&&i<n;)t=t[An(e[i++])];return i&&i==n?t:F}function Se(t,e,i){return e=e(t),qo(t)?e:c(e,i(t))}function Te(t){if(null==t)t=t===F?"[object Undefined]":"[object Null]";else if(nr&&nr in Ls(t)){var e=qs.call(t,nr),i=t[nr];try{t[nr]=F;var n=!0}catch(t){}var s=js.call(t);n&&(e?t[nr]=i:delete t[nr]),t=s}else t=js.call(t);return t}function De(t,e){return t>e}function Ee(t,e){return null!=t&&qs.call(t,e)}function Ce(t,e){return null!=t&&e in Ls(t)}function Pe(t,e,i){for(var n=i?h:l,s=t[0].length,r=t.length,o=r,a=Es(r),c=1/0,d=[];o--;){var p=t[o];o&&e&&(p=u(p,D(e))),c=gr(p.length,c),a[o]=!i&&(e||120<=s&&120<=p.length)?new Ht(o&&p):F}p=t[0];var f=-1,m=a[0];t:for(;++f<s&&d.length<c;){var g=p[f],y=e?e(g):g;g=i||0!==g?g:0;if(m?!C(m,y):!n(d,y,i)){for(o=r;--o;){var b=a[o];if(b?!C(b,y):!n(t[o],y,i))continue t}m&&m.push(y),d.push(g)}}return d}function ke(t,e,n){return null==(e=null==(t=2>(e=mi(e,t)).length?t:xe(t,ti(e,0,-1)))?t:t[An(Pn(e))])?F:i(e,t,n)}function Ie(t){return Jn(t)&&"[object Arguments]"==Te(t)}function Le(t,e,i,n,s){if(t===e)e=!0;else if(null==t||null==e||!Jn(t)&&!Jn(e))e=t!=t&&e!=e;else t:{var r,o,a=qo(t),l=qo(e),h="[object Object]"==(r="[object Arguments]"==(r=a?"[object Array]":Kr(t))?"[object Object]":r);l="[object Object]"==(o="[object Arguments]"==(o=l?"[object Array]":Kr(e))?"[object Object]":o);if((o=r==o)&&Yo(t)){if(!Yo(e)){e=!1;break t}a=!0,h=!1}if(o&&!h)s||(s=new jt),e=a||Uo(t)?Qi(t,e,i,n,Le,s):function(t,e,i,n,s,r,o){switch(i){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)break;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":if(t.byteLength!=e.byteLength||!r(new Ks(t),new Ks(e)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return Gn(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=L;case"[object Set]":if(a||(a=N),t.size!=e.size&&!(1&n))break;return(i=o.get(t))?i==e:(n|=2,o.set(t,e),e=Qi(a(t),a(e),n,s,r,o),o.delete(t),e);case"[object Symbol]":if(Nr)return Nr.call(t)==Nr.call(e)}return!1}(t,e,r,i,n,Le,s);else{if(!(1&i)&&(a=h&&qs.call(t,"__wrapped__"),r=l&&qs.call(e,"__wrapped__"),a||r)){t=a?t.value():t,e=r?e.value():e,s||(s=new jt),e=Le(t,e,i,n,s);break t}if(o)e:if(s||(s=new jt),a=1&i,r=Ji(t),l=r.length,o=Ji(e).length,l==o||a){for(h=l;h--;){var u=r[h];if(!(a?u in e:qs.call(e,u))){e=!1;break e}}if((o=s.get(t))&&s.get(e))e=o==e;else{o=!0,s.set(t,e),s.set(e,t);for(var c=a;++h<l;){var d=t[u=r[h]],p=e[u];if(n)var f=a?n(p,d,u,e,t,s):n(d,p,u,t,e,s);if(f===F?d!==p&&!Le(d,p,i,n,s):!f){o=!1;break}c||(c="constructor"==u)}o&&!c&&((i=t.constructor)!=(n=e.constructor)&&"constructor"in t&&"constructor"in e&&!("function"==typeof i&&i instanceof i&&"function"==typeof n&&n instanceof n)&&(o=!1)),s.delete(t),s.delete(e),e=o}}else e=!1;else e=!1}}return e}function Oe(t,e,i,n){var s=i.length,r=s,o=!n;if(null==t)return!r;for(t=Ls(t);s--;){var a=i[s];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++s<r;){var l=(a=i[s])[0],h=t[l],u=a[1];if(o&&a[2]){if(h===F&&!(l in t))return!1}else{if(a=new jt,n)var c=n(h,u,l,t,e,a);if(c===F?!Le(u,h,3,n,a):!c)return!1}}return!0}function Re(t){return!(!Zn(t)||Ys&&Ys in t)&&(Xn(t)?Ws:gt).test(wn(t))}function Ne(t){return"function"==typeof t?t:null==t?_s:"object"==typeof t?qo(t)?qe(t[0],t[1]):Ve(t):Ss(t)}function Me(t){if(!mn(t))return fr(t);var e,i=[];for(e in Ls(t))qs.call(t,e)&&"constructor"!=e&&i.push(e);return i}function Be(t,e){return t<e}function Fe(t,e){var i=-1,n=zn(t)?Es(t.length):[];return Fr(t,(function(t,s,r){n[++i]=e(t,s,r)})),n}function Ve(t){var e=rn(t);return 1==e.length&&e[0][2]?gn(e[0][0],e[0][1]):function(i){return i===t||Oe(i,t,e)}}function qe(t,e){return pn(t)&&e==e&&!Zn(e)?gn(An(t),e):function(i){var n=us(i,t);return n===F&&n===e?cs(i,t):Le(e,n,3)}}function He(t,e,i,n,s){t!==e&&qr(e,(function(r,o){if(Zn(r)){s||(s=new jt);var a=s,l=t[o],h=e[o];if(f=a.get(h))se(t,o,f);else{var u=(f=n?n(l,h,o+"",t,e,a):F)===F;if(u){var c=qo(h),d=!c&&Yo(h),p=!c&&!d&&Uo(h),f=h;c||d||p?qo(l)?f=l:Wn(l)?f=xi(l):d?(u=!1,f=yi(h,!0)):p?(u=!1,f=vi(h,!0)):f=[]:ts(h)||Vo(h)?(f=l,Vo(l)?f=ls(l):(!Zn(l)||i&&Xn(l))&&(f=ln(h))):u=!1}u&&(a.set(h,f),He(f,h,i,n,a),a.delete(h)),se(t,o,f)}}else(a=n?n(t[o],r,o+"",t,e,s):F)===F&&(a=r),se(t,o,a)}),ps)}function Ye(t,e){var i=t.length;if(i)return cn(e+=0>e?i:0,i)?t[e]:F}function je(t,e,i){var n=-1;return e=u(e.length?e:[_s],D(nn())),function(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].c;return t}(t=Fe(t,(function(t){return{a:u(e,(function(e){return e(t)})),b:++n,c:t}})),(function(t,e){var n;t:{n=-1;for(var s=t.a,r=e.a,o=s.length,a=i.length;++n<o;){var l=_i(s[n],r[n]);if(l){n=n>=a?l:l*("desc"==i[n]?-1:1);break t}}n=t.b-e.b}return n}))}function Ge(t,e,i){for(var n=-1,s=e.length,r={};++n<s;){var o=e[n],a=xe(t,o);i(a,o)&&Je(r,mi(o,t),a)}return r}function ze(t,e,i,n){var s=n?b:y,r=-1,o=e.length,a=t;for(t===e&&(e=xi(e)),i&&(a=u(t,D(i)));++r<o;){var l=0,h=e[r];for(h=i?i(h):h;-1<(l=s(a,h,l,n));)a!==t&&tr.call(a,l,1),tr.call(t,l,1)}return t}function We(t,e){for(var i=t?e.length:0,n=i-1;i--;){var s=e[i];if(i==n||s!==r){var r=s;cn(s)?tr.call(t,s,1):li(t,s)}}}function Ue(t,e){return t+hr(vr()*(e-t+1))}function Xe(t,e){var i="";if(!t||1>e||9007199254740991<e)return i;do{e%2&&(i+=t),(e=hr(e/2))&&(t+=t)}while(e);return i}function Ke(t,e){return $r(yn(t,e,_s),t+"")}function Qe(t){return ee(ms(t))}function Ze(t,e){var i=ms(t);return _n(i,ce(e,0,i.length))}function Je(t,e,i,n){if(!Zn(t))return t;for(var s=-1,r=(e=mi(e,t)).length,o=r-1,a=t;null!=a&&++s<r;){var l=An(e[s]),h=i;if(s!=o){var u=a[l];(h=n?n(u,l,a):F)===F&&(h=Zn(u)?u:cn(e[s+1])?[]:{})}re(a,l,h),a=a[l]}return t}function $e(t){return _n(ms(t))}function ti(t,e,i){var n=-1,s=t.length;for(0>e&&(e=-e>s?0:s+e),0>(i=i>s?s:i)&&(i+=s),s=e>i?0:i-e>>>0,e>>>=0,i=Es(s);++n<s;)i[n]=t[n+e];return i}function ei(t,e){var i;return Fr(t,(function(t,n,s){return!(i=e(t,n,s))})),!!i}function ii(t,e,i){var n=0,s=null==t?n:t.length;if("number"==typeof e&&e==e&&2147483647>=s){for(;n<s;){var r=n+s>>>1,o=t[r];null!==o&&!is(o)&&(i?o<=e:o<e)?n=r+1:s=r}return s}return ni(t,e,_s,i)}function ni(t,e,i,n){e=i(e);for(var s=0,r=null==t?0:t.length,o=e!=e,a=null===e,l=is(e),h=e===F;s<r;){var u=hr((s+r)/2),c=i(t[u]),d=c!==F,p=null===c,f=c==c,m=is(c);(o?n||f:h?f&&(n||d):a?f&&d&&(n||!p):l?f&&d&&!p&&(n||!m):!p&&!m&&(n?c<=e:c<e))?s=u+1:r=u}return gr(r,4294967294)}function si(t,e){for(var i=-1,n=t.length,s=0,r=[];++i<n;){var o=t[i],a=e?e(o):o;if(!i||!Gn(a,l)){var l=a;r[s++]=0===o?0:o}}return r}function ri(t){return"number"==typeof t?t:is(t)?q:+t}function oi(t){if("string"==typeof t)return t;if(qo(t))return u(t,oi)+"";if(is(t))return Mr?Mr.call(t):"";var e=t+"";return"0"==e&&1/t==-V?"-0":e}function ai(t,e,i){var n=-1,s=l,r=t.length,o=!0,a=[],u=a;if(i)o=!1,s=h;else if(200<=r){if(s=e?null:zr(t))return N(s);o=!1,s=C,u=new Ht}else u=e?[]:a;t:for(;++n<r;){var c=t[n],d=e?e(c):c;c=i||0!==c?c:0;if(o&&d==d){for(var p=u.length;p--;)if(u[p]===d)continue t;e&&u.push(d),a.push(c)}else s(u,d,i)||(u!==a&&u.push(d),a.push(c))}return a}function li(t,e){return null==(t=2>(e=mi(e,t)).length?t:xe(t,ti(e,0,-1)))||delete t[An(Pn(e))]}function hi(t,e,i,n){for(var s=t.length,r=n?s:-1;(n?r--:++r<s)&&e(t[r],r,t););return i?ti(t,n?0:r,n?r+1:s):ti(t,n?r+1:0,n?s:r)}function ui(t,e){var i=t;return i instanceof Rt&&(i=i.value()),d(e,(function(t,e){return e.func.apply(e.thisArg,c([t],e.args))}),i)}function ci(t,e,i){var n=t.length;if(2>n)return n?ai(t[0]):[];for(var s=-1,r=Es(n);++s<n;)for(var o=t[s],a=-1;++a<n;)a!=s&&(r[s]=me(r[s]||o,t[a],e,i));return ai(ve(r,1),e,i)}function di(t,e,i){for(var n=-1,s=t.length,r=e.length,o={};++n<s;)i(o,t[n],n<r?e[n]:F);return o}function pi(t){return Wn(t)?t:[]}function fi(t){return"function"==typeof t?t:_s}function mi(t,e){return qo(t)?t:pn(t,e)?[t]:to(hs(t))}function gi(t,e,i){var n=t.length;return i=i===F?n:i,!e&&i>=n?t:ti(t,e,i)}function yi(t,e){if(e)return t.slice();var i=t.length;i=Qs?Qs(i):new t.constructor(i);return t.copy(i),i}function bi(t){var e=new t.constructor(t.byteLength);return new Ks(e).set(new Ks(t)),e}function vi(t,e){return new t.constructor(e?bi(t.buffer):t.buffer,t.byteOffset,t.length)}function _i(t,e){if(t!==e){var i=t!==F,n=null===t,s=t==t,r=is(t),o=e!==F,a=null===e,l=e==e,h=is(e);if(!a&&!h&&!r&&t>e||r&&o&&l&&!a&&!h||n&&o&&l||!i&&l||!s)return 1;if(!n&&!r&&!h&&t<e||h&&i&&s&&!n&&!r||a&&i&&s||!o&&s||!l)return-1}return 0}function Ai(t,e,i,n){var s=-1,r=t.length,o=i.length,a=-1,l=e.length,h=mr(r-o,0),u=Es(l+h);for(n=!n;++a<l;)u[a]=e[a];for(;++s<o;)(n||s<r)&&(u[i[s]]=t[s]);for(;h--;)u[a++]=t[s++];return u}function wi(t,e,i,n){var s=-1,r=t.length,o=-1,a=i.length,l=-1,h=e.length,u=mr(r-a,0),c=Es(u+h);for(n=!n;++s<u;)c[s]=t[s];for(u=s;++l<h;)c[u+l]=e[l];for(;++o<a;)(n||s<r)&&(c[u+i[o]]=t[s++]);return c}function xi(t,e){var i=-1,n=t.length;for(e||(e=Es(n));++i<n;)e[i]=t[i];return e}function Si(t,e,i,n){var s=!i;i||(i={});for(var r=-1,o=e.length;++r<o;){var a=e[r],l=n?n(i[a],t[a],a,i,t):F;l===F&&(l=t[a]),s?he(i,a,l):re(i,a,l)}return i}function Ti(t,e){return function(i,s){var r=qo(i)?n:ae,o=e?e():{};return r(i,t,nn(s,2),o)}}function Di(t){return Ke((function(e,i){var n=-1,s=i.length,r=1<s?i[s-1]:F,o=2<s?i[2]:F;r=3<t.length&&"function"==typeof r?(s--,r):F;for(o&&dn(i[0],i[1],o)&&(r=3>s?F:r,s=1),e=Ls(e);++n<s;)(o=i[n])&&t(e,o,n,r);return e}))}function Ei(t,e){return function(i,n){if(null==i)return i;if(!zn(i))return t(i,n);for(var s=i.length,r=e?s:-1,o=Ls(i);(e?r--:++r<s)&&!1!==n(o[r],r,o););return i}}function Ci(t){return function(e,i,n){for(var s=-1,r=Ls(e),o=(n=n(e)).length;o--;){var a=n[t?o:++s];if(!1===i(r[a],a,r))break}return e}}function Pi(t){return function(e){e=hs(e);var i=Ct.test(e)?B(e):F,n=i?i[0]:e.charAt(0);return e=i?gi(i,1).join(""):e.slice(1),n[t]()+e}}function ki(t){return function(e){return d(bs(ys(e).replace(St,"")),t,"")}}function Ii(t){return function(){switch((e=arguments).length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var e,i=Br(t.prototype);return Zn(e=t.apply(i,e))?e:i}}function Li(t,e,n){var s=Ii(t);return function r(){for(var o=arguments.length,a=Es(o),l=o,h=en(r);l--;)a[l]=arguments[l];return(o-=(l=3>o&&a[0]!==h&&a[o-1]!==h?[]:R(a,h)).length)<n?ji(t,e,Ni,r.placeholder,F,a,l,F,F,n-o):i(this&&this!==Vt&&this instanceof r?s:t,this,a)}}function Oi(t){return function(e,i,n){var s=Ls(e);if(!zn(e)){var r=nn(i,3);e=ds(e),i=function(t){return r(s[t],t,s)}}return-1<(i=t(e,i,n))?s[r?e[i]:i]:F}}function Ri(t){return Zi((function(e){var i=e.length,n=i,s=Ot.prototype.thru;for(t&&e.reverse();n--;){if("function"!=typeof(o=e[n]))throw new Ns("Expected a function");if(s&&!r&&"wrapper"==tn(o))var r=new Ot([],!0)}for(n=r?n:i;++n<i;){var o,a="wrapper"==(s=tn(o=e[n]))?Wr(o):F;r=a&&fn(a[0])&&424==a[1]&&!a[4].length&&1==a[9]?r[tn(a[0])].apply(r,a[3]):1==o.length&&fn(o)?r[s]():r.thru(o)}return function(){var t=(s=arguments)[0];if(r&&1==s.length&&qo(t))return r.plant(t).value();for(var n=0,s=i?e[n].apply(this,s):t;++n<i;)s=e[n].call(this,s);return s}}))}function Ni(t,e,i,n,s,r,o,a,l,h){var u=128&e,c=1&e,d=2&e,p=24&e,f=512&e,m=d?F:Ii(t);return function g(){for(var y=arguments.length,b=Es(y),v=y;v--;)b[v]=arguments[v];if(p){var _,A=en(g);v=b.length;for(_=0;v--;)b[v]===A&&++_}if(n&&(b=Ai(b,n,s,p)),r&&(b=wi(b,r,o,p)),y-=_,p&&y<h)return A=R(b,A),ji(t,e,Ni,g.placeholder,i,b,A,a,l,h-y);if(A=c?i:this,v=d?A[t]:t,y=b.length,a){_=b.length;for(var w=gr(a.length,_),x=xi(b);w--;){var S=a[w];b[w]=cn(S,_)?x[S]:F}}else f&&1<y&&b.reverse();return u&&l<y&&(b.length=l),this&&this!==Vt&&this instanceof g&&(v=m||Ii(v)),v.apply(A,b)}}function Mi(t,e){return function(i,n){return function(t,e,i){var n={};return _e(t,(function(t,s,r){e(n,i(t),s,r)})),n}(i,t,e(n))}}function Bi(t,e){return function(i,n){var s;if(i===F&&n===F)return e;if(i!==F&&(s=i),n!==F){if(s===F)return n;"string"==typeof i||"string"==typeof n?(i=oi(i),n=oi(n)):(i=ri(i),n=ri(n)),s=t(i,n)}return s}}function Fi(t){return Zi((function(e){return e=u(e,D(nn())),Ke((function(n){var s=this;return t(e,(function(t){return i(t,s,n)}))}))}))}function Vi(t,e){var i=(e=e===F?" ":oi(e)).length;return 2>i?i?Xe(e,t):e:(i=Xe(e,lr(t/M(e))),Ct.test(e)?gi(B(i),0,t).join(""):i.slice(0,t))}function qi(t,e,n,s){var r=1&e,o=Ii(t);return function e(){for(var a=-1,l=arguments.length,h=-1,u=s.length,c=Es(u+l),d=this&&this!==Vt&&this instanceof e?o:t;++h<u;)c[h]=s[h];for(;l--;)c[h++]=arguments[++a];return i(d,r?n:this,c)}}function Hi(t){return function(e,i,n){n&&"number"!=typeof n&&dn(e,i,n)&&(i=n=F),e=ss(e),i===F?(i=e,e=0):i=ss(i),n=n===F?e<i?1:-1:ss(n);var s=-1;i=mr(lr((i-e)/(n||1)),0);for(var r=Es(i);i--;)r[t?i:++s]=e,e+=n;return r}}function Yi(t){return function(e,i){return"string"==typeof e&&"string"==typeof i||(e=as(e),i=as(i)),t(e,i)}}function ji(t,e,i,n,s,r,o,a,l,h){var u=8&e;return 4&(e=(e|(u?32:64))&~(u?64:32))||(e&=-4),s=[t,e,s,u?r:F,u?o:F,r=u?F:r,o=u?F:o,a,l,h],i=i.apply(F,s),fn(t)&&Zr(i,s),i.placeholder=n,bn(i,t,e)}function Gi(t){var e=Is[t];return function(t,i){if(t=as(t),i=null==i?0:gr(rs(i),292)){var n=(hs(t)+"e").split("e");return+((n=(hs(n=e(n[0]+"e"+(+n[1]+i)))+"e").split("e"))[0]+"e"+(+n[1]-i))}return e(t)}}function zi(t){return function(e){var i=Kr(e);return"[object Map]"==i?L(e):"[object Set]"==i?function(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=[t,t]})),i}(e):function(t,e){return u(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Wi(t,e,i,n,s,r,o,a){var l=2&e;if(!l&&"function"!=typeof t)throw new Ns("Expected a function");var h=n?n.length:0;if(h||(e&=-97,n=s=F),o=o===F?o:mr(rs(o),0),a=a===F?a:rs(a),h-=s?s.length:0,64&e){var u=n,c=s;n=s=F}var d=l?F:Wr(t);return r=[t,e,i,n,s,u,c,r,o,a],d&&(e=(i=r[1])|(t=d[1]),n=128==t&&8==i||128==t&&256==i&&r[7].length<=d[8]||384==t&&d[7].length<=d[8]&&8==i,131>e||n)&&(1&t&&(r[2]=d[2],e|=1&i?0:4),(i=d[3])&&(n=r[3],r[3]=n?Ai(n,i,d[4]):i,r[4]=n?R(r[3],"__lodash_placeholder__"):d[4]),(i=d[5])&&(n=r[5],r[5]=n?wi(n,i,d[6]):i,r[6]=n?R(r[5],"__lodash_placeholder__"):d[6]),(i=d[7])&&(r[7]=i),128&t&&(r[8]=null==r[8]?d[8]:gr(r[8],d[8])),null==r[9]&&(r[9]=d[9]),r[0]=d[0],r[1]=e),t=r[0],e=r[1],i=r[2],n=r[3],s=r[4],!(a=r[9]=r[9]===F?l?0:t.length:mr(r[9]-h,0))&&24&e&&(e&=-25),bn((d?Yr:Zr)(e&&1!=e?8==e||16==e?Li(t,e,a):32!=e&&33!=e||s.length?Ni.apply(F,r):qi(t,e,i,n):function(t,e,i){var n=1&e,s=Ii(t);return function e(){return(this&&this!==Vt&&this instanceof e?s:t).apply(n?i:this,arguments)}}(t,e,i),r),t,e)}function Ui(t,e,i,n){return t===F||Gn(t,Bs[i])&&!qs.call(n,i)?e:t}function Xi(t,e,i,n,s,r){return Zn(t)&&Zn(e)&&(r.set(e,t),He(t,e,F,Xi,r),r.delete(e)),t}function Ki(t){return ts(t)?F:t}function Qi(t,e,i,n,s,r){var o=1&i,a=t.length;if(a!=(l=e.length)&&!(o&&l>a))return!1;if((l=r.get(t))&&r.get(e))return l==e;var l=-1,h=!0,u=2&i?new Ht:F;for(r.set(t,e),r.set(e,t);++l<a;){var c=t[l],d=e[l];if(n)var p=o?n(d,c,l,e,t,r):n(c,d,l,t,e,r);if(p!==F){if(p)continue;h=!1;break}if(u){if(!f(e,(function(t,e){if(!C(u,e)&&(c===t||s(c,t,i,n,r)))return u.push(e)}))){h=!1;break}}else if(c!==d&&!s(c,d,i,n,r)){h=!1;break}}return r.delete(t),r.delete(e),h}function Zi(t){return $r(yn(t,F,En),t+"")}function Ji(t){return Se(t,ds,Ur)}function $i(t){return Se(t,ps,Xr)}function tn(t){for(var e=t.name+"",i=Cr[e],n=qs.call(Cr,e)?i.length:0;n--;){var s=i[n],r=s.func;if(null==r||r==t)return s.name}return e}function en(t){return(qs.call(xt,"placeholder")?xt:t).placeholder}function nn(){var t=(t=xt.iteratee||As)===As?Ne:t;return arguments.length?t(arguments[0],arguments[1]):t}function sn(t,e){var i=t.__data__,n=typeof e;return("string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e)?i["string"==typeof e?"string":"hash"]:i.map}function rn(t){for(var e=ds(t),i=e.length;i--;){var n=e[i],s=t[n];e[i]=[n,s,s==s&&!Zn(s)]}return e}function on(t,e){var i=null==t?F:t[e];return Re(i)?i:F}function an(t,e,i){for(var n=-1,s=(e=mi(e,t)).length,r=!1;++n<s;){var o=An(e[n]);if(!(r=null!=t&&i(t,o)))break;t=t[o]}return r||++n!=s?r:!!(s=null==t?0:t.length)&&Qn(s)&&cn(o,s)&&(qo(t)||Vo(t))}function ln(t){return"function"!=typeof t.constructor||mn(t)?{}:Br(Zs(t))}function hn(i,n,s,r){var o=i.constructor;switch(n){case"[object ArrayBuffer]":return bi(i);case"[object Boolean]":case"[object Date]":return new o(+i);case"[object DataView]":return n=r?bi(i.buffer):i.buffer,new i.constructor(n,i.byteOffset,i.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return vi(i,r);case"[object Map]":return d(n=r?s(L(i),1):L(i),t,new i.constructor);case"[object Number]":case"[object String]":return new o(i);case"[object RegExp]":return(n=new i.constructor(i.source,pt.exec(i))).lastIndex=i.lastIndex,n;case"[object Set]":return d(n=r?s(N(i),1):N(i),e,new i.constructor);case"[object Symbol]":return Nr?Ls(Nr.call(i)):{}}}function un(t){return qo(t)||Vo(t)||!!(er&&t&&t[er])}function cn(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||bt.test(t))&&-1<t&&0==t%1&&t<e}function dn(t,e,i){if(!Zn(i))return!1;var n=typeof e;return!!("number"==n?zn(i)&&cn(e,i.length):"string"==n&&e in i)&&Gn(i[e],t)}function pn(t,e){if(qo(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!is(t))||$.test(t)||!J.test(t)||null!=e&&t in Ls(e)}function fn(t){var e=tn(t),i=xt[e];return"function"==typeof i&&e in Rt.prototype&&(t===i||!!(e=Wr(i))&&t===e[0])}function mn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Bs)}function gn(t,e){return function(i){return null!=i&&i[t]===e&&(e!==F||t in Ls(i))}}function yn(t,e,n){return e=mr(e===F?t.length-1:e,0),function(){for(var s=arguments,r=-1,o=mr(s.length-e,0),a=Es(o);++r<o;)a[r]=s[e+r];for(r=-1,o=Es(e+1);++r<e;)o[r]=s[r];return o[e]=n(a),i(t,this,o)}}function bn(t,e,i){var n=e+"";e=$r;var s,r=xn;return i=r(s=(s=n.match(lt))?s[1].split(ht):[],i),(r=i.length)&&(i[s=r-1]=(1<r?"& ":"")+i[s],i=i.join(2<r?", ":" "),n=n.replace(at,"{\n/* [wrapped with "+i+"] */\n")),e(t,n)}function vn(t){var e=0,i=0;return function(){var n=yr(),s=16-(n-i);if(i=n,0<s){if(800<=++e)return arguments[0]}else e=0;return t.apply(F,arguments)}}function _n(t,e){var i=-1,n=(s=t.length)-1;for(e=e===F?s:e;++i<e;){var s,r=t[s=Ue(i,n)];t[s]=t[i],t[i]=r}return t.length=e,t}function An(t){if("string"==typeof t||is(t))return t;var e=t+"";return"0"==e&&1/t==-V?"-0":e}function wn(t){if(null!=t){try{return Vs.call(t)}catch(t){}return t+""}return""}function xn(t,e){return s(H,(function(i){var n="_."+i[0];e&i[1]&&!l(t,n)&&t.push(n)})),t.sort()}function Sn(t){if(t instanceof Rt)return t.clone();var e=new Ot(t.__wrapped__,t.__chain__);return e.__actions__=xi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Tn(t,e,i){var n=null==t?0:t.length;return n?(0>(i=null==i?0:rs(i))&&(i=mr(n+i,0)),g(t,nn(e,3),i)):-1}function Dn(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var s=n-1;return i!==F&&(s=rs(i),s=0>i?mr(n+s,0):gr(s,n-1)),g(t,nn(e,3),s,!0)}function En(t){return null!=t&&t.length?ve(t,1):[]}function Cn(t){return t&&t.length?t[0]:F}function Pn(t){var e=null==t?0:t.length;return e?t[e-1]:F}function kn(t,e){return t&&t.length&&e&&e.length?ze(t,e):t}function In(t){return null==t?t:_r.call(t)}function Ln(t){if(!t||!t.length)return[];var e=0;return t=a(t,(function(t){if(Wn(t))return e=mr(t.length,e),!0})),T(e,(function(e){return u(t,A(e))}))}function On(t,e){if(!t||!t.length)return[];var n=Ln(t);return null==e?n:u(n,(function(t){return i(e,F,t)}))}function Rn(t){return(t=xt(t)).__chain__=!0,t}function Nn(t,e){return e(t)}function Mn(t,e){return(qo(t)?s:Fr)(t,nn(e,3))}function Bn(t,e){return(qo(t)?r:Vr)(t,nn(e,3))}function Fn(t,e){return(qo(t)?u:Fe)(t,nn(e,3))}function Vn(t,e,i){return e=i?F:e,e=t&&null==e?t.length:e,Wi(t,128,F,F,F,F,e)}function qn(t,e){var i;if("function"!=typeof e)throw new Ns("Expected a function");return t=rs(t),function(){return 0<--t&&(i=e.apply(this,arguments)),1>=t&&(e=F),i}}function Hn(t,e,i){function n(e){var i=l,n=h;return l=h=F,f=e,c=t.apply(n,i)}function s(t){var i=t-p;return t-=f,p===F||i>=e||0>i||g&&t>=u}function r(){var t=Co();if(s(t))return o(t);var i,n=Jr;i=t-f,t=e-(t-p),i=g?gr(t,u-i):t,d=n(r,i)}function o(t){return d=F,y&&l?n(t):(l=h=F,c)}function a(){var t=Co(),i=s(t);if(l=arguments,h=this,p=t,i){if(d===F)return f=t=p,d=Jr(r,e),m?n(t):c;if(g)return d=Jr(r,e),n(p)}return d===F&&(d=Jr(r,e)),c}var l,h,u,c,d,p,f=0,m=!1,g=!1,y=!0;if("function"!=typeof t)throw new Ns("Expected a function");return e=as(e)||0,Zn(i)&&(m=!!i.leading,u=(g="maxWait"in i)?mr(as(i.maxWait)||0,e):u,y="trailing"in i?!!i.trailing:y),a.cancel=function(){d!==F&&Gr(d),f=0,l=p=h=d=F},a.flush=function(){return d===F?c:o(Co())},a}function Yn(t,e){function i(){var n=arguments,s=e?e.apply(this,n):n[0],r=i.cache;return r.has(s)?r.get(s):(n=t.apply(this,n),i.cache=r.set(s,n)||r,n)}if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ns("Expected a function");return i.cache=new(Yn.Cache||qt),i}function jn(t){if("function"!=typeof t)throw new Ns("Expected a function");return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function Gn(t,e){return t===e||t!=t&&e!=e}function zn(t){return null!=t&&Qn(t.length)&&!Xn(t)}function Wn(t){return Jn(t)&&zn(t)}function Un(t){if(!Jn(t))return!1;var e=Te(t);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ts(t)}function Xn(t){return!!Zn(t)&&("[object Function]"==(t=Te(t))||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t)}function Kn(t){return"number"==typeof t&&t==rs(t)}function Qn(t){return"number"==typeof t&&-1<t&&0==t%1&&9007199254740991>=t}function Zn(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Jn(t){return null!=t&&"object"==typeof t}function $n(t){return"number"==typeof t||Jn(t)&&"[object Number]"==Te(t)}function ts(t){return!(!Jn(t)||"[object Object]"!=Te(t))&&(null===(t=Zs(t))||"function"==typeof(t=qs.call(t,"constructor")&&t.constructor)&&t instanceof t&&Vs.call(t)==Gs)}function es(t){return"string"==typeof t||!qo(t)&&Jn(t)&&"[object String]"==Te(t)}function is(t){return"symbol"==typeof t||Jn(t)&&"[object Symbol]"==Te(t)}function ns(t){if(!t)return[];if(zn(t))return es(t)?B(t):xi(t);if(ir&&t[ir]){t=t[ir]();for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}return("[object Map]"==(e=Kr(t))?L:"[object Set]"==e?N:ms)(t)}function ss(t){return t?(t=as(t))===V||t===-V?17976931348623157e292*(0>t?-1:1):t==t?t:0:0===t?t:0}function rs(t){var e=(t=ss(t))%1;return t==t?e?t-e:t:0}function os(t){return t?ce(rs(t),0,4294967295):0}function as(t){if("number"==typeof t)return t;if(is(t))return q;if(Zn(t)&&(t=Zn(t="function"==typeof t.valueOf?t.valueOf():t)?t+"":t),"string"!=typeof t)return 0===t?t:+t;t=t.replace(st,"");var e=mt.test(t);return e||yt.test(t)?Mt(t.slice(2),e?2:8):ft.test(t)?q:+t}function ls(t){return Si(t,ps(t))}function hs(t){return null==t?"":oi(t)}function us(t,e,i){return(t=null==t?F:xe(t,e))===F?i:t}function cs(t,e){return null!=t&&an(t,e,Ce)}function ds(t){return zn(t)?Qt(t):Me(t)}function ps(t){if(zn(t))t=Qt(t,!0);else if(Zn(t)){var e,i=mn(t),n=[];for(e in t)("constructor"!=e||!i&&qs.call(t,e))&&n.push(e);t=n}else{if(e=[],null!=t)for(i in Ls(t))e.push(i);t=e}return t}function fs(t,e){if(null==t)return{};var i=u($i(t),(function(t){return[t]}));return e=nn(e),Ge(t,i,(function(t,i){return e(t,i[0])}))}function ms(t){return null==t?[]:E(t,ds(t))}function gs(t){return va(hs(t).toLowerCase())}function ys(t){return(t=hs(t))&&t.replace(vt,Zt).replace(Tt,"")}function bs(t,e,i){return t=hs(t),(e=i?F:e)===F?Pt.test(t)?t.match(Et)||[]:t.match(ut)||[]:t.match(e)||[]}function vs(t){return function(){return t}}function _s(t){return t}function As(t){return Ne("function"==typeof t?t:de(t,1))}function ws(t,e,i){var n=ds(e),r=we(e,n);null!=i||Zn(e)&&(r.length||!n.length)||(i=e,e=t,t=this,r=we(e,ds(e)));var o=!(Zn(i)&&"chain"in i&&!i.chain),a=Xn(t);return s(r,(function(i){var n=e[i];t[i]=n,a&&(t.prototype[i]=function(){var e=this.__chain__;if(o||e){var i=t(this.__wrapped__);return(i.__actions__=xi(this.__actions__)).push({func:n,args:arguments,thisArg:t}),i.__chain__=e,i}return n.apply(t,c([this.value()],arguments))})})),t}function xs(){}function Ss(t){return pn(t)?A(An(t)):function(t){return function(e){return xe(e,t)}}(t)}function Ts(){return[]}function Ds(){return!1}var Es=(wt=null==wt?Vt:te.defaults(Vt.Object(),wt,te.pick(Vt,kt))).Array,Cs=wt.Date,Ps=wt.Error,ks=wt.Function,Is=wt.Math,Ls=wt.Object,Os=wt.RegExp,Rs=wt.String,Ns=wt.TypeError,Ms=Es.prototype,Bs=Ls.prototype,Fs=wt["__core-js_shared__"],Vs=ks.prototype.toString,qs=Bs.hasOwnProperty,Hs=0,Ys=function(){var t=/[^.]+$/.exec(Fs&&Fs.keys&&Fs.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),js=Bs.toString,Gs=Vs.call(Ls),zs=Vt._,Ws=Os("^"+Vs.call(qs).replace(it,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Us=Yt?wt.Buffer:F,Xs=wt.Symbol,Ks=wt.Uint8Array,Qs=Us?Us.f:F,Zs=O(Ls.getPrototypeOf,Ls),Js=Ls.create,$s=Bs.propertyIsEnumerable,tr=Ms.splice,er=Xs?Xs.isConcatSpreadable:F,ir=Xs?Xs.iterator:F,nr=Xs?Xs.toStringTag:F,sr=function(){try{var t=on(Ls,"defineProperty");return t({},"",{}),t}catch(t){}}(),rr=wt.clearTimeout!==Vt.clearTimeout&&wt.clearTimeout,or=Cs&&Cs.now!==Vt.Date.now&&Cs.now,ar=wt.setTimeout!==Vt.setTimeout&&wt.setTimeout,lr=Is.ceil,hr=Is.floor,ur=Ls.getOwnPropertySymbols,cr=Us?Us.isBuffer:F,dr=wt.isFinite,pr=Ms.join,fr=O(Ls.keys,Ls),mr=Is.max,gr=Is.min,yr=Cs.now,br=wt.parseInt,vr=Is.random,_r=Ms.reverse,Ar=on(wt,"DataView"),wr=on(wt,"Map"),xr=on(wt,"Promise"),Sr=on(wt,"Set"),Tr=on(wt,"WeakMap"),Dr=on(Ls,"create"),Er=Tr&&new Tr,Cr={},Pr=wn(Ar),kr=wn(wr),Ir=wn(xr),Lr=wn(Sr),Or=wn(Tr),Rr=Xs?Xs.prototype:F,Nr=Rr?Rr.valueOf:F,Mr=Rr?Rr.toString:F,Br=function(){function t(){}return function(e){return Zn(e)?Js?Js(e):(t.prototype=e,e=new t,t.prototype=F,e):{}}}();xt.templateSettings={escape:K,evaluate:Q,interpolate:Z,variable:"",imports:{_:xt}},xt.prototype=Dt.prototype,xt.prototype.constructor=xt,Ot.prototype=Br(Dt.prototype),Ot.prototype.constructor=Ot,Rt.prototype=Br(Dt.prototype),Rt.prototype.constructor=Rt,Bt.prototype.clear=function(){this.__data__=Dr?Dr(null):{},this.size=0},Bt.prototype.delete=function(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t},Bt.prototype.get=function(t){var e=this.__data__;return Dr?"__lodash_hash_undefined__"===(t=e[t])?F:t:qs.call(e,t)?e[t]:F},Bt.prototype.has=function(t){var e=this.__data__;return Dr?e[t]!==F:qs.call(e,t)},Bt.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Dr&&e===F?"__lodash_hash_undefined__":e,this},Ft.prototype.clear=function(){this.__data__=[],this.size=0},Ft.prototype.delete=function(t){var e=this.__data__;return!(0>(t=oe(e,t))||(t==e.length-1?e.pop():tr.call(e,t,1),--this.size,0))},Ft.prototype.get=function(t){var e=this.__data__;return 0>(t=oe(e,t))?F:e[t][1]},Ft.prototype.has=function(t){return-1<oe(this.__data__,t)},Ft.prototype.set=function(t,e){var i=this.__data__,n=oe(i,t);return 0>n?(++this.size,i.push([t,e])):i[n][1]=e,this},qt.prototype.clear=function(){this.size=0,this.__data__={hash:new Bt,map:new(wr||Ft),string:new Bt}},qt.prototype.delete=function(t){return t=sn(this,t).delete(t),this.size-=t?1:0,t},qt.prototype.get=function(t){return sn(this,t).get(t)},qt.prototype.has=function(t){return sn(this,t).has(t)},qt.prototype.set=function(t,e){var i=sn(this,t),n=i.size;return i.set(t,e),this.size+=i.size==n?0:1,this},Ht.prototype.add=Ht.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Ht.prototype.has=function(t){return this.__data__.has(t)},jt.prototype.clear=function(){this.__data__=new Ft,this.size=0},jt.prototype.delete=function(t){var e=this.__data__;return t=e.delete(t),this.size=e.size,t},jt.prototype.get=function(t){return this.__data__.get(t)},jt.prototype.has=function(t){return this.__data__.has(t)},jt.prototype.set=function(t,e){var i=this.__data__;if(i instanceof Ft){var n=i.__data__;if(!wr||199>n.length)return n.push([t,e]),this.size=++i.size,this;i=this.__data__=new qt(n)}return i.set(t,e),this.size=i.size,this};var Fr=Ei(_e),Vr=Ei(Ae,!0),qr=Ci(),Hr=Ci(!0),Yr=Er?function(t,e){return Er.set(t,e),t}:_s,jr=sr?function(t,e){return sr(t,"toString",{configurable:!0,enumerable:!1,value:vs(e),writable:!0})}:_s,Gr=rr||function(t){return Vt.clearTimeout(t)},zr=Sr&&1/N(new Sr([,-0]))[1]==V?function(t){return new Sr(t)}:xs,Wr=Er?function(t){return Er.get(t)}:xs,Ur=ur?function(t){return null==t?[]:(t=Ls(t),a(ur(t),(function(e){return $s.call(t,e)})))}:Ts,Xr=ur?function(t){for(var e=[];t;)c(e,Ur(t)),t=Zs(t);return e}:Ts,Kr=Te;(Ar&&"[object DataView]"!=Kr(new Ar(new ArrayBuffer(1)))||wr&&"[object Map]"!=Kr(new wr)||xr&&"[object Promise]"!=Kr(xr.resolve())||Sr&&"[object Set]"!=Kr(new Sr)||Tr&&"[object WeakMap]"!=Kr(new Tr))&&(Kr=function(t){var e=Te(t);if(t=(t="[object Object]"==e?t.constructor:F)?wn(t):"")switch(t){case Pr:return"[object DataView]";case kr:return"[object Map]";case Ir:return"[object Promise]";case Lr:return"[object Set]";case Or:return"[object WeakMap]"}return e});var Qr=Fs?Xn:Ds,Zr=vn(Yr),Jr=ar||function(t,e){return Vt.setTimeout(t,e)},$r=vn(jr),to=function(t){var e=(t=Yn(t,(function(t){return 500===e.size&&e.clear(),t}))).cache;return t}((function(t){var e=[];return tt.test(t)&&e.push(""),t.replace(et,(function(t,i,n,s){e.push(n?s.replace(ct,"$1"):i||t)})),e})),eo=Ke((function(t,e){return Wn(t)?me(t,ve(e,1,Wn,!0)):[]})),io=Ke((function(t,e){var i=Pn(e);return Wn(i)&&(i=F),Wn(t)?me(t,ve(e,1,Wn,!0),nn(i,2)):[]})),no=Ke((function(t,e){var i=Pn(e);return Wn(i)&&(i=F),Wn(t)?me(t,ve(e,1,Wn,!0),F,i):[]})),so=Ke((function(t){var e=u(t,pi);return e.length&&e[0]===t[0]?Pe(e):[]})),ro=Ke((function(t){var e=Pn(t),i=u(t,pi);return e===Pn(i)?e=F:i.pop(),i.length&&i[0]===t[0]?Pe(i,nn(e,2)):[]})),oo=Ke((function(t){var e=Pn(t),i=u(t,pi);return(e="function"==typeof e?e:F)&&i.pop(),i.length&&i[0]===t[0]?Pe(i,F,e):[]})),ao=Ke(kn),lo=Zi((function(t,e){var i=null==t?0:t.length,n=ue(t,e);return We(t,u(e,(function(t){return cn(t,i)?+t:t})).sort(_i)),n})),ho=Ke((function(t){return ai(ve(t,1,Wn,!0))})),uo=Ke((function(t){var e=Pn(t);return Wn(e)&&(e=F),ai(ve(t,1,Wn,!0),nn(e,2))})),co=Ke((function(t){var e="function"==typeof(e=Pn(t))?e:F;return ai(ve(t,1,Wn,!0),F,e)})),po=Ke((function(t,e){return Wn(t)?me(t,e):[]})),fo=Ke((function(t){return ci(a(t,Wn))})),mo=Ke((function(t){var e=Pn(t);return Wn(e)&&(e=F),ci(a(t,Wn),nn(e,2))})),go=Ke((function(t){var e="function"==typeof(e=Pn(t))?e:F;return ci(a(t,Wn),F,e)})),yo=Ke(Ln),bo=Ke((function(t){var e="function"==typeof(e=1<(e=t.length)?t[e-1]:F)?(t.pop(),e):F;return On(t,e)})),vo=Zi((function(t){function e(e){return ue(e,t)}var i=t.length,n=i?t[0]:0,s=this.__wrapped__;return!(1<i||this.__actions__.length)&&s instanceof Rt&&cn(n)?((s=s.slice(n,+n+(i?1:0))).__actions__.push({func:Nn,args:[e],thisArg:F}),new Ot(s,this.__chain__).thru((function(t){return i&&!t.length&&t.push(F),t}))):this.thru(e)})),_o=Ti((function(t,e,i){qs.call(t,i)?++t[i]:he(t,i,1)})),Ao=Oi(Tn),wo=Oi(Dn),xo=Ti((function(t,e,i){qs.call(t,i)?t[i].push(e):he(t,i,[e])})),So=Ke((function(t,e,n){var s=-1,r="function"==typeof e,o=zn(t)?Es(t.length):[];return Fr(t,(function(t){o[++s]=r?i(e,t,n):ke(t,e,n)})),o})),To=Ti((function(t,e,i){he(t,i,e)})),Do=Ti((function(t,e,i){t[i?0:1].push(e)}),(function(){return[[],[]]})),Eo=Ke((function(t,e){if(null==t)return[];var i=e.length;return 1<i&&dn(t,e[0],e[1])?e=[]:2<i&&dn(e[0],e[1],e[2])&&(e=[e[0]]),je(t,ve(e,1),[])})),Co=or||function(){return Vt.Date.now()},Po=Ke((function(t,e,i){var n=1;if(i.length){var s=R(i,en(Po));n=32|n}return Wi(t,n,e,i,s)})),ko=Ke((function(t,e,i){var n=3;if(i.length){var s=R(i,en(ko));n=32|n}return Wi(e,n,t,i,s)})),Io=Ke((function(t,e){return fe(t,1,e)})),Lo=Ke((function(t,e,i){return fe(t,as(e)||0,i)}));Yn.Cache=qt;var Oo=Ke((function(t,e){var n=(e=1==e.length&&qo(e[0])?u(e[0],D(nn())):u(ve(e,1),D(nn()))).length;return Ke((function(s){for(var r=-1,o=gr(s.length,n);++r<o;)s[r]=e[r].call(this,s[r]);return i(t,this,s)}))})),Ro=Ke((function(t,e){return Wi(t,32,F,e,R(e,en(Ro)))})),No=Ke((function(t,e){return Wi(t,64,F,e,R(e,en(No)))})),Mo=Zi((function(t,e){return Wi(t,256,F,F,F,e)})),Bo=Yi(De),Fo=Yi((function(t,e){return t>=e})),Vo=Ie(function(){return arguments}())?Ie:function(t){return Jn(t)&&qs.call(t,"callee")&&!$s.call(t,"callee")},qo=Es.isArray,Ho=Gt?D(Gt):function(t){return Jn(t)&&"[object ArrayBuffer]"==Te(t)},Yo=cr||Ds,jo=zt?D(zt):function(t){return Jn(t)&&"[object Date]"==Te(t)},Go=Wt?D(Wt):function(t){return Jn(t)&&"[object Map]"==Kr(t)},zo=Ut?D(Ut):function(t){return Jn(t)&&"[object RegExp]"==Te(t)},Wo=Xt?D(Xt):function(t){return Jn(t)&&"[object Set]"==Kr(t)},Uo=Kt?D(Kt):function(t){return Jn(t)&&Qn(t.length)&&!!It[Te(t)]},Xo=Yi(Be),Ko=Yi((function(t,e){return t<=e})),Qo=Di((function(t,e){if(mn(e)||zn(e))Si(e,ds(e),t);else for(var i in e)qs.call(e,i)&&re(t,i,e[i])})),Zo=Di((function(t,e){Si(e,ps(e),t)})),Jo=Di((function(t,e,i,n){Si(e,ps(e),t,n)})),$o=Di((function(t,e,i,n){Si(e,ds(e),t,n)})),ta=Zi(ue),ea=Ke((function(t){return t.push(F,Ui),i(Jo,F,t)})),ia=Ke((function(t){return t.push(F,Xi),i(aa,F,t)})),na=Mi((function(t,e,i){t[e]=i}),vs(_s)),sa=Mi((function(t,e,i){qs.call(t,e)?t[e].push(i):t[e]=[i]}),nn),ra=Ke(ke),oa=Di((function(t,e,i){He(t,e,i)})),aa=Di((function(t,e,i,n){He(t,e,i,n)})),la=Zi((function(t,e){var i={};if(null==t)return i;var n=!1;e=u(e,(function(e){return e=mi(e,t),n||(n=1<e.length),e})),Si(t,$i(t),i),n&&(i=de(i,7,Ki));for(var s=e.length;s--;)li(i,e[s]);return i})),ha=Zi((function(t,e){return null==t?{}:function(t,e){return Ge(t,e,(function(e,i){return cs(t,i)}))}(t,e)})),ua=zi(ds),ca=zi(ps),da=ki((function(t,e,i){return e=e.toLowerCase(),t+(i?gs(e):e)})),pa=ki((function(t,e,i){return t+(i?"-":"")+e.toLowerCase()})),fa=ki((function(t,e,i){return t+(i?" ":"")+e.toLowerCase()})),ma=Pi("toLowerCase"),ga=ki((function(t,e,i){return t+(i?"_":"")+e.toLowerCase()})),ya=ki((function(t,e,i){return t+(i?" ":"")+va(e)})),ba=ki((function(t,e,i){return t+(i?" ":"")+e.toUpperCase()})),va=Pi("toUpperCase"),_a=Ke((function(t,e){try{return i(t,F,e)}catch(t){return Un(t)?t:new Ps(t)}})),Aa=Zi((function(t,e){return s(e,(function(e){e=An(e),he(t,e,Po(t[e],t))})),t})),wa=Ri(),xa=Ri(!0),Sa=Ke((function(t,e){return function(i){return ke(i,t,e)}})),Ta=Ke((function(t,e){return function(i){return ke(t,i,e)}})),Da=Fi(u),Ea=Fi(o),Ca=Fi(f),Pa=Hi(),ka=Hi(!0),Ia=Bi((function(t,e){return t+e}),0),La=Gi("ceil"),Oa=Bi((function(t,e){return t/e}),1),Ra=Gi("floor"),Na=Bi((function(t,e){return t*e}),1),Ma=Gi("round"),Ba=Bi((function(t,e){return t-e}),0);return xt.after=function(t,e){if("function"!=typeof e)throw new Ns("Expected a function");return t=rs(t),function(){if(1>--t)return e.apply(this,arguments)}},xt.ary=Vn,xt.assign=Qo,xt.assignIn=Zo,xt.assignInWith=Jo,xt.assignWith=$o,xt.at=ta,xt.before=qn,xt.bind=Po,xt.bindAll=Aa,xt.bindKey=ko,xt.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return qo(t)?t:[t]},xt.chain=Rn,xt.chunk=function(t,e,i){if(e=(i?dn(t,e,i):e===F)?1:mr(rs(e),0),!(i=null==t?0:t.length)||1>e)return[];for(var n=0,s=0,r=Es(lr(i/e));n<i;)r[s++]=ti(t,n,n+=e);return r},xt.compact=function(t){for(var e=-1,i=null==t?0:t.length,n=0,s=[];++e<i;){var r=t[e];r&&(s[n++]=r)}return s},xt.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Es(t-1),i=arguments[0];t--;)e[t-1]=arguments[t];return c(qo(i)?xi(i):[i],ve(e,1))},xt.cond=function(t){var e=null==t?0:t.length,n=nn();return t=e?u(t,(function(t){if("function"!=typeof t[1])throw new Ns("Expected a function");return[n(t[0]),t[1]]})):[],Ke((function(n){for(var s=-1;++s<e;){var r=t[s];if(i(r[0],this,n))return i(r[1],this,n)}}))},xt.conforms=function(t){return function(t){var e=ds(t);return function(i){return pe(i,t,e)}}(de(t,1))},xt.constant=vs,xt.countBy=_o,xt.create=function(t,e){var i=Br(t);return null==e?i:le(i,e)},xt.curry=function t(e,i,n){return(e=Wi(e,8,F,F,F,F,F,i=n?F:i)).placeholder=t.placeholder,e},xt.curryRight=function t(e,i,n){return(e=Wi(e,16,F,F,F,F,F,i=n?F:i)).placeholder=t.placeholder,e},xt.debounce=Hn,xt.defaults=ea,xt.defaultsDeep=ia,xt.defer=Io,xt.delay=Lo,xt.difference=eo,xt.differenceBy=io,xt.differenceWith=no,xt.drop=function(t,e,i){var n=null==t?0:t.length;return n?ti(t,0>(e=i||e===F?1:rs(e))?0:e,n):[]},xt.dropRight=function(t,e,i){var n=null==t?0:t.length;return n?ti(t,0,0>(e=n-(e=i||e===F?1:rs(e)))?0:e):[]},xt.dropRightWhile=function(t,e){return t&&t.length?hi(t,nn(e,3),!0,!0):[]},xt.dropWhile=function(t,e){return t&&t.length?hi(t,nn(e,3),!0):[]},xt.fill=function(t,e,i,n){var s=null==t?0:t.length;if(!s)return[];for(i&&"number"!=typeof i&&dn(t,e,i)&&(i=0,n=s),s=t.length,0>(i=rs(i))&&(i=-i>s?0:s+i),0>(n=n===F||n>s?s:rs(n))&&(n+=s),n=i>n?0:os(n);i<n;)t[i++]=e;return t},xt.filter=function(t,e){return(qo(t)?a:be)(t,nn(e,3))},xt.flatMap=function(t,e){return ve(Fn(t,e),1)},xt.flatMapDeep=function(t,e){return ve(Fn(t,e),V)},xt.flatMapDepth=function(t,e,i){return i=i===F?1:rs(i),ve(Fn(t,e),i)},xt.flatten=En,xt.flattenDeep=function(t){return null!=t&&t.length?ve(t,V):[]},xt.flattenDepth=function(t,e){return null!=t&&t.length?ve(t,e=e===F?1:rs(e)):[]},xt.flip=function(t){return Wi(t,512)},xt.flow=wa,xt.flowRight=xa,xt.fromPairs=function(t){for(var e=-1,i=null==t?0:t.length,n={};++e<i;){var s=t[e];n[s[0]]=s[1]}return n},xt.functions=function(t){return null==t?[]:we(t,ds(t))},xt.functionsIn=function(t){return null==t?[]:we(t,ps(t))},xt.groupBy=xo,xt.initial=function(t){return null!=t&&t.length?ti(t,0,-1):[]},xt.intersection=so,xt.intersectionBy=ro,xt.intersectionWith=oo,xt.invert=na,xt.invertBy=sa,xt.invokeMap=So,xt.iteratee=As,xt.keyBy=To,xt.keys=ds,xt.keysIn=ps,xt.map=Fn,xt.mapKeys=function(t,e){var i={};return e=nn(e,3),_e(t,(function(t,n,s){he(i,e(t,n,s),t)})),i},xt.mapValues=function(t,e){var i={};return e=nn(e,3),_e(t,(function(t,n,s){he(i,n,e(t,n,s))})),i},xt.matches=function(t){return Ve(de(t,1))},xt.matchesProperty=function(t,e){return qe(t,de(e,1))},xt.memoize=Yn,xt.merge=oa,xt.mergeWith=aa,xt.method=Sa,xt.methodOf=Ta,xt.mixin=ws,xt.negate=jn,xt.nthArg=function(t){return t=rs(t),Ke((function(e){return Ye(e,t)}))},xt.omit=la,xt.omitBy=function(t,e){return fs(t,jn(nn(e)))},xt.once=function(t){return qn(2,t)},xt.orderBy=function(t,e,i,n){return null==t?[]:(qo(e)||(e=null==e?[]:[e]),qo(i=n?F:i)||(i=null==i?[]:[i]),je(t,e,i))},xt.over=Da,xt.overArgs=Oo,xt.overEvery=Ea,xt.overSome=Ca,xt.partial=Ro,xt.partialRight=No,xt.partition=Do,xt.pick=ha,xt.pickBy=fs,xt.property=Ss,xt.propertyOf=function(t){return function(e){return null==t?F:xe(t,e)}},xt.pull=ao,xt.pullAll=kn,xt.pullAllBy=function(t,e,i){return t&&t.length&&e&&e.length?ze(t,e,nn(i,2)):t},xt.pullAllWith=function(t,e,i){return t&&t.length&&e&&e.length?ze(t,e,F,i):t},xt.pullAt=lo,xt.range=Pa,xt.rangeRight=ka,xt.rearg=Mo,xt.reject=function(t,e){return(qo(t)?a:be)(t,jn(nn(e,3)))},xt.remove=function(t,e){var i=[];if(!t||!t.length)return i;var n=-1,s=[],r=t.length;for(e=nn(e,3);++n<r;){var o=t[n];e(o,n,t)&&(i.push(o),s.push(n))}return We(t,s),i},xt.rest=function(t,e){if("function"!=typeof t)throw new Ns("Expected a function");return Ke(t,e=e===F?e:rs(e))},xt.reverse=In,xt.sampleSize=function(t,e,i){return e=(i?dn(t,e,i):e===F)?1:rs(e),(qo(t)?ie:Ze)(t,e)},xt.set=function(t,e,i){return null==t?t:Je(t,e,i)},xt.setWith=function(t,e,i,n){return n="function"==typeof n?n:F,null==t?t:Je(t,e,i,n)},xt.shuffle=function(t){return(qo(t)?ne:$e)(t)},xt.slice=function(t,e,i){var n=null==t?0:t.length;return n?(i&&"number"!=typeof i&&dn(t,e,i)?(e=0,i=n):(e=null==e?0:rs(e),i=i===F?n:rs(i)),ti(t,e,i)):[]},xt.sortBy=Eo,xt.sortedUniq=function(t){return t&&t.length?si(t):[]},xt.sortedUniqBy=function(t,e){return t&&t.length?si(t,nn(e,2)):[]},xt.split=function(t,e,i){return i&&"number"!=typeof i&&dn(t,e,i)&&(e=i=F),(i=i===F?4294967295:i>>>0)?(t=hs(t))&&("string"==typeof e||null!=e&&!zo(e))&&(!(e=oi(e))&&Ct.test(t))?gi(B(t),0,i):t.split(e,i):[]},xt.spread=function(t,e){if("function"!=typeof t)throw new Ns("Expected a function");return e=null==e?0:mr(rs(e),0),Ke((function(n){var s=n[e];return n=gi(n,0,e),s&&c(n,s),i(t,this,n)}))},xt.tail=function(t){var e=null==t?0:t.length;return e?ti(t,1,e):[]},xt.take=function(t,e,i){return t&&t.length?ti(t,0,0>(e=i||e===F?1:rs(e))?0:e):[]},xt.takeRight=function(t,e,i){var n=null==t?0:t.length;return n?ti(t,0>(e=n-(e=i||e===F?1:rs(e)))?0:e,n):[]},xt.takeRightWhile=function(t,e){return t&&t.length?hi(t,nn(e,3),!1,!0):[]},xt.takeWhile=function(t,e){return t&&t.length?hi(t,nn(e,3)):[]},xt.tap=function(t,e){return e(t),t},xt.throttle=function(t,e,i){var n=!0,s=!0;if("function"!=typeof t)throw new Ns("Expected a function");return Zn(i)&&(n="leading"in i?!!i.leading:n,s="trailing"in i?!!i.trailing:s),Hn(t,e,{leading:n,maxWait:e,trailing:s})},xt.thru=Nn,xt.toArray=ns,xt.toPairs=ua,xt.toPairsIn=ca,xt.toPath=function(t){return qo(t)?u(t,An):is(t)?[t]:xi(to(hs(t)))},xt.toPlainObject=ls,xt.transform=function(t,e,i){var n=qo(t),r=n||Yo(t)||Uo(t);if(e=nn(e,4),null==i){var o=t&&t.constructor;i=r?n?new o:[]:Zn(t)&&Xn(o)?Br(Zs(t)):{}}return(r?s:_e)(t,(function(t,n,s){return e(i,t,n,s)})),i},xt.unary=function(t){return Vn(t,1)},xt.union=ho,xt.unionBy=uo,xt.unionWith=co,xt.uniq=function(t){return t&&t.length?ai(t):[]},xt.uniqBy=function(t,e){return t&&t.length?ai(t,nn(e,2)):[]},xt.uniqWith=function(t,e){return e="function"==typeof e?e:F,t&&t.length?ai(t,F,e):[]},xt.unset=function(t,e){return null==t||li(t,e)},xt.unzip=Ln,xt.unzipWith=On,xt.update=function(t,e,i){return null==t?t:Je(t,e,fi(i)(xe(t,e)),void 0)},xt.updateWith=function(t,e,i,n){return n="function"==typeof n?n:F,null!=t&&(t=Je(t,e,fi(i)(xe(t,e)),n)),t},xt.values=ms,xt.valuesIn=function(t){return null==t?[]:E(t,ps(t))},xt.without=po,xt.words=bs,xt.wrap=function(t,e){return Ro(fi(e),t)},xt.xor=fo,xt.xorBy=mo,xt.xorWith=go,xt.zip=yo,xt.zipObject=function(t,e){return di(t||[],e||[],re)},xt.zipObjectDeep=function(t,e){return di(t||[],e||[],Je)},xt.zipWith=bo,xt.entries=ua,xt.entriesIn=ca,xt.extend=Zo,xt.extendWith=Jo,ws(xt,xt),xt.add=Ia,xt.attempt=_a,xt.camelCase=da,xt.capitalize=gs,xt.ceil=La,xt.clamp=function(t,e,i){return i===F&&(i=e,e=F),i!==F&&(i=(i=as(i))==i?i:0),e!==F&&(e=(e=as(e))==e?e:0),ce(as(t),e,i)},xt.clone=function(t){return de(t,4)},xt.cloneDeep=function(t){return de(t,5)},xt.cloneDeepWith=function(t,e){return de(t,5,e="function"==typeof e?e:F)},xt.cloneWith=function(t,e){return de(t,4,e="function"==typeof e?e:F)},xt.conformsTo=function(t,e){return null==e||pe(t,e,ds(e))},xt.deburr=ys,xt.defaultTo=function(t,e){return null==t||t!=t?e:t},xt.divide=Oa,xt.endsWith=function(t,e,i){t=hs(t),e=oi(e);var n=t.length;n=i=i===F?n:ce(rs(i),0,n);return 0<=(i-=e.length)&&t.slice(i,n)==e},xt.eq=Gn,xt.escape=function(t){return(t=hs(t))&&X.test(t)?t.replace(W,Jt):t},xt.escapeRegExp=function(t){return(t=hs(t))&&nt.test(t)?t.replace(it,"\\$&"):t},xt.every=function(t,e,i){var n=qo(t)?o:ge;return i&&dn(t,e,i)&&(e=F),n(t,nn(e,3))},xt.find=Ao,xt.findIndex=Tn,xt.findKey=function(t,e){return m(t,nn(e,3),_e)},xt.findLast=wo,xt.findLastIndex=Dn,xt.findLastKey=function(t,e){return m(t,nn(e,3),Ae)},xt.floor=Ra,xt.forEach=Mn,xt.forEachRight=Bn,xt.forIn=function(t,e){return null==t?t:qr(t,nn(e,3),ps)},xt.forInRight=function(t,e){return null==t?t:Hr(t,nn(e,3),ps)},xt.forOwn=function(t,e){return t&&_e(t,nn(e,3))},xt.forOwnRight=function(t,e){return t&&Ae(t,nn(e,3))},xt.get=us,xt.gt=Bo,xt.gte=Fo,xt.has=function(t,e){return null!=t&&an(t,e,Ee)},xt.hasIn=cs,xt.head=Cn,xt.identity=_s,xt.includes=function(t,e,i,n){return t=zn(t)?t:ms(t),i=i&&!n?rs(i):0,n=t.length,0>i&&(i=mr(n+i,0)),es(t)?i<=n&&-1<t.indexOf(e,i):!!n&&-1<y(t,e,i)},xt.indexOf=function(t,e,i){var n=null==t?0:t.length;return n?(0>(i=null==i?0:rs(i))&&(i=mr(n+i,0)),y(t,e,i)):-1},xt.inRange=function(t,e,i){return e=ss(e),i===F?(i=e,e=0):i=ss(i),(t=as(t))>=gr(e,i)&&t<mr(e,i)},xt.invoke=ra,xt.isArguments=Vo,xt.isArray=qo,xt.isArrayBuffer=Ho,xt.isArrayLike=zn,xt.isArrayLikeObject=Wn,xt.isBoolean=function(t){return!0===t||!1===t||Jn(t)&&"[object Boolean]"==Te(t)},xt.isBuffer=Yo,xt.isDate=jo,xt.isElement=function(t){return Jn(t)&&1===t.nodeType&&!ts(t)},xt.isEmpty=function(t){if(null==t)return!0;if(zn(t)&&(qo(t)||"string"==typeof t||"function"==typeof t.splice||Yo(t)||Uo(t)||Vo(t)))return!t.length;var e=Kr(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(mn(t))return!Me(t).length;for(var i in t)if(qs.call(t,i))return!1;return!0},xt.isEqual=function(t,e){return Le(t,e)},xt.isEqualWith=function(t,e,i){var n=(i="function"==typeof i?i:F)?i(t,e):F;return n===F?Le(t,e,F,i):!!n},xt.isError=Un,xt.isFinite=function(t){return"number"==typeof t&&dr(t)},xt.isFunction=Xn,xt.isInteger=Kn,xt.isLength=Qn,xt.isMap=Go,xt.isMatch=function(t,e){return t===e||Oe(t,e,rn(e))},xt.isMatchWith=function(t,e,i){return i="function"==typeof i?i:F,Oe(t,e,rn(e),i)},xt.isNaN=function(t){return $n(t)&&t!=+t},xt.isNative=function(t){if(Qr(t))throw new Ps("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Re(t)},xt.isNil=function(t){return null==t},xt.isNull=function(t){return null===t},xt.isNumber=$n,xt.isObject=Zn,xt.isObjectLike=Jn,xt.isPlainObject=ts,xt.isRegExp=zo,xt.isSafeInteger=function(t){return Kn(t)&&-9007199254740991<=t&&9007199254740991>=t},xt.isSet=Wo,xt.isString=es,xt.isSymbol=is,xt.isTypedArray=Uo,xt.isUndefined=function(t){return t===F},xt.isWeakMap=function(t){return Jn(t)&&"[object WeakMap]"==Kr(t)},xt.isWeakSet=function(t){return Jn(t)&&"[object WeakSet]"==Te(t)},xt.join=function(t,e){return null==t?"":pr.call(t,e)},xt.kebabCase=pa,xt.last=Pn,xt.lastIndexOf=function(t,e,i){var n=null==t?0:t.length;if(!n)return-1;var s=n;if(i!==F&&(s=0>(s=rs(i))?mr(n+s,0):gr(s,n-1)),e==e){for(i=s+1;i--&&t[i]!==e;);t=i}else t=g(t,v,s,!0);return t},xt.lowerCase=fa,xt.lowerFirst=ma,xt.lt=Xo,xt.lte=Ko,xt.max=function(t){return t&&t.length?ye(t,_s,De):F},xt.maxBy=function(t,e){return t&&t.length?ye(t,nn(e,2),De):F},xt.mean=function(t){return _(t,_s)},xt.meanBy=function(t,e){return _(t,nn(e,2))},xt.min=function(t){return t&&t.length?ye(t,_s,Be):F},xt.minBy=function(t,e){return t&&t.length?ye(t,nn(e,2),Be):F},xt.stubArray=Ts,xt.stubFalse=Ds,xt.stubObject=function(){return{}},xt.stubString=function(){return""},xt.stubTrue=function(){return!0},xt.multiply=Na,xt.nth=function(t,e){return t&&t.length?Ye(t,rs(e)):F},xt.noConflict=function(){return Vt._===this&&(Vt._=zs),this},xt.noop=xs,xt.now=Co,xt.pad=function(t,e,i){t=hs(t);var n=(e=rs(e))?M(t):0;return!e||n>=e?t:Vi(hr(e=(e-n)/2),i)+t+Vi(lr(e),i)},xt.padEnd=function(t,e,i){t=hs(t);var n=(e=rs(e))?M(t):0;return e&&n<e?t+Vi(e-n,i):t},xt.padStart=function(t,e,i){t=hs(t);var n=(e=rs(e))?M(t):0;return e&&n<e?Vi(e-n,i)+t:t},xt.parseInt=function(t,e,i){return i||null==e?e=0:e&&(e=+e),br(hs(t).replace(rt,""),e||0)},xt.random=function(t,e,i){if(i&&"boolean"!=typeof i&&dn(t,e,i)&&(e=i=F),i===F&&("boolean"==typeof e?(i=e,e=F):"boolean"==typeof t&&(i=t,t=F)),t===F&&e===F?(t=0,e=1):(t=ss(t),e===F?(e=t,t=0):e=ss(e)),t>e){var n=t;t=e,e=n}return i||t%1||e%1?(i=vr(),gr(t+i*(e-t+Nt("1e-"+((i+"").length-1))),e)):Ue(t,e)},xt.reduce=function(t,e,i){var n=qo(t)?d:x,s=3>arguments.length;return n(t,nn(e,4),i,s,Fr)},xt.reduceRight=function(t,e,i){var n=qo(t)?p:x,s=3>arguments.length;return n(t,nn(e,4),i,s,Vr)},xt.repeat=function(t,e,i){return e=(i?dn(t,e,i):e===F)?1:rs(e),Xe(hs(t),e)},xt.replace=function(){var t=arguments,e=hs(t[0]);return 3>t.length?e:e.replace(t[1],t[2])},xt.result=function(t,e,i){var n=-1,s=(e=mi(e,t)).length;for(s||(s=1,t=F);++n<s;){var r=null==t?F:t[An(e[n])];r===F&&(n=s,r=i),t=Xn(r)?r.call(t):r}return t},xt.round=Ma,xt.runInContext=w,xt.sample=function(t){return(qo(t)?ee:Qe)(t)},xt.size=function(t){if(null==t)return 0;if(zn(t))return es(t)?M(t):t.length;var e=Kr(t);return"[object Map]"==e||"[object Set]"==e?t.size:Me(t).length},xt.snakeCase=ga,xt.some=function(t,e,i){var n=qo(t)?f:ei;return i&&dn(t,e,i)&&(e=F),n(t,nn(e,3))},xt.sortedIndex=function(t,e){return ii(t,e)},xt.sortedIndexBy=function(t,e,i){return ni(t,e,nn(i,2))},xt.sortedIndexOf=function(t,e){var i=null==t?0:t.length;if(i){var n=ii(t,e);if(n<i&&Gn(t[n],e))return n}return-1},xt.sortedLastIndex=function(t,e){return ii(t,e,!0)},xt.sortedLastIndexBy=function(t,e,i){return ni(t,e,nn(i,2),!0)},xt.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var i=ii(t,e,!0)-1;if(Gn(t[i],e))return i}return-1},xt.startCase=ya,xt.startsWith=function(t,e,i){return t=hs(t),i=null==i?0:ce(rs(i),0,t.length),e=oi(e),t.slice(i,i+e.length)==e},xt.subtract=Ba,xt.sum=function(t){return t&&t.length?S(t,_s):0},xt.sumBy=function(t,e){return t&&t.length?S(t,nn(e,2)):0},xt.template=function(t,e,i){var n=xt.templateSettings;i&&dn(t,e,i)&&(e=F),t=hs(t),e=Jo({},e,n,Ui);var s,r,o=ds(i=Jo({},e.imports,n.imports,Ui)),a=E(i,o),l=0;i=e.interpolate||_t;var h="__p+='";i=Os((e.escape||_t).source+"|"+i.source+"|"+(i===Z?dt:_t).source+"|"+(e.evaluate||_t).source+"|$","g");var u="sourceURL"in e?"//# sourceURL="+e.sourceURL+"\n":"";if(t.replace(i,(function(e,i,n,o,a,u){return n||(n=o),h+=t.slice(l,u).replace(At,I),i&&(s=!0,h+="'+__e("+i+")+'"),a&&(r=!0,h+="';"+a+";\n__p+='"),n&&(h+="'+((__t=("+n+"))==null?'':__t)+'"),l=u+e.length,e})),h+="';",(e=e.variable)||(h="with(obj){"+h+"}"),h=(r?h.replace(Y,""):h).replace(j,"$1").replace(G,"$1;"),h="function("+(e||"obj")+"){"+(e?"":"obj||(obj={});")+"var __t,__p=''"+(s?",__e=_.escape":"")+(r?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+h+"return __p}",(e=_a((function(){return ks(o,u+"return "+h).apply(F,a)}))).source=h,Un(e))throw e;return e},xt.times=function(t,e){if(1>(t=rs(t))||9007199254740991<t)return[];var i=4294967295,n=gr(t,4294967295);for(t-=4294967295,n=T(n,e=nn(e));++i<t;)e(i);return n},xt.toFinite=ss,xt.toInteger=rs,xt.toLength=os,xt.toLower=function(t){return hs(t).toLowerCase()},xt.toNumber=as,xt.toSafeInteger=function(t){return t?ce(rs(t),-9007199254740991,9007199254740991):0===t?t:0},xt.toString=hs,xt.toUpper=function(t){return hs(t).toUpperCase()},xt.trim=function(t,e,i){return(t=hs(t))&&(i||e===F)?t.replace(st,""):t&&(e=oi(e))?gi(t=B(t),e=P(t,i=B(e)),i=k(t,i)+1).join(""):t},xt.trimEnd=function(t,e,i){return(t=hs(t))&&(i||e===F)?t.replace(ot,""):t&&(e=oi(e))?gi(t=B(t),0,e=k(t,B(e))+1).join(""):t},xt.trimStart=function(t,e,i){return(t=hs(t))&&(i||e===F)?t.replace(rt,""):t&&(e=oi(e))?gi(t=B(t),e=P(t,B(e))).join(""):t},xt.truncate=function(t,e){var i=30,n="...";if(Zn(e)){var s="separator"in e?e.separator:s;i="length"in e?rs(e.length):i,n="omission"in e?oi(e.omission):n}var r=(t=hs(t)).length;if(Ct.test(t)){var o=B(t);r=o.length}if(i>=r)return t;if(1>(r=i-M(n)))return n;if(i=o?gi(o,0,r).join(""):t.slice(0,r),s===F)return i+n;if(o&&(r+=i.length-r),zo(s)){if(t.slice(r).search(s)){var a=i;for(s.global||(s=Os(s.source,hs(pt.exec(s))+"g")),s.lastIndex=0;o=s.exec(a);)var l=o.index;i=i.slice(0,l===F?r:l)}}else t.indexOf(oi(s),r)!=r&&(-1<(s=i.lastIndexOf(s))&&(i=i.slice(0,s)));return i+n},xt.unescape=function(t){return(t=hs(t))&&U.test(t)?t.replace(z,$t):t},xt.uniqueId=function(t){var e=++Hs;return hs(t)+e},xt.upperCase=ba,xt.upperFirst=va,xt.each=Mn,xt.eachRight=Bn,xt.first=Cn,ws(xt,function(){var t={};return _e(xt,(function(e,i){qs.call(xt.prototype,i)||(t[i]=e)})),t}(),{chain:!1}),xt.VERSION="4.17.4",s("bind bindKey curry curryRight partial partialRight".split(" "),(function(t){xt[t].placeholder=xt})),s(["drop","take"],(function(t,e){Rt.prototype[t]=function(i){i=i===F?1:mr(rs(i),0);var n=this.__filtered__&&!e?new Rt(this):this.clone();return n.__filtered__?n.__takeCount__=gr(i,n.__takeCount__):n.__views__.push({size:gr(i,4294967295),type:t+(0>n.__dir__?"Right":"")}),n},Rt.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),s(["filter","map","takeWhile"],(function(t,e){var i=e+1,n=1==i||3==i;Rt.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:nn(t,3),type:i}),e.__filtered__=e.__filtered__||n,e}})),s(["head","last"],(function(t,e){var i="take"+(e?"Right":"");Rt.prototype[t]=function(){return this[i](1).value()[0]}})),s(["initial","tail"],(function(t,e){var i="drop"+(e?"":"Right");Rt.prototype[t]=function(){return this.__filtered__?new Rt(this):this[i](1)}})),Rt.prototype.compact=function(){return this.filter(_s)},Rt.prototype.find=function(t){return this.filter(t).head()},Rt.prototype.findLast=function(t){return this.reverse().find(t)},Rt.prototype.invokeMap=Ke((function(t,e){return"function"==typeof t?new Rt(this):this.map((function(i){return ke(i,t,e)}))})),Rt.prototype.reject=function(t){return this.filter(jn(nn(t)))},Rt.prototype.slice=function(t,e){t=rs(t);var i=this;return i.__filtered__&&(0<t||0>e)?new Rt(i):(0>t?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==F&&(i=0>(e=rs(e))?i.dropRight(-e):i.take(e-t)),i)},Rt.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Rt.prototype.toArray=function(){return this.take(4294967295)},_e(Rt.prototype,(function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),s=xt[n?"take"+("last"==e?"Right":""):e],r=n||/^find/.test(e);s&&(xt.prototype[e]=function(){function e(t){return t=s.apply(xt,c([t],a)),n&&d?t[0]:t}var o=this.__wrapped__,a=n?[1]:arguments,l=o instanceof Rt,h=a[0],u=l||qo(o);u&&i&&"function"==typeof h&&1!=h.length&&(l=u=!1);var d=this.__chain__,p=!!this.__actions__.length;h=r&&!d,l=l&&!p;return!r&&u?(o=l?o:new Rt(this),(o=t.apply(o,a)).__actions__.push({func:Nn,args:[e],thisArg:F}),new Ot(o,d)):h&&l?t.apply(this,a):(o=this.thru(e),h?n?o.value()[0]:o.value():o)})})),s("pop push shift sort splice unshift".split(" "),(function(t){var e=Ms[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);xt.prototype[t]=function(){var t=arguments;if(n&&!this.__chain__){var s=this.value();return e.apply(qo(s)?s:[],t)}return this[i]((function(i){return e.apply(qo(i)?i:[],t)}))}})),_e(Rt.prototype,(function(t,e){var i=xt[e];if(i){var n=i.name+"";(Cr[n]||(Cr[n]=[])).push({name:e,func:i})}})),Cr[Ni(F,2).name]=[{name:"wrapper",func:F}],Rt.prototype.clone=function(){var t=new Rt(this.__wrapped__);return t.__actions__=xi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=xi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=xi(this.__views__),t},Rt.prototype.reverse=function(){if(this.__filtered__){var t=new Rt(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Rt.prototype.value=function(){var t,e=this.__wrapped__.value(),i=this.__dir__,n=qo(e),s=0>i,r=n?e.length:0;t=r;for(var o=this.__views__,a=0,l=-1,h=o.length;++l<h;){var u=o[l],c=u.size;switch(u.type){case"drop":a+=c;break;case"dropRight":t-=c;break;case"take":t=gr(t,a+c);break;case"takeRight":a=mr(a,t-c)}}if(o=(t={start:a,end:t}).start,t=(a=t.end)-o,o=s?a:o-1,l=(a=this.__iteratees__).length,h=0,u=gr(t,this.__takeCount__),!n||!s&&r==t&&u==t)return ui(e,this.__actions__);n=[];t:for(;t--&&h<u;){for(s=-1,r=e[o+=i];++s<l;){c=(d=a[s]).type;var d=(0,d.iteratee)(r);if(2==c)r=d;else if(!d){if(1==c)continue t;break t}}n[h++]=r}return n},xt.prototype.at=vo,xt.prototype.chain=function(){return Rn(this)},xt.prototype.commit=function(){return new Ot(this.value(),this.__chain__)},xt.prototype.next=function(){this.__values__===F&&(this.__values__=ns(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?F:this.__values__[this.__index__++]}},xt.prototype.plant=function(t){for(var e,i=this;i instanceof Dt;){var n=Sn(i);n.__index__=0,n.__values__=F,e?s.__wrapped__=n:e=n;var s=n;i=i.__wrapped__}return s.__wrapped__=t,e},xt.prototype.reverse=function(){var t=this.__wrapped__;return t instanceof Rt?(this.__actions__.length&&(t=new Rt(this)),(t=t.reverse()).__actions__.push({func:Nn,args:[In],thisArg:F}),new Ot(t,this.__chain__)):this.thru(In)},xt.prototype.toJSON=xt.prototype.valueOf=xt.prototype.value=function(){return ui(this.__wrapped__,this.__actions__)},xt.prototype.first=xt.prototype.head,ir&&(xt.prototype[ir]=function(){return this}),xt}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Vt._=te,define((function(){return te}))):Ht?((Ht.exports=te)._=te,qt._=te):Vt._=te}.call(this),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).himalaya=t()}}((function(){return function t(e,i,n){function s(o,a){if(!i[o]){if(!e[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[o]={exports:{}};e[o][0].call(u.exports,(function(t){var i=e[o][1][t];return s(i||t)}),u,u.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){"use strict";function n(t){return"number"==typeof t&&isNaN(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.startsWith=function(t,e,i){return t.substr(i||0,e.length)===e},i.endsWith=function(t,e,i){var n=(i||t.length)-e.length,s=t.lastIndexOf(e,n);return-1!==s&&s===n},i.stringIncludes=function(t,e,i){return-1!==t.indexOf(e,i||0)},i.isRealNaN=n,i.arrayIncludes=function(t,e,i){var s=t.length;if(0===s)return!1;var r=0|i,o=n(e),a=r>=0?r:s+r;for(;a<s;){var l=t[a++];if(l===e)return!0;if(o&&n(l))return!0}return!1}},{}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,s=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(l){s=!0,r=l}finally{try{!n&&a.return&&a.return()}finally{if(s)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};i.default=function t(e){return e.map((function(e){var i=r(e.type);return"Element"===i?{type:i,tagName:e.tagName.toLowerCase(),attributes:u(e.attributes),children:t(e.children)}:{type:i,content:e.content}}))},i.capitialize=r,i.camelCase=o,i.castValue=a,i.unquote=l,i.splitHead=h,i.formatAttributes=u,i.formatStyles=c;var s=t("../compat");function r(t){return t.charAt(0).toUpperCase()+t.slice(1)}function o(t){return t.split("-").reduce((function(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)}))}function a(t){if("string"!=typeof t)return t;if(""===t)return t;var e=+t;return isNaN(e)?t:e}function l(t){var e=t.charAt(0),i=t.length-1;return'"'===e||"'"===e&&e===t.charAt(i)?t.slice(1,i):t}function h(t,e){var i=t.indexOf(e);return-1===i?[t]:[t.slice(0,i),t.slice(i+e.length)]}function u(t){return t.reduce((function(t,e){var i=h(e.trim(),"="),r=n(i,2),u=r[0],d=r[1];if(d=d?l(d):u,"class"===u)t.className=d.split(" ");else if("style"===u)t.style=c(d);else if((0,s.startsWith)(u,"data-")){t.dataset=t.dataset||{};var p=o(u.slice(5));t.dataset[p]=a(d)}else t[o(u)]=a(d);return t}),{})}function c(t){return t.trim().split(";").map((function(t){return t.trim().split(":")})).reduce((function(t,e){var i=n(e,2),s=i[0],r=i[1];if(r){var l=o(s.trim()),h=a(r.trim());t[l]=h}return t}),{})}},{"../compat":1}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.parseDefaults=void 0,i.parse=l;var n=o(t("./lexer")),s=o(t("./parser")),r=o(t("./formats/v0"));function o(t){return t&&t.__esModule?t:{default:t}}var a=i.parseDefaults={voidTags:["!doctype","area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],closingTags:["html","head","body","p","dt","dd","li","option","thead","th","tbody","tr","td","tfoot","colgroup"],childlessTags:["style","script","template"],format:r.default};function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,i=(0,n.default)(t,e),o=(0,s.default)(i,e);return(0,r.default)(o,e)}i.default={parse:l,parseDefaults:a}},{"./formats/v0":2,"./lexer":4,"./parser":5}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,e){var i={str:t,options:e,cursor:0,tokens:[]};return r(i),i.tokens},i.lex=r,i.lexText=o,i.lexComment=a,i.lexTag=l,i.lexTagName=h,i.lexTagAttributes=u,i.lexSkipTag=c;var n=t("./compat");function s(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function r(t){for(var e=t.str,i=e.length;t.cursor<i;){if("<"!==e.charAt(t.cursor))o(t);else if((0,n.startsWith)(e,"!--",t.cursor+1))a(t);else{var s=l(t);if(s){var r=s.toLowerCase(),h=t.options.childlessTags;(0,n.arrayIncludes)(h,r)&&c(s,t)}}}}function o(t){var e=t.str,i=t.cursor,n=e.indexOf("<",i);if(-1===n){var s=e.slice(i);return t.cursor=e.length,void t.tokens.push({type:"text",content:s})}if(n!==i){var r=e.slice(i,n);t.cursor=n,t.tokens.push({type:"text",content:r})}}function a(t){t.cursor+=4;var e=t.str,i=t.cursor,n=e.indexOf("--\x3e",i);if(-1===n){var s=e.slice(i);return t.cursor=e.length,void t.tokens.push({type:"comment",content:s})}var r=e.slice(i,n);t.cursor=n+3,t.tokens.push({type:"comment",content:r})}function l(t){var e=t.str,i="/"===e.charAt(t.cursor+1);t.tokens.push({type:"tag-start",close:i}),t.cursor+=i?2:1;var n=h(t);u(t);var s="/"===e.charAt(t.cursor);return t.tokens.push({type:"tag-end",close:s}),t.cursor+=s?2:1,n}function h(t){for(var e=t.str,i=t.cursor,n=e.length,s=i;s<n;){var r=e.charAt(s);if(!(" "===r||"/"===r||">"===r))break;s++}for(var o=s+1;o<n;){var a=e.charAt(o);if(!!(" "===a||"/"===a||">"===a))break;o++}t.cursor=o;var l=e.slice(s,o);return t.tokens.push({type:"tag",content:l}),l}function u(t){for(var e=t.str,i=t.tokens,s=t.cursor,r=null,o=s,a=[],l=e.length;s<l;){var h=e.charAt(s);if(r){h===r&&(r=null),s++}else{if("/"===h||">"===h){s!==o&&a.push(e.slice(o,s));break}if(" "===h)s!==o&&a.push(e.slice(o,s)),o=s+1,s++;else"'"===h||'"'===h?(r=h,s++):s++}}t.cursor=s;for(var u=a.length,c="attribute",d=0;d<u;d++){var p=a[d];if(p&&p.length){if(-1===p.indexOf("=")){var f=a[d+1];if(f&&(0,n.startsWith)(f,"=")){if(f.length>1){var m=p+f;i.push({type:c,content:m}),d+=1;continue}var g=a[d+2];if(d+=1,g){var y=p+"="+g;i.push({type:c,content:y}),d+=1;continue}}}if((0,n.endsWith)(p,"=")){var b=a[d+1];if(b&&!(0,n.stringIncludes)(b,"=")){var v=p+b;i.push({type:c,content:v}),d+=1;continue}var _=p.slice(0,-1);i.push({type:c,content:_})}else i.push({type:c,content:p})}}}function c(t,e){for(var i=e.str,n=e.cursor,r=e.tokens,a=i.length,l=n;l<a;){var c=i.indexOf("</",l);if(-1===c){o(e);break}var d={str:i,cursor:c+2,tokens:[]},p=h(d);if(t.toLowerCase()===p.toLowerCase()){var f=i.slice(n,c);r.push({type:"text",content:f});u(d),r.push.apply(r,[{type:"tag-start",close:!0}].concat(s(d.tokens),[{type:"tag-end",close:!1}])),e.cursor=d.cursor+1;break}l=d.cursor}}},{"./compat":1}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,e){var i={tagName:null,children:[]};return s({tokens:t,options:e,cursor:0,stack:[i]}),i.children},i.parse=s;var n=t("./compat");function s(t){for(var e=t.tokens,i=t.options,r=t.stack,o=r[r.length-1].children,a=e.length,l=t.cursor;l<a;){var h=e[l];if("tag-start"===h.type){var u=e[++l];l++;var c=u.content.toLowerCase();if(h.close){for(var d=void 0;(d=r.pop())&&c!==d.tagName;);for(;l<a;){if("tag-end"!==e[l].type)break;l++}break}if((0,n.arrayIncludes)(i.closingTags,c))for(var p=r.length-1;p>0;){if(c===r[p].tagName){o=(r=r.slice(0,p))[p-1].children;break}p-=1}for(var f=[],m=void 0;l<a&&"tag-end"!==(m=e[l]).type;)f.push(m.content),l++;l++;var g=[];if(o.push({type:"element",tagName:u.content,attributes:f,children:g}),!(m.close||(0,n.arrayIncludes)(i.voidTags,c))){r.push({tagName:c,children:g});var y={tokens:e,options:i,cursor:l,stack:r};s(y),l=y.cursor}}else o.push(h),l++}t.cursor=l}},{"./compat":1}]},{},[3])(3)})),function(t){var e="object"==typeof exports&&exports,i="object"==typeof module&&module&&module.exports==e&&module,n="object"==typeof global&&global;n.global!==n&&n.window!==n||(t=n);var s=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,r=/[\x01-\x7F]/g,o=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,a=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,l={"":"shy","":"zwnj","":"zwj","":"lrm","":"ic","":"it","":"af","":"rlm","":"ZeroWidthSpace","":"NoBreak","":"DownBreve","":"tdot","":"DotDot","\t":"Tab","\n":"NewLine","":"puncsp","":"MediumSpace","":"thinsp","":"hairsp","":"emsp13","":"ensp","":"emsp14","":"emsp","":"numsp","":"nbsp","":"ThickSpace","":"oline",_:"lowbar","":"dash","":"ndash","":"mdash","":"horbar",",":"comma",";":"semi","":"bsemi",":":"colon","":"Colone","!":"excl","":"iexcl","?":"quest","":"iquest",".":"period","":"nldr","":"mldr","":"middot","'":"apos","":"lsquo","":"rsquo","":"sbquo","":"lsaquo","":"rsaquo",'"':"quot","":"ldquo","":"rdquo","":"bdquo","":"laquo","":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","":"lceil","":"rceil","":"lfloor","":"rfloor","":"lopar","":"ropar","":"lbrke","":"rbrke","":"lbrkslu","":"rbrksld","":"lbrksld","":"rbrkslu","":"langd","":"rangd","":"lparlt","":"rpargt","":"gtlPar","":"ltrPar","":"lobrk","":"robrk","":"lang","":"rang","":"Lang","":"Rang","":"loang","":"roang","":"lbbrk","":"rbbrk","":"Vert","":"sect","":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","":"permil","":"pertenk","":"dagger","":"Dagger","":"bull","":"hybull","":"prime","":"Prime","":"tprime","":"qprime","":"bprime","":"caret","`":"grave","":"acute","":"tilde","^":"Hat","":"macr","":"breve","":"dot","":"die","":"ring","":"dblac","":"cedil","":"ogon","":"circ","":"caron","":"deg","":"copy","":"reg","":"copysr","":"wp","":"rx","":"mho","":"iiota","":"larr","":"nlarr","":"rarr","":"nrarr","":"uarr","":"darr","":"harr","":"nharr","":"varr","":"nwarr","":"nearr","":"searr","":"swarr","":"rarrw","":"nrarrw","":"Larr","":"Uarr","":"Rarr","":"Darr","":"larrtl","":"rarrtl","":"mapstoleft","":"mapstoup","":"map","":"mapstodown","":"larrhk","":"rarrhk","":"larrlp","":"rarrlp","":"harrw","":"lsh","":"rsh","":"ldsh","":"rdsh","":"crarr","":"cularr","":"curarr","":"olarr","":"orarr","":"lharu","":"lhard","":"uharr","":"uharl","":"rharu","":"rhard","":"dharr","":"dharl","":"rlarr","":"udarr","":"lrarr","":"llarr","":"uuarr","":"rrarr","":"ddarr","":"lrhar","":"rlhar","":"lArr","":"nlArr","":"uArr","":"rArr","":"nrArr","":"dArr","":"iff","":"nhArr","":"vArr","":"nwArr","":"neArr","":"seArr","":"swArr","":"lAarr","":"rAarr","":"zigrarr","":"larrb","":"rarrb","":"duarr","":"loarr","":"roarr","":"hoarr","":"forall","":"comp","":"part","":"npart","":"exist","":"nexist","":"empty","":"Del","":"in","":"notin","":"ni","":"notni","":"bepsi","":"prod","":"coprod","":"sum","+":"plus","":"pm","":"div","":"times","<":"lt","":"nlt","<":"nvlt","=":"equals","":"ne","=":"bne","":"Equal",">":"gt","":"ngt",">":"nvgt","":"not","|":"vert","":"brvbar","":"minus","":"mp","":"plusdo","":"frasl","":"setmn","":"lowast","":"compfn","":"Sqrt","":"prop","":"infin","":"angrt","":"ang","":"nang","":"angmsd","":"angsph","":"mid","":"nmid","":"par","":"npar","":"and","":"or","":"cap","":"caps","":"cup","":"cups","":"int","":"Int","":"tint","":"qint","":"oint","":"Conint","":"Cconint","":"cwint","":"cwconint","":"awconint","":"there4","":"becaus","":"ratio","":"Colon","":"minusd","":"mDDot","":"homtht","":"sim","":"nsim","":"nvsim","":"bsim","":"race","":"ac","":"acE","":"acd","":"wr","":"esim","":"nesim","":"sime","":"nsime","":"cong","":"ncong","":"simne","":"ap","":"nap","":"ape","":"apid","":"napid","":"bcong","":"CupCap","":"NotCupCap","":"nvap","":"bump","":"nbump","":"bumpe","":"nbumpe","":"doteq","":"nedot","":"eDot","":"efDot","":"erDot","":"colone","":"ecolon","":"ecir","":"cire","":"wedgeq","":"veeeq","":"trie","":"equest","":"equiv","":"nequiv","":"bnequiv","":"le","":"nle","":"nvle","":"ge","":"nge","":"nvge","":"lE","":"nlE","":"gE","":"ngE","":"lvnE","":"lnE","":"gnE","":"gvnE","":"ll","":"nLtv","":"nLt","":"gg","":"nGtv","":"nGt","":"twixt","":"lsim","":"nlsim","":"gsim","":"ngsim","":"lg","":"ntlg","":"gl","":"ntgl","":"pr","":"npr","":"sc","":"nsc","":"prcue","":"nprcue","":"sccue","":"nsccue","":"prsim","":"scsim","":"NotSucceedsTilde","":"sub","":"nsub","":"vnsub","":"sup","":"nsup","":"vnsup","":"sube","":"nsube","":"supe","":"nsupe","":"vsubne","":"subne","":"vsupne","":"supne","":"cupdot","":"uplus","":"sqsub","":"NotSquareSubset","":"sqsup","":"NotSquareSuperset","":"sqsube","":"nsqsube","":"sqsupe","":"nsqsupe","":"sqcap","":"sqcaps","":"sqcup","":"sqcups","":"oplus","":"ominus","":"otimes","":"osol","":"odot","":"ocir","":"oast","":"odash","":"plusb","":"minusb","":"timesb","":"sdotb","":"vdash","":"nvdash","":"dashv","":"top","":"bot","":"models","":"vDash","":"nvDash","":"Vdash","":"nVdash","":"Vvdash","":"VDash","":"nVDash","":"prurel","":"vltri","":"nltri","":"vrtri","":"nrtri","":"ltrie","":"nltrie","":"nvltrie","":"rtrie","":"nrtrie","":"nvrtrie","":"origof","":"imof","":"mumap","":"hercon","":"intcal","":"veebar","":"barvee","":"angrtvb","":"lrtri","":"Wedge","":"Vee","":"xcap","":"xcup","":"diam","":"sdot","":"Star","":"divonx","":"bowtie","":"ltimes","":"rtimes","":"lthree","":"rthree","":"bsime","":"cuvee","":"cuwed","":"Sub","":"Sup","":"Cap","":"Cup","":"fork","":"epar","":"ltdot","":"gtdot","":"Ll","":"nLl","":"Gg","":"nGg","":"lesg","":"leg","":"gel","":"gesl","":"cuepr","":"cuesc","":"lnsim","":"gnsim","":"prnsim","":"scnsim","":"vellip","":"ctdot","":"utdot","":"dtdot","":"disin","":"isinsv","":"isins","":"isindot","":"notindot","":"notinvc","":"notinvb","":"isinE","":"notinE","":"nisd","":"xnis","":"nis","":"notnivc","":"notnivb","":"barwed","":"Barwed","":"drcrop","":"dlcrop","":"urcrop","":"ulcrop","":"bnot","":"profline","":"profsurf","":"telrec","":"target","":"ulcorn","":"urcorn","":"dlcorn","":"drcorn","":"frown","":"smile","":"cylcty","":"profalar","":"topbot","":"ovbar","":"solbar","":"angzarr","":"lmoust","":"rmoust","":"tbrk","":"bbrk","":"bbrktbrk","":"OverParenthesis","":"UnderParenthesis","":"OverBrace","":"UnderBrace","":"trpezium","":"elinters","":"blank","":"boxh","":"boxv","":"boxdr","":"boxdl","":"boxur","":"boxul","":"boxvr","":"boxvl","":"boxhd","":"boxhu","":"boxvh","":"boxH","":"boxV","":"boxdR","":"boxDr","":"boxDR","":"boxdL","":"boxDl","":"boxDL","":"boxuR","":"boxUr","":"boxUR","":"boxuL","":"boxUl","":"boxUL","":"boxvR","":"boxVr","":"boxVR","":"boxvL","":"boxVl","":"boxVL","":"boxHd","":"boxhD","":"boxHD","":"boxHu","":"boxhU","":"boxHU","":"boxvH","":"boxVh","":"boxVH","":"uhblk","":"lhblk","":"block","":"blk14","":"blk12","":"blk34","":"squ","":"squf","":"EmptyVerySmallSquare","":"rect","":"marker","":"fltns","":"xutri","":"utrif","":"utri","":"rtrif","":"rtri","":"xdtri","":"dtrif","":"dtri","":"ltrif","":"ltri","":"loz","":"cir","":"tridot","":"xcirc","":"ultri","":"urtri","":"lltri","":"EmptySmallSquare","":"FilledSmallSquare","":"starf","":"star","":"phone","":"female","":"male","":"spades","":"clubs","":"hearts","":"diams","":"sung","":"check","":"cross","":"malt","":"sext","":"VerticalSeparator","":"bsolhsub","":"suphsol","":"xlarr","":"xrarr","":"xharr","":"xlArr","":"xrArr","":"xhArr","":"xmap","":"dzigrarr","":"nvlArr","":"nvrArr","":"nvHarr","":"Map","":"lbarr","":"rbarr","":"lBarr","":"rBarr","":"RBarr","":"DDotrahd","":"UpArrowBar","":"DownArrowBar","":"Rarrtl","":"latail","":"ratail","":"lAtail","":"rAtail","":"larrfs","":"rarrfs","":"larrbfs","":"rarrbfs","":"nwarhk","":"nearhk","":"searhk","":"swarhk","":"nwnear","":"toea","":"tosa","":"swnwar","":"rarrc","":"nrarrc","":"cudarrr","":"ldca","":"rdca","":"cudarrl","":"larrpl","":"curarrm","":"cularrp","":"rarrpl","":"harrcir","":"Uarrocir","":"lurdshar","":"ldrushar","":"LeftRightVector","":"RightUpDownVector","":"DownLeftRightVector","":"LeftUpDownVector","":"LeftVectorBar","":"RightVectorBar","":"RightUpVectorBar","":"RightDownVectorBar","":"DownLeftVectorBar","":"DownRightVectorBar","":"LeftUpVectorBar","":"LeftDownVectorBar","":"LeftTeeVector","":"RightTeeVector","":"RightUpTeeVector","":"RightDownTeeVector","":"DownLeftTeeVector","":"DownRightTeeVector","":"LeftUpTeeVector","":"LeftDownTeeVector","":"lHar","":"uHar","":"rHar","":"dHar","":"luruhar","":"ldrdhar","":"ruluhar","":"rdldhar","":"lharul","":"llhard","":"rharul","":"lrhard","":"udhar","":"duhar","":"RoundImplies","":"erarr","":"simrarr","":"larrsim","":"rarrsim","":"rarrap","":"ltlarr","":"gtrarr","":"subrarr","":"suplarr","":"lfisht","":"rfisht","":"ufisht","":"dfisht","":"vzigzag","":"vangrt","":"angrtvbd","":"ange","":"range","":"dwangle","":"uwangle","":"angmsdaa","":"angmsdab","":"angmsdac","":"angmsdad","":"angmsdae","":"angmsdaf","":"angmsdag","":"angmsdah","":"bemptyv","":"demptyv","":"cemptyv","":"raemptyv","":"laemptyv","":"ohbar","":"omid","":"opar","":"operp","":"olcross","":"odsold","":"olcir","":"ofcir","":"olt","":"ogt","":"cirscir","":"cirE","":"solb","":"bsolb","":"boxbox","":"trisb","":"rtriltri","":"LeftTriangleBar","":"NotLeftTriangleBar","":"RightTriangleBar","":"NotRightTriangleBar","":"iinfin","":"infintie","":"nvinfin","":"eparsl","":"smeparsl","":"eqvparsl","":"lozf","":"RuleDelayed","":"dsol","":"xodot","":"xoplus","":"xotime","":"xuplus","":"xsqcup","":"fpartint","":"cirfnint","":"awint","":"rppolint","":"scpolint","":"npolint","":"pointint","":"quatint","":"intlarhk","":"pluscir","":"plusacir","":"simplus","":"plusdu","":"plussim","":"plustwo","":"mcomma","":"minusdu","":"loplus","":"roplus","":"Cross","":"timesd","":"timesbar","":"smashp","":"lotimes","":"rotimes","":"otimesas","":"Otimes","":"odiv","":"triplus","":"triminus","":"tritime","":"iprod","":"amalg","":"capdot","":"ncup","":"ncap","":"capand","":"cupor","":"cupcap","":"capcup","":"cupbrcap","":"capbrcup","":"cupcup","":"capcap","":"ccups","":"ccaps","":"ccupssm","":"And","":"Or","":"andand","":"oror","":"orslope","":"andslope","":"andv","":"orv","":"andd","":"ord","":"wedbar","":"sdote","":"simdot","":"congdot","":"ncongdot","":"easter","":"apacir","":"apE","":"napE","":"eplus","":"pluse","":"Esim","":"eDDot","":"equivDD","":"ltcir","":"gtcir","":"ltquest","":"gtquest","":"les","":"nles","":"ges","":"nges","":"lesdot","":"gesdot","":"lesdoto","":"gesdoto","":"lesdotor","":"gesdotol","":"lap","":"gap","":"lne","":"gne","":"lnap","":"gnap","":"lEg","":"gEl","":"lsime","":"gsime","":"lsimg","":"gsiml","":"lgE","":"glE","":"lesges","":"gesles","":"els","":"egs","":"elsdot","":"egsdot","":"el","":"eg","":"siml","":"simg","":"simlE","":"simgE","":"LessLess","":"NotNestedLessLess","":"GreaterGreater","":"NotNestedGreaterGreater","":"glj","":"gla","":"ltcc","":"gtcc","":"lescc","":"gescc","":"smt","":"lat","":"smte","":"smtes","":"late","":"lates","":"bumpE","":"pre","":"npre","":"sce","":"nsce","":"prE","":"scE","":"prnE","":"scnE","":"prap","":"scap","":"prnap","":"scnap","":"Pr","":"Sc","":"subdot","":"supdot","":"subplus","":"supplus","":"submult","":"supmult","":"subedot","":"supedot","":"subE","":"nsubE","":"supE","":"nsupE","":"subsim","":"supsim","":"vsubnE","":"subnE","":"vsupnE","":"supnE","":"csub","":"csup","":"csube","":"csupe","":"subsup","":"supsub","":"subsub","":"supsup","":"suphsub","":"supdsub","":"forkv","":"topfork","":"mlcp","":"Dashv","":"Vdashl","":"Barv","":"vBar","":"vBarv","":"Vbar","":"Not","":"bNot","":"rnmid","":"cirmid","":"midcir","":"topcir","":"nhpar","":"parsim","":"parsl","":"nparsl","":"flat","":"natur","":"sharp","":"curren","":"cent",$:"dollar","":"pound","":"yen","":"euro","":"sup1","":"half","":"frac13","":"frac14","":"frac15","":"frac16","":"frac18","":"sup2","":"frac23","":"frac25","":"sup3","":"frac34","":"frac35","":"frac38","":"frac45","":"frac56","":"frac58","":"frac78","":"ascr","":"aopf","":"afr","":"Aopf","":"Afr","":"Ascr","":"ordf","":"aacute","":"Aacute","":"agrave","":"Agrave","":"abreve","":"Abreve","":"acirc","":"Acirc","":"aring","":"angst","":"auml","":"Auml","":"atilde","":"Atilde","":"aogon","":"Aogon","":"amacr","":"Amacr","":"aelig","":"AElig","":"bscr","":"bopf","":"bfr","":"Bopf","":"Bscr","":"Bfr","":"cfr","":"cscr","":"copf","":"Cfr","":"Cscr","":"Copf","":"cacute","":"Cacute","":"ccirc","":"Ccirc","":"ccaron","":"Ccaron","":"cdot","":"Cdot","":"ccedil","":"Ccedil","":"incare","":"dfr","":"dd","":"dopf","":"dscr","":"Dscr","":"Dfr","":"DD","":"Dopf","":"dcaron","":"Dcaron","":"dstrok","":"Dstrok","":"eth","":"ETH","":"ee","":"escr","":"efr","":"eopf","":"Escr","":"Efr","":"Eopf","":"eacute","":"Eacute","":"egrave","":"Egrave","":"ecirc","":"Ecirc","":"ecaron","":"Ecaron","":"euml","":"Euml","":"edot","":"Edot","":"eogon","":"Eogon","":"emacr","":"Emacr","":"ffr","":"fopf","":"fscr","":"Ffr","":"Fopf","":"Fscr","":"fflig","":"ffilig","":"ffllig","":"filig",fj:"fjlig","":"fllig","":"fnof","":"gscr","":"gopf","":"gfr","":"Gscr","":"Gopf","":"Gfr","":"gacute","":"gbreve","":"Gbreve","":"gcirc","":"Gcirc","":"gdot","":"Gdot","":"Gcedil","":"hfr","":"planckh","":"hscr","":"hopf","":"Hscr","":"Hfr","":"Hopf","":"hcirc","":"Hcirc","":"hbar","":"hstrok","":"Hstrok","":"iopf","":"ifr","":"iscr","":"ii","":"Iopf","":"Iscr","":"Im","":"iacute","":"Iacute","":"igrave","":"Igrave","":"icirc","":"Icirc","":"iuml","":"Iuml","":"itilde","":"Itilde","":"Idot","":"iogon","":"Iogon","":"imacr","":"Imacr","":"ijlig","":"IJlig","":"imath","":"jscr","":"jopf","":"jfr","":"Jscr","":"Jfr","":"Jopf","":"jcirc","":"Jcirc","":"jmath","":"kopf","":"kscr","":"kfr","":"Kscr","":"Kopf","":"Kfr","":"kcedil","":"Kcedil","":"lfr","":"lscr","":"ell","":"lopf","":"Lscr","":"Lfr","":"Lopf","":"lacute","":"Lacute","":"lcaron","":"Lcaron","":"lcedil","":"Lcedil","":"lstrok","":"Lstrok","":"lmidot","":"Lmidot","":"mfr","":"mopf","":"mscr","":"Mfr","":"Mopf","":"Mscr","":"nfr","":"nopf","":"nscr","":"Nopf","":"Nscr","":"Nfr","":"nacute","":"Nacute","":"ncaron","":"Ncaron","":"ntilde","":"Ntilde","":"ncedil","":"Ncedil","":"numero","":"eng","":"ENG","":"oopf","":"ofr","":"oscr","":"Oscr","":"Ofr","":"Oopf","":"ordm","":"oacute","":"Oacute","":"ograve","":"Ograve","":"ocirc","":"Ocirc","":"ouml","":"Ouml","":"odblac","":"Odblac","":"otilde","":"Otilde","":"oslash","":"Oslash","":"omacr","":"Omacr","":"oelig","":"OElig","":"pfr","":"pscr","":"popf","":"Popf","":"Pfr","":"Pscr","":"qopf","":"qfr","":"qscr","":"Qscr","":"Qfr","":"Qopf","":"kgreen","":"rfr","":"ropf","":"rscr","":"Rscr","":"Re","":"Ropf","":"racute","":"Racute","":"rcaron","":"Rcaron","":"rcedil","":"Rcedil","":"sopf","":"sscr","":"sfr","":"Sopf","":"Sfr","":"Sscr","":"oS","":"sacute","":"Sacute","":"scirc","":"Scirc","":"scaron","":"Scaron","":"scedil","":"Scedil","":"szlig","":"tfr","":"tscr","":"topf","":"Tscr","":"Tfr","":"Topf","":"tcaron","":"Tcaron","":"tcedil","":"Tcedil","":"trade","":"tstrok","":"Tstrok","":"uscr","":"uopf","":"ufr","":"Uopf","":"Ufr","":"Uscr","":"uacute","":"Uacute","":"ugrave","":"Ugrave","":"ubreve","":"Ubreve","":"ucirc","":"Ucirc","":"uring","":"Uring","":"uuml","":"Uuml","":"udblac","":"Udblac","":"utilde","":"Utilde","":"uogon","":"Uogon","":"umacr","":"Umacr","":"vfr","":"vopf","":"vscr","":"Vfr","":"Vopf","":"Vscr","":"wopf","":"wscr","":"wfr","":"Wscr","":"Wopf","":"Wfr","":"wcirc","":"Wcirc","":"xfr","":"xscr","":"xopf","":"Xopf","":"Xfr","":"Xscr","":"yfr","":"yscr","":"yopf","":"Yscr","":"Yfr","":"Yopf","":"yacute","":"Yacute","":"ycirc","":"Ycirc","":"yuml","":"Yuml","":"zscr","":"zfr","":"zopf","":"Zfr","":"Zopf","":"Zscr","":"zacute","":"Zacute","":"zcaron","":"Zcaron","":"zdot","":"Zdot","":"imped","":"thorn","":"THORN","":"napos","":"alpha","":"Alpha","":"beta","":"Beta","":"gamma","":"Gamma","":"delta","":"Delta","":"epsi","":"epsiv","":"Epsilon","":"gammad","":"Gammad","":"zeta","":"Zeta","":"eta","":"Eta","":"theta","":"thetav","":"Theta","":"iota","":"Iota","":"kappa","":"kappav","":"Kappa","":"lambda","":"Lambda","":"mu","":"micro","":"Mu","":"nu","":"Nu","":"xi","":"Xi","":"omicron","":"Omicron","":"pi","":"piv","":"Pi","":"rho","":"rhov","":"Rho","":"sigma","":"Sigma","":"sigmaf","":"tau","":"Tau","":"upsi","":"Upsilon","":"Upsi","":"phi","":"phiv","":"Phi","":"chi","":"Chi","":"psi","":"Psi","":"omega","":"ohm","":"acy","":"Acy","":"bcy","":"Bcy","":"vcy","":"Vcy","":"gcy","":"Gcy","":"gjcy","":"GJcy","":"dcy","":"Dcy","":"djcy","":"DJcy","":"iecy","":"IEcy","":"iocy","":"IOcy","":"jukcy","":"Jukcy","":"zhcy","":"ZHcy","":"zcy","":"Zcy","":"dscy","":"DScy","":"icy","":"Icy","":"iukcy","":"Iukcy","":"yicy","":"YIcy","":"jcy","":"Jcy","":"jsercy","":"Jsercy","":"kcy","":"Kcy","":"kjcy","":"KJcy","":"lcy","":"Lcy","":"ljcy","":"LJcy","":"mcy","":"Mcy","":"ncy","":"Ncy","":"njcy","":"NJcy","":"ocy","":"Ocy","":"pcy","":"Pcy","":"rcy","":"Rcy","":"scy","":"Scy","":"tcy","":"Tcy","":"tshcy","":"TSHcy","":"ucy","":"Ucy","":"ubrcy","":"Ubrcy","":"fcy","":"Fcy","":"khcy","":"KHcy","":"tscy","":"TScy","":"chcy","":"CHcy","":"dzcy","":"DZcy","":"shcy","":"SHcy","":"shchcy","":"SHCHcy","":"hardcy","":"HARDcy","":"ycy","":"Ycy","":"softcy","":"SOFTcy","":"ecy","":"Ecy","":"yucy","":"YUcy","":"yacy","":"YAcy","":"aleph","":"beth","":"gimel","":"daleth"},h=/["&'<>`]/g,u={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},c=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,d=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,p=/&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)([=a-zA-Z0-9])?/g,f={aacute:"",Aacute:"",abreve:"",Abreve:"",ac:"",acd:"",acE:"",acirc:"",Acirc:"",acute:"",acy:"",Acy:"",aelig:"",AElig:"",af:"",afr:"",Afr:"",agrave:"",Agrave:"",alefsym:"",aleph:"",alpha:"",Alpha:"",amacr:"",Amacr:"",amalg:"",amp:"&",AMP:"&",and:"",And:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",aogon:"",Aogon:"",aopf:"",Aopf:"",ap:"",apacir:"",ape:"",apE:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",aring:"",Aring:"",ascr:"",Ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",atilde:"",Atilde:"",auml:"",Auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",bcy:"",Bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",beta:"",Beta:"",beth:"",between:"",bfr:"",Bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bnot:"",bNot:"",bopf:"",Bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxhD:"",boxHd:"",boxHD:"",boxhu:"",boxhU:"",boxHu:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpe:"",bumpE:"",bumpeq:"",Bumpeq:"",cacute:"",Cacute:"",cap:"",Cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",ccaron:"",Ccaron:"",ccedil:"",Ccedil:"",ccirc:"",Ccirc:"",Cconint:"",ccups:"",ccupssm:"",cdot:"",Cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",chcy:"",CHcy:"",check:"",checkmark:"",chi:"",Chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cire:"",cirE:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",colone:"",Colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",cscr:"",Cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cup:"",Cup:"",cupbrcap:"",cupcap:"",CupCap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",dArr:"",Darr:"",dash:"",dashv:"",Dashv:"",dbkarow:"",dblac:"",dcaron:"",Dcaron:"",dcy:"",Dcy:"",dd:"",DD:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",delta:"",Delta:"",demptyv:"",dfisht:"",dfr:"",Dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",djcy:"",DJcy:"",dlcorn:"",dlcrop:"",dollar:"$",dopf:"",Dopf:"",dot:"",Dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",downarrow:"",Downarrow:"",DownArrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",dscr:"",Dscr:"",dscy:"",DScy:"",dsol:"",dstrok:"",Dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",dzcy:"",DZcy:"",dzigrarr:"",eacute:"",Eacute:"",easter:"",ecaron:"",Ecaron:"",ecir:"",ecirc:"",Ecirc:"",ecolon:"",ecy:"",Ecy:"",eDDot:"",edot:"",eDot:"",Edot:"",ee:"",efDot:"",efr:"",Efr:"",eg:"",egrave:"",Egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",emacr:"",Emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",eng:"",ENG:"",ensp:"",eogon:"",Eogon:"",eopf:"",Eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",epsilon:"",Epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",esim:"",Esim:"",eta:"",Eta:"",eth:"",ETH:"",euml:"",Euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",fcy:"",Fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",ffr:"",Ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",fopf:"",Fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",gamma:"",Gamma:"",gammad:"",Gammad:"",gap:"",gbreve:"",Gbreve:"",Gcedil:"",gcirc:"",Gcirc:"",gcy:"",Gcy:"",gdot:"",Gdot:"",ge:"",gE:"",gel:"",gEl:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",gfr:"",Gfr:"",gg:"",Gg:"",ggg:"",gimel:"",gjcy:"",GJcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",gopf:"",Gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",gscr:"",Gscr:"",gsim:"",gsime:"",gsiml:"",gt:">",Gt:"",GT:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",hardcy:"",HARDcy:"",harr:"",hArr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",hcirc:"",Hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",hstrok:"",Hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",iacute:"",Iacute:"",ic:"",icirc:"",Icirc:"",icy:"",Icy:"",Idot:"",iecy:"",IEcy:"",iexcl:"",iff:"",ifr:"",Ifr:"",igrave:"",Igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",ijlig:"",IJlig:"",Im:"",imacr:"",Imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",int:"",Int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",iocy:"",IOcy:"",iogon:"",Iogon:"",iopf:"",Iopf:"",iota:"",Iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",itilde:"",Itilde:"",iukcy:"",Iukcy:"",iuml:"",Iuml:"",jcirc:"",Jcirc:"",jcy:"",Jcy:"",jfr:"",Jfr:"",jmath:"",jopf:"",Jopf:"",jscr:"",Jscr:"",jsercy:"",Jsercy:"",jukcy:"",Jukcy:"",kappa:"",Kappa:"",kappav:"",kcedil:"",Kcedil:"",kcy:"",Kcy:"",kfr:"",Kfr:"",kgreen:"",khcy:"",KHcy:"",kjcy:"",KJcy:"",kopf:"",Kopf:"",kscr:"",Kscr:"",lAarr:"",lacute:"",Lacute:"",laemptyv:"",lagran:"",lambda:"",Lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larr:"",lArr:"",Larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",latail:"",lAtail:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",lcaron:"",Lcaron:"",lcedil:"",Lcedil:"",lceil:"",lcub:"{",lcy:"",Lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",leftarrow:"",Leftarrow:"",LeftArrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",Leftrightarrow:"",LeftRightArrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",leg:"",lEg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",lfr:"",Lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",ljcy:"",LJcy:"",ll:"",Ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",lmidot:"",Lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",Longleftarrow:"",LongLeftArrow:"",longleftrightarrow:"",Longleftrightarrow:"",LongLeftRightArrow:"",longmapsto:"",longrightarrow:"",Longrightarrow:"",LongRightArrow:"",looparrowleft:"",looparrowright:"",lopar:"",lopf:"",Lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",lstrok:"",Lstrok:"",lt:"<",Lt:"",LT:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",map:"",Map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",mcy:"",Mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",mfr:"",Mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",mopf:"",Mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",mu:"",Mu:"",multimap:"",mumap:"",nabla:"",nacute:"",Nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",ncaron:"",Ncaron:"",ncedil:"",Ncedil:"",ncong:"",ncongdot:"",ncup:"",ncy:"",Ncy:"",ndash:"",ne:"",nearhk:"",nearr:"",neArr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:"\n",nexist:"",nexists:"",nfr:"",Nfr:"",nge:"",ngE:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",ngt:"",nGt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",njcy:"",NJcy:"",nlarr:"",nlArr:"",nldr:"",nle:"",nlE:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nlt:"",nLt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",not:"",Not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrarr:"",nrArr:"",nrarrc:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",nscr:"",Nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsube:"",nsubE:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupe:"",nsupE:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",ntilde:"",Ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",nu:"",Nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",oacute:"",Oacute:"",oast:"",ocir:"",ocirc:"",Ocirc:"",ocy:"",Ocy:"",odash:"",odblac:"",Odblac:"",odiv:"",odot:"",odsold:"",oelig:"",OElig:"",ofcir:"",ofr:"",Ofr:"",ogon:"",ograve:"",Ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",omacr:"",Omacr:"",omega:"",Omega:"",omicron:"",Omicron:"",omid:"",ominus:"",oopf:"",Oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",or:"",Or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",oscr:"",Oscr:"",oslash:"",Oslash:"",osol:"",otilde:"",Otilde:"",otimes:"",Otimes:"",otimesas:"",ouml:"",Ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",pcy:"",Pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",pfr:"",Pfr:"",phi:"",Phi:"",phiv:"",phmmat:"",phone:"",pi:"",Pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",pr:"",Pr:"",prap:"",prcue:"",pre:"",prE:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",pscr:"",Pscr:"",psi:"",Psi:"",puncsp:"",qfr:"",Qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",qscr:"",Qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",racute:"",Racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarr:"",rArr:"",Rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",rarrtl:"",Rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",rcaron:"",Rcaron:"",rcedil:"",Rcedil:"",rceil:"",rcub:"}",rcy:"",Rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",rho:"",Rho:"",rhov:"",RightAngleBracket:"",rightarrow:"",Rightarrow:"",RightArrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",sacute:"",Sacute:"",sbquo:"",sc:"",Sc:"",scap:"",scaron:"",Scaron:"",sccue:"",sce:"",scE:"",scedil:"",Scedil:"",scirc:"",Scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",scy:"",Scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",sfr:"",Sfr:"",sfrown:"",sharp:"",shchcy:"",SHCHcy:"",shcy:"",SHcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",sigma:"",Sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",softcy:"",SOFTcy:"",sol:"/",solb:"",solbar:"",sopf:"",Sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",sscr:"",Sscr:"",ssetmn:"",ssmile:"",sstarf:"",star:"",Star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",sube:"",subE:"",subedot:"",submult:"",subne:"",subnE:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup:"",Sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supe:"",supE:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supne:"",supnE:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"\t",target:"",tau:"",Tau:"",tbrk:"",tcaron:"",Tcaron:"",tcedil:"",Tcedil:"",tcy:"",Tcy:"",tdot:"",telrec:"",tfr:"",Tfr:"",there4:"",therefore:"",Therefore:"",theta:"",Theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",thorn:"",THORN:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",topf:"",Topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",tscr:"",Tscr:"",tscy:"",TScy:"",tshcy:"",TSHcy:"",tstrok:"",Tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",uacute:"",Uacute:"",uarr:"",uArr:"",Uarr:"",Uarrocir:"",ubrcy:"",Ubrcy:"",ubreve:"",Ubreve:"",ucirc:"",Ucirc:"",ucy:"",Ucy:"",udarr:"",udblac:"",Udblac:"",udhar:"",ufisht:"",ufr:"",Ufr:"",ugrave:"",Ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",umacr:"",Umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",uogon:"",Uogon:"",uopf:"",Uopf:"",uparrow:"",Uparrow:"",UpArrow:"",UpArrowBar:"",UpArrowDownArrow:"",updownarrow:"",Updownarrow:"",UpDownArrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",upsilon:"",Upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",uring:"",Uring:"",urtri:"",uscr:"",Uscr:"",utdot:"",utilde:"",Utilde:"",utri:"",utrif:"",uuarr:"",uuml:"",Uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",vcy:"",Vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",vee:"",Vee:"",veebar:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",vfr:"",Vfr:"",vltri:"",vnsub:"",vnsup:"",vopf:"",Vopf:"",vprop:"",vrtri:"",vscr:"",Vscr:"",vsubne:"",vsubnE:"",vsupne:"",vsupnE:"",Vvdash:"",vzigzag:"",wcirc:"",Wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",wfr:"",Wfr:"",wopf:"",Wopf:"",wp:"",wr:"",wreath:"",wscr:"",Wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",xfr:"",Xfr:"",xharr:"",xhArr:"",xi:"",Xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",xopf:"",Xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",xscr:"",Xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",yacute:"",Yacute:"",yacy:"",YAcy:"",ycirc:"",Ycirc:"",ycy:"",Ycy:"",yen:"",yfr:"",Yfr:"",yicy:"",YIcy:"",yopf:"",Yopf:"",yscr:"",Yscr:"",yucy:"",YUcy:"",yuml:"",Yuml:"",zacute:"",Zacute:"",zcaron:"",Zcaron:"",zcy:"",Zcy:"",zdot:"",Zdot:"",zeetrf:"",ZeroWidthSpace:"",zeta:"",Zeta:"",zfr:"",Zfr:"",zhcy:"",ZHcy:"",zigrarr:"",zopf:"",Zopf:"",zscr:"",Zscr:"",zwj:"",zwnj:""},m={aacute:"",Aacute:"",acirc:"",Acirc:"",acute:"",aelig:"",AElig:"",agrave:"",Agrave:"",amp:"&",AMP:"&",aring:"",Aring:"",atilde:"",Atilde:"",auml:"",Auml:"",brvbar:"",ccedil:"",Ccedil:"",cedil:"",cent:"",copy:"",COPY:"",curren:"",deg:"",divide:"",eacute:"",Eacute:"",ecirc:"",Ecirc:"",egrave:"",Egrave:"",eth:"",ETH:"",euml:"",Euml:"",frac12:"",frac14:"",frac34:"",gt:">",GT:">",iacute:"",Iacute:"",icirc:"",Icirc:"",iexcl:"",igrave:"",Igrave:"",iquest:"",iuml:"",Iuml:"",laquo:"",lt:"<",LT:"<",macr:"",micro:"",middot:"",nbsp:"",not:"",ntilde:"",Ntilde:"",oacute:"",Oacute:"",ocirc:"",Ocirc:"",ograve:"",Ograve:"",ordf:"",ordm:"",oslash:"",Oslash:"",otilde:"",Otilde:"",ouml:"",Ouml:"",para:"",plusmn:"",pound:"",quot:'"',QUOT:'"',raquo:"",reg:"",REG:"",sect:"",shy:"",sup1:"",sup2:"",sup3:"",szlig:"",thorn:"",THORN:"",times:"",uacute:"",Uacute:"",ucirc:"",Ucirc:"",ugrave:"",Ugrave:"",uml:"",uuml:"",Uuml:"",yacute:"",Yacute:"",yen:"",yuml:""},g={0:"",128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},y=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],b=String.fromCharCode,v={}.hasOwnProperty,_=function(t,e){return v.call(t,e)},A=function(t,e){if(!t)return e;var i,n={};for(i in e)n[i]=_(t,i)?t[i]:e[i];return n},w=function(t,e){var i="";return t>=55296&&t<=57343||t>1114111?(e&&T("character reference outside the permissible Unicode range"),""):_(g,t)?(e&&T("disallowed character reference"),g[t]):(e&&function(t,e){for(var i=-1,n=t.length;++i<n;)if(t[i]==e)return!0;return!1}(y,t)&&T("disallowed character reference"),t>65535&&(i+=b((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=b(t))},x=function(t){return"&#x"+t.toString(16).toUpperCase()+";"},S=function(t){return"&#"+t+";"},T=function(t){throw Error("Parse error: "+t)},D=function(t,e){(e=A(e,D.options)).strict&&d.test(t)&&T("forbidden code point");var i=e.encodeEverything,n=e.useNamedReferences,u=e.allowUnsafeSymbols,c=e.decimal?S:x,p=function(t){return c(t.charCodeAt(0))};return i?(t=t.replace(r,(function(t){return n&&_(l,t)?"&"+l[t]+";":p(t)})),n&&(t=t.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),n&&(t=t.replace(a,(function(t){return"&"+l[t]+";"})))):n?(u||(t=t.replace(h,(function(t){return"&"+l[t]+";"}))),t=(t=t.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;")).replace(a,(function(t){return"&"+l[t]+";"}))):u||(t=t.replace(h,p)),t.replace(s,(function(t){var e=t.charCodeAt(0),i=t.charCodeAt(1);return c(1024*(e-55296)+i-56320+65536)})).replace(o,p)};D.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var E=function(t,e){var i=(e=A(e,E.options)).strict;return i&&c.test(t)&&T("malformed character reference"),t.replace(p,(function(t,n,s,r,o,a,l,h){var u,c,d,p,g,y;return n?(d=n,c=s,i&&!c&&T("character reference was not terminated by a semicolon"),u=parseInt(d,10),w(u,i)):r?(p=r,c=o,i&&!c&&T("character reference was not terminated by a semicolon"),u=parseInt(p,16),w(u,i)):a?_(f,g=a)?f[g]:(i&&T("named character reference was not terminated by a semicolon"),t):(g=l,(y=h)&&e.isAttributeValue?(i&&"="==y&&T("`&` did not start a character reference"),t):(i&&T("named character reference was not terminated by a semicolon"),m[g]+(y||"")))}))};E.options={isAttributeValue:!1,strict:!1};var C={version:"1.1.1",encode:D,decode:E,escape:function(t){return t.replace(h,(function(t){return u[t]}))},unescape:E};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define((function(){return C}));else if(e&&!e.nodeType)if(i)i.exports=C;else for(var P in C)_(C,P)&&(e[P]=C[P]);else t.he=C}(this),function(t,e){"use strict";"function"==typeof window.define&&window.define.amd?window.define([],e):"object"==typeof module&&module.exports?module.exports=e():t.QueryStringMachine=e()}(this,(function(){"use strict";const t=t=>0===t.length||0===t.indexOf("?");return function(){const e=(t,e,n,s,r)=>(t||(s.public?(i.addWarning(e,n,r),n=s.defaultValue):l(t,r)),n),i={warnings:[],get:function(t,e){return this.getForString(t,e,window.location.search)},getAll:function(t){return this.getAllForString(t,window.location.search)},getForString:function(i,r,l){if(!t(l))throw new Error('Query strings should be either the empty string or start with a "?": '+l);const u=r.private&&!(()=>{try{return"true"===localStorage.getItem("phetTeamMember")}catch(t){return!1}})()?[]:n(i,l);s(i,r);let c=o(i,r,u);return r.hasOwnProperty("validValues")?c=e(a(c,r.validValues),i,c,r,`Invalid value supplied for key "${i}": ${c} is not a member of valid values: ${r.validValues.join(", ")}`):r.hasOwnProperty("isValidValue")&&(c=e(r.isValidValue(c),i,c,r,`Invalid value supplied for key "${i}": ${c}`)),c=e(h[r.type].isValidValue(c),i,c,r,"Invalid value for type, key: "+i),c},getAllForString:function(t,e){const i={};for(const n in t)t.hasOwnProperty(n)&&(i[n]=this.getForString(n,t[n],e));return i},containsKey:function(t){return this.containsKeyForString(t,window.location.search)},containsKeyForString:function(e,i){if(!t(i))throw new Error('Query strings should be either the empty string or start with a "?": '+i);return n(e,i).length>0},deepEquals:function(t,e){if(typeof t!=typeof e)return!1;if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return t===e;if(null===t&&null===e)return!0;if(void 0===t&&void 0===e)return!0;if(null===t&&void 0===e)return!1;if(void 0===t&&null===e)return!1;const n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;if(0===n.length)return t===e;for(let r=0;r<n.length;r++){if(n[r]!==s[r])return!1;const o=t[n[r]],a=e[n[r]];if(!i.deepEquals(o,a))return!1}return!0},removeKeyValuePair:function(t,e){if(0===t.indexOf("?")){const i=[],n=t.substring(1).split("&");for(let t=0;t<n.length;t++){const s=n[t],r=s.split("=");decodeURIComponent(r[0])!==e&&i.push(s)}return i.length>0?"?"+i.join("&"):""}return t},appendQueryString:function(t,e){if(0!==e.indexOf("?")&&0!==e.indexOf("&")||(e=e.substring(1)),0===e.length)return t;const i=t.indexOf("?")>=0?"&":"?";return t+i+e},appendQueryStringArray:function(t,e){for(let i=0;i<e.length;i++)t=this.appendQueryString(t,e[i]);return t},addWarning:function(t,e,i){console.warn(i),this.warnings.push({key:t,value:e,message:i})},hasWarning:function(t){let e=!1;for(let i=0;i<this.warnings.length&&!e;i++)e=this.warnings[i].key===t;return e}},n=function(t,e){const i=[],n=e.slice(1).split("&");for(let s=0;s<n.length;s++){const e=n[s].split("="),r=e[0],o=e.slice(1).join("=");r===t&&(o?i.push(decodeURIComponent(o)):i.push(null))}return i},s=function(t,e){l(e.hasOwnProperty("type"),"type field is required for key: "+t),l(h.hasOwnProperty(e.type),"invalid type: "+e.type+" for key: "+t),e.hasOwnProperty("parse")&&l("function"==typeof e.parse,"parse must be a function for key: "+t),l(!(e.hasOwnProperty("validValues")&&e.hasOwnProperty("isValidValue")),e,t,"validValues and isValidValue are mutually exclusive for key: "+t),e.hasOwnProperty("validValues")&&l(Array.isArray(e.validValues),"isValidValue must be an array for key: "+t),e.hasOwnProperty("isValidValue")&&l("function"==typeof e.isValidValue,"isValidValue must be a function for key: "+t),e.hasOwnProperty("defaultValue")&&l(h[e.type].isValidValue(e.defaultValue),"defaultValue incorrect type: "+t),e.hasOwnProperty("validValues")&&e.validValues.forEach(i=>l(h[e.type].isValidValue(i),"validValue incorrect type for key: "+t)),e.hasOwnProperty("defaultValue")&&e.hasOwnProperty("validValues")&&l(a(e.defaultValue,e.validValues),e,t,"defaultValue must be a member of validValues, for key: "+t),e.hasOwnProperty("public")&&e.public&&"flag"!==e.type&&l(e.hasOwnProperty("defaultValue"),"defaultValue is required when public: true for key: "+t),r(t,e,h[e.type].required,h[e.type].optional),h[e.type].validateSchema&&h[e.type].validateSchema(t,e)},r=function(t,e,i,n){const s=Object.getOwnPropertyNames(e);i.forEach((function(e){l(-1!==s.indexOf(e),"missing required property: "+e+" for key: "+t)}));const r=i.concat(n);s.forEach((function(e){l("type"===e||-1!==r.indexOf(e),"unsupported property: "+e+" for key: "+t)}))},o=function(t,e,i){let n;return l(i.length<=1,"query parameter cannot occur multiple times"),"flag"===e.type?n=h[e.type].parse(t,e,i[0]):(l(void 0!==i[0]||e.hasOwnProperty("defaultValue"),"missing required query parameter: "+t),n=void 0===i[0]?e.defaultValue:h[e.type].parse(t,e,i[0])),n},a=function(t,e){let n=!1;for(let s=0;s<e.length&&!n;s++)n=i.deepEquals(e[s],t);return n},l=function(t,e){if(!t)throw console&&console.log&&console.log(e),new Error("Query String Machine Assertion failed: "+e)},h={flag:{required:[],optional:["private","public"],validateSchema:null,parse:function(t,e,i){return l(null==i,"flag type does not support a value: "+i),void 0!==i},isValidValue:t=>!0===t||!1===t},boolean:{required:[],optional:["defaultValue","private","public"],validateSchema:null,parse:function(t,i,n){const s="true"===n||"false"===n;return e(s,t,s?"true"===n:n,i,`Value was not true|false for key "${t}"`)},isValidValue:t=>!0===t||!1===t},number:{required:[],optional:["defaultValue","validValues","isValidValue","private","public"],validateSchema:null,parse:function(t,i,n){const s=Number(n),r=!isNaN(s);return e(r,t,r?s:n,i,`value must be a number for key "${t}"`)},isValidValue:t=>"number"==typeof t&&!isNaN(t)},string:{required:[],optional:["defaultValue","validValues","isValidValue","private","public"],validateSchema:null,parse:(t,e,i)=>i,isValidValue:t=>null===t||"string"==typeof t},array:{required:["elementSchema"],optional:["defaultValue","validValues","isValidValue","separator","validValues","private","public"],validateSchema:function(t,e){e.hasOwnProperty("separator")&&l("string"==typeof e.separator&&1===e.separator.length,"invalid separator: "+e.separator+", for key: "+t),s(t+".element",e.elementSchema)},parse:function(t,e,i){let n;return n=null===i?[]:i.split(e.separator||",").map(i=>o(t,e.elementSchema,[i])),n},isValidValue:t=>Array.isArray(t)||null===t},custom:{required:["parse"],optional:["defaultValue","validValues","isValidValue","private","public"],validateSchema:null,parse:function(t,e,i){return e.parse(i)},isValidValue:t=>!0}};return i}()})),function(){"use strict";var t=function(){this.init()};t.prototype={init:function(){var t=this||e;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var i=this||e;if(t=parseFloat(t),i.ctx||h(),void 0!==t&&t>=0&&t<=1){if(i._volume=t,i._muted)return i;i.usingWebAudio&&i.masterGain.gain.setValueAtTime(t,e.ctx.currentTime);for(var n=0;n<i._howls.length;n++)if(!i._howls[n]._webAudio)for(var s=i._howls[n]._getSoundIds(),r=0;r<s.length;r++){var o=i._howls[n]._soundById(s[r]);o&&o._node&&(o._node.volume=o._volume*t)}return i}return i._volume},mute:function(t){var i=this||e;i.ctx||h(),i._muted=t,i.usingWebAudio&&i.masterGain.gain.setValueAtTime(t?0:i._volume,e.ctx.currentTime);for(var n=0;n<i._howls.length;n++)if(!i._howls[n]._webAudio)for(var s=i._howls[n]._getSoundIds(),r=0;r<s.length;r++){var o=i._howls[n]._soundById(s[r]);o&&o._node&&(o._node.muted=!!t||o._muted)}return i},stop:function(){for(var t=this||e,i=0;i<t._howls.length;i++)t._howls[i].stop();return t},unload:function(){for(var t=this||e,i=t._howls.length-1;i>=0;i--)t._howls[i].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,h()),t},codecs:function(t){return(this||e)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||e;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||e,i=null;try{i="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!i||"function"!=typeof i.canPlayType)return t;var n=i.canPlayType("audio/mpeg;").replace(/^no$/,""),s=t._navigator&&t._navigator.userAgent.match(/OPR\/([0-6].)/g),r=s&&parseInt(s[0].split("/")[1],10)<33;return t._codecs={mp3:!(r||!n&&!i.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!i.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!i.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!i.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!i.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!i.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(i.canPlayType("audio/x-m4a;")||i.canPlayType("audio/m4a;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(i.canPlayType("audio/x-m4b;")||i.canPlayType("audio/m4b;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(i.canPlayType("audio/x-mp4;")||i.canPlayType("audio/mp4;")||i.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!i.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!i.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(i.canPlayType("audio/x-flac;")||i.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||e;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var i=function(e){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,t._releaseHtml5Audio(n)}catch(e){t.noAudio=!0;break}for(var s=0;s<t._howls.length;s++)if(!t._howls[s]._webAudio)for(var r=t._howls[s]._getSoundIds(),o=0;o<r.length;o++){var a=t._howls[s]._soundById(r[o]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}t._autoResume();var l=t.ctx.createBufferSource();l.buffer=t._scratchBuffer,l.connect(t.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),l.onended=function(){l.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",i,!0),document.removeEventListener("touchend",i,!0),document.removeEventListener("click",i,!0);for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("unlock")}};return document.addEventListener("touchstart",i,!0),document.addEventListener("touchend",i,!0),document.addEventListener("click",i,!0),t}},_obtainHtml5Audio:function(){var t=this||e;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var i=(new Audio).play();return i&&"undefined"!=typeof Promise&&(i instanceof Promise||"function"==typeof i.then)&&i.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var i=this||e;return t._unlocked&&i._html5AudioPool.push(t),i},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&e.usingWebAudio){for(var i=0;i<t._howls.length;i++)if(t._howls[i]._webAudio)for(var n=0;n<t._howls[i]._sounds.length;n++)if(!t._howls[i]._sounds[n]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&e.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var e=new t,i=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};i.prototype={init:function(t){var i=this;return e.ctx||h(),i._autoplay=t.autoplay||!1,i._format="string"!=typeof t.format?t.format:[t.format],i._html5=t.html5||!1,i._muted=t.mute||!1,i._loop=t.loop||!1,i._pool=t.pool||5,i._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,i._rate=t.rate||1,i._sprite=t.sprite||{},i._src="string"!=typeof t.src?t.src:[t.src],i._volume=void 0!==t.volume?t.volume:1,i._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},i._duration=0,i._state="unloaded",i._sounds=[],i._endTimers={},i._queue=[],i._playLock=!1,i._onend=t.onend?[{fn:t.onend}]:[],i._onfade=t.onfade?[{fn:t.onfade}]:[],i._onload=t.onload?[{fn:t.onload}]:[],i._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],i._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],i._onpause=t.onpause?[{fn:t.onpause}]:[],i._onplay=t.onplay?[{fn:t.onplay}]:[],i._onstop=t.onstop?[{fn:t.onstop}]:[],i._onmute=t.onmute?[{fn:t.onmute}]:[],i._onvolume=t.onvolume?[{fn:t.onvolume}]:[],i._onrate=t.onrate?[{fn:t.onrate}]:[],i._onseek=t.onseek?[{fn:t.onseek}]:[],i._onunlock=t.onunlock?[{fn:t.onunlock}]:[],i._onresume=[],i._webAudio=e.usingWebAudio&&!i._html5,void 0!==e.ctx&&e.ctx&&e.autoUnlock&&e._unlockAudio(),e._howls.push(i),i._autoplay&&i._queue.push({event:"play",action:function(){i.play()}}),i._preload&&"none"!==i._preload&&i.load(),i},load:function(){var t=this,i=null;if(!e.noAudio){"string"==typeof t._src&&(t._src=[t._src]);for(var s=0;s<t._src.length;s++){var o,a;if(t._format&&t._format[s])o=t._format[s];else{if("string"!=typeof(a=t._src[s])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(o=/^data:audio\/([^;,]+);/i.exec(a))||(o=/\.([^.]+)$/.exec(a.split("?",1)[0])),o&&(o=o[1].toLowerCase())}if(o||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),o&&e.codecs(o)){i=t._src[s];break}}return i?(t._src=i,t._state="loading","https:"===window.location.protocol&&"http:"===i.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new n(t),t._webAudio&&r(t),t):void t._emit("loaderror",null,"No codec support for selected audio sources.")}t._emit("loaderror",null,"No audio support.")},play:function(t,i){var n=this,s=null;if("number"==typeof t)s=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if(void 0===t&&(t="__default",!n._playLock)){for(var r=0,o=0;o<n._sounds.length;o++)n._sounds[o]._paused&&!n._sounds[o]._ended&&(r++,s=n._sounds[o]._id);1===r?t=null:s=null}}var a=s?n._soundById(s):n._inactiveSound();if(!a)return null;if(s&&!t&&(t=a._sprite||"__default"),"loaded"!==n._state){a._sprite=t,a._ended=!1;var l=a._id;return n._queue.push({event:"play",action:function(){n.play(l)}}),l}if(s&&!a._paused)return i||n._loadQueue("play"),a._id;n._webAudio&&e._autoResume();var h=Math.max(0,a._seek>0?a._seek:n._sprite[t][0]/1e3),u=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-h),c=1e3*u/Math.abs(a._rate),d=n._sprite[t][0]/1e3,p=(n._sprite[t][0]+n._sprite[t][1])/1e3;a._sprite=t,a._ended=!1;var f=function(){a._paused=!1,a._seek=h,a._start=d,a._stop=p,a._loop=!(!a._loop&&!n._sprite[t][2])};if(!(h>=p)){var m=a._node;if(n._webAudio){var g=function(){n._playLock=!1,f(),n._refreshBuffer(a);var t=a._muted||n._muted?0:a._volume;m.gain.setValueAtTime(t,e.ctx.currentTime),a._playStart=e.ctx.currentTime,void 0===m.bufferSource.start?a._loop?m.bufferSource.noteGrainOn(0,h,86400):m.bufferSource.noteGrainOn(0,h,u):a._loop?m.bufferSource.start(0,h,86400):m.bufferSource.start(0,h,u),c!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),c)),i||setTimeout((function(){n._emit("play",a._id),n._loadQueue()}),0)};"running"===e.state&&"interrupted"!==e.ctx.state?g():(n._playLock=!0,n.once("resume",g),n._clearTimer(a._id))}else{var y=function(){m.currentTime=h,m.muted=a._muted||n._muted||e._muted||m.muted,m.volume=a._volume*e.volume(),m.playbackRate=a._rate;try{var s=m.play();if(s&&"undefined"!=typeof Promise&&(s instanceof Promise||"function"==typeof s.then)?(n._playLock=!0,f(),s.then((function(){n._playLock=!1,m._unlocked=!0,i||(n._emit("play",a._id),n._loadQueue())})).catch((function(){n._playLock=!1,n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0}))):i||(n._playLock=!1,f(),n._emit("play",a._id),n._loadQueue()),m.playbackRate=a._rate,m.paused)return void n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||a._loop?n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),c):(n._endTimers[a._id]=function(){n._ended(a),m.removeEventListener("ended",n._endTimers[a._id],!1)},m.addEventListener("ended",n._endTimers[a._id],!1))}catch(t){n._emit("playerror",a._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=n._src,m.load());var b=window&&window.ejecta||!m.readyState&&e._navigator.isCocoonJS;if(m.readyState>=3||b)y();else{n._playLock=!0;var v=function(){y(),m.removeEventListener(e._canPlayEvent,v,!1)};m.addEventListener(e._canPlayEvent,v,!1),n._clearTimer(a._id)}}return a._id}n._ended(a)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),n=0;n<i.length;n++){e._clearTimer(i[n]);var s=e._soundById(i[n]);if(s&&!s._paused&&(s._seek=e.seek(i[n]),s._rateSeek=0,s._paused=!0,e._stopFade(i[n]),s._node))if(e._webAudio){if(!s._node.bufferSource)continue;void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),e._cleanBuffer(s._node)}else isNaN(s._node.duration)&&s._node.duration!==1/0||s._node.pause();arguments[1]||e._emit("pause",s?s._id:null)}return e},stop:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var n=i._getSoundIds(t),s=0;s<n.length;s++){i._clearTimer(n[s]);var r=i._soundById(n[s]);r&&(r._seek=r._start||0,r._rateSeek=0,r._paused=!0,r._ended=!0,i._stopFade(n[s]),r._node&&(i._webAudio?r._node.bufferSource&&(void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),i._cleanBuffer(r._node)):isNaN(r._node.duration)&&r._node.duration!==1/0||(r._node.currentTime=r._start||0,r._node.pause(),r._node.duration===1/0&&i._clearSound(r._node))),e||i._emit("stop",r._id))}return i},mute:function(t,i){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(t,i)}}),n;if(void 0===i){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var s=n._getSoundIds(i),r=0;r<s.length;r++){var o=n._soundById(s[r]);o&&(o._muted=t,o._interval&&n._stopFade(o._id),n._webAudio&&o._node?o._node.gain.setValueAtTime(t?0:o._volume,e.ctx.currentTime):o._node&&(o._node.muted=!!e._muted||t),n._emit("mute",o._id))}return n},volume:function(){var t,i,n,s=this,r=arguments;if(0===r.length)return s._volume;if(1===r.length||2===r.length&&void 0===r[1]?s._getSoundIds().indexOf(r[0])>=0?i=parseInt(r[0],10):t=parseFloat(r[0]):r.length>=2&&(t=parseFloat(r[0]),i=parseInt(r[1],10)),!(void 0!==t&&t>=0&&t<=1))return(n=i?s._soundById(i):s._sounds[0])?n._volume:0;if("loaded"!==s._state||s._playLock)return s._queue.push({event:"volume",action:function(){s.volume.apply(s,r)}}),s;void 0===i&&(s._volume=t),i=s._getSoundIds(i);for(var o=0;o<i.length;o++)(n=s._soundById(i[o]))&&(n._volume=t,r[2]||s._stopFade(i[o]),s._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(t,e.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=t*e.volume()),s._emit("volume",n._id));return s},fade:function(t,i,n,s){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(t,i,n,s)}}),r;t=Math.min(Math.max(0,parseFloat(t)),1),i=Math.min(Math.max(0,parseFloat(i)),1),n=parseFloat(n),r.volume(t,s);for(var o=r._getSoundIds(s),a=0;a<o.length;a++){var l=r._soundById(o[a]);if(l){if(s||r._stopFade(o[a]),r._webAudio&&!l._muted){var h=e.ctx.currentTime,u=h+n/1e3;l._volume=t,l._node.gain.setValueAtTime(t,h),l._node.gain.linearRampToValueAtTime(i,u)}r._startFadeInterval(l,t,i,n,o[a],void 0===s)}}return r},_startFadeInterval:function(t,e,i,n,s,r){var o=this,a=e,l=i-e,h=Math.abs(l/.01),u=Math.max(4,h>0?n/h:n),c=Date.now();t._fadeTo=i,t._interval=setInterval((function(){var s=(Date.now()-c)/n;c=Date.now(),a+=l*s,a=l<0?Math.max(i,a):Math.min(i,a),a=Math.round(100*a)/100,o._webAudio?t._volume=a:o.volume(a,t._id,!0),r&&(o._volume=a),(i<e&&a<=i||i>e&&a>=i)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,o.volume(i,t._id),o._emit("fade",t._id))}),u)},_stopFade:function(t){var i=this,n=i._soundById(t);return n&&n._interval&&(i._webAudio&&n._node.gain.cancelScheduledValues(e.ctx.currentTime),clearInterval(n._interval),n._interval=null,i.volume(n._fadeTo,t),n._fadeTo=null,i._emit("fade",t)),i},loop:function(){var t,e,i,n=this,s=arguments;if(0===s.length)return n._loop;if(1===s.length){if("boolean"!=typeof s[0])return!!(i=n._soundById(parseInt(s[0],10)))&&i._loop;t=s[0],n._loop=t}else 2===s.length&&(t=s[0],e=parseInt(s[1],10));for(var r=n._getSoundIds(e),o=0;o<r.length;o++)(i=n._soundById(r[o]))&&(i._loop=t,n._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=t,t&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop)));return n},rate:function(){var t,i,n,s=this,r=arguments;if(0===r.length)i=s._sounds[0]._id;else if(1===r.length){var o=s._getSoundIds(),a=o.indexOf(r[0]);a>=0?i=parseInt(r[0],10):t=parseFloat(r[0])}else 2===r.length&&(t=parseFloat(r[0]),i=parseInt(r[1],10));if("number"!=typeof t)return(n=s._soundById(i))?n._rate:s._rate;if("loaded"!==s._state||s._playLock)return s._queue.push({event:"rate",action:function(){s.rate.apply(s,r)}}),s;void 0===i&&(s._rate=t),i=s._getSoundIds(i);for(var l=0;l<i.length;l++)if(n=s._soundById(i[l])){s.playing(i[l])&&(n._rateSeek=s.seek(i[l]),n._playStart=s._webAudio?e.ctx.currentTime:n._playStart),n._rate=t,s._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(t,e.ctx.currentTime):n._node&&(n._node.playbackRate=t);var h=s.seek(i[l]),u=(s._sprite[n._sprite][0]+s._sprite[n._sprite][1])/1e3-h,c=1e3*u/Math.abs(n._rate);!s._endTimers[i[l]]&&n._paused||(s._clearTimer(i[l]),s._endTimers[i[l]]=setTimeout(s._ended.bind(s,n),c)),s._emit("rate",n._id)}return s},seek:function(){var t,i,n=this,s=arguments;if(0===s.length)i=n._sounds[0]._id;else if(1===s.length){var r=n._getSoundIds(),o=r.indexOf(s[0]);o>=0?i=parseInt(s[0],10):n._sounds.length&&(i=n._sounds[0]._id,t=parseFloat(s[0]))}else 2===s.length&&(t=parseFloat(s[0]),i=parseInt(s[1],10));if(void 0===i)return n;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,s)}}),n;var a=n._soundById(i);if(a){if(!("number"==typeof t&&t>=0)){if(n._webAudio){var l=n.playing(i)?e.ctx.currentTime-a._playStart:0,h=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(h+l*Math.abs(a._rate))}return a._node.currentTime}var u=n.playing(i);u&&n.pause(i,!0),a._seek=t,a._ended=!1,n._clearTimer(i),n._webAudio||!a._node||isNaN(a._node.duration)||(a._node.currentTime=t);var c=function(){n._emit("seek",i),u&&n.play(i,!0)};if(u&&!n._webAudio){var d=function(){n._playLock?setTimeout(d,0):c()};setTimeout(d,0)}else c()}return n},playing:function(t){var e=this;if("number"==typeof t){var i=e._soundById(t);return!!i&&!i._paused}for(var n=0;n<e._sounds.length;n++)if(!e._sounds[n]._paused)return!0;return!1},duration:function(t){var e=this,i=e._duration,n=e._soundById(t);return n&&(i=e._sprite[n._sprite][1]/1e3),i},state:function(){return this._state},unload:function(){for(var t=this,i=t._sounds,n=0;n<i.length;n++)i[n]._paused||t.stop(i[n]._id),t._webAudio||(t._clearSound(i[n]._node),i[n]._node.removeEventListener("error",i[n]._errorFn,!1),i[n]._node.removeEventListener(e._canPlayEvent,i[n]._loadFn,!1),e._releaseHtml5Audio(i[n]._node)),delete i[n]._node,t._clearTimer(i[n]._id);var r=e._howls.indexOf(t);r>=0&&e._howls.splice(r,1);var o=!0;for(n=0;n<e._howls.length;n++)if(e._howls[n]._src===t._src||t._src.indexOf(e._howls[n]._src)>=0){o=!1;break}return s&&o&&delete s[t._src],e.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,i,n){var s=this["_on"+t];return"function"==typeof e&&s.push(n?{id:i,fn:e,once:n}:{id:i,fn:e}),this},off:function(t,e,i){var n=this,s=n["_on"+t],r=0;if("number"==typeof e&&(i=e,e=null),e||i)for(r=0;r<s.length;r++){var o=i===s[r].id;if(e===s[r].fn&&o||!e&&o){s.splice(r,1);break}}else if(t)n["_on"+t]=[];else{var a=Object.keys(n);for(r=0;r<a.length;r++)0===a[r].indexOf("_on")&&Array.isArray(n[a[r]])&&(n[a[r]]=[])}return n},once:function(t,e,i){return this.on(t,e,i,1),this},_emit:function(t,e,i){for(var n=this,s=n["_on"+t],r=s.length-1;r>=0;r--)s[r].id&&s[r].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,i)}.bind(n,s[r].fn),0),s[r].once&&n.off(t,s[r].fn,s[r].id));return n._loadQueue(t),n},_loadQueue:function(t){var e=this;if(e._queue.length>0){var i=e._queue[0];i.event===t&&(e._queue.shift(),e._loadQueue()),t||i.action()}return e},_ended:function(t){var i=this,n=t._sprite;if(!i._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(i._ended.bind(i,t),100),i;var s=!(!t._loop&&!i._sprite[n][2]);if(i._emit("end",t._id),!i._webAudio&&s&&i.stop(t._id,!0).play(t._id),i._webAudio&&s){i._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=e.ctx.currentTime;var r=1e3*(t._stop-t._start)/Math.abs(t._rate);i._endTimers[t._id]=setTimeout(i._ended.bind(i,t),r)}return i._webAudio&&!s&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,i._clearTimer(t._id),i._cleanBuffer(t._node),e._autoSuspend()),i._webAudio||s||i.stop(t._id,!0),i},_clearTimer:function(t){var e=this;if(e._endTimers[t]){if("function"!=typeof e._endTimers[t])clearTimeout(e._endTimers[t]);else{var i=e._soundById(t);i&&i._node&&i._node.removeEventListener("ended",e._endTimers[t],!1)}delete e._endTimers[t]}return e},_soundById:function(t){for(var e=this,i=0;i<e._sounds.length;i++)if(t===e._sounds[i]._id)return e._sounds[i];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new n(t)},_drain:function(){var t=this,e=t._pool,i=0,n=0;if(!(t._sounds.length<e)){for(n=0;n<t._sounds.length;n++)t._sounds[n]._ended&&i++;for(n=t._sounds.length-1;n>=0;n--){if(i<=e)return;t._sounds[n]._ended&&(t._webAudio&&t._sounds[n]._node&&t._sounds[n]._node.disconnect(0),t._sounds.splice(n,1),i--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],i=0;i<this._sounds.length;i++)e.push(this._sounds[i]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=e.ctx.createBufferSource(),t._node.bufferSource.buffer=s[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,e.ctx.currentTime),this},_cleanBuffer:function(t){var i=e._navigator&&e._navigator.vendor.indexOf("Apple")>=0;if(e._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),i))try{t.bufferSource.buffer=e._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(e._navigator&&e._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var n=function(t){this._parent=t,this.init()};n.prototype={init:function(){var t=this,i=t._parent;return t._muted=i._muted,t._loop=i._loop,t._volume=i._volume,t._rate=i._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++e._counter,i._sounds.push(t),t.create(),t},create:function(){var t=this,i=t._parent,n=e._muted||t._muted||t._parent._muted?0:t._volume;return i._webAudio?(t._node=void 0===e.ctx.createGain?e.ctx.createGainNode():e.ctx.createGain(),t._node.gain.setValueAtTime(n,e.ctx.currentTime),t._node.paused=!0,t._node.connect(e.masterGain)):e.noAudio||(t._node=e._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(e._canPlayEvent,t._loadFn,!1),t._node.src=i._src,t._node.preload=!0===i._preload?"auto":i._preload,t._node.volume=n*e.volume(),t._node.load()),t},reset:function(){var t=this,i=t._parent;return t._muted=i._muted,t._loop=i._loop,t._volume=i._volume,t._rate=i._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++e._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,i=t._parent;i._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(i._sprite).length&&(i._sprite={__default:[0,1e3*i._duration]}),"loaded"!==i._state&&(i._state="loaded",i._emit("load"),i._loadQueue()),t._node.removeEventListener(e._canPlayEvent,t._loadFn,!1)}};var s={},r=function(t){var e=t._src;if(s[e])return t._duration=s[e].duration,void l(t);if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),n=new Uint8Array(i.length),r=0;r<i.length;++r)n[r]=i.charCodeAt(r);a(n.buffer,t)}else{var h=new XMLHttpRequest;h.open(t._xhr.method,e,!0),h.withCredentials=t._xhr.withCredentials,h.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){h.setRequestHeader(e,t._xhr.headers[e])})),h.onload=function(){var e=(h.status+"")[0];"0"===e||"2"===e||"3"===e?a(h.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+h.status+".")},h.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete s[e],t.load())},o(h)}},o=function(t){try{t.send()}catch(e){t.onerror()}},a=function(t,i){var n=function(){i._emit("loaderror",null,"Decoding audio data failed.")},r=function(t){t&&i._sounds.length>0?(s[i._src]=t,l(i,t)):n()};"undefined"!=typeof Promise&&1===e.ctx.decodeAudioData.length?e.ctx.decodeAudioData(t).then(r).catch(n):e.ctx.decodeAudioData(t,r,n)},l=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},h=function(){if(e.usingWebAudio){try{"undefined"!=typeof AudioContext?e.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?e.ctx=new webkitAudioContext:e.usingWebAudio=!1}catch(t){e.usingWebAudio=!1}e.ctx||(e.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(e._navigator&&e._navigator.platform),i=e._navigator&&e._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=i?parseInt(i[1],10):null;if(t&&n&&n<9){var s=/safari/.test(e._navigator&&e._navigator.userAgent.toLowerCase());e._navigator&&!s&&(e.usingWebAudio=!1)}e.usingWebAudio&&(e.masterGain=void 0===e.ctx.createGain?e.ctx.createGainNode():e.ctx.createGain(),e.masterGain.gain.setValueAtTime(e._muted?0:e._volume,e.ctx.currentTime),e.masterGain.connect(e.ctx.destination)),e._setup()}};"function"==typeof define&&define.amd&&define([],(function(){return{Howler:e,Howl:i}})),"undefined"!=typeof exports&&(exports.Howler=e,exports.Howl=i),"undefined"!=typeof global?(global.HowlerGlobal=t,global.Howler=e,global.Howl=i,global.Sound=n):"undefined"!=typeof window&&(window.HowlerGlobal=t,window.Howler=e,window.Howl=i,window.Sound=n)}(),function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var i=e._howls.length-1;i>=0;i--)e._howls[i].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,i){var n=this;return n.ctx&&n.ctx.listener?(e="number"!=typeof e?n._pos[1]:e,i="number"!=typeof i?n._pos[2]:i,"number"!=typeof t?n._pos:(n._pos=[t,e,i],void 0!==n.ctx.listener.positionX?(n.ctx.listener.positionX.setTargetAtTime(n._pos[0],Howler.ctx.currentTime,.1),n.ctx.listener.positionY.setTargetAtTime(n._pos[1],Howler.ctx.currentTime,.1),n.ctx.listener.positionZ.setTargetAtTime(n._pos[2],Howler.ctx.currentTime,.1)):n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]),n)):n},HowlerGlobal.prototype.orientation=function(t,e,i,n,s,r){var o=this;if(!o.ctx||!o.ctx.listener)return o;var a=o._orientation;return e="number"!=typeof e?a[1]:e,i="number"!=typeof i?a[2]:i,n="number"!=typeof n?a[3]:n,s="number"!=typeof s?a[4]:s,r="number"!=typeof r?a[5]:r,"number"!=typeof t?a:(o._orientation=[t,e,i,n,s,r],void 0!==o.ctx.listener.forwardX?(o.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),o.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),o.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),o.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),o.ctx.listener.upY.setTargetAtTime(s,Howler.ctx.currentTime,.1),o.ctx.listener.upZ.setTargetAtTime(r,Howler.ctx.currentTime,.1)):o.ctx.listener.setOrientation(t,e,i,n,s,r),o)},Howl.prototype.init=function(t){return function(e){var i=this;return i._orientation=e.orientation||[1,0,0],i._stereo=e.stereo||null,i._pos=e.pos||null,i._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},i._onstereo=e.onstereo?[{fn:e.onstereo}]:[],i._onpos=e.onpos?[{fn:e.onpos}]:[],i._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}}(Howl.prototype.init),Howl.prototype.stereo=function(e,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(e,i)}}),n;var s=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof e)return n._stereo;n._stereo=e,n._pos=[e,0,0]}for(var r=n._getSoundIds(i),o=0;o<r.length;o++){var a=n._soundById(r[o]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||t(a,s),"spatial"===s?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(e,0,0):a._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),n._emit("stereo",a._id)}}return n},Howl.prototype.pos=function(e,i,n,s){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function(){r.pos(e,i,n,s)}}),r;if(i="number"!=typeof i?0:i,n="number"!=typeof n?-.5:n,void 0===s){if("number"!=typeof e)return r._pos;r._pos=[e,i,n]}for(var o=r._getSoundIds(s),a=0;a<o.length;a++){var l=r._soundById(o[a]);if(l){if("number"!=typeof e)return l._pos;l._pos=[e,i,n],l._node&&(l._panner&&!l._panner.pan||t(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setPosition(e,i,n)),r._emit("pos",l._id)}}return r},Howl.prototype.orientation=function(e,i,n,s){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function(){r.orientation(e,i,n,s)}}),r;if(i="number"!=typeof i?r._orientation[1]:i,n="number"!=typeof n?r._orientation[2]:n,void 0===s){if("number"!=typeof e)return r._orientation;r._orientation=[e,i,n]}for(var o=r._getSoundIds(s),a=0;a<o.length;a++){var l=r._soundById(o[a]);if(l){if("number"!=typeof e)return l._orientation;l._orientation=[e,i,n],l._node&&(l._panner||(l._pos||(l._pos=r._pos||[0,0,-.5]),t(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setOrientation(e,i,n)),r._emit("orientation",l._id)}}return r},Howl.prototype.pannerAttr=function(){var e,i,n,s=this,r=arguments;if(!s._webAudio)return s;if(0===r.length)return s._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return(n=s._soundById(parseInt(r[0],10)))?n._pannerAttr:s._pannerAttr;e=r[0],void 0===i&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),s._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:s._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:s._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:s._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:s._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:s._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:s._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:s._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:s._panningModel})}else 2===r.length&&(e=r[0],i=parseInt(r[1],10));for(var o=s._getSoundIds(i),a=0;a<o.length;a++)if(n=s._soundById(o[a])){var l=n._pannerAttr;l={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:l.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:l.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:l.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:l.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:l.panningModel};var h=n._panner;h?(h.coneInnerAngle=l.coneInnerAngle,h.coneOuterAngle=l.coneOuterAngle,h.coneOuterGain=l.coneOuterGain,h.distanceModel=l.distanceModel,h.maxDistance=l.maxDistance,h.refDistance=l.refDistance,h.rolloffFactor=l.rolloffFactor,h.panningModel=l.panningModel):(n._pos||(n._pos=s._pos||[0,0,-.5]),t(n,"spatial"))}return s},Sound.prototype.init=function(t){return function(){var e=this,i=e._parent;e._orientation=i._orientation,e._stereo=i._stereo,e._pos=i._pos,e._pannerAttr=i._pannerAttr,t.call(this),e._stereo?i.stereo(e._stereo):e._pos&&i.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,i=e._parent;return e._orientation=i._orientation,e._stereo=i._stereo,e._pos=i._pos,e._pannerAttr=i._pannerAttr,e._stereo?i.stereo(e._stereo):e._pos?i.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,i._refreshBuffer(e)),t.call(this)}}(Sound.prototype.reset);var t=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}(),window.phet=window.phet||{},window.phet.chipper=window.phet.chipper||{},window.phet.chipper.shas={axon:"9a02dec232e5344824337be385c15a042e1b5022",brand:"83c51961edf5b255206c82de7d6f4df6b4ea41bc",chipper:"beaa4fd18398d2842d46edf320089e194720f32c",dot:"ecaa90f14199cffc426cc9098fcfeb69a086b982",joist:"a47d8e328dbe550277d86bb46a09b1c7a6af759a",kite:"ed0c49f276c62558ca1d695362807ee4dcaed80c",miscworks:"cc999774efd26dc9fe9379575b50798e98ca6b46","phet-core":"5f73ea3056fbe8d852f9aca0328e26c75d458467",phetcommon:"7efe73b2044421640a7a2c71a9a41d3e37ecd0bb","scenery-phet":"585f2761800e47c05be03fa547d9c0371cc6dbf6",scenery:"372ff80d9f33eb44af2edce380e6cc2767a3de50",sun:"bfd182a2e7e2ebc6453174a3435a4c19deac3244",tambo:"3293dbafd1595e25d45c855843cd447dc6cab610",tandem:"6fddb61195a44ba31c825191f0fb2addd768d6df",twixt:"1cb642f8035d28a723a961510a13b3c32f871e20","utterance-queue":"c2b44d1ca355707b2c2bae2a173c6ad26b5e6613"},window.phet.chipper.packageObject={name:"miscworks",version:"1.0.0-dev.0"},window.phet.chipper.stringRepos=[{repo:"joist",requirejsNamespace:"JOIST"},{repo:"scenery-phet",requirejsNamespace:"SCENERY_PHET"},{repo:"sun",requirejsNamespace:"SUN"},{repo:"tambo",requirejsNamespace:"TAMBO"}],phet.chipper.locale="en",phet.chipper.strings={en:{"SCENERY_PHET/symbol.ohms":"HI","SCENERY_PHET/symbol.resistivity":"HI"}},function(){"use strict";const t={allowLinks:{type:"boolean",defaultValue:!0,public:!0},audioVolume:{type:"number",defaultValue:1,isValidValue:function(t){return t>=0&&t<=1}},binder:{type:"flag"},brand:{type:"string",defaultValue:"adapted-from-phet",validValues:["phet","phet-io","adapted-from-phet"]},buildCompatible:{type:"flag"},continuousTest:{type:"string",defaultValue:""},colorProfile:{type:"string",defaultValue:"default"},deprecationWarnings:{type:"flag"},dev:{type:"flag"},ea:{type:"flag"},eall:{type:"flag"},enhancedSoundInitiallyEnabled:{type:"boolean",defaultValue:!1},fuzz:{type:"flag"},fuzzBoard:{type:"flag"},fuzzMouse:{type:"flag"},fuzzPointers:{type:"number",defaultValue:1},fuzzTouch:{type:"flag"},fuzzRate:{type:"number",defaultValue:100,isValidValue:function(t){return t>0}},ga:{type:"string",defaultValue:null},gameUp:{type:"flag"},gameUpLogging:{type:"flag"},gaPage:{type:"string",defaultValue:null},homeScreen:{type:"boolean",defaultValue:!0,public:!0},initialScreen:{type:"number",defaultValue:0,public:!0},legendsOfLearning:{type:"flag"},locale:{type:"string",defaultValue:"en"},log:{type:"flag"},memoryLimit:{type:"number",defaultValue:0},mobileA11yTest:{type:"flag"},"phet-android-app":{type:"flag"},"phet-app":{type:"flag"},playbackInputEventLog:{type:"flag"},playbackMode:{type:"boolean",defaultValue:!1},postMessageOnBeforeUnload:{type:"flag"},postMessageOnError:{type:"flag"},postMessageOnLoad:{type:"flag"},postMessageOnReady:{type:"flag"},preserveDrawingBuffer:{type:"flag"},profiler:{type:"flag"},qrCode:{type:"flag"},randomSeed:{type:"number",defaultValue:Math.random()},recordInputEventLog:{type:"flag"},rootRenderer:{type:"string",defaultValue:null,validValues:[null,"canvas","svg","dom","webgl"]},sceneryLog:{type:"array",elementSchema:{type:"string"},defaultValue:null},sceneryStringLog:{type:"flag"},screens:{type:"array",elementSchema:{type:"number"},defaultValue:null,isValidValue:function(t){return null===t||t.length===_.uniq(t).length},public:!0},showAnswers:{type:"flag",private:!0},showCanvasNodeBounds:{type:"flag"},showFittedBlockBounds:{type:"flag"},showHitAreas:{type:"flag"},showPointerAreas:{type:"flag"},showPointers:{type:"flag"},showVisibleBounds:{type:"flag"},shuffleListeners:{type:"flag"},sound:{type:"string",defaultValue:"enabled",validValues:["enabled","disabled","muted"]},speed:{type:"number",defaultValue:1,isValidValue:function(t){return t>0}},strings:{type:"string",defaultValue:null},stringTest:{type:"string",defaultValue:null},supportsDescriptions:{type:"flag"},supportsEnhancedSound:{type:"flag"},supportsSound:{type:"flag"},vibration:{type:"string",defaultValue:null,validValues:[null,"objects","manipulation","interaction-changes","result"]},webgl:{type:"boolean",defaultValue:!0},supportsZoom:{type:"string",validValues:[null,"true","false"],defaultValue:null}};function e(t){const e=new Date;let i;do{i=new Date}while(i-e<t)}!function(){window.phet=window.phet||{},window.phet.chipper=window.phet.chipper||{},window.phet.chipper.queryParameters=QueryStringMachine.getAll(t),window.phet.chipper.queryParameters.log&&(window.phet.log=function(t,e){e=_.assignIn({color:"#009900"},e),console.log("%c"+t,"color: "+e.color)}),window.phet.chipper.brand=window.phet.chipper.brand||phet.chipper.queryParameters.brand||"adapted-from-phet";const e="undefined"!=typeof window&&phet.chipper.queryParameters.stringTest?phet.chipper.queryParameters.stringTest:null;window.phet.chipper.mapString=function(t){return null===e?t:"double"===e?t+":"+t:"long"===e?"12345678901234567890123456789012345678901234567890":"rtl"===e?" ()":"xss"===e?t+'<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQIW2NkYGD4DwABCQEBtxmN7wAAAABJRU5ErkJggg==" onload="window.location.href=atob(\'aHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj1kUXc0dzlXZ1hjUQ==\')" />':"none"===e?t:e},QueryStringMachine.containsKey("locale")?window.phet.chipper.locale=phet.chipper.queryParameters.locale:window.phet.chipper.locale||(window.phet.chipper.locale="en");const i=JSON.parse(phet.chipper.queryParameters.strings||"{}");phet.chipper.getStringForBuiltSim=t=>{if(i[t])return i[t];let e=phet.chipper.strings[phet.chipper.locale];return e||(e=phet.chipper.strings[phet.chipper.locale.slice(0,2)],e||(e=phet.chipper.strings.en)),phet.chipper.mapString(e[t])}}(),window.phet.chipper.randomSeed=phet.chipper.queryParameters.randomSeed,window.phet.chipper.makeEverythingSlow=function(){window.setInterval((function(){e(64)}),16)},window.phet.chipper.makeRandomSlowness=function(){window.setInterval((function(){e(Math.ceil(100+200*Math.random()))}),Math.ceil(100+200*Math.random()))},window.phet.chipper.isProduction="production"===$("meta[name=phet-sim-level]").attr("content"),window.phet.chipper.isApp=phet.chipper.queryParameters["phet-app"]||phet.chipper.queryParameters["phet-android-app"],function(){const t=!phet.chipper.isProduction&&phet.chipper.queryParameters.eall;(t||!phet.chipper.isProduction&&phet.chipper.queryParameters.ea||phet.chipper.isDebugBuild)&&window.assertions.enableAssert(),t&&window.assertions.enableAssertSlow(),window.phet.chipper.reportContinuousTestResult=t=>{window.parent&&window.parent.postMessage(JSON.stringify(_.assignIn({continuousTest:JSON.parse(phet.chipper.queryParameters.continuousTest),url:window.location.href},t)),"*")},phet.chipper.queryParameters.continuousTest&&(window.addEventListener("error",(function(t){let e="",i="";t&&t.message&&(e=t.message),t&&t.error&&t.error.stack&&(i=t.error.stack),phet.chipper.reportContinuousTestResult({type:"continuous-test-error",message:e,stack:i})})),window.addEventListener("beforeunload",(function(t){phet.chipper.reportContinuousTestResult({type:"continuous-test-unload"})})),window.open=()=>({focus:()=>{},blur:()=>{}})),phet.chipper.queryParameters.postMessageOnError&&window.addEventListener("error",(function(t){let e="",i="";t&&t.message&&(e=t.message),t&&t.error&&t.error.stack&&(i=t.error.stack),window.parent&&window.parent.postMessage(JSON.stringify({type:"error",url:window.location.href,message:e,stack:i}),"*")})),phet.chipper.queryParameters.postMessageOnBeforeUnload&&window.addEventListener("beforeunload",(function(t){window.parent&&window.parent.postMessage(JSON.stringify({type:"beforeUnload"}),"*")}))}()}(),function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=20)}([function(t,e,i){"use strict";var n=i(11);function s(t,e,i,s){function r(){}return r.prototype=t.prototype,e.prototype=Object(n.a)(new r,{constructor:e},i),Object(n.a)(e,s),e}i(7).a.register("inherit",s),e.a=s},function(t,e,i){"use strict";var n=i(0),s=i(5),r=i(6),o=i(3),a=i(13);function l(t,e){this.x=t,this.y=e}r.a.register("Vector2",l),Object(n.a)(Object,l,{isVector2:!0,dimension:2,getMagnitude:function(){return Math.sqrt(this.magnitudeSquared)},get magnitude(){return this.getMagnitude()},getMagnitudeSquared:function(){return this.x*this.x+this.y*this.y},get magnitudeSquared(){return this.getMagnitudeSquared()},distance:function(t){return Math.sqrt(this.distanceSquared(t))},distanceXY:function(t,e){const i=this.x-t,n=this.y-e;return Math.sqrt(i*i+n*n)},distanceSquared:function(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i},distanceSquaredXY:function(t,e){const i=this.x-t,n=this.y-e;return i*i+n*n},dot:function(t){return this.x*t.x+this.y*t.y},dotXY:function(t,e){return this.x*t+this.y*e},getAngle:function(){return Math.atan2(this.y,this.x)},get angle(){return this.getAngle()},angleBetween:function(t){const e=this.magnitude,i=t.magnitude;return Math.acos(r.a.clamp((this.x*t.x+this.y*t.y)/(e*i),-1,1))},equals:function(t){return this.x===t.x&&this.y===t.y},equalsEpsilon:function(t,e){return e||(e=0),Math.max(Math.abs(this.x-t.x),Math.abs(this.y-t.y))<=e},isFinite:function(){return isFinite(this.x)&&isFinite(this.y)},copy:function(t){return t?t.set(this):new l(this.x,this.y)},crossScalar:function(t){return this.x*t.y-this.y*t.x},normalized:function(){const t=this.magnitude;if(0===t)throw new Error("Cannot normalize a zero-magnitude vector");return new l(this.x/t,this.y/t)},roundedSymmetric:function(){return this.copy().roundSymmetric()},withMagnitude:function(t){return this.copy().setMagnitude(t)},timesScalar:function(t){return new l(this.x*t,this.y*t)},times:function(t){return this.timesScalar(t)},componentTimes:function(t){return new l(this.x*t.x,this.y*t.y)},plus:function(t){return new l(this.x+t.x,this.y+t.y)},plusXY:function(t,e){return new l(this.x+t,this.y+e)},plusScalar:function(t){return new l(this.x+t,this.y+t)},minus:function(t){return new l(this.x-t.x,this.y-t.y)},minusXY:function(t,e){return new l(this.x-t,this.y-e)},minusScalar:function(t){return new l(this.x-t,this.y-t)},dividedScalar:function(t){return new l(this.x/t,this.y/t)},negated:function(){return new l(-this.x,-this.y)},getPerpendicular:function(){return new l(this.y,-this.x)},get perpendicular(){return this.getPerpendicular()},rotated:function(t){const e=this.angle+t,i=this.magnitude;return new l(i*Math.cos(e),i*Math.sin(e))},rotateAboutXY:function(t,e,i){const n=this.x-t,s=this.y-e,r=Math.cos(i),o=Math.sin(i);return this.x=t+n*r-s*o,this.y=e+n*o+s*r,this},rotateAboutPoint:function(t,e){return this.rotateAboutXY(t.x,t.y,e)},rotatedAboutXY:function(t,e,i){return new l(this.x,this.y).rotateAboutXY(t,e,i)},rotatedAboutPoint:function(t,e){return this.rotatedAboutXY(t.x,t.y,e)},blend:function(t,e){return new l(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},average:function(t){return this.blend(t,.5)},toString:function(){return"Vector2("+this.x+", "+this.y+")"},toVector3:function(){return new a.a(this.x,this.y,0)},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},set:function(t){return this.setXY(t.x,t.y)},setMagnitude:function(t){const e=t/this.magnitude;return this.multiplyScalar(e)},add:function(t){return this.setXY(this.x+t.x,this.y+t.y)},addXY:function(t,e){return this.setXY(this.x+t,this.y+e)},addScalar:function(t){return this.setXY(this.x+t,this.y+t)},subtract:function(t){return this.setXY(this.x-t.x,this.y-t.y)},subtractXY:function(t,e){return this.setXY(this.x-t,this.y-e)},subtractScalar:function(t){return this.setXY(this.x-t,this.y-t)},multiplyScalar:function(t){return this.setXY(this.x*t,this.y*t)},multiply:function(t){return this.multiplyScalar(t)},componentMultiply:function(t){return this.setXY(this.x*t.x,this.y*t.y)},divideScalar:function(t){return this.setXY(this.x/t,this.y/t)},negate:function(){return this.setXY(-this.x,-this.y)},normalize:function(){const t=this.magnitude;if(0===t)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(t)},roundSymmetric:function(){return this.setXY(o.a.roundSymmetric(this.x),o.a.roundSymmetric(this.y))},rotate:function(t){const e=this.angle+t,i=this.magnitude;return this.setXY(i*Math.cos(e),i*Math.sin(e))},setPolar:function(t,e){return this.setXY(t*Math.cos(e),t*Math.sin(e))},toStateObject:function(){return{x:this.x,y:this.y}}},{createPolar:function(t,e){return new l(0,0).setPolar(t,e)},fromStateObject:function(t){return new l(t.x,t.y)},getAngleBetweenVectors:function(t,e){const i=e.x-t.x,n=e.y-t.y;return Math.atan2(n,i)},getDistanceBetweenVectors:function(t,e){const i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}}),s.a.mixInto(l,{initialize:l.prototype.setXY,defaultArguments:[0,0]}),l.Immutable=function(t,e){l.call(this,t,e)};const h=l.Immutable;Object(n.a)(l,h),h.mutableOverrideHelper=function(t){h.prototype[t]=function(){throw new Error("Cannot call mutable method '"+t+"' on immutable Vector2")}},h.mutableOverrideHelper("setXY"),h.mutableOverrideHelper("setX"),h.mutableOverrideHelper("setY"),l.ZERO=new l(0,0),l.X_UNIT=new l(1,0),l.Y_UNIT=new l(0,1),e.a=l},function(t,e,i){"use strict";var n=i(7);function s(t,...e){return _.each(e,e=>{if(e)for(const i in e)if(e.hasOwnProperty(i)){const n=e[i];_.endsWith(i,"Options")&&"Options"!==i?t[i]=s(t[i]||{},n):t[i]=n}}),t}n.a.register("merge",s),e.a=s},function(t,e,i){"use strict";var n=i(6),s=i(1);const r=Number.MIN_VALUE,o=2*Math.PI;let a,l,h;var u={clamp:function(t,e,i){return t<e?e:t>i?i:t},moduloBetweenDown:function(t,e,i){const n=i-e;let s=(t-e)%n;return s<0&&(s+=n),s+e},moduloBetweenUp:function(t,e,i){return-u.moduloBetweenDown(-t,-i,-e)},rangeInclusive:function(t,e){if(e<t)return[];const i=new Array(e-t+1);for(let n=t;n<=e;n++)i[n-t]=n;return i},rangeExclusive:function(t,e){return u.rangeInclusive(t+1,e-1)},toRadians:function(t){return Math.PI*t/180},toDegrees:function(t){return 180*t/Math.PI},mod:function(t,e){return t/e%1==0?0:t%e},gcd:function(t,e){return Math.abs(0===e?t:this.gcd(e,u.mod(t,e)))},lcm:function(t,e){return u.roundSymmetric(Math.abs(t*e)/u.gcd(t,e))},lineLineIntersection:function(t,e,i,n){if(t.equals(e)||i.equals(n))return null;const r=t.x-e.x,o=i.x-n.x,a=t.y-e.y,l=i.y-n.y,h=r*l-a*o;if(Math.abs(h)<1e-10)return null;const u=t.x*e.y-t.y*e.x,c=i.x*n.y-i.y*n.x;return new s.a((u*o-r*c)/h,(u*l-a*c)/h)},circleCenterFromPoints:function(t,e,i){const n=new s.a((t.x+e.x)/2,(t.y+e.y)/2),r=new s.a((e.x+i.x)/2,(e.y+i.y)/2),o=new s.a(n.x+(e.y-t.y),n.y-(e.x-t.x)),a=new s.a(r.x+(i.y-e.y),r.y-(i.x-e.x));return u.lineLineIntersection(n,o,r,a)},pointInCircleFromPoints:function(t,e,i,n){const s=t.x-n.x,r=t.y-n.y,o=(t.x-n.x)*(t.x-n.x)+(t.y-n.y)*(t.y-n.y),a=e.x-n.x,l=e.y-n.y,h=(e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y),u=i.x-n.x,c=i.y-n.y,d=(i.x-n.x)*(i.x-n.x)+(i.y-n.y)*(i.y-n.y);return s*l*d+r*h*u+o*a*c-o*l*u-r*a*d-s*h*c>0},sphereRayIntersection:function(t,e,i){i=void 0===i?1e-5:i;const s=new n.a.Vector3(0,0,0),r=e.direction,o=e.position,a=o.minus(s),l=r.dot(a),h=4*l*l-4*(a.magnitudeSquared-t*t);if(h<i)return null;const u=r.dot(s)-r.dot(o),c=Math.sqrt(h)/2,d=u-c,p=u+c;if(p<i)return null;const f=e.pointAtDistance(p),m=f.minus(s).normalized();if(d<i)return{distance:p,hitPoint:f,normal:m.negated(),fromOutside:!1};{const t=e.pointAtDistance(d),i=t.minus(s).normalized();return{distance:d,hitPoint:t,normal:i,fromOutside:!0}}},solveLinearRootsReal:function(t,e){return 0===t?0===e?null:[]:[-e/t]},solveQuadraticRootsReal:function(t,e,i){if(0===t||Math.abs(e/t)>1e7||Math.abs(i/t)>1e7)return u.solveLinearRootsReal(e,i);const n=e*e-4*t*i;if(n<0)return[];const s=Math.sqrt(n);return[(-e-s)/(2*t),(-e+s)/(2*t)]},solveCubicRootsReal:function(t,e,i,n){if(0===t)return u.solveQuadraticRootsReal(e,i,n);if(0===t||Math.abs(e/t)>1e7||Math.abs(i/t)>1e7||Math.abs(n/t)>1e7)return u.solveQuadraticRootsReal(e,i,n);if(0===n||Math.abs(t/n)>1e7||Math.abs(e/n)>1e7||Math.abs(i/n)>1e7)return[0].concat(u.solveQuadraticRootsReal(t,e,i));const s=(3*(i/=t)-(e/=t)*e)/9,r=(-27*(n/=t)+e*(9*i-e*e*2))/54,o=s*s*s+r*r,a=e/3;if(o>1e-7){const t=Math.sqrt(o);return[u.cubeRoot(r+t)+u.cubeRoot(r-t)-a]}if(0===o){const t=u.cubeRoot(r),e=-a-t;return[2*t-a,e,e]}{let t=-s*s*s;t=Math.acos(r/Math.sqrt(t));const e=2*Math.sqrt(-s);return[-a+e*Math.cos(t/3),-a+e*Math.cos((t+2*Math.PI)/3),-a+e*Math.cos((t+4*Math.PI)/3)]}},cubeRoot:function(t){return t>=0?Math.pow(t,1/3):-Math.pow(-t,1/3)},linear:function(t,e,i,n,s){return(n-i)/(e-t)*(s-t)+i},roundSymmetric:function(t){return(t<0?-1:1)*Math.round(Math.abs(t))},toFixed:function(t,e){const i=Math.pow(10,e);return(u.roundSymmetric(t*i)/i).toFixed(e)},toFixedNumber:function(t,e){return parseFloat(u.toFixed(t,e))},isInteger:function(t){return"number"==typeof t&&t%1==0},equalsEpsilon:function(t,e,i){return Math.abs(t-e)<=i},lineSegmentIntersection:function(t,e,i,n,r,o,a,l){const h=function(t,e,i,n,s,r){return(r-e)*(i-t)-(n-e)*(s-t)};if(h(t,e,r,o,a,l)*h(i,n,r,o,a,l)>0||h(r,o,t,e,i,n)*h(a,l,t,e,i,n)>0)return null;const u=(t-i)*(o-l)-(e-n)*(r-a);if(Math.abs(u)<1e-10)return null;if(t===r&&e===o||t===a&&e===l)return new s.a(t,e);if(i===r&&n===o||i===a&&n===l)return new s.a(i,n);const c=((t*n-e*i)*(r-a)-(t-i)*(r*l-o*a))/u,d=((t*n-e*i)*(o-l)-(e-n)*(r*l-o*a))/u;return new s.a(c,d)},distToSegmentSquared:function(t,e,i){const n=e.distanceSquared(i);if(0===n)return t.distanceSquared(e);const r=((t.x-e.x)*(i.x-e.x)+(t.y-e.y)*(i.y-e.y))/n;let o;return o=r<0?t.distanceSquared(e):r>1?t.distanceSquared(i):t.distanceSquared(new s.a(e.x+r*(i.x-e.x),e.y+r*(i.y-e.y))),o},distToSegment:function(t,e,i){return Math.sqrt(this.distToSegmentSquared(t,e,i))},arePointsCollinear:function(t,e,i,n){return void 0===n&&(n=0),u.triangleArea(t,e,i)<=n},triangleArea:function(t,e,i){return Math.abs(u.triangleAreaSigned(t,e,i))},triangleAreaSigned:function(t,e,i){return t.x*(e.y-i.y)+e.x*(i.y-t.y)+i.x*(t.y-e.y)},centroidOfPolygon:function(t){const e=new s.a(0,0);let i=0;return t.forEach((n,s)=>{const r=t[(s+1)%t.length],o=n.x*r.y-r.x*n.y;i+=o/2,e.addXY((n.x+r.x)*o,(n.y+r.y)*o)}),e.divideScalar(6*i),e},cosh:function(t){return(Math.exp(t)+Math.exp(-t))/2},sinh:function(t){return(Math.exp(t)-Math.exp(-t))/2},log10:function(t){return Math.log(t)/Math.LN10},boxMullerTransform:function(t,e,i){if(a=!a,!a)return h*e+t;let n,s;do{n=i.nextDouble(),s=i.nextDouble()}while(n<=r);return l=Math.sqrt(-2*Math.log(n))*Math.cos(o*s),h=Math.sqrt(-2*Math.log(n))*Math.sin(o*s),l*e+t},numberOfDecimalPlaces:function(t){let e=0,i=1;for(;t*i%1!=0;)e++,i*=10;return e},roundToInterval:function(t,e){return u.toFixedNumber(u.roundSymmetric(t/e)*e,u.numberOfDecimalPlaces(e))}};n.a.register("Utils",u),n.a.clamp=u.clamp,n.a.moduloBetweenDown=u.moduloBetweenDown,n.a.moduloBetweenUp=u.moduloBetweenUp,n.a.rangeInclusive=u.rangeInclusive,n.a.rangeExclusive=u.rangeExclusive,n.a.toRadians=u.toRadians,n.a.toDegrees=u.toDegrees,n.a.lineLineIntersection=u.lineLineIntersection,n.a.lineSegmentIntersection=u.lineSegmentIntersection,n.a.sphereRayIntersection=u.sphereRayIntersection,n.a.solveQuadraticRootsReal=u.solveQuadraticRootsReal,n.a.solveCubicRootsReal=u.solveCubicRootsReal,n.a.cubeRoot=u.cubeRoot,n.a.linear=u.linear,n.a.boxMullerTransform=u.boxMullerTransform,e.a=u},function(t,e,i){"use strict";var n=i(10),s=(i(14),i(2)),r=i(9);const o=JSON.stringify(window.phet&&phet.chipper&&phet.chipper.packageObject?phet.chipper.packageObject:{name:"placeholder"}),a=JSON.parse(o),l=_.hasIn(window,"phet.preloads.phetio"),h=l&&phet.preloads.phetio.queryParameters.phetioPrintMissingTandems,u=QueryStringMachine.containsKey("phetioValidation"),c=l&&u?phet.preloads.phetio.queryParameters.phetioValidation:l&&a.phet["phet-io"].validation,d=l&&c&&!h,p={required:[],optional:[]},f=[];let m=!1;const g=[];class y{constructor(t,e,i){this.parentTandem=t,this.name=e,this.phetioID=this.parentTandem?window.phetio.PhetioIDUtils.append(this.parentTandem.phetioID,this.name):this.name,i=Object(s.a)({required:!0,supplied:!0},i),this.children={},this.parentTandem&&this.parentTandem.addChild(e,this),this.required=i.required,this.supplied=i.supplied}getTermRegex(){return/^[a-zA-Z0-9~[\],]+$/}addPhetioObject(t){if(l){if(h&&this.required&&!this.supplied)return void p.required.push({phetioID:this.phetioID,stack:(new Error).stack});if(!this.required&&!this.supplied){if(h){const t=(new Error).stack;if(-1===t.indexOf("Font"))return void p.optional.push({phetioID:this.phetioID,stack:t})}return}if(m)for(let e=0;e<f.length;e++)f[e].addPhetioObject(t);else g.push(t)}}removePhetioObject(t){if((this.required||this.supplied)&&l)if(m){t.tandem.dispose();for(let e=0;e<f.length;e++)f[e].removePhetioObject(t)}else Object(n.a)(g,t)}getExtendedOptions(t){return Object(s.a)({supplied:this.supplied,required:this.required},t)}createTandem(t,e){if(e=this.getExtendedOptions(e),this.hasChild(t)){const e=this.children[t];return e}return new y(this,t,e)}hasChild(t){return this.children.hasOwnProperty(t)}addChild(t,e){this.children[t]=e}iterateDescendants(t){for(const e in this.children)this.children.hasOwnProperty(e)&&(t(this.children[e]),this.children[e].iterateDescendants(t))}removeChild(t){delete this.children[t]}dispose(){this.parentTandem.removeChild(this.name)}getConcretePhetioID(){return this.parentTandem?window.phetio.PhetioIDUtils.append(this.parentTandem.getConcretePhetioID(),this.name):this.phetioID}createGroupTandem(t){return this.children[t]?this.children[t]:new b(this,t)}static addPhetioObjectListener(t){f.push(t)}static launch(){for(m=!0;g.length>0;){const t=g.shift();t.tandem.addPhetioObject(t)}}static unlaunch(){m=!1,g.length=0}static createFromPhetioID(t){return t.split(".").reduce((t,e)=>("string"==typeof t&&(t=y.ROOT),t.createTandem(e)))}}y.ROOT=new class extends y{createTandem(t,e){if(y.VALIDATION){t===window.phetio.PhetioIDUtils.GLOBAL_COMPONENT_NAME||"requiredTandem"===t||"optionalTandem"===t||t===window.phetio.PhetioIDUtils.GENERAL_COMPONENT_NAME||_.endsWith(t,"Screen")}return super.createTandem(t,e)}}(null,_.camelCase(a.name)),y.GENERAL=y.ROOT.createTandem(window.phetio.PhetioIDUtils.GENERAL_COMPONENT_NAME),y.GENERAL_MODEL=y.GENERAL.createTandem(window.phetio.PhetioIDUtils.MODEL_COMPONENT_NAME),y.GENERAL_VIEW=y.GENERAL.createTandem(window.phetio.PhetioIDUtils.VIEW_COMPONENT_NAME),y.GLOBAL=y.ROOT.createTandem(window.phetio.PhetioIDUtils.GLOBAL_COMPONENT_NAME),y.GLOBAL_MODEL=y.GLOBAL.createTandem(window.phetio.PhetioIDUtils.MODEL_COMPONENT_NAME),y.GLOBAL_VIEW=y.GLOBAL.createTandem(window.phetio.PhetioIDUtils.VIEW_COMPONENT_NAME),y.OPTIONAL=y.ROOT.createTandem("optionalTandem",{required:!1,supplied:!1}),y.OPT_OUT=y.OPTIONAL,y.REQUIRED=y.ROOT.createTandem("requiredTandem",{required:d||h,supplied:!1}),y.missingTandems=p,y.PHET_IO_ENABLED=l,y.VALIDATION=d;class b extends y{constructor(t,e){super(t,e),this.groupName=e,this.groupMemberIndex=0}createNextTandem(){return this.parentTandem.createTandem(this.groupName+"~"+this.groupMemberIndex++)}}r.a.register("Tandem",y),e.a=y},function(t,e,i){"use strict";var n=i(11),s=i(2);const r={mixInto:function(t,e){e=Object(s.a)({defaultArguments:[],initialize:t,maxSize:100,initialSize:0,useDefaultConstruction:!1},e);const i=[],r=Function.prototype.bind.bind(t,t),o=r.apply(null,e.defaultArguments),a=e.initialize,l=e.useDefaultConstruction,h=t.prototype;for(Object(n.a)(t,{pool:i,dirtyFromPool:function(){return i.length?i.pop():new o},createFromPool:function(){let t;return i.length?(t=i.pop(),a.apply(t,arguments)):l?(t=new o,a.apply(t,arguments)):t=new(r.apply(null,arguments)),t}}),Object(n.a)(h,{freeToPool:function(){i.length<e.maxSize&&i.push(this)}});i.length<e.initialSize;)i.push(new o)}};i(7).a.register("Poolable",r),e.a=r},function(t,e,i){"use strict";const n=new(i(8).a)("dot");n.register("v2",(function(t,e){return new n.Vector2(t,e)})),n.register("v3",(function(t,e,i){return new n.Vector3(t,e,i)})),n.register("v4",(function(t,e,i,s){return new n.Vector4(t,e,i,s)})),n.register("FastArray",window.Float64Array?window.Float64Array:window.Array),e.a=n},function(t,e,i){"use strict";var n=i(8);const s=new n.a("phetCore");s.register("Namespace",n.a),e.a=s},function(t,e,i){"use strict";var n=i(17);function s(t){this.name=t,window.phet&&(window.phet[t]=this)}s.prototype={constructor:s,register:function(t,e){if(t.indexOf(".")<0)n.a,this[t]=e;else{const i=t.split(".");let s=this;for(let t=0;t<i.length-1;t++)n.a,s=s[i[t]];const r=i[i.length-1];n.a,s[r]=e}return e}},e.a=s},function(t,e,i){"use strict";var n=i(8);e.a=new n.a("tandem")},function(t,e,i){"use strict";function n(t,e){const i=_.indexOf(t,e);t.splice(i,1)}i(7).a.register("arrayRemove",n),e.a=n},function(t,e,i){"use strict";function n(t){return _.each(Array.prototype.slice.call(arguments,1),(function(e){if(e)for(const i in e)Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))})),t}i(7).a.register("extend",n),e.a=n},function(t,e,i){"use strict";function n(t,e){this._min=t,this._max=e}i(6).a.register("Range",n),n.prototype={constructor:n,getMin:function(){return this._min},get min(){return this.getMin()},setMin:function(t){this._min=t},set min(t){this.setMin(t)},getMax:function(){return this._max},get max(){return this.getMax()},setMax:function(t){this._max=t},set max(t){this.setMax(t)},setMinMax:function(t,e){this._min=t,this._max=e},copy:function(){return new n(this._min,this._max)},getLength:function(){return this._max-this._min},getCenter:function(){return(this._max+this._min)/2},contains:function(t){return t>=this._min&&t<=this._max},containsRange:function(t){return this._min<=t.min&&this._max>=t.max},intersects:function(t){return this._max>=t.min&&t.max>=this._min},intersectsExclusive:function(t){return this._max>t.min&&t.max>this._min},toString:function(){return"[Range (min:"+this._min+" max:"+this._max+")]"},constrainValue:function(t){return Math.min(Math.max(t,this._min),this._max)},equals:function(t){return this.constructor===t.constructor&&this._min===t.min&&this._max===t.max},getNormalizedValue:function(t){return(t-this.min)/this.getLength()},get defaultValue(){throw new Error("defaultValue is undefined, did you mean to use RangeWithValue?")}},e.a=n},function(t,e,i){"use strict";var n=i(0),s=i(5),r=i(6),o=i(3),a=i(1),l=i(16);function h(t,e,i){this.x=t,this.y=e,this.z=i}r.a.register("Vector3",h),Object(n.a)(Object,h,{isVector3:!0,dimension:3,getMagnitude:function(){return Math.sqrt(this.magnitudeSquared)},get magnitude(){return this.getMagnitude()},getMagnitudeSquared:function(){return this.dot(this)},get magnitudeSquared(){return this.getMagnitudeSquared()},distance:function(t){return Math.sqrt(this.distanceSquared(t))},distanceXYZ:function(t,e,i){const n=this.x-t,s=this.y-e,r=this.z-i;return Math.sqrt(n*n+s*s+r*r)},distanceSquared:function(t){const e=this.x-t.x,i=this.y-t.y,n=this.z-t.z;return e*e+i*i+n*n},distanceSquaredXYZ:function(t,e,i){const n=this.x-t,s=this.y-e,r=this.z-i;return n*n+s*s+r*r},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},dotXYZ:function(t,e,i){return this.x*t+this.y*e+this.z*i},angleBetween:function(t){return Math.acos(r.a.clamp(this.normalized().dot(t.normalized()),-1,1))},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},equalsEpsilon:function(t,e){return e||(e=0),Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)<=e},isFinite:function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z)},copy:function(t){return t?t.set(this):new h(this.x,this.y,this.z)},cross:function(t){return new h(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},normalized:function(){const t=this.magnitude;if(0===t)throw new Error("Cannot normalize a zero-magnitude vector");return new h(this.x/t,this.y/t,this.z/t)},roundedSymmetric:function(){return this.copy().roundSymmetric()},withMagnitude:function(t){return this.copy().setMagnitude(t)},timesScalar:function(t){return new h(this.x*t,this.y*t,this.z*t)},times:function(t){return this.timesScalar(t)},componentTimes:function(t){return new h(this.x*t.x,this.y*t.y,this.z*t.z)},plus:function(t){return new h(this.x+t.x,this.y+t.y,this.z+t.z)},plusXYZ:function(t,e,i){return new h(this.x+t,this.y+e,this.z+i)},plusScalar:function(t){return new h(this.x+t,this.y+t,this.z+t)},minus:function(t){return new h(this.x-t.x,this.y-t.y,this.z-t.z)},minusXYZ:function(t,e,i){return new h(this.x-t,this.y-e,this.z-i)},minusScalar:function(t){return new h(this.x-t,this.y-t,this.z-t)},dividedScalar:function(t){return new h(this.x/t,this.y/t,this.z/t)},negated:function(){return new h(-this.x,-this.y,-this.z)},blend:function(t,e){return this.plus(t.minus(this).times(e))},average:function(t){return this.blend(t,.5)},toString:function(){return"Vector3("+this.x+", "+this.y+", "+this.z+")"},toVector2:function(){return new a.a(this.x,this.y)},toVector4:function(){return new l.a(this.x,this.y,this.z,1)},setXYZ:function(t,e,i){return this.x=t,this.y=e,this.z=i,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},set:function(t){return this.setXYZ(t.x,t.y,t.z)},setMagnitude:function(t){const e=t/this.magnitude;return this.multiplyScalar(e)},add:function(t){return this.setXYZ(this.x+t.x,this.y+t.y,this.z+t.z)},addXYZ:function(t,e,i){return this.setXYZ(this.x+t,this.y+e,this.z+i)},addScalar:function(t){return this.setXYZ(this.x+t,this.y+t,this.z+t)},subtract:function(t){return this.setXYZ(this.x-t.x,this.y-t.y,this.z-t.z)},subtractXYZ:function(t,e,i){return this.setXYZ(this.x-t,this.y-e,this.z-i)},subtractScalar:function(t){return this.setXYZ(this.x-t,this.y-t,this.z-t)},multiplyScalar:function(t){return this.setXYZ(this.x*t,this.y*t,this.z*t)},multiply:function(t){return this.multiplyScalar(t)},componentMultiply:function(t){return this.setXYZ(this.x*t.x,this.y*t.y,this.z*t.z)},divideScalar:function(t){return this.setXYZ(this.x/t,this.y/t,this.z/t)},negate:function(){return this.setXYZ(-this.x,-this.y,-this.z)},setCross(t){return this.setXYZ(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},normalize:function(){const t=this.magnitude;if(0===t)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(t)},roundSymmetric:function(){return this.setXYZ(o.a.roundSymmetric(this.x),o.a.roundSymmetric(this.y),o.a.roundSymmetric(this.z))},toStateObject:function(){return{x:this.x,y:this.y,z:this.z}}},{slerp:function(t,e,i){return r.a.Quaternion.slerp(new r.a.Quaternion,r.a.Quaternion.getRotationQuaternion(t,e),i).timesVector3(t)},fromStateObject:function(t){return new h(t.x,t.y,t.z)}}),s.a.mixInto(h,{initialize:h.prototype.setXYZ,defaultArguments:[0,0,0]}),h.Immutable=function(t,e,i){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0,this.z=void 0!==i?i:0};const u=h.Immutable;Object(n.a)(h,u),u.mutableOverrideHelper=function(t){u.prototype[t]=function(){throw new Error("Cannot call mutable method '"+t+"' on immutable Vector3")}},u.mutableOverrideHelper("setXYZ"),u.mutableOverrideHelper("setX"),u.mutableOverrideHelper("setY"),u.mutableOverrideHelper("setZ"),h.ZERO=new h(0,0,0),h.X_UNIT=new h(1,0,0),h.Y_UNIT=new h(0,1,0),h.Z_UNIT=new h(0,0,1),e.a=h},function(t,e,i){"use strict";var n=i(7);const s={},r=t=>{window.phet&&window.phet.chipper&&window.phet.chipper.queryParameters&&phet.chipper.queryParameters.deprecationWarnings&&(s.hasOwnProperty(t)||(s[t]=!0,console.warn("Deprecation warning: "+t)))};n.a.register("deprecationWarning",r),e.a=r},function(t,e,i){"use strict";var n=i(0),s=i(2),r=i(6),o=(i(12),i(3));function a(t){null!==(t=Object(s.a)({seed:null,staticSeed:!1},t)).seed&&t.staticSeed;const e=t.staticSeed?window.phet.chipper.randomSeed:t.seed;this.setSeed(e)}Object(n.a)(Object,a,{setSeed:function(t){this.seed=t,this.seedrandom=null!==this.seed?new Math.seedrandom(this.seed+""):null},nextBoolean:function(){return this.nextDouble()>=.5},nextInt:function(t){return 0|this.nextDouble()*t},nextIntBetween:function(t,e){const i=e-t;return this.nextInt(i+1)+t},sample:function(t){return t[this.nextIntBetween(0,t.length-1)]},shuffle:function(t){const e=this;let i=-1;const n=new Array(t.length);return _.forEach(t,(function(t){const s=e.nextIntBetween(0,++i);n[i]=n[s],n[s]=t})),n},nextDouble:function(){return null===this.seed?Math.random():this.seedrandom()},nextDoubleBetween:function(t,e){const i=t+this.nextDouble()*(e-t);return i},nextGaussian:function(){return o.a.boxMullerTransform(0,1,this)},nextDoubleInRange:t=>t.min<t.max?phet.joist.random.nextDoubleBetween(t.min,t.max):t.min}),r.a.register("Random",a);var l=a,h=i(10),u=i(4),c=new(i(8).a)("joist");let d=null;const p=new class{constructor(){this.pendingLocks=[],this.launchBegan=!1,this.launchComplete=!1,this.callback=null}launch(t){this.callback=t,window.phet.joist.launchCalled=!0}proceedIfReady(){0===this.pendingLocks.length&&this.callback&&(this.launchBegan=!0,window.phet.joist.launchSimulation=()=>{u.a.PHET_IO_ENABLED&&d.onCrossFrameListenersReady(),phet.joist.random=new l({staticSeed:!0}),this.callback()},u.a.PHET_IO_ENABLED&&d.initialize(),phet.chipper.queryParameters.postMessageOnReady&&window.parent&&window.parent.postMessage(JSON.stringify({type:"ready",url:window.location.href}),"*"),u.a.PHET_IO_ENABLED&&!phet.preloads.phetio.queryParameters.phetioStandalone||phet.chipper.queryParameters.playbackMode||(this.launchComplete=!0,window.phet.joist.launchSimulation()))}createLock(t){return this.pendingLocks.push(t),()=>{Object(h.a)(this.pendingLocks,t),this.proceedIfReady()}}};(t=>{const e=t.createLock({name:"brand"});if(i(19)(`./${phet.chipper.brand}/js/Brand.js`).then(t=>e()),u.a.PHET_IO_ENABLED){const e=t.createLock({name:"phetioEngine"});Promise.resolve().then((function(){var t=new Error("Cannot find module '../../phet-io/js/phetioEngine.js'");throw t.code="MODULE_NOT_FOUND",t})).then(t=>{d=t.default,e()})}})(p),c.register("simLauncher",p);e.a=p},function(t,e,i){"use strict";var n=i(0),s=i(5),r=i(6),o=i(3),a=i(13);function l(t,e,i,n){this.x=t,this.y=e,this.z=i,this.w=n}r.a.register("Vector4",l),Object(n.a)(Object,l,{isVector4:!0,dimension:4,getMagnitude:function(){return Math.sqrt(this.magnitudeSquared)},get magnitude(){return this.getMagnitude()},getMagnitudeSquared:function(){return this.dot(this)},get magnitudeSquared(){return this.getMagnitudeSquared()},distance:function(t){return this.minus(t).magnitude},distanceXYZW:function(t,e,i,n){const s=this.x-t,r=this.y-e,o=this.z-i,a=this.w-n;return Math.sqrt(s*s+r*r+o*o+a*a)},distanceSquared:function(t){return this.minus(t).magnitudeSquared},distanceSquaredXYZW:function(t,e,i,n){const s=this.x-t,r=this.y-e,o=this.z-i,a=this.w-n;return s*s+r*r+o*o+a*a},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},dotXYZW:function(t,e,i,n){return this.x*t+this.y*e+this.z*i+this.w*n},angleBetween:function(t){return Math.acos(r.a.clamp(this.normalized().dot(t.normalized()),-1,1))},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},equalsEpsilon:function(t,e){return e||(e=0),Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)+Math.abs(this.w-t.w)<=e},isFinite:function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z)&&isFinite(this.w)},copy:function(t){return t?t.set(this):new l(this.x,this.y,this.z,this.w)},normalized:function(){const t=this.magnitude;return this.dividedScalar(t)},roundedSymmetric:function(){return this.copy().roundSymmetric()},withMagnitude:function(t){return this.copy().setMagnitude(t)},timesScalar:function(t){return new l(this.x*t,this.y*t,this.z*t,this.w*t)},times:function(t){return this.timesScalar(t)},componentTimes:function(t){return new l(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)},plus:function(t){return new l(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)},plusXYZW:function(t,e,i,n){return new l(this.x+t,this.y+e,this.z+i,this.w+n)},plusScalar:function(t){return new l(this.x+t,this.y+t,this.z+t,this.w+t)},minus:function(t){return new l(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)},minusXYZW:function(t,e,i,n){return new l(this.x-t,this.y-e,this.z-i,this.w-n)},minusScalar:function(t){return new l(this.x-t,this.y-t,this.z-t,this.w-t)},dividedScalar:function(t){return new l(this.x/t,this.y/t,this.z/t,this.w/t)},negated:function(){return new l(-this.x,-this.y,-this.z,-this.w)},blend:function(t,e){return this.plus(t.minus(this).times(e))},average:function(t){return this.blend(t,.5)},toString:function(){return"Vector4("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},toVector3:function(){return new a.a(this.x,this.y,this.z)},setXYZW:function(t,e,i,n){return this.x=t,this.y=e,this.z=i,this.w=n,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},set:function(t){return this.setXYZW(t.x,t.y,t.z,t.w)},setMagnitude:function(t){const e=t/this.magnitude;return this.multiplyScalar(e)},add:function(t){return this.setXYZW(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)},addXYZW:function(t,e,i,n){return this.setXYZW(this.x+t,this.y+e,this.z+i,this.w+n)},addScalar:function(t){return this.setXYZW(this.x+t,this.y+t,this.z+t,this.w+t)},subtract:function(t){return this.setXYZW(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)},subtractXYZW:function(t,e,i,n){return this.setXYZW(this.x-t,this.y-e,this.z-i,this.w-n)},subtractScalar:function(t){return this.setXYZW(this.x-t,this.y-t,this.z-t,this.w-t)},multiplyScalar:function(t){return this.setXYZW(this.x*t,this.y*t,this.z*t,this.w*t)},multiply:function(t){return this.multiplyScalar(t)},componentMultiply:function(t){return this.setXYZW(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)},divideScalar:function(t){return this.setXYZW(this.x/t,this.y/t,this.z/t,this.w/t)},negate:function(){return this.setXYZW(-this.x,-this.y,-this.z,-this.w)},normalize:function(){const t=this.magnitude;if(0===t)throw new Error("Cannot normalize a zero-magnitude vector");return this.divideScalar(t)},roundSymmetric:function(){return this.setXYZW(o.a.roundSymmetric(this.x),o.a.roundSymmetric(this.y),o.a.roundSymmetric(this.z),o.a.roundSymmetric(this.w))}}),s.a.mixInto(l,{initialize:l.prototype.setXYZW,defaultArguments:[0,0,0,0]}),l.Immutable=function(t,e,i,n){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0,this.z=void 0!==i?i:0,this.w=void 0!==n?n:1};const h=l.Immutable;Object(n.a)(l,h),h.mutableOverrideHelper=function(t){h.prototype[t]=function(){throw new Error("Cannot call mutable method '"+t+"' on immutable Vector4")}},h.mutableOverrideHelper("setXYZW"),h.mutableOverrideHelper("setX"),h.mutableOverrideHelper("setY"),h.mutableOverrideHelper("setZ"),h.mutableOverrideHelper("setW"),l.ZERO=new l(0,0,0,0),l.X_UNIT=new l(1,0,0,0),l.Y_UNIT=new l(0,1,0,0),l.Z_UNIT=new l(0,0,1,0),l.W_UNIT=new l(0,0,0,1),e.a=l},function(t,e,i){"use strict";(function(t){let i;try{i=t&&t.hot}catch(n){i=!1}e.a=i}).call(this,i(18)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,i){var n={"./adapted-from-phet/js/Brand.js":21};function s(t){return r(t).then(i)}function r(t){return Promise.resolve().then((function(){if(!i.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}))}s.keys=function(){return Object.keys(n)},s.resolve=r,s.id=19,t.exports=s},function(t,e,i){"use strict";i.r(e);var n=i(12),s=i(2),r=i(8),o=new r.a("axon"),a=i(7);class l{constructor(t){t.keys,t.map;const e=t.keys||Object.keys(t.map),i=t.map||{};t=Object(s.a)({phetioDocumentation:null,beforeFreeze:null},t),this.phetioDocumentation=t.phetioDocumentation,this.KEYS=e,this.VALUES=[],e.forEach(t=>{const e=i[t]||{};e.name=t,e.toString=()=>t,this[t]=e,this.VALUES.push(e)}),t.beforeFreeze&&t.beforeFreeze(this)}includes(t){return _.includes(this.VALUES,t)}static byKeys(t,e){return new l(Object(s.a)({keys:t},e))}static byMap(t,e){return new l(Object(s.a)({map:t},e))}}a.a.register("Enumeration",l);var h=l;const u=["string","number","boolean","function"],c={assertions:!1},d=["valueType","validValues","isValidValue","arrayElementType","phetioType"],p={isValidValidator(t,e){if(e=e||c,!(t instanceof Object))return!1;if(!(t.hasOwnProperty("isValidValue")||t.hasOwnProperty("valueType")||t.hasOwnProperty("arrayElementType")||t.hasOwnProperty("validValues")||t.hasOwnProperty("phetioType")))return!1;if(t.hasOwnProperty("valueType")&&!f(t.valueType,e))return!1;if(t.hasOwnProperty("arrayElementType")){if(t.hasOwnProperty("valueType"))return!1;if(!f(t.arrayElementType,e))return!1}if(t.hasOwnProperty("isValidValue")&&"function"!=typeof t.isValidValue&&null!==t.isValidValue&&void 0!==t.isValidValue)return!1;if(void 0!==t.validValues&&null!==t.validValues){if(!Array.isArray(t.validValues))return!1;const e=_.omit(t,"validValues");if(p.containsValidatorKey(e))for(let i=0;i<t.validValues.length;i++)if(!p.isValueValid(t.validValues[i],e))return!1}return!t.hasOwnProperty("phetioType")||!(!t.phetioType||!t.phetioType.validator)&&p.isValidValidator(t.phetioType.validator,e)},validateValueType:(t,e)=>("function"==typeof t||"string"==typeof t||t instanceof h||null==t)&&!("string"==typeof t&&!_.includes(u,t)),validateValidator(t){0},containsValidatorKey(t){for(let e=0;e<d.length;e++)if(t.hasOwnProperty(d[e]))return!0;return!1},isValueValid(t,e,i){if((i=Object(s.a)({validateValidator:!0,assertions:!1},i)).validateValidator&&!o.ValidatorDef.isValidValidator(e,i))return!1;if(e.hasOwnProperty("valueType")){const n=e.valueType;if(Array.isArray(n)){if(!_.some(n.map(e=>p.isValueValidValueType(t,e,c))))return!1}else if(n&&!p.isValueValidValueType(t,n,i))return!1}if(e.hasOwnProperty("arrayElementType")){const n=e.arrayElementType;if(!p.isValueValid(t,{valueType:Array},i))return!1;if(!_.every(t.map(t=>Array.isArray(n)?!!_.some(n.map(e=>p.isValueValidValueType(t,e,c))):p.isValueValidValueType(t,e.arrayElementType,i))))return!1}return(!e.hasOwnProperty("validValues")||-1!==e.validValues.indexOf(t))&&(!(e.hasOwnProperty("isValidValue")&&!e.isValidValue(t))&&!(e.hasOwnProperty("phetioType")&&!p.isValueValid(t,e.phetioType.validator,c)))},isValueValidValueType:(t,e,i)=>("string"!=typeof e||typeof t===e)&&(!(e===Array&&!Array.isArray(t))&&(!(e instanceof h&&!e.includes(t))&&(("function"!=typeof e||t instanceof e)&&(null!==e||null===t))))},f=(t,e)=>{if(Array.isArray(t)){if(!_.every(t.map(t=>p.validateValueType(t,e))))return!1}else if(t&&!p.validateValueType(t,e))return!1;return!0};p.VALIDATOR_KEYS=d,p.STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR={valueType:"string",isValidValue:t=>!/\{\{\w*\}\}/.test(t)},o.register("ValidatorDef",p);var m=p;const g=(t,e,i)=>t;o.register("validate",g);var y=g,b=i(9);class v{constructor(t,e){this.phetioObject=t,this.phetioID=e,y(t,this.constructor.validator)}static toStateObject(t){return t}static fromStateObject(t){return t}static stateToArgsForConstructor(t){return[]}static applyState(t,e){}static getSupertype(t){const e=Object.getPrototypeOf(t);return e===Object.getPrototypeOf(window.Object)?null:e}static validateSubtype(t){const e=t.typeName;e.indexOf("<")>=0&&t.parameterTypes.forEach(t=>!1);e.split(/[<(]/)[0];t.hasOwnProperty("methods")||(t.methods={});for(const i in t.methods){const e=t.methods[i];"object"==typeof e&&e.parameterTypes.forEach(t=>{})}t.hasOwnProperty("methodOrder")&&t.methodOrder.forEach((function(t){})),t.hasOwnProperty("api")}}v.isIOType=t=>t===v||t.prototype instanceof v,v.methods={},v.documentation="The root of the wrapper object hierarchy.",v.typeName="ObjectIO",v.validator={valueType:Object},v.validateSubtype(v),b.a.register("ObjectIO",v);var A=v,w=i(6);class x extends A{static toStateObject(t){return y(t,this.validator),{min:t.min,max:t.max}}static fromStateObject(t){return new n.a(t.min,t.max)}}x.documentation='A range with "min" and a "max" members.',x.validator={valueType:n.a},x.typeName="RangeIO",A.validateSubtype(x),w.a.register("RangeIO",x);var S=x,T=i(4);const D={};function E(t){return D.hasOwnProperty(t.typeName)||(D[t.typeName]=C(t)),D[t.typeName]}const C=t=>{class e extends A{static toStateObject(e){return null===e?null:t.toStateObject(e)}static fromStateObject(e){return null===e?null:t.fromStateObject(e)}}return e.documentation="A wrapper to wrap another IOType, adding support for null.",e.validator={isValidValue:e=>null===e||m.isValueValid(e,t.validator)},e.typeName=`NullableIO<${t.typeName}>`,e.parameterTypes=[t],A.validateSubtype(e),e};b.a.register("NullableIO",E);var P=E;class k extends A{constructor(){super()}static toStateObject(t){return t===Number.POSITIVE_INFINITY?"POSITIVE_INFINITY":t===Number.NEGATIVE_INFINITY?"NEGATIVE_INFINITY":t}static fromStateObject(t){return"POSITIVE_INFINITY"===t?Number.POSITIVE_INFINITY:"NEGATIVE_INFINITY"===t?Number.NEGATIVE_INFINITY:t}}k.documentation="IO Type for Javascript's number primitive type",k.validator={valueType:"number"},k.typeName="NumberIO",A.validateSubtype(k),b.a.register("NumberIO",k);var I=k;class L extends A{constructor(t,e){super(t,e)}static toStateObject(t){return t}static fromStateObject(t){return t}}L.documentation="IO Type for Javascript's string primitive type",L.validator={valueType:"string"},L.typeName="StringIO",A.validateSubtype(L),b.a.register("StringIO",L);var O=L;const R={};function N(t,e){for(let n=0;n<e.length;n++);const i=`${t.typeName}.${e.map(t=>t.typeName).join(",")}`;return R.hasOwnProperty(i)||(R[i]=M(t,e)),R[i]}const M=(t,e)=>{const i=e.map(t=>t.typeName).join(",");class n extends A{}let s=e.map(t=>t.typeName).join(", ");return""===s&&(s="VoidIO"),n.documentation="Wrapper for the built-in JS function type.<br><strong>Arguments:</strong> "+s+"<br><strong>Return Type:</strong> "+t.typeName,n.validator={valueType:"function"},n.returnType=t,n.functionParameterTypes=e,n.wrapForPhetioCommandProcessor=!0,n.typeName=`FunctionIO(${i})=>${t.typeName}`,n.parameterTypes=e.concat([t]),A.validateSubtype(n),n};b.a.register("FunctionIO",N);var B=N;class F extends A{constructor(t,e){super(t,e)}static toStateObject(t){}}F.documentation="Type for which there is no instance, usually to mark functions without a return value",F.validator={isValidValue:()=>!0},F.typeName="VoidIO",A.validateSubtype(F),b.a.register("VoidIO",F);var V=F;_.hasIn(window,"phet.chipper.queryParameters")&&phet.chipper.queryParameters.shuffleListeners;class q{constructor(){this.listeners=[],this.activeListenersStack=[]}dispose(){this.listeners.length=0}emit(){if(this.listeners.length>0){this.activeListenersStack.push(this.listeners);const t=this.activeListenersStack.length-1;for(let e=0;e<this.activeListenersStack[t].length;e++)this.activeListenersStack[t][e].apply(null,arguments);this.activeListenersStack.pop()}}addListener(t){this.defendListeners(),this.listeners.push(t),this.changeCount&&this.changeCount(1)}removeListener(t){const e=this.listeners.indexOf(t);this.defendListeners(),this.listeners.splice(e,1),this.changeCount&&this.changeCount(-1)}removeAllListeners(){const t=this.listeners.length;for(;this.listeners.length>0;)this.removeListener(this.listeners[0]);this.changeCount&&this.changeCount(-t)}defendListeners(){for(let t=this.activeListenersStack.length-1;t>=0&&!this.activeListenersStack[t].defended;t--){const e=this.listeners.slice();e.defended=!0,this.activeListenersStack[t]=e}}hasListener(t){return this.listeners.indexOf(t)>=0}hasListeners(){return this.listeners.length>0}getListenerCount(){return this.listeners.length}}o.register("TinyEmitter",q);var H=q;const Y=new class extends H{setTimeout(t,e){let i=0;const n=s=>{i+=s,1e3*i>=e&&this.hasListener(n)&&(t(),this.removeListener(n))};return this.addListener(n),n}clearTimeout(t){this.hasListener(t)&&this.removeListener(t)}setInterval(t,e){let i=0;const n=s=>{for(i+=s;1e3*i>=e&&-1!==this.hasListener(n);)t(),i-=e/1e3};return this.addListener(n),n}clearInterval(t){this.hasListener(t)&&this.removeListener(t)}runOnNextFrame(t){this.setTimeout(t,0)}}({parameters:[{valueType:"number"}]});o.register("timer",Y);var j=Y;const G=function(t,...e){0};a.a.register("assertMutuallyExclusiveOptions",G);var z=i(0);const W=new Map;function U(t){return W.has(t)||W.set(t,X(t)),W.get(t)}const X=t=>{class e extends A{constructor(t,e){super(t,e)}static toStateObject(t){return i(t)}static fromStateObject(e){return t[e]}}const i=t=>t.name,n=t.VALUES.map(i),s=t.phetioDocumentation?" "+t.phetioDocumentation:"";return e.validator={valueType:t},e.documentation=`Possible values: ${n}.${s}`,e.typeName=`EnumerationIO(${n.join("|")})`,A.validateSubtype(e),e};a.a.register("EnumerationIO",U);var K=U;const Q=h.byKeys(["USER","MODEL","WRAPPER"],{beforeFreeze:t=>{t.phetioType=K(t)}});b.a.register("EventType",Q);var Z=Q;class J extends A{static toStateObject(t){return{elementID:t.element.tandem.phetioID}}static fromStateObject(t){return{}}}J.documentation="A LinkedElement",J.validator={isValidValue:()=>!0},J.typeName="LinkedElementIO",A.validateSubtype(J),b.a.register("LinkedElementIO",J);var tt=J;const et=t=>{if(Array.isArray(t))return t.map(et);if("object"!=typeof t||null===t)return t;const e={};return Object.keys(t).sort().forEach((function(i){const n=t[i];e[i]=et(n)})),e};a.a.register("copyWithSortedKeys",et);var it=et;class nt extends T.a{constructor(t,e,i){super(t,e,i)}getTermRegex(){return/^[a-zA-Z0-9_]+$/}getConcretePhetioID(){return window.phetio.PhetioIDUtils.append(this.parentTandem.getConcretePhetioID(),"archetype")}}nt.DYNAMIC_ARCHETYPE_NAME="archetype",b.a.register("DynamicTandem",nt);var st=nt;const rt=["phetioDynamicElement","phetioEventType","phetioIsArchetype","phetioPlayback","phetioReadOnly","phetioState","phetioTypeName"];const ot=new class{constructor(){if(this.apiMismatches=[],this.simHasStarted=!1,this.enabled=!1,this.referenceAPI=this.enabled&&window.phet.preloads.phetio.queryParameters.phetioReferenceAPI,this.everyPhetioType={},this.loadedReferenceAPI=null,this.enabled&&this.referenceAPI){const t=new XMLHttpRequest;t.open("GET",window.phet.preloads.phetio.queryParameters.phetioReferenceAPI),t.send(null),t.onreadystatechange=()=>{4===t.readyState&&200===t.status&&(this.loadedReferenceAPI=JSON.parse(t.responseText))}}}onSimStarted(t){if(!this.enabled)return;if(this.validateOverridesFile(),!this.referenceAPI)return;const e=this.loadedReferenceAPI.phetioElements,i=this.loadedReferenceAPI.phetioTypes,n=t.getPhetioElementsMetadata(),s=t.getPhetioTypes();if(null===phet.chipper.queryParameters.screens&&phet.chipper.queryParameters.homeScreen){for(const t in e)if(e.hasOwnProperty(t)){e[t].phetioDynamicElement&&this.assertAPIError({phetioID:t,ruleInViolation:"10. Dynamic elements should not appear in the API.",message:"dynamic phetioID not expected but found"}),n.hasOwnProperty(t)||this.assertAPIError({phetioID:t,ruleInViolation:"5. When the sim is finished starting up, all non-dynamic schema entries must be registered.",message:"phetioID expected but does not exist"});for(let i=0;i<rt.length;i++){const s=rt[i];e[t][s]!==n[t][s]&&this.assertAPIError({ruleInViolation:"2. Registered PhetioObject baseline must equal baseline schema to ensure that baseline changes are intentional.",phetioID:t,message:`Incompatible value for ${s}, desired=${e[t][s]}, actual=${n[t][s]}`})}}for(const t in i)if(i.hasOwnProperty(t))if(s.hasOwnProperty(t)){const e=i[t].methods,n=s[t].methods;for(const i in e)n.hasOwnProperty(i)||this.assertAPIError({ruleInViolation:`Missing method, type=${t}, method=${i}`})}else this.assertAPIError({ruleInViolation:"Desired type missing: "+t.typeName});if("exact"===window.phet.preloads.phetio.queryParameters.phetioReferenceAPIValidationLevel&&(_.isEqual(e,n)||this.assertAPIError({ruleInViolation:"2. Registered PhetioObject baseline must equal baseline schema to ensure that baseline changes are intentional.",message:"baseline schema does not match PhetioObject computed baseline metadata",phetioElementsBaseline:e,stringifiedBaseline:JSON.stringify(it(e),null,2),phetioElementsBaselineFromFile:e}),!_.isEqual(i,s))){const t=Object.keys(i),e=Object.keys(window.phet.preloads.phetio.phetioTypes);this.assertAPIError({ruleInViolation:"9. Types in the sim must exactly match types in the types file to ensure that type changes are intentional.",message:"phetioTypes are not equivalent",areKeysEquivalent:_.isEqual(t.sort(),e.sort()),typesNotInSim:e.filter(e=>!t.includes(e)),typesNotInFile:t.filter(t=>!e.includes(t))})}}this.simHasStarted=!0}onPhetioObjectRemoved(t){if(!this.enabled)return;const e=t.tandem.phetioID;t.phetioDynamicElement||-1!==e.indexOf("~")||this.assertAPIError({phetioID:e,ruleInViolation:"6. Any static, registered PhetioObject can never be deregistered."})}onPhetioObjectAdded(t){if(!this.enabled)return;const e=t.phetioType;if(this.everyPhetioType[e.typeName]||(this.everyPhetioType[e.typeName]=e),this.simHasStarted&&-1===t.tandem.phetioID.indexOf("~")){const e=t.tandem.getConcretePhetioID(),i=window.phet.preloads.phetio.phetioElementsBaseline[e];i||this.assertAPIError({phetioID:t.tandem.phetioID,ruleInViolation:"4. After startup, only dynamic instances prescribed by the baseline file can be registered.",message:"element's concrete phetioID was not in the baseline file after being created after startup."}),phet.axon.timer.runOnNextFrame(()=>{i.phetioIsArchetype&&t.phetioDynamicElement||this.assertAPIError({phetioID:t.tandem.phetioID,ruleInViolation:"4. After startup, only dynamic instances prescribed by the baseline file can be registered."})})}}validateOverridesFile(){const t=phet.phetio.phetioEngine.getPhetioElementsBaseline();for(const e in window.phet.preloads.phetio.phetioElementsOverrides){e.indexOf(st.DYNAMIC_ARCHETYPE_NAME);if(phet.preloads.phetio.createArchetypes||t.hasOwnProperty(e))if(t.hasOwnProperty(e)){const i=window.phet.preloads.phetio.phetioElementsOverrides[e],n=t[e];0===Object.keys(i).length&&this.assertAPIError({phetioID:e,ruleInViolation:"8. Any schema entries in the overrides file must be different from its baseline counterpart.",message:"no metadata keys found for this override."});for(const t in i)n.hasOwnProperty(t)||this.assertAPIError({phetioID:e,ruleInViolation:"8. Any schema entries in the overrides file must be different from its baseline counterpart.",message:"phetioID metadata key not found in the baseline: "+t}),i[t]===n[t]&&this.assertAPIError({phetioID:e,ruleInViolation:"8. Any schema entries in the overrides file must be different from its baseline counterpart.",message:"phetioID metadata override value is the same as the corresponding metadata value in the baseline."})}else this.assertAPIError({phetioID:e,ruleInViolation:"7. Any schema entries in the overrides file must exist in the baseline file.",message:"phetioID expected in the baseline file but does not exist"});else;}}assertAPIError(t){t.phetioID?(t.phetioID,t.ruleInViolation):t.ruleInViolation;console.log("error data:",t)}};b.a.register("phetioAPIValidation",ot);var at=ot;const lt=T.a.PHET_IO_ENABLED,ht={isValidValue:A.isIOType},ut={valueType:"boolean"},ct={valueType:"string",isValidValue:t=>-1===t.indexOf("\n")},dt={valueType:Z},pt={isValidValue:t=>_.every(_.keys(t),t=>gt.indexOf(t)>=0)},ft={valueType:[Object,null]},mt={tandem:T.a.OPTIONAL,phetioType:A,phetioDocumentation:"",phetioState:!0,phetioReadOnly:!1,phetioEventType:Z.MODEL,phetioHighFrequency:!1,phetioPlayback:!1,phetioStudioControl:!0,phetioComponentOptions:{},phetioFeatured:!1,phetioEventMetadata:null,phetioDynamicElement:!1},gt=_.keys(mt).concat(["visibleProperty","pickableProperty","opacityProperty","textProperty"]);function yt(t){this.tandem=mt.tandem,this.phetioType=mt.phetioType,this.phetioState=mt.phetioState,this.phetioReadOnly=mt.phetioReadOnly,this.phetioDocumentation=mt.phetioDocumentation,this.phetioEventType=mt.phetioEventType,this.phetioHighFrequency=mt.phetioHighFrequency,this.phetioPlayback=mt.phetioPlayback,this.phetioStudioControl=mt.phetioStudioControl,this.phetioDynamicElement=mt.phetioDynamicElement,this.phetioFeatured=mt.phetioFeatured,this.phetioEventMetadata=mt.phetioEventMetadata,this.phetioComponentOptions=mt.phetioComponentOptions,this.phetioWrapper=null,this.phetioObjectInitialized=!1,this.phetioMessageStack=[],this.isDisposed=!1,this.phetioIsArchetype=null,this.phetioBaselineMetadata=null,this.phetioArchetypePhetioID=null,this.linkedElements=[],this.phetioNotifiedObjectCreated=!1,t&&this.initializePhetioObject({},t)}Object(z.a)(Object,yt,{initializePhetioObject:function(t,e){if(e.tandem&&e.tandem.supplied){if(y(e.tandem,{valueType:T.a}),e=Object(s.a)({},mt,t,e),y(e.phetioType,ht),y(e.phetioState,ut),y(e.phetioReadOnly,ut),y(e.phetioEventType,dt),y(e.phetioDocumentation,ct),y(e.phetioHighFrequency,ut),y(e.phetioPlayback,ut),y(e.phetioStudioControl,ut),y(e.phetioComponentOptions,pt),y(e.phetioFeatured,ut),y(e.phetioEventMetadata,ft),y(e.phetioDynamicElement,ut),lt&&e.tandem.supplied&&((at.enabled||phet.preloads.phetio.queryParameters.studio)&&(this.phetioBaselineMetadata=this.getMetadata(Object(s.a)({phetioIsArchetype:this.phetioIsArchetype},e))),-1===e.tandem.phetioID.indexOf("~"))){const t=e.tandem.getConcretePhetioID();if(window.phet.preloads.phetio.phetioElementsOverrides){const i=window.phet.preloads.phetio.phetioElementsOverrides[t];i&&(e=Object(s.a)(e,i))}}this.tandem=e.tandem,this.phetioType=e.phetioType,this.phetioState=e.phetioState,this.phetioReadOnly=e.phetioReadOnly,this.phetioEventType=e.phetioEventType,this.phetioDocumentation=e.phetioDocumentation,this.phetioHighFrequency=e.phetioHighFrequency,this.phetioPlayback=e.phetioPlayback,this.phetioStudioControl=e.phetioStudioControl,this.phetioComponentOptions=e.phetioComponentOptions,this.phetioFeatured=e.phetioFeatured,this.phetioEventMetadata=e.phetioEventMetadata,this.phetioDynamicElement=e.phetioDynamicElement,this.phetioPlayback&&(this.phetioEventMetadata=this.phetioEventMetadata||{},this.phetioEventMetadata.playback=!0),lt&&this.isPhetioInstrumented()&&(this.phetioWrapper=new this.phetioType(this,this.tandem.phetioID)),this.tandem.addPhetioObject(this),this.phetioObjectInitialized=!0}else e.tandem&&(this.tandem=e.tandem)},phetioStartEvent:function(t,e){if(lt&&this.isPhetioInstrumented()){if(e=Object(s.a)({data:null,getData:null},e),this.phetioHighFrequency&&_.hasIn(window,"phet.preloads.phetio.queryParameters")&&!window.phet.preloads.phetio.queryParameters.phetioEmitHighFrequencyEvents&&!phet.phetio.dataStream.isEmittingLowFrequencyEvent())return void this.phetioMessageStack.push(-1);const i=e.getData?e.getData():e.data;this.phetioMessageStack.push(phet.phetio.dataStream.start(this.phetioEventType,this.tandem.phetioID,this.phetioType,t,i,this.phetioEventMetadata,this.phetioHighFrequency))}},phetioEndEvent:function(){if(lt&&this.isPhetioInstrumented()){const t=this.phetioMessageStack.pop();if(-1===t)return;phet.phetio.dataStream.end(t)}},propagateDynamicFlagsToDescendants:function(){const t=phet.phetio.phetioEngine;this.tandem.iterateDescendants(e=>{if(t.hasPhetioObject(e.phetioID)){const i=t.getPhetioObject(e.phetioID);i.phetioIsArchetype=this.phetioIsArchetype,i.setPhetioDynamicElement(this.phetioDynamicElement),i.phetioBaselineMetadata&&(i.phetioBaselineMetadata.phetioIsArchetype=this.phetioIsArchetype)}})},setPhetioDynamicElement(t){this.phetioDynamicElement=!this.phetioIsArchetype&&t,this.phetioArchetypePhetioID=t?this.tandem.getConcretePhetioID():null,this.phetioBaselineMetadata&&(this.phetioBaselineMetadata.phetioDynamicElement=this.phetioDynamicElement)},markDynamicElementArchetype:function(){this.phetioIsArchetype=!0,this.setPhetioDynamicElement(!1),this.phetioBaselineMetadata&&(this.phetioBaselineMetadata.phetioIsArchetype=this.phetioIsArchetype),T.a.PHET_IO_ENABLED&&this.propagateDynamicFlagsToDescendants()},isPhetioInstrumented:function(){return this.tandem&&this.tandem.supplied},addLinkedElement:function(t,e){this.isPhetioInstrumented()?lt&&t.isPhetioInstrumented()&&this.linkedElements.push(new bt(t,e)):this.linkedElements=null},onSimulationConstructionCompleted:function(){this.phetioBaselineMetadata=null},dispose:function(){this.phetioObjectInitialized&&(this.tandem.removePhetioObject(this),this.phetioWrapper&&this.phetioWrapper.dispose&&this.phetioWrapper.dispose()),this.linkedElements&&(this.linkedElements.forEach(t=>t.dispose()),this.linkedElements.length=0),this.isDisposed=!0},getMetadata:function(t){const e={phetioTypeName:(t=t||this).phetioType.typeName,phetioDocumentation:t.phetioDocumentation,phetioState:t.phetioState,phetioReadOnly:t.phetioReadOnly,phetioEventType:Z.phetioType.toStateObject(t.phetioEventType),phetioHighFrequency:t.phetioHighFrequency,phetioPlayback:t.phetioPlayback,phetioStudioControl:t.phetioStudioControl,phetioDynamicElement:t.phetioDynamicElement,phetioIsArchetype:t.phetioIsArchetype,phetioFeatured:t.phetioFeatured};return t.phetioArchetypePhetioID&&(e.phetioArchetypePhetioID=t.phetioArchetypePhetioID),e}},{mergePhetioComponentOptions:function(t,e){e.phetioComponentOptions=_.merge(t,e.phetioComponentOptions)},DEFAULT_OPTIONS:mt,METADATA_KEYS:["phetioTypeName","phetioDocumentation","phetioState","phetioReadOnly","phetioEventType","phetioHighFrequency","phetioPlayback","phetioStudioControl","phetioDynamicElement","phetioIsArchetype","phetioFeatured","phetioArchetypePhetioID"]});class bt extends yt{constructor(t,e){(e=Object(s.a)({phetioType:tt},e)).phetioReadOnly=!0,e.phetioFeatured=t.phetioFeatured,super(e),this.element=t}getMetadata(t){const e=super.getMetadata(t);return delete e.phetioFeatured,e}}b.a.register("PhetioObject",yt);var vt=yt;function _t(t,e,i){this.dependencies=t;const n=this;this.dependencyListeners=[],t.forEach((function(i,s){const r=function(i){n.isDisposed||e.apply(null,t.map((function(t){return t.get()})))};n.dependencyListeners.push(r),i.lazyLink(r,{phetioDependencies:_.without(t,i)})})),i||e.apply(null,t.map((function(t){return t.get()}))),this.isDisposed=!1}o.register("Multilink",_t),Object(z.a)(Object,_t,{dispose:function(){for(let t=0;t<this.dependencies.length;t++){const e=this.dependencies[t];e.isDisposed||e.unlink(this.dependencyListeners[t])}this.dependencies=null,this.dependencyListeners=null,this.isDisposed=!0}});var At=_t,wt=i(10);const xt=h.byKeys(["UNDEFER","NOTIFY"]);o.register("PropertyStatePhase",xt);var St=xt;class Tt{constructor(t){this.phaseCallbacks=[],this.propertyOrderDependencies=[],this.propertiesInOrderDependencies={},this.initialized=!1}initialize(t){t.onBeforeSetValueEmitter.addListener(t=>{if(t instanceof Ot&&!t.isDeferred){t.setDeferred(!0);const e=t.tandem.phetioID,i=()=>{const i=t.setDeferred(!1);this.phaseCallbacks.push(new Dt(e,i,St.NOTIFY))};this.phaseCallbacks.push(new Dt(e,i,St.UNDEFER))}}),t.stateSetEmitter.addListener(t=>{this.undeferAndNotifyProperties(Object.keys(t))}),t.isSettingStateProperty.lazyLink(t=>{}),this.initialized=!0}validateInstrumentedProperty(t){}validatePropertyPhasePair(t,e){this.validateInstrumentedProperty(t)}registerPhetioOrderDependency(t,e,i,n){this.validatePropertyPhasePair(t,e),this.validatePropertyPhasePair(i,n),this.propertiesInOrderDependencies[t.tandem.phetioID]=!0,this.propertiesInOrderDependencies[i.tandem.phetioID]=!0,this.propertyOrderDependencies.push(new Et(t.tandem.phetioID,e,i.tandem.phetioID,n))}propertyInAnOrderDependency(t){return this.validateInstrumentedProperty(t),!!this.propertiesInOrderDependencies[t.tandem.phetioID]}unregisterOrderDependenciesForProperty(t){this.validateInstrumentedProperty(t);for(let e=0;e<this.propertyOrderDependencies.length;e++){const i=this.propertyOrderDependencies[e];i.usesPhetioID(t.tandem.phetioID)&&(Object(wt.a)(this.propertyOrderDependencies,i),e--)}delete this.propertiesInOrderDependencies[t.tandem.phetioID]}undeferAndNotifyProperties(t){const e=[];for(let r=0;r<this.propertyOrderDependencies.length;r++){const i=this.propertyOrderDependencies[r];-1!==t.indexOf(i.beforePhetioID)&&-1!==t.indexOf(i.afterPhetioID)||e.push(i)}const i=_.without(this.propertyOrderDependencies,...e),n={};let s=0;for(;this.phaseCallbacks.length>0;)s++,s>5e3&&this.errorInUndeferAndNotifyStep(n,i),this.attemptToApplyPhases(St.UNDEFER,n,i),this.attemptToApplyPhases(St.NOTIFY,n,i)}errorInUndeferAndNotifyStep(t,e){const i=this.phaseCallbacks.map(t=>t.phetioID+t.phase),n=e.filter(t=>i.indexOf(t.getBeforeTerm())>=0||i.indexOf(t.getAfterTerm())>=0),s=_.keys(t).filter(t=>{for(let e=0;e<n.length;e++){if(n[e].usesPhetioID(t))return!0}return!1});let r="";console.log("still to be undeferred",this.phaseCallbacks.filter(t=>t.phase===St.UNDEFER)),console.log("still to be notified",this.phaseCallbacks.filter(t=>t.phase===St.NOTIFY)),console.log("completed phase pairs that share phetioIDs",s),console.log("order dependencies that apply to the still todos",n),n.forEach(t=>{r+=`${t.getBeforeTerm()}\t${t.getAfterTerm()}\n`}),console.log("\n\nin graphable form:\n\n",r);const o="Impossible set state: from undeferAndNotifyProperties; ordering constraints cannot be satisfied";throw new Error(o)}attemptToApplyPhases(t,e,i){for(let n=0;n<this.phaseCallbacks.length;n++){const s=this.phaseCallbacks[n];s.phase===t&&this.phetioIDCanApplyPhase(s.phetioID,t,e,i)&&(s.listener(),Object(wt.a)(this.phaseCallbacks,s),e[s.getTerm()]=!0,n--)}}phetioIDCanApplyPhase(t,e,i,n){if(e===St.NOTIFY&&!i[t+St.UNDEFER])return!1;for(let s=0;s<n.length;s++){const r=n[s];if(r.afterPhetioID===t&&r.afterPhase===e&&!i[r.getBeforeTerm()])return!1}return!0}}class Dt{constructor(t,e,i){this.phetioID=t,this.phase=i,this.listener=e||_.noop}getTerm(){return this.phetioID+this.phase}}class Et{constructor(t,e,i,n){this.beforePhetioID=t,this.beforePhase=e,this.afterPhetioID=i,this.afterPhase=n}getBeforeTerm(){return this.beforePhetioID+this.beforePhase}getAfterTerm(){return this.afterPhetioID+this.afterPhase}usesPhetioID(t){return this.beforePhetioID===t||this.afterPhetioID===t}}o.register("PropertyStateHandler",Tt);const Ct=new Tt;o.register("propertyStateHandlerSingleton",Ct);var Pt=Ct;const kt={values:["AMU","atm","cm","C","K","kg","kg/m^3","kPa","m","mm","m/s","m/s^2","nm","nm/ps","","particles/ps","pm","pm/s","pm/s^2","pm/ps","pm^3","ps","s","N","radians","L/s","L","mol/L","mol","amperes","milliamperes","becquerels","centimeters","centimeters-squared","coulombs","degrees Celsius","degrees","farads","kilograms","grams","gray","henrys","henries","hertz","joules","katals","kelvins","liters","liters/second","lumens","lux","meters","meters/second","meters/second/second","moles","moles/liter","nanometers","newtons/meters","newtons-second/meters","ohms","ohm-centimeters","pascals","percent","radians/second","seconds","siemens","sieverts","steradians","tesla","view-coordinates/second","volts","watts","webers"],isValidUnits:function(t){return _.includes(kt.values,t)}};o.register("units",kt);let It=0;class Lt extends vt{constructor(t,e){e=Object(s.a)({tandem:T.a.OPTIONAL,useDeepEquality:!1,units:null,reentrant:!1},e),m.containsValidatorKey(e)||(e.isValidValue=()=>!0),e.units&&(e.phetioEventMetadata=e.phetioEventMetadata||{},e.phetioEventMetadata.units=e.units),super(e),this.id=It++,this.units=e.units,this.useDeepEquality=e.useDeepEquality,T.a.VALIDATION&&this.isPhetioInstrumented(),this._value=t,this._initialValue=t,this.validValues=e.validValues,this.changedEmitter=new H,this.notifying=!1,this.reentrant=e.reentrant,this.isDeferred=!1,this.deferredValue=null,this.hasDeferredValue=!1}get(){return this._value}set(t){if(!this.isDisposed)if(this.isDeferred)this.deferredValue=t,this.hasDeferredValue=!0;else if(!this.equalsValue(t)){const e=this.get();this.setPropertyValue(t),this._notifyListeners(e)}return this}setPropertyValue(t){this._value=t}setInitialValue(t){this._initialValue=t}equalsValue(t){return this.areValuesEqual(t,this._value)}areValuesEqual(t,e){return this.useDeepEquality&&t&&e&&t.constructor===e.constructor?t.equals(e):t===e}getInitialValue(){return this._initialValue}get initialValue(){return this.getInitialValue()}_notifyListeners(t){this.isPhetioInstrumented()&&this.phetioStartEvent(Lt.CHANGED_EVENT_NAME,{getData:()=>{const e=this.phetioType.parameterTypes[0];return{oldValue:P(e).toStateObject(t),newValue:e.toStateObject(this.get())}}}),this.notifying=!0,this.changedEmitter.emit(this.get(),t,this),this.notifying=!1,this.isPhetioInstrumented()&&this.phetioEndEvent()}notifyListenersStatic(){this._notifyListeners(null)}setDeferred(t){if(t)this.isDeferred=!0;else{this.isDeferred=!1;const t=this._value;if(this.hasDeferredValue&&(this.setPropertyValue(this.deferredValue),this.hasDeferredValue=!1),!this.equalsValue(t))return()=>!this.isDisposed&&this._notifyListeners(t)}return null}reset(){this.set(this._initialValue)}get value(){return this.get()}set value(t){this.set(t)}addPhetioStateDependencies(t){for(let e=0;e<t.length;e++){const i=t[e];T.a.PHET_IO_ENABLED&&i instanceof Lt&&i.isPhetioInstrumented()&&this.isPhetioInstrumented()&&Pt.registerPhetioOrderDependency(i,St.UNDEFER,this,St.NOTIFY)}}link(t,e){e&&e.phetioDependencies&&this.addPhetioStateDependencies(e.phetioDependencies),this.changedEmitter.addListener(t),t(this.get(),null,this)}lazyLink(t,e){e&&e.phetioDependencies&&this.addPhetioStateDependencies(e.phetioDependencies),this.changedEmitter.addListener(t)}unlink(t){this.changedEmitter.removeListener(t)}unlinkAll(){this.changedEmitter.removeAllListeners()}linkAttribute(t,e){const i=i=>{t[e]=i};return this.link(i),i}unlinkAttribute(t){this.unlink(t)}toString(){return`Property#${this.id}{${this.get()}}`}valueOf(){return this.toString()}debug(t){const e=e=>console.log(t,e);return this.link(e),e}toggle(){this.value=!this.value}dispose(){this.unlinkAll(),T.a.PHET_IO_ENABLED&&this.isPhetioInstrumented()&&Pt.propertyInAnOrderDependency(this)&&Pt.unregisterOrderDependenciesForProperty(this),super.dispose(),this.changedEmitter.dispose()}hasListener(t){return this.changedEmitter.hasListener(t)}hasListeners(){return this.changedEmitter.hasListeners()}static multilink(t,e){return new At(t,e,!1)}static lazyMultilink(t,e){return new At(t,e,!0)}static unmultilink(t){t.dispose()}}Lt.CHANGED_EVENT_NAME="changed",o.register("Property",Lt);var Ot=Lt;const Rt=new Map;function Nt(t){return Rt.has(t)||Rt.set(t,Mt(t)),Rt.get(t)}const Mt=t=>{class e extends A{constructor(t,e){super(t,e)}static toStateObject(e){y(e,this.validator);const i={value:t.toStateObject(e.value)};return e.validValues&&(i.validValues=e.validValues.map((function(e){return t.toStateObject(e)}))),e.units&&(i.units=e.units),i}static applyState(e,i){y(e,this.validator),e.units=i.units,e.set(t.fromStateObject(i.value)),i.validValues&&(e.validValues=i.validValues.map(e=>t.fromStateObject(e)))}}return e.methods={getValue:{returnType:t,parameterTypes:[],implementation:function(){return this.phetioObject.get()},documentation:"Gets the current value."},setValue:{returnType:V,parameterTypes:[t],implementation:function(t){this.phetioObject.set(t)},documentation:"Sets the value of the Property. If the value differs from the previous value, listeners are notified with the new value.",invocableForReadOnlyElements:!1},link:{returnType:V,parameterTypes:[B(V,[t,P(t)])],implementation:function(t){this.phetioObject.link(t)},documentation:"Adds a listener which will be called when the value changes. On registration, the listener is also called with the current value. The listener takes two arguments, the new value and the previous value."},lazyLink:{returnType:V,parameterTypes:[B(V,[t,P(t)])],implementation:function(t){this.phetioObject.lazyLink(t)},documentation:'Adds a listener which will be called when the value changes. This method is like "link", but without the current-value callback on registration. The listener takes two arguments, the new value and the previous value.'}},e.documentation="Observable values that send out notifications when the value changes. This differs from the traditional listener pattern in that added listeners also receive a callback with the current value when the listeners are registered. This is a widely-used pattern in PhET-iO simulations.",e.methodOrder=["link","lazyLink"],e.validator={valueType:Ot},e.events=["changed"],e.typeName=`PropertyIO<${t.typeName}>`,e.parameterTypes=[t],A.validateSubtype(e),e};o.register("PropertyIO",Nt);var Bt=Nt;const Ft=Bt(I),Vt=["FloatingPoint","Integer"];class qt extends Ft{static toStateObject(t){y(t,this.validator);const e=Ft.toStateObject(t);return t.numberType&&(e.numberType=t.numberType),t.rangeProperty.value&&(e.range=S.toStateObject(t.rangeProperty.value),t.rangeProperty.isPhetioInstrumented()&&(e.rangePhetioID=O.toStateObject(t.rangeProperty.tandem.phetioID))),t.step&&(e.step=I.toStateObject(t.step)),e}static applyState(t,e){y(t,this.validator),Ft.applyState(t,e),t.step=e.step,t.numberType=e.numberType}}qt.validator={isValidValue:t=>t instanceof(window.phet?phet.axon.NumberProperty:o.NumberProperty)},qt.typeName="NumberPropertyIO",qt.documentation="Extends PropertyIO to add values for the numeric range ( min, max ) and numberType ( '"+Vt.join("' | '")+"' )",qt.VALID_NUMBER_TYPES=Vt,A.validateSubtype(qt),o.register("NumberPropertyIO",qt);var Ht=qt;Ht.VALID_NUMBER_TYPES;class Yt extends Ot{constructor(t,e){e=Object(s.a)({numberType:"FloatingPoint",range:null,step:null,rangePropertyOptions:{phetioDocumentation:"provides the range of possible values for the parent NumberProperty",phetioType:Bt(P(S)),phetioReadOnly:!0},tandem:T.a.OPTIONAL},e),(e=Object(s.a)({rangePropertyOptions:{tandem:e.tandem.createTandem("rangeProperty")}},e)).valueType="number",e.phetioType=Ht;const i=!(e.range&&e.range instanceof Ot);super(t,e),this.numberType=e.numberType,this.step=e.step,this.validateNumberProperty=!1,this.rangeProperty=null,this.rangeProperty=i?new Ot(e.range,e.rangePropertyOptions):e.range;const n=t=>{this.validateNumberProperty&&this.validateNumberProperty(this.value)};this.rangeProperty.link(n),this.rangeProperty.addPhetioStateDependencies([this]),this.addPhetioStateDependencies([this.rangeProperty]),e.validValues&&this.validateNumberProperty&&e.validValues.forEach(t=>this.validateNumberProperty(t)),this.validateNumberProperty&&this.link(t=>{this.validateNumberProperty(t)}),this.disposeNumberProperty=()=>{i?this.rangeProperty.dispose():this.rangeProperty.unlink(n)},this.resetNumberProperty=()=>{i&&this.rangeProperty.reset()}}get range(){return this.rangeProperty.value}set range(t){this.rangeProperty.value=t}reset(){super.reset(),this.resetNumberProperty()}dispose(){this.disposeNumberProperty(),super.dispose()}setValueAndRange(t,e){this.setDeferred(!0),this.rangeProperty.setDeferred(!0),this.set(t),this.rangeProperty.set(e);const i=this.setDeferred(!1),n=this.rangeProperty.setDeferred(!1);i&&i(),n&&n()}resetValueAndRange(){this.setValueAndRange(this.initialValue,this.rangeProperty.initialValue)}}o.register("NumberProperty",Yt);var jt=Yt;const Gt={isValidValue:t=>t instanceof(window.phet?phet.axon.DerivedProperty:o.DerivedProperty)},zt={};function Wt(t){return zt.hasOwnProperty(t.typeName)||(zt[t.typeName]=Ut(t)),zt[t.typeName]}const Ut=t=>{const e=Bt(t);class i extends e{}return i.methods={setValue:{returnType:V,parameterTypes:[t],implementation:function(t){return this.phetioObject.set(t)},documentation:"Errors out when you try to set a derived property.",invocableForReadOnlyElements:!1}},i.documentation="Like PropertyIO, but not settable.  Instead it is derived from other DerivedPropertyIO or PropertyIO instances",i.validator=Gt,i.typeName=`DerivedPropertyIO<${t.typeName}>`,i.outerType=Wt,A.validateSubtype(i),i};o.register("DerivedPropertyIO",Wt);class Xt extends Ot{constructor(t,e,i){i=Object(s.a)({tandem:T.a.OPTIONAL,phetioReadOnly:!0},i),super(e.apply(null,t.map(t=>t.get())),i),T.a.VALIDATION&&this.isPhetioInstrumented(),this.dependencies=t,this._initialValue=null,this.derivation=e,this.dependencyListeners=[];for(let n=0;n<t.length;n++){(i=>{const n=()=>{this.isDeferred?this.hasDeferredValue=!0:super.set(e.apply(null,t.map(t=>t.get())))};this.dependencyListeners.push(n),i.lazyLink(n),i instanceof Ot&&this.isPhetioInstrumented()&&i.isPhetioInstrumented()&&Pt.registerPhetioOrderDependency(i,St.UNDEFER,this,St.UNDEFER)})(t[n])}}dispose(){for(let t=0;t<this.dependencies.length;t++){const e=this.dependencies[t];e.isDisposed||e.unlink(this.dependencyListeners[t])}this.dependencies=null,this.dependencyListeners=null,super.dispose(this)}set(t){throw new Error("Cannot set values directly to a DerivedProperty, tried to set: "+t)}set value(t){throw new Error("Cannot es5-set values directly to a DerivedProperty, tried to set: "+t)}reset(){throw new Error("Cannot reset a DerivedProperty directly")}getInitialValue(){throw new Error("Cannot get the initial value of a DerivedProperty")}setDeferred(t){return this.isDeferred&&!t&&(this.deferredValue=this.derivation.apply(null,this.dependencies.map(t=>t.get()))),super.setDeferred(t)}get value(){return super.get()}static valueEquals(t,e,i){return new Xt([t,e],Kt,i)}static and(t,e){return new Xt(t,_.reduce.bind(null,t,Qt,!0),e)}static or(t,e){return new Xt(t,_.reduce.bind(null,t,Zt,!1),e)}static not(t,e){return new Xt([t],t=>!t,e)}}const Kt=(t,e)=>t===e,Qt=(t,e)=>t&&e.value,Zt=(t,e)=>t||e.value;o.register("DerivedProperty",Xt);var Jt=Xt,$t=i(5),te=i(1);const ee=new w.a.Vector2(0,0);function ie(t,e,i,n){this.minX=t,this.minY=e,this.maxX=i,this.maxY=n}w.a.register("Bounds2",ie),Object(z.a)(Object,ie,{isBounds:!0,dimension:2,getWidth:function(){return this.maxX-this.minX},get width(){return this.getWidth()},getHeight:function(){return this.maxY-this.minY},get height(){return this.getHeight()},getX:function(){return this.minX},get x(){return this.getX()},getY:function(){return this.minY},get y(){return this.getY()},getMinX:function(){return this.minX},getMinY:function(){return this.minY},getMaxX:function(){return this.maxX},getMaxY:function(){return this.maxY},getLeft:function(){return this.minX},get left(){return this.minX},getTop:function(){return this.minY},get top(){return this.minY},getRight:function(){return this.maxX},get right(){return this.maxX},getBottom:function(){return this.maxY},get bottom(){return this.maxY},getCenterX:function(){return(this.maxX+this.minX)/2},get centerX(){return this.getCenterX()},getCenterY:function(){return(this.maxY+this.minY)/2},get centerY(){return this.getCenterY()},getLeftTop:function(){return new w.a.Vector2(this.minX,this.minY)},get leftTop(){return this.getLeftTop()},getCenterTop:function(){return new w.a.Vector2(this.getCenterX(),this.minY)},get centerTop(){return this.getCenterTop()},getRightTop:function(){return new w.a.Vector2(this.maxX,this.minY)},get rightTop(){return this.getRightTop()},getLeftCenter:function(){return new w.a.Vector2(this.minX,this.getCenterY())},get leftCenter(){return this.getLeftCenter()},getCenter:function(){return new w.a.Vector2(this.getCenterX(),this.getCenterY())},get center(){return this.getCenter()},getRightCenter:function(){return new w.a.Vector2(this.maxX,this.getCenterY())},get rightCenter(){return this.getRightCenter()},getLeftBottom:function(){return new w.a.Vector2(this.minX,this.maxY)},get leftBottom(){return this.getLeftBottom()},getCenterBottom:function(){return new w.a.Vector2(this.getCenterX(),this.maxY)},get centerBottom(){return this.getCenterBottom()},getRightBottom:function(){return new w.a.Vector2(this.maxX,this.maxY)},get rightBottom(){return this.getRightBottom()},isEmpty:function(){return this.getWidth()<0||this.getHeight()<0},isFinite:function(){return isFinite(this.minX)&&isFinite(this.minY)&&isFinite(this.maxX)&&isFinite(this.maxY)},hasNonzeroArea:function(){return this.getWidth()>0&&this.getHeight()>0},isValid:function(){return!this.isEmpty()&&this.isFinite()},closestPointTo:function(t){if(this.containsCoordinates(t.x,t.y))return t;{const e=Math.max(Math.min(t.x,this.maxX),this.x),i=Math.max(Math.min(t.y,this.maxY),this.y);return new te.a(e,i)}},containsCoordinates:function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},containsPoint:function(t){return this.containsCoordinates(t.x,t.y)},containsBounds:function(t){return this.minX<=t.minX&&this.maxX>=t.maxX&&this.minY<=t.minY&&this.maxY>=t.maxY},intersectsBounds:function(t){const e=Math.max(this.minX,t.minX),i=Math.max(this.minY,t.minY),n=Math.min(this.maxX,t.maxX),s=Math.min(this.maxY,t.maxY);return n-e>=0&&s-i>=0},minimumDistanceToPointSquared:function(t){const e=t.x<this.minX?this.minX:t.x>this.maxX?this.maxX:null,i=t.y<this.minY?this.minY:t.y>this.maxY?this.maxY:null;let n;if(null===e&&null===i)return 0;if(null===e)return n=i-t.y,n*n;if(null===i)return n=e-t.x,n*n;{const n=e-t.x,s=i-t.y;return n*n+s*s}},maximumDistanceToPointSquared:function(t){let e=t.x>this.getCenterX()?this.minX:this.maxX,i=t.y>this.getCenterY()?this.minY:this.maxY;return e-=t.x,i-=t.y,e*e+i*i},toString:function(){return"[x:("+this.minX+","+this.maxX+"),y:("+this.minY+","+this.maxY+")]"},equals:function(t){return this.minX===t.minX&&this.minY===t.minY&&this.maxX===t.maxX&&this.maxY===t.maxY},equalsEpsilon:function(t,e){e=void 0!==e?e:0;const i=this.isFinite(),n=t.isFinite();return i&&n?Math.abs(this.minX-t.minX)<e&&Math.abs(this.minY-t.minY)<e&&Math.abs(this.maxX-t.maxX)<e&&Math.abs(this.maxY-t.maxY)<e:i===n&&(this===t||(isFinite(this.minX+t.minX)?Math.abs(this.minX-t.minX)<e:this.minX===t.minX)&&(isFinite(this.minY+t.minY)?Math.abs(this.minY-t.minY)<e:this.minY===t.minY)&&(isFinite(this.maxX+t.maxX)?Math.abs(this.maxX-t.maxX)<e:this.maxX===t.maxX)&&(isFinite(this.maxY+t.maxY)?Math.abs(this.maxY-t.maxY)<e:this.maxY===t.maxY))},copy:function(t){return t?t.set(this):new ie(this.minX,this.minY,this.maxX,this.maxY)},union:function(t){return new ie(Math.min(this.minX,t.minX),Math.min(this.minY,t.minY),Math.max(this.maxX,t.maxX),Math.max(this.maxY,t.maxY))},intersection:function(t){return new ie(Math.max(this.minX,t.minX),Math.max(this.minY,t.minY),Math.min(this.maxX,t.maxX),Math.min(this.maxY,t.maxY))},withCoordinates:function(t,e){return new ie(Math.min(this.minX,t),Math.min(this.minY,e),Math.max(this.maxX,t),Math.max(this.maxY,e))},withPoint:function(t){return this.withCoordinates(t.x,t.y)},withX:function(t){return this.copy().addX(t)},withY:function(t){return this.copy().addY(t)},withMinX:function(t){return new ie(t,this.minY,this.maxX,this.maxY)},withMinY:function(t){return new ie(this.minX,t,this.maxX,this.maxY)},withMaxX:function(t){return new ie(this.minX,this.minY,t,this.maxY)},withMaxY:function(t){return new ie(this.minX,this.minY,this.maxX,t)},roundedOut:function(){return new ie(Math.floor(this.minX),Math.floor(this.minY),Math.ceil(this.maxX),Math.ceil(this.maxY))},roundedIn:function(){return new ie(Math.ceil(this.minX),Math.ceil(this.minY),Math.floor(this.maxX),Math.floor(this.maxY))},transformed:function(t){return this.copy().transform(t)},dilated:function(t){return new ie(this.minX-t,this.minY-t,this.maxX+t,this.maxY+t)},dilatedX:function(t){return new ie(this.minX-t,this.minY,this.maxX+t,this.maxY)},dilatedY:function(t){return new ie(this.minX,this.minY-t,this.maxX,this.maxY+t)},dilatedXY:function(t,e){return new ie(this.minX-t,this.minY-e,this.maxX+t,this.maxY+e)},eroded:function(t){return this.dilated(-t)},erodedX:function(t){return this.dilatedX(-t)},erodedY:function(t){return this.dilatedY(-t)},erodedXY:function(t,e){return this.dilatedXY(-t,-e)},withOffsets:function(t,e,i,n){return new ie(this.minX-t,this.minY-e,this.maxX+i,this.maxY+n)},shiftedX:function(t){return new ie(this.minX+t,this.minY,this.maxX+t,this.maxY)},shiftedY:function(t){return new ie(this.minX,this.minY+t,this.maxX,this.maxY+t)},shifted:function(t,e){return new ie(this.minX+t,this.minY+e,this.maxX+t,this.maxY+e)},blend:function(t,e){const i=1-e;return new ie(i*this.minX+e*t.minX,i*this.minY+e*t.minY,i*this.maxX+e*t.maxX,i*this.maxY+e*t.maxY)},setMinMax:function(t,e,i,n){return this.minX=t,this.minY=e,this.maxX=i,this.maxY=n,this},setMinX:function(t){return this.minX=t,this},setMinY:function(t){return this.minY=t,this},setMaxX:function(t){return this.maxX=t,this},setMaxY:function(t){return this.maxY=t,this},set:function(t){return this.setMinMax(t.minX,t.minY,t.maxX,t.maxY)},includeBounds:function(t){return this.setMinMax(Math.min(this.minX,t.minX),Math.min(this.minY,t.minY),Math.max(this.maxX,t.maxX),Math.max(this.maxY,t.maxY))},constrainBounds:function(t){return this.setMinMax(Math.max(this.minX,t.minX),Math.max(this.minY,t.minY),Math.min(this.maxX,t.maxX),Math.min(this.maxY,t.maxY))},addCoordinates:function(t,e){return this.setMinMax(Math.min(this.minX,t),Math.min(this.minY,e),Math.max(this.maxX,t),Math.max(this.maxY,e))},addPoint:function(t){return this.addCoordinates(t.x,t.y)},addX:function(t){return this.minX=Math.min(t,this.minX),this.maxX=Math.max(t,this.maxX),this},addY:function(t){return this.minY=Math.min(t,this.minY),this.maxY=Math.max(t,this.maxY),this},roundOut:function(){return this.setMinMax(Math.floor(this.minX),Math.floor(this.minY),Math.ceil(this.maxX),Math.ceil(this.maxY))},roundIn:function(){return this.setMinMax(Math.ceil(this.minX),Math.ceil(this.minY),Math.floor(this.maxX),Math.floor(this.maxY))},transform:function(t){if(this.isEmpty())return this;if(t.isIdentity())return this;const e=this.minX,i=this.minY,n=this.maxX,s=this.maxY;return this.set(w.a.Bounds2.NOTHING),this.addPoint(t.multiplyVector2(ee.setXY(e,i))),this.addPoint(t.multiplyVector2(ee.setXY(e,s))),this.addPoint(t.multiplyVector2(ee.setXY(n,i))),this.addPoint(t.multiplyVector2(ee.setXY(n,s))),this},dilate:function(t){return this.setMinMax(this.minX-t,this.minY-t,this.maxX+t,this.maxY+t)},dilateX:function(t){return this.setMinMax(this.minX-t,this.minY,this.maxX+t,this.maxY)},dilateY:function(t){return this.setMinMax(this.minX,this.minY-t,this.maxX,this.maxY+t)},dilateXY:function(t,e){return this.setMinMax(this.minX-t,this.minY-e,this.maxX+t,this.maxY+e)},erode:function(t){return this.dilate(-t)},erodeX:function(t){return this.dilateX(-t)},erodeY:function(t){return this.dilateY(-t)},erodeXY:function(t,e){return this.dilateXY(-t,-e)},offset:function(t,e,i,n){return new ie(this.minX-t,this.minY-e,this.maxX+i,this.maxY+n)},shiftX:function(t){return this.setMinMax(this.minX+t,this.minY,this.maxX+t,this.maxY)},shiftY:function(t){return this.setMinMax(this.minX,this.minY+t,this.maxX,this.maxY+t)},shift:function(t,e){return this.setMinMax(this.minX+t,this.minY+e,this.maxX+t,this.maxY+e)},getClosestPoint:function(t,e,i){return i?i.setXY(t,e):i=new w.a.Vector2(t,e),i.x<this.minX&&(i.x=this.minX),i.x>this.maxX&&(i.x=this.maxX),i.y<this.minY&&(i.y=this.minY),i.y>this.maxY&&(i.y=this.maxY),i}},{rect:function(t,e,i,n){return new ie(t,e,t+i,e+n)},point:function(t,e){if(t instanceof w.a.Vector2){const e=t;return new ie(e.x,e.y,e.x,e.y)}return new ie(t,e,t,e)}}),ie.NOTHING=new ie(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),ie.EVERYTHING=new ie(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),$t.a.mixInto(ie,{initialize:ie.prototype.setMinMax,defaultArguments:[ie.NOTHING.minX,ie.NOTHING.minY,ie.NOTHING.maxX,ie.NOTHING.maxY]});var ne=ie;function se(t,e){this.width=t,this.height=e}w.a.register("Dimension2",se),Object(z.a)(Object,se,{toString:function(){return"["+this.width+"w, "+this.height+"h]"},set:function(t){return this.width=t.width,this.height=t.height,this},setWidth:function(t){return this.width=t,this},setHeight:function(t){return this.height=t,this},copy:function(t){return t?t.set(this):new se(this.width,this.height)},flipped:function(){return new se(this.height,this.width)},toBounds:function(t,e){return new ne(t=void 0!==t?t:0,e=void 0!==e?e:0,this.width+t,this.height+e)},equals:function(t){return this.width===t.width&&this.height===t.height}});var re=se,oe=i(3);const ae={};function le(){}a.a.register("InstanceRegistry",le),Object(z.a)(Object,le,{},{map:ae,registerDataURL:function(t,e,i){if(phet.chipper.queryParameters.binder){const s=t+"/"+e;ae[s]=ae[s]||[];try{i.toDataURL((function(t){ae[s].push(t)}))}catch(n){}}}});const ue=new r.a("kite");ue.register("svgNumber",(function(t){return t.toFixed(20)}));var ce=ue,de=i(11);function pe(t){const e=[t];let i=t.prototype;for(;i&&(i=Object.getPrototypeOf(i));)i.constructor&&e.push(i.constructor);return e}a.a.register("inheritance",pe);var fe=pe;window.sceneryLog=null,window.sceneryAccessibilityLog=null;const me=document.createElement("canvas"),ge=me.getContext("2d");let ye="";const be=new r.a("scenery");function ve(t){be.logString+=t.replace(/%c/g,"")+"\n"}function _e(){window.console&&window.console.log&&window.console.log.apply(window.console,Array.prototype.slice.call(arguments,0))}be.register("scratchCanvas",me),be.register("scratchContext",ge);const Ae={dirty:{name:"dirty",style:"color: #888;"},bounds:{name:"bounds",style:"color: #888;"},hitTest:{name:"hitTest",style:"color: #888;"},hitTestInternal:{name:"hitTestInternal",style:"color: #888;"},PerfCritical:{name:"Perf",style:"color: #f00;"},PerfMajor:{name:"Perf",style:"color: #aa0;"},PerfMinor:{name:"Perf",style:"color: #088;"},PerfVerbose:{name:"Perf",style:"color: #888;"},Cursor:{name:"Cursor",style:""},Stitch:{name:"Stitch",style:""},StitchDrawables:{name:"Stitch",style:""},GreedyStitcher:{name:"Greedy",style:"color: #088;"},GreedyVerbose:{name:"Greedy",style:"color: #888;"},RelativeTransform:{name:"RelativeTransform",style:"color: #606;"},BackboneDrawable:{name:"Backbone",style:"color: #a00;"},CanvasBlock:{name:"Canvas",style:""},WebGLBlock:{name:"WebGL",style:""},Display:{name:"Display",style:""},DOMBlock:{name:"DOM",style:""},Drawable:{name:"",style:""},FittedBlock:{name:"FittedBlock",style:""},Instance:{name:"Instance",style:""},InstanceTree:{name:"InstanceTree",style:""},ChangeInterval:{name:"ChangeInterval",style:"color: #0a0;"},SVGBlock:{name:"SVG",style:""},SVGGroup:{name:"SVGGroup",style:""},ImageSVGDrawable:{name:"ImageSVGDrawable",style:""},Paints:{name:"Paints",style:""},AlignBox:{name:"AlignBox",style:""},AlignGroup:{name:"AlignGroup",style:""},RichText:{name:"RichText",style:""},ParallelDOM:{name:"ParallelDOM",style:""},PDOMInstance:{name:"PDOMInstance",style:""},PDOMTree:{name:"PDOMTree",style:""},PDOMDisplaysInfo:{name:"PDOMDisplaysInfo",style:""},KeyboardFuzzer:{name:"KeyboardFuzzer",style:""},InputListener:{name:"InputListener",style:""},InputEvent:{name:"InputEvent",style:""},OnInput:{name:"OnInput",style:""},Pointer:{name:"Pointer",style:""},Input:{name:"Input",style:""},EventDispatch:{name:"EventDispatch",style:""}};Object(de.a)(be,{logString:"",logFunction:function(){window.console&&window.console.log&&window.console.log.apply(window.console,Array.prototype.slice.call(arguments,0))},switchLogToConsole:function(){be.logFunction=_e},switchLogToString:function(){window.console&&window.console.log("switching to string log"),be.logFunction=ve},enableIndividualLog:function(t){return"stitch"===t?(this.enableIndividualLog("Stitch"),this.enableIndividualLog("StitchDrawables"),this.enableIndividualLog("GreedyStitcher"),void this.enableIndividualLog("GreedyVerbose")):"perf"===t?(this.enableIndividualLog("PerfCritical"),this.enableIndividualLog("PerfMajor"),this.enableIndividualLog("PerfMinor"),void this.enableIndividualLog("PerfVerbose")):"input"===t?(this.enableIndividualLog("InputListener"),this.enableIndividualLog("InputEvent"),this.enableIndividualLog("OnInput"),this.enableIndividualLog("Pointer"),this.enableIndividualLog("Input"),void this.enableIndividualLog("EventDispatch")):"a11y"===t?(this.enableIndividualLog("ParallelDOM"),this.enableIndividualLog("PDOMInstance"),this.enableIndividualLog("PDOMTree"),void this.enableIndividualLog("PDOMDisplaysInfo")):void(t&&(window.sceneryLog[t]=window.sceneryLog[t]||function(e,i){const n=Ae[t],s=n.name?"["+n.name+"] ":"";be.logFunction("%c"+ye+"%c"+s+e,"color: #ddd;",i||n.style)}))},disableIndividualLog:function(t){t&&delete window.sceneryLog[t]},enableLogging:function(t){window.sceneryLog=function(t){be.logFunction(t)},window.sceneryLog.push=function(){ye+="| "},window.sceneryLog.pop=function(){ye=ye.slice(0,-2)},window.sceneryLog.getDepth=function(){return ye.length/2};for(let e=0;e<t.length;e++)this.enableIndividualLog(t[e])},disableLogging:function(){window.sceneryLog=null},isLoggingPerformance:function(){return window.sceneryLog.PerfCritical||window.sceneryLog.PerfMajor||window.sceneryLog.PerfMinor||window.sceneryLog.PerfVerbose},copy:function(t){return be.deserialize(be.serialize(t))},serialize:function(t){if(t instanceof w.a.Vector2)return{type:"Vector2",x:t.x,y:t.y};if(t instanceof w.a.Matrix3)return{type:"Matrix3",m00:t.m00(),m01:t.m01(),m02:t.m02(),m10:t.m10(),m11:t.m11(),m12:t.m12(),m20:t.m20(),m21:t.m21(),m22:t.m22()};if(t instanceof w.a.Bounds2)return{type:"Bounds2",maxX:t.maxX,maxY:t.maxY,minX:t.minX,minY:t.minY};if(t instanceof ce.Shape)return{type:"Shape",path:t.getSVGPath()};if(Array.isArray(t))return{type:"Array",value:t.map(be.serialize)};if(t instanceof be.Color)return{type:"Color",red:t.red,green:t.green,blue:t.blue,alpha:t.alpha};if(t instanceof o.Property)return{type:"Property",value:be.serialize(t.value)};if(be.Paint&&t instanceof be.Paint){const e={};return t.transformMatrix&&(e.transformMatrix=be.serialize(t.transformMatrix)),be.Gradient&&t instanceof be.Gradient&&(e.stops=t.stops.map((function(t){return{ratio:t.ratio,stop:be.serialize(t.color)}})),e.start=be.serialize(t.start),e.end=be.serialize(t.end),be.LinearGradient&&t instanceof be.LinearGradient?e.type="LinearGradient":be.RadialGradient&&t instanceof be.RadialGradient&&(e.type="RadialGradient",e.startRadius=t.startRadius,e.endRadius=t.endRadius)),be.Pattern&&t instanceof be.Pattern&&(e.type="Pattern",e.url=t.image.src),e}if(t instanceof be.Node){const e=t,i={},n={};["visible","opacity","pickable","inputEnabled","cursor","transformBounds","renderer","usesOpacity","layerSplit","cssTransform","excludeInvisible","webglScale","preventFit"].forEach((function(t){e[t]!==be.Node.DEFAULT_OPTIONS[t]&&(i[t]=e[t])})),["maxWidth","maxHeight","clipArea","mouseArea","touchArea"].forEach((function(t){e[t]!==be.Node.DEFAULT_OPTIONS[t]&&(n[t]=be.serialize(e[t]))})),e.matrix.isIdentity()||(n.matrix=be.serialize(e.matrix)),e._localBoundsOverridden&&(n.localBounds=be.serialize(e.localBounds)),n.children=e.children.map((function(t){return t.id})),n.hasInputListeners=e.inputListeners.length>0;const s={id:e.id,type:"Node",types:fe(e.constructor).map((function(t){return t.name})).filter((function(t){return t&&"Object"!==t&&"Node"!==t})),name:e.constructor.name,options:i,setup:n};if(be.Path&&e instanceof be.Path&&(s.type="Path",n.path=be.serialize(e.shape),e.boundsMethod!==be.Path.DEFAULT_OPTIONS.boundsMethod&&(i.boundsMethod=e.boundsMethod)),be.Circle&&e instanceof be.Circle&&(s.type="Circle",i.radius=e.radius),be.Line&&e instanceof be.Line&&(s.type="Line",i.x1=e.x1,i.y1=e.y1,i.x2=e.x2,i.y2=e.y2),be.Rectangle&&e instanceof be.Rectangle&&(s.type="Rectangle",i.rectX=e.rectX,i.rectY=e.rectY,i.rectWidth=e.rectWidth,i.rectHeight=e.rectHeight,i.cornerXRadius=e.cornerXRadius,i.cornerYRadius=e.cornerYRadius),be.Text&&e instanceof be.Text&&(s.type="Text","hybrid"!==e.boundsMethod&&(i.boundsMethod=e.boundsMethod),i.text=e.text,i.font=e.font),be.HTMLText&&e instanceof be.HTMLText&&(s.type="HTMLText"),be.Image&&e instanceof be.Image&&(s.type="Image",["imageOpacity","initialWidth","initialHeight","mipmapBias","mipmapInitialLevel","mipmapMaxLevel"].forEach((function(t){e[t]!==be.Image.DEFAULT_OPTIONS[t]&&(i[t]=e[t])})),n.width=e.imageWidth,n.height=e.imageHeight,e._mipmapData?(n.imageType="mipmapData",n.mipmapData=e._mipmapData.map((function(t){return{url:t.url,width:t.width,height:t.height}}))):(e._mipmap&&(n.generateMipmaps=!0),e._image instanceof HTMLImageElement?(n.imageType="image",n.src=e._image.src):e._image instanceof HTMLCanvasElement&&(n.imageType="canvas",n.src=e._image.toDataURL()))),be.CanvasNode&&e instanceof be.CanvasNode||be.WebGLNode&&e instanceof be.WebGLNode){s.type=be.CanvasNode&&e instanceof be.CanvasNode?"CanvasNode":"WebGLNode",n.canvasBounds=be.serialize(e.canvasBounds);let t=Math.min(5,e._drawables.length?1/_.mean(e._drawables.map((function(t){const e=t.instance.trail.getMatrix().getScaleVector();return(e.x+e.y)/2}))):1);t=1;const i=document.createElement("canvas");i.width=Math.ceil(e.canvasBounds.width*t),i.height=Math.ceil(e.canvasBounds.height*t);const r=i.getContext("2d"),o=new be.CanvasContextWrapper(i,r),a=w.a.Matrix3.scale(1/t);o.context.setTransform(t,0,0,t,-e.canvasBounds.left,-e.canvasBounds.top),e.renderToCanvasSelf(o,a),n.url=i.toDataURL(),n.scale=t,n.offset=be.serialize(e.canvasBounds.leftTop)}return be.DOM&&e instanceof be.DOM&&(s.type="DOM",n.element=(new window.XMLSerializer).serializeToString(e.element)),(be.Path&&e instanceof be.Path||be.Text&&e instanceof be.Text)&&(["fillPickable","strokePickable","lineWidth","lineCap","lineJoin","lineDashOffset","miterLimit"].forEach((function(t){e[t]!==be.Paintable.DEFAULT_OPTIONS[t]&&(i[t]=e[t])})),e.fill!==be.Paintable.DEFAULT_OPTIONS.fill&&(n.fill=be.serialize(e.fill)),e.stroke!==be.Paintable.DEFAULT_OPTIONS.stroke&&(n.stroke=be.serialize(e.stroke)),e.lineDash.length&&(n.lineDash=be.serialize(e.lineDash))),s}return t instanceof be.Display?{type:"Display",width:t.width,height:t.height,backgroundColor:be.serialize(t.backgroundColor),tree:{type:"Subtree",rootNodeId:t.rootNode.id,nodes:be.serializeConnectedNodes(t.rootNode)}}:{type:"value",value:t}},deserialize:function(t){if("Vector2"===t.type)return new w.a.Vector2(t.x,t.y);if("Matrix3"===t.type)return(new w.a.Matrix3).rowMajor(t.m00,t.m01,t.m02,t.m10,t.m11,t.m12,t.m20,t.m21,t.m22);if("Bounds2"===t.type)return new w.a.Bounds2(t.minX,t.minY,t.maxX,t.maxY);if("Shape"===t.type)return new ce.Shape(t.path);if("Array"===t.type)return t.value.map(be.deserialize);if("Color"===t.type)return new be.Color(t.red,t.green,t.blue,t.alpha);if("Property"===t.type)return new o.Property(be.deserialize(t.value));if("Pattern"===t.type||"LinearGradient"===t.type||"RadialGradient"===t.type){let e;if("Pattern"===t.type){const i=new window.Image;i.src=t.url,e=new be.Pattern(i)}else{const i=be.deserialize(t.start),n=be.deserialize(t.end);"LinearGradient"===t.type?e=new be.LinearGradient(i.x,i.y,n.x,n.y):"RadialGradient"===t.type&&(e=new be.RadialGradient(i.x,i.y,t.startRadius,n.x,n.y,t.endRadius)),t.stops.forEach((function(t){e.addColorStop(t.ratio,be.deserialize(t.stop))}))}return t.transformMatrix&&e.setTransformMatrix(be.deserialize(t.transformMatrix)),e}if(_.includes(["Node","Path","Circle","Line","Rectangle","Text","HTMLText","Image","CanvasNode","WebGLNode","DOM"],t.type)){let e;const i=t.setup;if("Node"===t.type)e=new be.Node;else if("Path"===t.type)e=new be.Path(be.deserialize(i.path));else if("Circle"===t.type)e=new be.Circle({});else if("Line"===t.type)e=new be.Line({});else if("Rectangle"===t.type)e=new be.Rectangle({});else if("Text"===t.type)e=new be.Text("");else if("HTMLText"===t.type)e=new be.HTMLText("");else if("Image"===t.type){if("image"===i.imageType||"canvas"===i.imageType)e=new be.Image(i.src),i.generateMipmaps&&(e.mipmaps=!0);else if("mipmapData"===i.imageType){const t=i.mipmapData.map((function(t){const e={width:t.width,height:t.height,url:t.url};e.img=new window.Image,e.img.src=t.url,e.canvas=document.createElement("canvas"),e.canvas.width=t.width,e.canvas.height=t.height;const i=e.canvas.getContext("2d");return e.updateCanvas=function(){e.img.complete&&(void 0===e.img.naturalWidth||e.img.naturalWidth>0)&&(i.drawImage(e.img,0,0),delete e.updateCanvas)},e}));e=new be.Image(t)}e.initialWidth=i.width,e.initialHeight=i.height}else if("CanvasNode"===t.type||"WebGLNode"===t.type)e=new be.Node({children:[new be.Image(i.url,{translation:be.deserialize(i.offset),scale:1/i.scale})]});else if("DOM"===t.type){const i=document.createElement("div");i.innerHTML=t.element;const n=i.childNodes[0];i.removeChild(n),e=new be.DOM(n)}return i.clipArea&&(e.clipArea=be.deserialize(i.clipArea)),i.mouseArea&&(e.mouseArea=be.deserialize(i.mouseArea)),i.touchArea&&(e.touchArea=be.deserialize(i.touchArea)),i.matrix&&(e.matrix=be.deserialize(i.matrix)),i.localBounds&&(e.localBounds=be.deserialize(i.localBounds)),i.fill&&(e.fill=be.deserialize(i.fill)),i.stroke&&(e.stroke=be.deserialize(i.stroke)),i.lineDash&&(e.lineDash=be.deserialize(i.lineDash)),e.mutate(t.options),e._serialization=t,e}if("Subtree"===t.type){const e={},i=t.nodes.map(be.deserialize);return i.forEach((function(t){e[t._serialization.id]=t})),i.forEach((function(t){t._serialization.setup.children.forEach((function(i){t.addChild(e[i])}))})),e[t.rootNodeId]}return"value"===t.type?t.value:void 0},serializeConnectedNodes:function(t){return t.getSubtreeNodes().map(be.serialize)}});var we=be;class xe extends A{constructor(){super()}static toStateObject(t){return t}static fromStateObject(t){return t}}xe.documentation="IO Type for Javascript's boolean primitive type",xe.validator={valueType:"boolean"},xe.typeName="BooleanIO",A.validateSubtype(xe),b.a.register("BooleanIO",xe);var Se=xe;const Te=Bt(Se);class De extends Ot{constructor(t,e){super(t,e=Object(s.a)({valueType:"boolean",phetioType:Te},e))}}o.register("BooleanProperty",De);var Ee=De;class Ce extends H{constructor(t,e){super(),this._value=t}get(){return this.onAccessAttempt&&this.onAccessAttempt(),this._value}get value(){return this.get()}set(t){if(!this.equalsValue(t)){const e=this._value;this.setPropertyValue(t),this.notifyListeners(e)}return this}set value(t){this.set(t)}setPropertyValue(t){this._value=t}equalsValue(t){return this.areValuesEqual(t,this._value)}areValuesEqual(t,e){return this.useDeepEquality&&t&&e&&t.constructor===e.constructor?t.equals(e):t===e}notifyListeners(t){this.emit(this._value,t,this)}link(t){this.addListener(t),t(this._value,null,this)}lazyLink(t){this.addListener(t)}unlink(t){this.removeListener(t)}unlinkAll(){this.removeAllListeners()}linkAttribute(t,e){const i=i=>{t[e]=i};return this.link(i),i}unlinkAttribute(t){this.unlink(t)}dispose(){this.unlinkAll(),super.dispose()}}o.register("TinyProperty",Ce);var Pe=Ce;class ke extends Pe{constructor(t,e){super(t,e)}setForwardingProperty(t){if(this.forwardingProperty===t)return;this.forwardingListener=this.forwardingListener||((t,e,i)=>{this.notifyListeners(e)});const e=this.get();this.forwardingProperty&&this.forwardingProperty.unlink(this.forwardingListener),this.forwardingProperty=t,this.forwardingProperty?this.forwardingProperty.lazyLink(this.forwardingListener):this._value=e;const i=this.get();this.areValuesEqual(e,i)||this.notifyListeners(e)}get(){return this.onAccessAttempt&&this.onAccessAttempt(),this.forwardingProperty?this.forwardingProperty.value:this._value}set(t){return this.forwardingProperty?this.forwardingProperty.set(t):super.set(t),this}notifyListeners(t){this.emit(this.get(),t,this)}link(t){this.addListener(t),t(this.get(),null,this)}}o.register("TinyForwardingProperty",ke);var Ie=ke;class Le extends Pe{set(t){throw new Error("Cannot set a TinyStaticProperty value")}}o.register("TinyStaticProperty",Le);var Oe=Le,Re=i(13),Ne=i(16);const Me=window.Float32Array||Array;function Be(t,e,i,n,s,r,o,a,l,h,u,c,d,p,f,m,g){this.entries=new Me(16),this.rowMajor(void 0!==t?t:1,void 0!==e?e:0,void 0!==i?i:0,void 0!==n?n:0,void 0!==s?s:0,void 0!==r?r:1,void 0!==o?o:0,void 0!==a?a:0,void 0!==l?l:0,void 0!==h?h:0,void 0!==u?u:1,void 0!==c?c:0,void 0!==d?d:0,void 0!==p?p:0,void 0!==f?f:0,void 0!==m?m:1,g)}w.a.register("Matrix4",Be),Be.Types={OTHER:0,IDENTITY:1,TRANSLATION_3D:2,SCALING:3,AFFINE:4};const Fe=Be.Types;Be.identity=function(){return new Be(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,Fe.IDENTITY)},Be.translation=function(t,e,i){return new Be(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1,Fe.TRANSLATION_3D)},Be.translationFromVector=function(t){return Be.translation(t.x,t.y,t.z)},Be.scaling=function(t,e,i){return new Be(t,0,0,0,0,e=void 0===e?t:e,0,0,0,0,i=void 0===i?t:i,0,0,0,0,1,Fe.SCALING)},Be.rotationAxisAngle=function(t,e){const i=Math.cos(e),n=Math.sin(e),s=1-i;return new Be(t.x*t.x*s+i,t.x*t.y*s-t.z*n,t.x*t.z*s+t.y*n,0,t.y*t.x*s+t.z*n,t.y*t.y*s+i,t.y*t.z*s-t.x*n,0,t.z*t.x*s-t.y*n,t.z*t.y*s+t.x*n,t.z*t.z*s+i,0,0,0,0,1,Fe.AFFINE)},Be.rotationX=function(t){const e=Math.cos(t),i=Math.sin(t);return new Be(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1,Fe.AFFINE)},Be.rotationY=function(t){const e=Math.cos(t),i=Math.sin(t);return new Be(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1,Fe.AFFINE)},Be.rotationZ=function(t){const e=Math.cos(t),i=Math.sin(t);return new Be(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1,Fe.AFFINE)},Be.gluPerspective=function(t,e,i,n){const s=Math.cos(t)/Math.sin(t);return new Be(s/e,0,0,0,0,s,0,0,0,0,(n+i)/(i-n),2*n*i/(i-n),0,0,-1,0)},Be.prototype={constructor:Be,rowMajor:function(t,e,i,n,s,r,o,a,l,h,u,c,d,p,f,m,g){return this.entries[0]=t,this.entries[1]=s,this.entries[2]=l,this.entries[3]=d,this.entries[4]=e,this.entries[5]=r,this.entries[6]=h,this.entries[7]=p,this.entries[8]=i,this.entries[9]=o,this.entries[10]=u,this.entries[11]=f,this.entries[12]=n,this.entries[13]=a,this.entries[14]=c,this.entries[15]=m,this.type=void 0===g?0===d&&0===p&&0===f&&1===m?Fe.AFFINE:Fe.OTHER:g,this},columnMajor:function(t,e,i,n,s,r,o,a,l,h,u,c,d,p,f,m,g){return this.rowMajor(t,s,l,d,e,r,h,p,i,o,u,f,n,a,c,m,g)},set:function(t){return this.rowMajor(t.m00(),t.m01(),t.m02(),t.m03(),t.m10(),t.m11(),t.m12(),t.m13(),t.m20(),t.m21(),t.m22(),t.m23(),t.m30(),t.m31(),t.m32(),t.m33(),t.type)},m00:function(){return this.entries[0]},m01:function(){return this.entries[4]},m02:function(){return this.entries[8]},m03:function(){return this.entries[12]},m10:function(){return this.entries[1]},m11:function(){return this.entries[5]},m12:function(){return this.entries[9]},m13:function(){return this.entries[13]},m20:function(){return this.entries[2]},m21:function(){return this.entries[6]},m22:function(){return this.entries[10]},m23:function(){return this.entries[14]},m30:function(){return this.entries[3]},m31:function(){return this.entries[7]},m32:function(){return this.entries[11]},m33:function(){return this.entries[15]},isFinite:function(){return isFinite(this.m00())&&isFinite(this.m01())&&isFinite(this.m02())&&isFinite(this.m03())&&isFinite(this.m10())&&isFinite(this.m11())&&isFinite(this.m12())&&isFinite(this.m13())&&isFinite(this.m20())&&isFinite(this.m21())&&isFinite(this.m22())&&isFinite(this.m23())&&isFinite(this.m30())&&isFinite(this.m31())&&isFinite(this.m32())&&isFinite(this.m33())},getTranslation:function(){return new Re.a(this.m03(),this.m13(),this.m23())},get translation(){return this.getTranslation()},getScaleVector:function(){const t=this.m00()+this.m03(),e=this.m10()+this.m13(),i=this.m20()+this.m23(),n=this.m30()+this.m33(),s=this.m01()+this.m03(),r=this.m11()+this.m13(),o=this.m21()+this.m23(),a=this.m31()+this.m33(),l=this.m02()+this.m03(),h=this.m12()+this.m13(),u=this.m22()+this.m23(),c=this.m32()+this.m33();return new Re.a(Math.sqrt(t*t+e*e+i*i+n*n),Math.sqrt(s*s+r*r+o*o+a*a),Math.sqrt(l*l+h*h+u*u+c*c))},get scaleVector(){return this.getScaleVector()},getCSSTransform:function(){return"matrix3d("+this.entries[0].toFixed(20)+","+this.entries[1].toFixed(20)+","+this.entries[2].toFixed(20)+","+this.entries[3].toFixed(20)+","+this.entries[4].toFixed(20)+","+this.entries[5].toFixed(20)+","+this.entries[6].toFixed(20)+","+this.entries[7].toFixed(20)+","+this.entries[8].toFixed(20)+","+this.entries[9].toFixed(20)+","+this.entries[10].toFixed(20)+","+this.entries[11].toFixed(20)+","+this.entries[12].toFixed(20)+","+this.entries[13].toFixed(20)+","+this.entries[14].toFixed(20)+","+this.entries[15].toFixed(20)+")"},get cssTransform(){return this.getCSSTransform()},equals:function(t){return this.m00()===t.m00()&&this.m01()===t.m01()&&this.m02()===t.m02()&&this.m03()===t.m03()&&this.m10()===t.m10()&&this.m11()===t.m11()&&this.m12()===t.m12()&&this.m13()===t.m13()&&this.m20()===t.m20()&&this.m21()===t.m21()&&this.m22()===t.m22()&&this.m23()===t.m23()&&this.m30()===t.m30()&&this.m31()===t.m31()&&this.m32()===t.m32()&&this.m33()===t.m33()},equalsEpsilon:function(t,e){return Math.abs(this.m00()-t.m00())<e&&Math.abs(this.m01()-t.m01())<e&&Math.abs(this.m02()-t.m02())<e&&Math.abs(this.m03()-t.m03())<e&&Math.abs(this.m10()-t.m10())<e&&Math.abs(this.m11()-t.m11())<e&&Math.abs(this.m12()-t.m12())<e&&Math.abs(this.m13()-t.m13())<e&&Math.abs(this.m20()-t.m20())<e&&Math.abs(this.m21()-t.m21())<e&&Math.abs(this.m22()-t.m22())<e&&Math.abs(this.m23()-t.m23())<e&&Math.abs(this.m30()-t.m30())<e&&Math.abs(this.m31()-t.m31())<e&&Math.abs(this.m32()-t.m32())<e&&Math.abs(this.m33()-t.m33())<e},copy:function(){return new Be(this.m00(),this.m01(),this.m02(),this.m03(),this.m10(),this.m11(),this.m12(),this.m13(),this.m20(),this.m21(),this.m22(),this.m23(),this.m30(),this.m31(),this.m32(),this.m33(),this.type)},plus:function(t){return new Be(this.m00()+t.m00(),this.m01()+t.m01(),this.m02()+t.m02(),this.m03()+t.m03(),this.m10()+t.m10(),this.m11()+t.m11(),this.m12()+t.m12(),this.m13()+t.m13(),this.m20()+t.m20(),this.m21()+t.m21(),this.m22()+t.m22(),this.m23()+t.m23(),this.m30()+t.m30(),this.m31()+t.m31(),this.m32()+t.m32(),this.m33()+t.m33())},minus:function(t){return new Be(this.m00()-t.m00(),this.m01()-t.m01(),this.m02()-t.m02(),this.m03()-t.m03(),this.m10()-t.m10(),this.m11()-t.m11(),this.m12()-t.m12(),this.m13()-t.m13(),this.m20()-t.m20(),this.m21()-t.m21(),this.m22()-t.m22(),this.m23()-t.m23(),this.m30()-t.m30(),this.m31()-t.m31(),this.m32()-t.m32(),this.m33()-t.m33())},transposed:function(){return new Be(this.m00(),this.m10(),this.m20(),this.m30(),this.m01(),this.m11(),this.m21(),this.m31(),this.m02(),this.m12(),this.m22(),this.m32(),this.m03(),this.m13(),this.m23(),this.m33())},negated:function(){return new Be(-this.m00(),-this.m01(),-this.m02(),-this.m03(),-this.m10(),-this.m11(),-this.m12(),-this.m13(),-this.m20(),-this.m21(),-this.m22(),-this.m23(),-this.m30(),-this.m31(),-this.m32(),-this.m33())},inverted:function(){switch(this.type){case Fe.IDENTITY:return this;case Fe.TRANSLATION_3D:return new Be(1,0,0,-this.m03(),0,1,0,-this.m13(),0,0,1,-this.m23(),0,0,0,1,Fe.TRANSLATION_3D);case Fe.SCALING:return new Be(1/this.m00(),0,0,0,0,1/this.m11(),0,0,0,0,1/this.m22(),0,0,0,0,1/this.m33(),Fe.SCALING);case Fe.AFFINE:case Fe.OTHER:var t=this.getDeterminant();if(0!==t)return new Be((-this.m31()*this.m22()*this.m13()+this.m21()*this.m32()*this.m13()+this.m31()*this.m12()*this.m23()-this.m11()*this.m32()*this.m23()-this.m21()*this.m12()*this.m33()+this.m11()*this.m22()*this.m33())/t,(this.m31()*this.m22()*this.m03()-this.m21()*this.m32()*this.m03()-this.m31()*this.m02()*this.m23()+this.m01()*this.m32()*this.m23()+this.m21()*this.m02()*this.m33()-this.m01()*this.m22()*this.m33())/t,(-this.m31()*this.m12()*this.m03()+this.m11()*this.m32()*this.m03()+this.m31()*this.m02()*this.m13()-this.m01()*this.m32()*this.m13()-this.m11()*this.m02()*this.m33()+this.m01()*this.m12()*this.m33())/t,(this.m21()*this.m12()*this.m03()-this.m11()*this.m22()*this.m03()-this.m21()*this.m02()*this.m13()+this.m01()*this.m22()*this.m13()+this.m11()*this.m02()*this.m23()-this.m01()*this.m12()*this.m23())/t,(this.m30()*this.m22()*this.m13()-this.m20()*this.m32()*this.m13()-this.m30()*this.m12()*this.m23()+this.m10()*this.m32()*this.m23()+this.m20()*this.m12()*this.m33()-this.m10()*this.m22()*this.m33())/t,(-this.m30()*this.m22()*this.m03()+this.m20()*this.m32()*this.m03()+this.m30()*this.m02()*this.m23()-this.m00()*this.m32()*this.m23()-this.m20()*this.m02()*this.m33()+this.m00()*this.m22()*this.m33())/t,(this.m30()*this.m12()*this.m03()-this.m10()*this.m32()*this.m03()-this.m30()*this.m02()*this.m13()+this.m00()*this.m32()*this.m13()+this.m10()*this.m02()*this.m33()-this.m00()*this.m12()*this.m33())/t,(-this.m20()*this.m12()*this.m03()+this.m10()*this.m22()*this.m03()+this.m20()*this.m02()*this.m13()-this.m00()*this.m22()*this.m13()-this.m10()*this.m02()*this.m23()+this.m00()*this.m12()*this.m23())/t,(-this.m30()*this.m21()*this.m13()+this.m20()*this.m31()*this.m13()+this.m30()*this.m11()*this.m23()-this.m10()*this.m31()*this.m23()-this.m20()*this.m11()*this.m33()+this.m10()*this.m21()*this.m33())/t,(this.m30()*this.m21()*this.m03()-this.m20()*this.m31()*this.m03()-this.m30()*this.m01()*this.m23()+this.m00()*this.m31()*this.m23()+this.m20()*this.m01()*this.m33()-this.m00()*this.m21()*this.m33())/t,(-this.m30()*this.m11()*this.m03()+this.m10()*this.m31()*this.m03()+this.m30()*this.m01()*this.m13()-this.m00()*this.m31()*this.m13()-this.m10()*this.m01()*this.m33()+this.m00()*this.m11()*this.m33())/t,(this.m20()*this.m11()*this.m03()-this.m10()*this.m21()*this.m03()-this.m20()*this.m01()*this.m13()+this.m00()*this.m21()*this.m13()+this.m10()*this.m01()*this.m23()-this.m00()*this.m11()*this.m23())/t,(this.m30()*this.m21()*this.m12()-this.m20()*this.m31()*this.m12()-this.m30()*this.m11()*this.m22()+this.m10()*this.m31()*this.m22()+this.m20()*this.m11()*this.m32()-this.m10()*this.m21()*this.m32())/t,(-this.m30()*this.m21()*this.m02()+this.m20()*this.m31()*this.m02()+this.m30()*this.m01()*this.m22()-this.m00()*this.m31()*this.m22()-this.m20()*this.m01()*this.m32()+this.m00()*this.m21()*this.m32())/t,(this.m30()*this.m11()*this.m02()-this.m10()*this.m31()*this.m02()-this.m30()*this.m01()*this.m12()+this.m00()*this.m31()*this.m12()+this.m10()*this.m01()*this.m32()-this.m00()*this.m11()*this.m32())/t,(-this.m20()*this.m11()*this.m02()+this.m10()*this.m21()*this.m02()+this.m20()*this.m01()*this.m12()-this.m00()*this.m21()*this.m12()-this.m10()*this.m01()*this.m22()+this.m00()*this.m11()*this.m22())/t);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error("Matrix3.inverted with unknown type: "+this.type)}},timesMatrix:function(t){if(this.type===Fe.IDENTITY||t.type===Fe.IDENTITY)return this.type===Fe.IDENTITY?t:this;if(this.type===t.type){if(this.type===Fe.TRANSLATION_3D)return new Be(1,0,0,this.m03()+t.m02(),0,1,0,this.m13()+t.m12(),0,0,1,this.m23()+t.m23(),0,0,0,1,Fe.TRANSLATION_3D);if(this.type===Fe.SCALING)return new Be(this.m00()*t.m00(),0,0,0,0,this.m11()*t.m11(),0,0,0,0,this.m22()*t.m22(),0,0,0,0,1,Fe.SCALING)}return this.type!==Fe.OTHER&&t.type!==Fe.OTHER?new Be(this.m00()*t.m00()+this.m01()*t.m10()+this.m02()*t.m20(),this.m00()*t.m01()+this.m01()*t.m11()+this.m02()*t.m21(),this.m00()*t.m02()+this.m01()*t.m12()+this.m02()*t.m22(),this.m00()*t.m03()+this.m01()*t.m13()+this.m02()*t.m23()+this.m03(),this.m10()*t.m00()+this.m11()*t.m10()+this.m12()*t.m20(),this.m10()*t.m01()+this.m11()*t.m11()+this.m12()*t.m21(),this.m10()*t.m02()+this.m11()*t.m12()+this.m12()*t.m22(),this.m10()*t.m03()+this.m11()*t.m13()+this.m12()*t.m23()+this.m13(),this.m20()*t.m00()+this.m21()*t.m10()+this.m22()*t.m20(),this.m20()*t.m01()+this.m21()*t.m11()+this.m22()*t.m21(),this.m20()*t.m02()+this.m21()*t.m12()+this.m22()*t.m22(),this.m20()*t.m03()+this.m21()*t.m13()+this.m22()*t.m23()+this.m23(),0,0,0,1,Fe.AFFINE):new Be(this.m00()*t.m00()+this.m01()*t.m10()+this.m02()*t.m20()+this.m03()*t.m30(),this.m00()*t.m01()+this.m01()*t.m11()+this.m02()*t.m21()+this.m03()*t.m31(),this.m00()*t.m02()+this.m01()*t.m12()+this.m02()*t.m22()+this.m03()*t.m32(),this.m00()*t.m03()+this.m01()*t.m13()+this.m02()*t.m23()+this.m03()*t.m33(),this.m10()*t.m00()+this.m11()*t.m10()+this.m12()*t.m20()+this.m13()*t.m30(),this.m10()*t.m01()+this.m11()*t.m11()+this.m12()*t.m21()+this.m13()*t.m31(),this.m10()*t.m02()+this.m11()*t.m12()+this.m12()*t.m22()+this.m13()*t.m32(),this.m10()*t.m03()+this.m11()*t.m13()+this.m12()*t.m23()+this.m13()*t.m33(),this.m20()*t.m00()+this.m21()*t.m10()+this.m22()*t.m20()+this.m23()*t.m30(),this.m20()*t.m01()+this.m21()*t.m11()+this.m22()*t.m21()+this.m23()*t.m31(),this.m20()*t.m02()+this.m21()*t.m12()+this.m22()*t.m22()+this.m23()*t.m32(),this.m20()*t.m03()+this.m21()*t.m13()+this.m22()*t.m23()+this.m23()*t.m33(),this.m30()*t.m00()+this.m31()*t.m10()+this.m32()*t.m20()+this.m33()*t.m30(),this.m30()*t.m01()+this.m31()*t.m11()+this.m32()*t.m21()+this.m33()*t.m31(),this.m30()*t.m02()+this.m31()*t.m12()+this.m32()*t.m22()+this.m33()*t.m32(),this.m30()*t.m03()+this.m31()*t.m13()+this.m32()*t.m23()+this.m33()*t.m33())},timesVector4:function(t){const e=this.m00()*t.x+this.m01()*t.y+this.m02()*t.z+this.m03()*t.w,i=this.m10()*t.x+this.m11()*t.y+this.m12()*t.z+this.m13()*t.w,n=this.m20()*t.x+this.m21()*t.y+this.m22()*t.z+this.m23()*t.w,s=this.m30()*t.x+this.m31()*t.y+this.m32()*t.z+this.m33()*t.w;return new Ne.a(e,i,n,s)},timesVector3:function(t){return this.timesVector4(t.toVector4()).toVector3()},timesTransposeVector4:function(t){const e=this.m00()*t.x+this.m10()*t.y+this.m20()*t.z+this.m30()*t.w,i=this.m01()*t.x+this.m11()*t.y+this.m21()*t.z+this.m31()*t.w,n=this.m02()*t.x+this.m12()*t.y+this.m22()*t.z+this.m32()*t.w,s=this.m03()*t.x+this.m13()*t.y+this.m23()*t.z+this.m33()*t.w;return new Ne.a(e,i,n,s)},timesTransposeVector3:function(t){return this.timesTransposeVector4(t.toVector4()).toVector3()},timesRelativeVector3:function(t){const e=this.m00()*t.x+this.m10()*t.y+this.m20()*t.z,i=this.m01()*t.y+this.m11()*t.y+this.m21()*t.z,n=this.m02()*t.z+this.m12()*t.y+this.m22()*t.z;return new Re.a(e,i,n)},getDeterminant:function(){return this.m03()*this.m12()*this.m21()*this.m30()-this.m02()*this.m13()*this.m21()*this.m30()-this.m03()*this.m11()*this.m22()*this.m30()+this.m01()*this.m13()*this.m22()*this.m30()+this.m02()*this.m11()*this.m23()*this.m30()-this.m01()*this.m12()*this.m23()*this.m30()-this.m03()*this.m12()*this.m20()*this.m31()+this.m02()*this.m13()*this.m20()*this.m31()+this.m03()*this.m10()*this.m22()*this.m31()-this.m00()*this.m13()*this.m22()*this.m31()-this.m02()*this.m10()*this.m23()*this.m31()+this.m00()*this.m12()*this.m23()*this.m31()+this.m03()*this.m11()*this.m20()*this.m32()-this.m01()*this.m13()*this.m20()*this.m32()-this.m03()*this.m10()*this.m21()*this.m32()+this.m00()*this.m13()*this.m21()*this.m32()+this.m01()*this.m10()*this.m23()*this.m32()-this.m00()*this.m11()*this.m23()*this.m32()-this.m02()*this.m11()*this.m20()*this.m33()+this.m01()*this.m12()*this.m20()*this.m33()+this.m02()*this.m10()*this.m21()*this.m33()-this.m00()*this.m12()*this.m21()*this.m33()-this.m01()*this.m10()*this.m22()*this.m33()+this.m00()*this.m11()*this.m22()*this.m33()},get determinant(){return this.getDeterminant()},toString:function(){return this.m00()+" "+this.m01()+" "+this.m02()+" "+this.m03()+"\n"+this.m10()+" "+this.m11()+" "+this.m12()+" "+this.m13()+"\n"+this.m20()+" "+this.m21()+" "+this.m22()+" "+this.m23()+"\n"+this.m30()+" "+this.m31()+" "+this.m32()+" "+this.m33()},makeImmutable:function(){this.rowMajor=function(){throw new Error("Cannot modify immutable matrix")}},copyToArray:function(t){return t[0]=this.m00(),t[1]=this.m10(),t[2]=this.m20(),t[3]=this.m30(),t[4]=this.m01(),t[5]=this.m11(),t[6]=this.m21(),t[7]=this.m31(),t[8]=this.m02(),t[9]=this.m12(),t[10]=this.m22(),t[11]=this.m32(),t[12]=this.m03(),t[13]=this.m13(),t[14]=this.m23(),t[15]=this.m33(),t}},Be.IDENTITY=new Be,Be.IDENTITY.makeImmutable();var Ve=Be;function qe(t){this.entries=[1,0,0,0,1,0,0,0,1],this.type=He.IDENTITY}w.a.register("Matrix3",qe),qe.Types={OTHER:0,IDENTITY:1,TRANSLATION_2D:2,SCALING:3,AFFINE:4};var He=qe.Types;qe.identity=function(){return qe.dirtyFromPool().setToIdentity()},qe.translation=function(t,e){return qe.dirtyFromPool().setToTranslation(t,e)},qe.translationFromVector=function(t){return qe.translation(t.x,t.y)},qe.scaling=function(t,e){return qe.dirtyFromPool().setToScale(t,e)},qe.scale=qe.scaling,qe.affine=function(t,e,i,n,s,r){return qe.dirtyFromPool().setToAffine(t,e,i,n,s,r)},qe.rowMajor=function(t,e,i,n,s,r,o,a,l,h){return qe.dirtyFromPool().rowMajor(t,e,i,n,s,r,o,a,l,h)},qe.rotationAxisAngle=function(t,e){return qe.dirtyFromPool().setToRotationAxisAngle(t,e)},qe.rotationX=function(t){return qe.dirtyFromPool().setToRotationX(t)},qe.rotationY=function(t){return qe.dirtyFromPool().setToRotationY(t)},qe.rotationZ=function(t){return qe.dirtyFromPool().setToRotationZ(t)},qe.translationRotation=function(t,e,i){return qe.dirtyFromPool().setToTranslationRotation(t,e,i)},qe.rotation2=qe.rotationZ,qe.rotationAround=function(t,e,i){return qe.translation(e,i).timesMatrix(qe.rotation2(t)).timesMatrix(qe.translation(-e,-i))},qe.rotationAroundPoint=function(t,e){return qe.rotationAround(t,e.x,e.y)},qe.fromSVGMatrix=function(t){return qe.dirtyFromPool().setToSVGMatrix(t)},qe.rotateAToB=function(t,e){return qe.dirtyFromPool().setRotationAToB(t,e)},qe.prototype={constructor:qe,m00:function(){return this.entries[0]},m01:function(){return this.entries[3]},m02:function(){return this.entries[6]},m10:function(){return this.entries[1]},m11:function(){return this.entries[4]},m12:function(){return this.entries[7]},m20:function(){return this.entries[2]},m21:function(){return this.entries[5]},m22:function(){return this.entries[8]},isIdentity:function(){return this.type===He.IDENTITY||this.equals(qe.IDENTITY)},isFastIdentity:function(){return this.type===He.IDENTITY},isAffine:function(){return this.type===He.AFFINE||0===this.m20()&&0===this.m21()&&1===this.m22()},isAligned:function(){return this.isAffine()&&0===this.m01()&&0===this.m10()},isAxisAligned:function(){return this.isAffine()&&(0===this.m01()&&0===this.m10()||0===this.m00()&&0===this.m11())},isFinite:function(){return isFinite(this.m00())&&isFinite(this.m01())&&isFinite(this.m02())&&isFinite(this.m10())&&isFinite(this.m11())&&isFinite(this.m12())&&isFinite(this.m20())&&isFinite(this.m21())&&isFinite(this.m22())},getDeterminant:function(){return this.m00()*this.m11()*this.m22()+this.m01()*this.m12()*this.m20()+this.m02()*this.m10()*this.m21()-this.m02()*this.m11()*this.m20()-this.m01()*this.m10()*this.m22()-this.m00()*this.m12()*this.m21()},get determinant(){return this.getDeterminant()},getTranslation:function(){return new te.a(this.m02(),this.m12())},get translation(){return this.getTranslation()},getScaleVector:function(){return new te.a(Math.sqrt(this.m00()*this.m00()+this.m10()*this.m10()),Math.sqrt(this.m01()*this.m01()+this.m11()*this.m11()))},get scaleVector(){return this.getScaleVector()},getRotation:function(){return Math.atan2(this.m10(),this.m00())},get rotation(){return this.getRotation()},toMatrix4:function(){return new Ve(this.m00(),this.m01(),this.m02(),0,this.m10(),this.m11(),this.m12(),0,this.m20(),this.m21(),this.m22(),0,0,0,0,1)},toAffineMatrix4:function(){return new Ve(this.m00(),this.m01(),0,this.m02(),this.m10(),this.m11(),0,this.m12(),0,0,1,0,0,0,0,1)},toString:function(){return this.m00()+" "+this.m01()+" "+this.m02()+"\n"+this.m10()+" "+this.m11()+" "+this.m12()+"\n"+this.m20()+" "+this.m21()+" "+this.m22()},toSVGMatrix:function(){const t=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix();return t.a=this.m00(),t.b=this.m10(),t.c=this.m01(),t.d=this.m11(),t.e=this.m02(),t.f=this.m12(),t},getCSSTransform:function(){return"matrix("+this.entries[0].toFixed(20)+","+this.entries[1].toFixed(20)+","+this.entries[3].toFixed(20)+","+this.entries[4].toFixed(20)+","+this.entries[6].toFixed(20)+","+this.entries[7].toFixed(20)+")"},get cssTransform(){return this.getCSSTransform()},getSVGTransform:function(){function t(t){return t.toFixed(20)}switch(this.type){case He.IDENTITY:return"";case He.TRANSLATION_2D:return"translate("+t(this.entries[6])+","+t(this.entries[7])+")";case He.SCALING:return"scale("+t(this.entries[0])+(this.entries[0]===this.entries[4]?"":","+t(this.entries[4]))+")";default:return"matrix("+t(this.entries[0])+","+t(this.entries[1])+","+t(this.entries[3])+","+t(this.entries[4])+","+t(this.entries[6])+","+t(this.entries[7])+")"}},get svgTransform(){return this.getSVGTransform()},getCSSTransformStyles:function(){const t=this.getCSSTransform();return{"-webkit-perspective":1e3,"-webkit-backface-visibility":"hidden","-webkit-transform":t+" translateZ(0)","-moz-transform":t+" translateZ(0)","-ms-transform":t,"-o-transform":t,transform:t,"transform-origin":"top left","-ms-transform-origin":"top left"}},get cssTransformStyles(){return this.getCSSTransformStyles()},equals:function(t){return this.m00()===t.m00()&&this.m01()===t.m01()&&this.m02()===t.m02()&&this.m10()===t.m10()&&this.m11()===t.m11()&&this.m12()===t.m12()&&this.m20()===t.m20()&&this.m21()===t.m21()&&this.m22()===t.m22()},equalsEpsilon:function(t,e){return Math.abs(this.m00()-t.m00())<e&&Math.abs(this.m01()-t.m01())<e&&Math.abs(this.m02()-t.m02())<e&&Math.abs(this.m10()-t.m10())<e&&Math.abs(this.m11()-t.m11())<e&&Math.abs(this.m12()-t.m12())<e&&Math.abs(this.m20()-t.m20())<e&&Math.abs(this.m21()-t.m21())<e&&Math.abs(this.m22()-t.m22())<e},copy:function(){return qe.createFromPool(this.m00(),this.m01(),this.m02(),this.m10(),this.m11(),this.m12(),this.m20(),this.m21(),this.m22(),this.type)},plus:function(t){return qe.createFromPool(this.m00()+t.m00(),this.m01()+t.m01(),this.m02()+t.m02(),this.m10()+t.m10(),this.m11()+t.m11(),this.m12()+t.m12(),this.m20()+t.m20(),this.m21()+t.m21(),this.m22()+t.m22())},minus:function(t){return qe.createFromPool(this.m00()-t.m00(),this.m01()-t.m01(),this.m02()-t.m02(),this.m10()-t.m10(),this.m11()-t.m11(),this.m12()-t.m12(),this.m20()-t.m20(),this.m21()-t.m21(),this.m22()-t.m22())},transposed:function(){return qe.createFromPool(this.m00(),this.m10(),this.m20(),this.m01(),this.m11(),this.m21(),this.m02(),this.m12(),this.m22(),this.type===He.IDENTITY||this.type===He.SCALING?this.type:void 0)},negated:function(){return qe.createFromPool(-this.m00(),-this.m01(),-this.m02(),-this.m10(),-this.m11(),-this.m12(),-this.m20(),-this.m21(),-this.m22())},inverted:function(){let t;switch(this.type){case He.IDENTITY:return this;case He.TRANSLATION_2D:return qe.createFromPool(1,0,-this.m02(),0,1,-this.m12(),0,0,1,He.TRANSLATION_2D);case He.SCALING:return qe.createFromPool(1/this.m00(),0,0,0,1/this.m11(),0,0,0,1/this.m22(),He.SCALING);case He.AFFINE:if(t=this.getDeterminant(),0!==t)return qe.createFromPool((-this.m12()*this.m21()+this.m11()*this.m22())/t,(this.m02()*this.m21()-this.m01()*this.m22())/t,(-this.m02()*this.m11()+this.m01()*this.m12())/t,(this.m12()*this.m20()-this.m10()*this.m22())/t,(-this.m02()*this.m20()+this.m00()*this.m22())/t,(this.m02()*this.m10()-this.m00()*this.m12())/t,0,0,1,He.AFFINE);throw new Error("Matrix could not be inverted, determinant === 0");case He.OTHER:if(t=this.getDeterminant(),0!==t)return qe.createFromPool((-this.m12()*this.m21()+this.m11()*this.m22())/t,(this.m02()*this.m21()-this.m01()*this.m22())/t,(-this.m02()*this.m11()+this.m01()*this.m12())/t,(this.m12()*this.m20()-this.m10()*this.m22())/t,(-this.m02()*this.m20()+this.m00()*this.m22())/t,(this.m02()*this.m10()-this.m00()*this.m12())/t,(-this.m11()*this.m20()+this.m10()*this.m21())/t,(this.m01()*this.m20()-this.m00()*this.m21())/t,(-this.m01()*this.m10()+this.m00()*this.m11())/t,He.OTHER);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error("Matrix3.inverted with unknown type: "+this.type)}},timesMatrix:function(t){if(this.type===He.IDENTITY||t.type===He.IDENTITY)return this.type===He.IDENTITY?t:this;if(this.type===t.type){if(this.type===He.TRANSLATION_2D)return qe.createFromPool(1,0,this.m02()+t.m02(),0,1,this.m12()+t.m12(),0,0,1,He.TRANSLATION_2D);if(this.type===He.SCALING)return qe.createFromPool(this.m00()*t.m00(),0,0,0,this.m11()*t.m11(),0,0,0,1,He.SCALING)}return this.type!==He.OTHER&&t.type!==He.OTHER?qe.createFromPool(this.m00()*t.m00()+this.m01()*t.m10(),this.m00()*t.m01()+this.m01()*t.m11(),this.m00()*t.m02()+this.m01()*t.m12()+this.m02(),this.m10()*t.m00()+this.m11()*t.m10(),this.m10()*t.m01()+this.m11()*t.m11(),this.m10()*t.m02()+this.m11()*t.m12()+this.m12(),0,0,1,He.AFFINE):qe.createFromPool(this.m00()*t.m00()+this.m01()*t.m10()+this.m02()*t.m20(),this.m00()*t.m01()+this.m01()*t.m11()+this.m02()*t.m21(),this.m00()*t.m02()+this.m01()*t.m12()+this.m02()*t.m22(),this.m10()*t.m00()+this.m11()*t.m10()+this.m12()*t.m20(),this.m10()*t.m01()+this.m11()*t.m11()+this.m12()*t.m21(),this.m10()*t.m02()+this.m11()*t.m12()+this.m12()*t.m22(),this.m20()*t.m00()+this.m21()*t.m10()+this.m22()*t.m20(),this.m20()*t.m01()+this.m21()*t.m11()+this.m22()*t.m21(),this.m20()*t.m02()+this.m21()*t.m12()+this.m22()*t.m22())},timesVector2:function(t){const e=this.m00()*t.x+this.m01()*t.y+this.m02(),i=this.m10()*t.x+this.m11()*t.y+this.m12();return new te.a(e,i)},timesVector3:function(t){const e=this.m00()*t.x+this.m01()*t.y+this.m02()*t.z,i=this.m10()*t.x+this.m11()*t.y+this.m12()*t.z,n=this.m20()*t.x+this.m21()*t.y+this.m22()*t.z;return new Re.a(e,i,n)},timesTransposeVector2:function(t){const e=this.m00()*t.x+this.m10()*t.y,i=this.m01()*t.x+this.m11()*t.y;return new te.a(e,i)},timesRelativeVector2:function(t){const e=this.m00()*t.x+this.m01()*t.y,i=this.m10()*t.y+this.m11()*t.y;return new te.a(e,i)},rowMajor:function(t,e,i,n,s,r,o,a,l,h){return this.entries[0]=t,this.entries[1]=n,this.entries[2]=o,this.entries[3]=e,this.entries[4]=s,this.entries[5]=a,this.entries[6]=i,this.entries[7]=r,this.entries[8]=l,this.type=void 0===h?0===o&&0===a&&1===l?He.AFFINE:He.OTHER:h,this},set:function(t){return this.rowMajor(t.m00(),t.m01(),t.m02(),t.m10(),t.m11(),t.m12(),t.m20(),t.m21(),t.m22(),t.type)},setArray:function(t){return this.rowMajor(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8])},set00:function(t){return this.entries[0]=t,this},set01:function(t){return this.entries[3]=t,this},set02:function(t){return this.entries[6]=t,this},set10:function(t){return this.entries[1]=t,this},set11:function(t){return this.entries[4]=t,this},set12:function(t){return this.entries[7]=t,this},set20:function(t){return this.entries[2]=t,this},set21:function(t){return this.entries[5]=t,this},set22:function(t){return this.entries[8]=t,this},makeImmutable:function(){return this.rowMajor=function(){throw new Error("Cannot modify immutable matrix")},this},columnMajor:function(t,e,i,n,s,r,o,a,l,h){return this.rowMajor(t,n,o,e,s,a,i,r,l,h)},add:function(t){return this.rowMajor(this.m00()+t.m00(),this.m01()+t.m01(),this.m02()+t.m02(),this.m10()+t.m10(),this.m11()+t.m11(),this.m12()+t.m12(),this.m20()+t.m20(),this.m21()+t.m21(),this.m22()+t.m22())},subtract:function(t){return this.rowMajor(this.m00()-t.m00(),this.m01()-t.m01(),this.m02()-t.m02(),this.m10()-t.m10(),this.m11()-t.m11(),this.m12()-t.m12(),this.m20()-t.m20(),this.m21()-t.m21(),this.m22()-t.m22())},transpose:function(){return this.rowMajor(this.m00(),this.m10(),this.m20(),this.m01(),this.m11(),this.m21(),this.m02(),this.m12(),this.m22(),this.type===He.IDENTITY||this.type===He.SCALING?this.type:void 0)},negate:function(){return this.rowMajor(-this.m00(),-this.m01(),-this.m02(),-this.m10(),-this.m11(),-this.m12(),-this.m20(),-this.m21(),-this.m22())},invert:function(){let t;switch(this.type){case He.IDENTITY:return this;case He.TRANSLATION_2D:return this.rowMajor(1,0,-this.m02(),0,1,-this.m12(),0,0,1,He.TRANSLATION_2D);case He.SCALING:return this.rowMajor(1/this.m00(),0,0,0,1/this.m11(),0,0,0,1/this.m22(),He.SCALING);case He.AFFINE:if(t=this.getDeterminant(),0!==t)return this.rowMajor((-this.m12()*this.m21()+this.m11()*this.m22())/t,(this.m02()*this.m21()-this.m01()*this.m22())/t,(-this.m02()*this.m11()+this.m01()*this.m12())/t,(this.m12()*this.m20()-this.m10()*this.m22())/t,(-this.m02()*this.m20()+this.m00()*this.m22())/t,(this.m02()*this.m10()-this.m00()*this.m12())/t,0,0,1,He.AFFINE);throw new Error("Matrix could not be inverted, determinant === 0");case He.OTHER:if(t=this.getDeterminant(),0!==t)return this.rowMajor((-this.m12()*this.m21()+this.m11()*this.m22())/t,(this.m02()*this.m21()-this.m01()*this.m22())/t,(-this.m02()*this.m11()+this.m01()*this.m12())/t,(this.m12()*this.m20()-this.m10()*this.m22())/t,(-this.m02()*this.m20()+this.m00()*this.m22())/t,(this.m02()*this.m10()-this.m00()*this.m12())/t,(-this.m11()*this.m20()+this.m10()*this.m21())/t,(this.m01()*this.m20()-this.m00()*this.m21())/t,(-this.m01()*this.m10()+this.m00()*this.m11())/t,He.OTHER);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error("Matrix3.inverted with unknown type: "+this.type)}},multiplyMatrix:function(t){if(t.type===He.IDENTITY)return this;if(this.type===He.IDENTITY)return this.set(t);if(this.type===t.type){if(this.type===He.TRANSLATION_2D)return this.rowMajor(1,0,this.m02()+t.m02(),0,1,this.m12()+t.m12(),0,0,1,He.TRANSLATION_2D);if(this.type===He.SCALING)return this.rowMajor(this.m00()*t.m00(),0,0,0,this.m11()*t.m11(),0,0,0,1,He.SCALING)}return this.type!==He.OTHER&&t.type!==He.OTHER?this.rowMajor(this.m00()*t.m00()+this.m01()*t.m10(),this.m00()*t.m01()+this.m01()*t.m11(),this.m00()*t.m02()+this.m01()*t.m12()+this.m02(),this.m10()*t.m00()+this.m11()*t.m10(),this.m10()*t.m01()+this.m11()*t.m11(),this.m10()*t.m02()+this.m11()*t.m12()+this.m12(),0,0,1,He.AFFINE):this.rowMajor(this.m00()*t.m00()+this.m01()*t.m10()+this.m02()*t.m20(),this.m00()*t.m01()+this.m01()*t.m11()+this.m02()*t.m21(),this.m00()*t.m02()+this.m01()*t.m12()+this.m02()*t.m22(),this.m10()*t.m00()+this.m11()*t.m10()+this.m12()*t.m20(),this.m10()*t.m01()+this.m11()*t.m11()+this.m12()*t.m21(),this.m10()*t.m02()+this.m11()*t.m12()+this.m12()*t.m22(),this.m20()*t.m00()+this.m21()*t.m10()+this.m22()*t.m20(),this.m20()*t.m01()+this.m21()*t.m11()+this.m22()*t.m21(),this.m20()*t.m02()+this.m21()*t.m12()+this.m22()*t.m22())},prependTranslation:function(t,e){return this.set02(this.m02()+t),this.set12(this.m12()+e),this.type===He.IDENTITY||this.type===He.TRANSLATION_2D?this.type=He.TRANSLATION_2D:this.type===He.OTHER?this.type=He.OTHER:this.type=He.AFFINE,this},setToIdentity:function(){return this.rowMajor(1,0,0,0,1,0,0,0,1,He.IDENTITY)},setToTranslation:function(t,e){return this.rowMajor(1,0,t,0,1,e,0,0,1,He.TRANSLATION_2D)},setToScale:function(t,e){return e=void 0===e?t:e,this.rowMajor(t,0,0,0,e,0,0,0,1,He.SCALING)},setToAffine:function(t,e,i,n,s,r){return this.rowMajor(t,e,i,n,s,r,0,0,1,He.AFFINE)},setToRotationAxisAngle:function(t,e){const i=Math.cos(e),n=Math.sin(e),s=1-i;return this.rowMajor(t.x*t.x*s+i,t.x*t.y*s-t.z*n,t.x*t.z*s+t.y*n,t.y*t.x*s+t.z*n,t.y*t.y*s+i,t.y*t.z*s-t.x*n,t.z*t.x*s-t.y*n,t.z*t.y*s+t.x*n,t.z*t.z*s+i,He.OTHER)},setToRotationX:function(t){const e=Math.cos(t),i=Math.sin(t);return this.rowMajor(1,0,0,0,e,-i,0,i,e,He.OTHER)},setToRotationY:function(t){const e=Math.cos(t),i=Math.sin(t);return this.rowMajor(e,0,i,0,1,0,-i,0,e,He.OTHER)},setToRotationZ:function(t){const e=Math.cos(t),i=Math.sin(t);return this.rowMajor(e,-i,0,i,e,0,0,0,1,He.AFFINE)},setToTranslationRotation:function(t,e,i){const n=Math.cos(i),s=Math.sin(i);return this.rowMajor(n,-s,t,s,n,e,0,0,1,He.AFFINE)},setToTranslationRotationPoint:function(t,e){return this.setToTranslationRotation(t.x,t.y,e)},setToSVGMatrix:function(t){return this.rowMajor(t.a,t.c,t.e,t.b,t.d,t.f,0,0,1,He.AFFINE)},setRotationAToB:function(t,e){const i=t,n=e;let s=i.cross(n);const r=i.dot(n);if((r<0?-r:r)>.9999){let t=new Re.a(i.x>0?i.x:-i.x,i.y>0?i.y:-i.y,i.z>0?i.z:-i.z);t=t.x<t.y?t.x<t.z?Re.a.X_UNIT:Re.a.Z_UNIT:t.y<t.z?Re.a.Y_UNIT:Re.a.Z_UNIT;const e=t.minus(i);s=t.minus(n);const r=2/e.dot(e),o=2/s.dot(s),a=r*o*e.dot(s);return this.rowMajor(-r*e.x*e.x-o*s.x*s.x+a*s.x*e.x+1,-r*e.x*e.y-o*s.x*s.y+a*s.x*e.y,-r*e.x*e.z-o*s.x*s.z+a*s.x*e.z,-r*e.y*e.x-o*s.y*s.x+a*s.y*e.x,-r*e.y*e.y-o*s.y*s.y+a*s.y*e.y+1,-r*e.y*e.z-o*s.y*s.z+a*s.y*e.z,-r*e.z*e.x-o*s.z*s.x+a*s.z*e.x,-r*e.z*e.y-o*s.z*s.y+a*s.z*e.y,-r*e.z*e.z-o*s.z*s.z+a*s.z*e.z+1)}{const t=1/(1+r),e=t*s.x,i=t*s.z,n=e*s.y,o=e*s.z,a=i*s.y;return this.rowMajor(r+e*s.x,n-s.z,o+s.y,n+s.z,r+t*s.y*s.y,a-s.x,o-s.y,a+s.x,r+i*s.z)}},multiplyVector2:function(t){return t.setXY(this.m00()*t.x+this.m01()*t.y+this.m02(),this.m10()*t.x+this.m11()*t.y+this.m12())},multiplyVector3:function(t){return t.setXYZ(this.m00()*t.x+this.m01()*t.y+this.m02()*t.z,this.m10()*t.x+this.m11()*t.y+this.m12()*t.z,this.m20()*t.x+this.m21()*t.y+this.m22()*t.z)},multiplyTransposeVector2:function(t){return t.setXY(this.m00()*t.x+this.m10()*t.y,this.m01()*t.x+this.m11()*t.y)},multiplyRelativeVector2:function(t){return t.setXY(this.m00()*t.x+this.m01()*t.y,this.m10()*t.y+this.m11()*t.y)},canvasSetTransform:function(t){t.setTransform(this.entries[0],this.entries[1],this.entries[3],this.entries[4],this.entries[6],this.entries[7])},canvasAppendTransform:function(t){this.type!==He.IDENTITY&&t.transform(this.entries[0],this.entries[1],this.entries[3],this.entries[4],this.entries[6],this.entries[7])},copyToArray:function(t){return t[0]=this.m00(),t[1]=this.m10(),t[2]=this.m20(),t[3]=this.m01(),t[4]=this.m11(),t[5]=this.m21(),t[6]=this.m02(),t[7]=this.m12(),t[8]=this.m22(),t}},$t.a.mixInto(qe,{initialize:qe.prototype.rowMajor,useDefaultConstruction:!0,maxSize:300}),qe.IDENTITY=qe.identity(),qe.IDENTITY.makeImmutable(),qe.X_REFLECTION=qe.createFromPool(-1,0,0,0,1,0,0,0,1,He.AFFINE),qe.X_REFLECTION.makeImmutable(),qe.Y_REFLECTION=qe.createFromPool(1,0,0,0,-1,0,0,0,1,He.AFFINE),qe.Y_REFLECTION.makeImmutable(),qe.translationTimesMatrix=function(t,e,i){let n;return i.type===He.IDENTITY||i.type===He.TRANSLATION_2D?qe.createFromPool(1,0,i.m02()+t,0,1,i.m12()+e,0,0,1,He.TRANSLATION_2D):(n=i.type===He.OTHER?He.OTHER:He.AFFINE,qe.createFromPool(i.m00(),i.m01(),i.m02()+t,i.m10(),i.m11(),i.m12()+e,i.m20(),i.m21(),i.m22(),n))},qe.printer={print:function(t){console.log(t.toString())}},qe.toStateObject=function(t){return{entries:t.entries,type:t.type}},qe.fromStateObject=function(t){const e=qe.identity();return e.entries=t.entries,e.type=t.type,e};var Ye=qe;function je(t,e){this.position=t,this.direction=e}w.a.register("Ray2",je),je.prototype={constructor:je,shifted:function(t){return new je(this.pointAtDistance(t),this.direction)},pointAtDistance:function(t){return this.position.plus(this.direction.timesScalar(t))},toString:function(){return this.position.toString()+" => "+this.direction.toString()}};var Ge=je;const ze=new Ye;function We(t){this.matrix=Ye.IDENTITY.copy(),this.inverse=Ye.IDENTITY.copy(),this.matrixTransposed=Ye.IDENTITY.copy(),this.inverseTransposed=Ye.IDENTITY.copy(),this.inverseValid=!0,this.transposeValid=!0,this.inverseTransposeValid=!0,this.changeEmitter=new H,t&&this.setMatrix(t)}w.a.register("Transform3",We),Object(z.a)(Object,We,{setMatrix:function(t){this.matrix.set(t),this.invalidate()},validateMatrix:function(t){},invalidate:function(){this.inverseValid=!1,this.transposeValid=!1,this.inverseTransposeValid=!1,this.changeEmitter.emit()},prepend:function(t){ze.set(this.matrix),this.matrix.set(t),this.matrix.multiplyMatrix(ze),this.invalidate()},prependTranslation:function(t,e){this.matrix.prependTranslation(t,e),this.invalidate()},append:function(t){this.matrix.multiplyMatrix(t),this.invalidate()},prependTransform:function(t){this.prepend(t.matrix)},appendTransform:function(t){this.append(t.matrix)},applyToCanvasContext:function(t){t.setTransform(this.matrix.m00(),this.matrix.m10(),this.matrix.m01(),this.matrix.m11(),this.matrix.m02(),this.matrix.m12())},copy:function(){const t=new We(this.matrix);t.inverse=this.inverse,t.matrixTransposed=this.matrixTransposed,t.inverseTransposed=this.inverseTransposed,t.inverseValid=this.inverseValid,t.transposeValid=this.transposeValid,t.inverseTransposeValid=this.inverseTransposeValid},getMatrix:function(){return this.matrix},getInverse:function(){return this.inverseValid||(this.inverseValid=!0,this.inverse.set(this.matrix),this.inverse.invert()),this.inverse},getMatrixTransposed:function(){return this.transposeValid||(this.transposeValid=!0,this.matrixTransposed.set(this.matrix),this.matrixTransposed.transpose()),this.matrixTransposed},getInverseTransposed:function(){return this.inverseTransposeValid||(this.inverseTransposeValid=!0,this.inverseTransposed.set(this.getInverse()),this.inverseTransposed.transpose()),this.inverseTransposed},isIdentity:function(){return this.matrix.type===Ye.Types.IDENTITY},isFinite:function(){return this.matrix.isFinite()},transformPosition2:function(t){return this.matrix.timesVector2(t)},transformDelta2:function(t){const e=this.getMatrix();return new te.a(e.m00()*t.x+e.m01()*t.y,e.m10()*t.x+e.m11()*t.y)},transformNormal2:function(t){return this.getInverse().timesTransposeVector2(t).normalize()},transformX:function(t){const e=this.getMatrix();return e.m00()*t+e.m02()},transformY:function(t){const e=this.getMatrix();return e.m11()*t+e.m12()},transformDeltaX:function(t){return this.getMatrix().m00()*t},transformDeltaY:function(t){return this.getMatrix().m11()*t},transformBounds2:function(t){return t.transformed(this.matrix)},transformShape:function(t){return t.transformed(this.matrix)},transformRay2:function(t){return new Ge(this.transformPosition2(t.position),this.transformDelta2(t.direction).normalized())},inversePosition2:function(t){return this.getInverse().timesVector2(t)},inverseDelta2:function(t){const e=this.getInverse();return new te.a(e.m00()*t.x+e.m01()*t.y,e.m10()*t.x+e.m11()*t.y)},inverseNormal2:function(t){return this.matrix.timesTransposeVector2(t).normalize()},inverseX:function(t){const e=this.getInverse();return e.m00()*t+e.m02()},inverseY:function(t){const e=this.getInverse();return e.m11()*t+e.m12()},inverseDeltaX:function(t){const e=this.getInverse();return e.m00()*t},inverseDeltaY:function(t){const e=this.getInverse();return e.m11()*t},inverseBounds2:function(t){return t.transformed(this.getInverse())},inverseShape:function(t){return t.transformed(this.getInverse())},inverseRay2:function(t){return new Ge(this.inversePosition2(t.position),this.inverseDelta2(t.direction).normalized())}});var Ue=We;function Xe(t){if(t){for(;t.length;)t.pop();return t}return[]}a.a.register("cleanArray",Xe);var Ke=Xe;function Qe(t,e){this.a=t,this.b=e;let i=0,n=1,s=this.apply(i),r=this.apply(n);s>1&&(s=1,i=this.applyInverse(s)),s<0&&(s=0,i=this.applyInverse(s)),r>1&&(r=1,n=this.applyInverse(r)),r<0&&(r=0,n=this.applyInverse(r)),this.t0=i,this.t1=n,t>0?(this.qt0=s,this.qt1=r):(this.qt0=r,this.qt1=s),this.t0<0&&this.t0>-1e-8&&(this.t0=0),this.t0>1&&this.t0<1+1e-8&&(this.t0=1),this.t1<0&&this.t1>-1e-8&&(this.t1=0),this.t1>1&&this.t1<1+1e-8&&(this.t1=1),this.qt0<0&&this.qt0>-1e-8&&(this.qt0=0),this.qt0>1&&this.qt0<1+1e-8&&(this.qt0=1),this.qt1<0&&this.qt1>-1e-8&&(this.qt1=0),this.qt1>1&&this.qt1<1+1e-8&&(this.qt1=1)}ce.register("Overlap",Qe),Object(z.a)(Object,Qe,{apply:function(t){return this.a*t+this.b},applyInverse:function(t){return(t-this.b)/this.a}},{createLinear:function(t,e,i,n){const s=(n-e)/(i-t);return new Qe(s,e-t*s)}});var Ze=ce.Overlap;function Je(t,e,i,n,s){this.point=e,this.normal=i,this.distance=t,this.wind=n,this.t=oe.a.clamp(s,0,1)}ce.register("RayIntersection",Je),Object(z.a)(Object,Je);var $e=Je;function ti(t,e,i){this.point=t,this.aT=oe.a.clamp(e,0,1),this.bT=oe.a.clamp(i,0,1)}ce.register("SegmentIntersection",ti),Object(z.a)(Object,ti,{getSwapped:function(){return new ti(this.point,this.bT,this.aT)}});var ei=ti;function ii(t,e,i,n,s,r,o,a,l,h){this.initialize(t,e,i,n,s,r,o,a,l,h)}ce.register("BoundsIntersection",ii),Object(z.a)(Object,ii,{initialize:function(t,e,i,n,s,r,o,a,l,h){return this.a=t,this.b=e,this.atMin=i,this.atMax=n,this.btMin=s,this.btMax=r,this.aMin=o,this.aMax=a,this.bMin=l,this.bMax=h,this},pushSubdivisions:function(t){const e=(this.atMax+this.atMin)/2,i=(this.btMax+this.btMin)/2;if(e===this.atMin||e===this.atMax||i===this.btMin||i===this.btMax)return void t.push(this);const n=this.a.positionAt(e),s=this.b.positionAt(i);ii.boxIntersects(this.aMin,n,this.bMin,s)&&t.push(ii.createFromPool(this.a,this.b,this.atMin,e,this.btMin,i,this.aMin,n,this.bMin,s)),ii.boxIntersects(n,this.aMax,this.bMin,s)&&t.push(ii.createFromPool(this.a,this.b,e,this.atMax,this.btMin,i,n,this.aMax,this.bMin,s)),ii.boxIntersects(this.aMin,n,s,this.bMax)&&t.push(ii.createFromPool(this.a,this.b,this.atMin,e,i,this.btMax,this.aMin,n,s,this.bMax)),ii.boxIntersects(n,this.aMax,s,this.bMax)&&t.push(ii.createFromPool(this.a,this.b,e,this.atMax,i,this.btMax,n,this.aMax,s,this.bMax)),this.freeToPool()},distance:function(t){const e=this.atMin-t.atMin,i=this.atMax-t.atMax,n=this.btMin-t.btMin,s=this.btMax-t.btMax;return e*e+i*i+n*n+s*s},clean:function(){this.a=null,this.b=null,this.aMin=null,this.aMax=null,this.bMin=null,this.bMax=null}},{intersect:function(t,e){if(!t.bounds.intersectsBounds(e.bounds))return[];const i=ii.getIntersectionRanges(t,e),n=[];for(var s=0;s<i.length;s++){const t=i[s];let e=!1;t:for(var r=0;r<n.length;r++){var o=n[r];for(let i=0;i<o.length;i++){const n=o[i];if(t.distance(n)<1e-13){o.push(t),e=!0;break t}}}e||n.push([t])}const a=[];for(s=0;s<n.length;s++){o=n[s];let i=0,l=0;for(r=0;r<o.length;r++)i+=o[r].atMin+o[r].atMax,l+=o[r].btMin+o[r].btMax;i/=2*o.length,l/=2*o.length;const h=t.positionAt(i),u=e.positionAt(l);a.push(new ei(h.average(u),i,l))}for(s=0;s<i.length;s++)i[s].freeToPool();return ii.cleanPool(),a},getIntersectionRanges:function(t,e){const i=t.getInteriorExtremaTs(),n=e.getInteriorExtremaTs(),s=_.zip([0].concat(i),i.concat([1])),r=_.zip([0].concat(n),n.concat([1]));let o=[];for(var a=0;a<s.length;a++)for(var l=0;l<r.length;l++){const i=s[a][0],n=s[a][1],h=r[l][0],u=r[l][1],c=t.positionAt(i),d=t.positionAt(n),p=e.positionAt(h),f=e.positionAt(u);ii.boxIntersects(c,d,p,f)&&o.push(ii.createFromPool(t,e,i,n,h,u,c,d,p,f))}for(a=0;a<50;a++){const t=[];for(l=o.length-1;l>=0;l--)o[l].pushSubdivisions(t);o=t}return o},boxIntersects:function(t,e,i,n){const s=Math.max(Math.min(t.x,e.x),Math.min(i.x,n.x)),r=Math.max(Math.min(t.y,e.y),Math.min(i.y,n.y)),o=Math.min(Math.max(t.x,e.x),Math.max(i.x,n.x)),a=Math.min(Math.max(t.y,e.y),Math.max(i.y,n.y));return o-s>=0&&a-r>=0},cleanPool:function(){for(let t=0;t<ii.pool.length;t++)ii.pool[t].clean()}}),$t.a.mixInto(ii,{initialize:ii.prototype.initialize});var ni=ii;function si(){this.invalidationEmitter=new H}ce.register("Segment",si);const ri=function(t){return t};function oi(t){return t.getSwapped()}Object(z.a)(Object,si,{areStrokedBoundsDilated:function(){return Math.abs(this.startTangent.x*this.startTangent.y)<1e-7&&Math.abs(this.endTangent.x*this.endTangent.y)<1e-7},getBoundsWithTransform:function(t){return this.transformed(t).getBounds()},slice:function(t,e){let i=this;return e<1&&(i=i.subdivided(e)[0]),t>0&&(i=i.subdivided(oe.a.linear(0,e,0,1,t))[1]),i},subdivisions:function(t){let e=this;const i=[];for(let n=0;n<t.length;n++){const s=t[n],r=e.subdivided(s);i.push(r[0]),e=r[1];for(let e=n+1;e<t.length;e++)t[e]=oe.a.linear(s,1,0,1,t[e])}return i.push(e),i},subdividedIntoMonotone:function(){return this.subdivisions(this.getInteriorExtremaTs())},isSufficientlyFlat:function(t,e){const i=this.start,n=this.positionAt(.5),s=this.end;return si.isSufficientlyFlat(t,e,i,n,s)},getArcLength:function(t,e,i){if(t=void 0===t?1e-10:t,e=void 0===e?1e-8:e,(i=void 0===i?15:i)<=0||this.isSufficientlyFlat(t,e))return this.start.distance(this.end);{const n=this.subdivided(.5);return n[0].getArcLength(t,e,i-1)+n[1].getArcLength(t,e,i-1)}},getDashValues:function(t,e,i,n){const s=this,r=[];let o=0;const a=_.sum(t);(e%=a)<0&&(e+=a);let l=0,h=0,u=!0;function c(){l=(l+1)%t.length,u=!u}for(;e>0;)e>=t[l]?(e-=t[l],c()):(h=e,e=0);const d=u;return function e(a,u,d,p,f){const m=(a+u)/2,g=s.positionAt(m);if(f>14||si.isSufficientlyFlat(i,n,d,g,p)){const e=d.distance(g)+g.distance(p);o+=e;let i=e;for(;h+i>=t[l];){const n=oe.a.linear(0,e,a,u,e-i+t[l]-h);r.push(n),i-=t[l]-h,h=0,c()}h+=i}else e(a,m,d,g,f+1),e(m,u,g,p,f+1)}(0,1,this.start,this.end,0),{values:r,arcLength:o,initiallyInside:d}},toPiecewiseLinearSegments:function(t,e,i,n,s,r){e=void 0===e?t.minLevels:e,i=void 0===i?t.maxLevels:i,n=n||[];const o=t.pointMap||ri;s=s||o(this.start),r=r||o(this.end);const a=o(this.positionAt(.5));let l=0===i;if(!l&&e<=0&&(l=this.isSufficientlyFlat(null===t.distanceEpsilon?Number.POSITIVE_INFINITY:t.distanceEpsilon,null===t.curveEpsilon?Number.POSITIVE_INFINITY:t.curveEpsilon)),l)n.push(new ce.Line(s,r));else{const o=this.subdivided(.5);o[0].toPiecewiseLinearSegments(t,e-1,i-1,n,s,a),o[1].toPiecewiseLinearSegments(t,e-1,i-1,n,a,r)}return n},toPiecewiseLinearOrArcSegments:function(t){t=Object(s.a)({minLevels:2,maxLevels:7,curvatureThreshold:.02,errorThreshold:10,errorPoints:[.25,.75]},t);const e=[];return this.toPiecewiseLinearOrArcRecursion(t,t.minLevels,t.maxLevels,e,0,1,this.positionAt(0),this.positionAt(1),this.curvatureAt(0),this.curvatureAt(1)),e},toPiecewiseLinearOrArcRecursion:function(t,e,i,n,s,r,o,a,l,h){const u=(s+r)/2,c=this.positionAt(u),d=this.curvatureAt(u);if(i<=0||e<=0&&Math.abs(l-d)+Math.abs(d-h)<2*t.curvatureThreshold){const e=ce.Arc.createFromPoints(o,c,a);let i=!1;if(e instanceof ce.Arc){const n=e.radius*e.radius;for(let o=0;o<t.errorPoints.length;o++){const a=t.errorPoints[o],l=this.positionAt(s*(1-a)+r*a);if(Math.abs(l.distanceSquared(e.center)-n)>t.errorThreshold){i=!0;break}}}if(!i)return void n.push(e)}this.toPiecewiseLinearOrArcRecursion(t,e-1,i-1,n,s,u,o,c,l,d),this.toPiecewiseLinearOrArcRecursion(t,e-1,i-1,n,u,r,c,a,d,h)},toShape:function(){return new ce.Shape([new ce.Subpath([this])])}}),si.closestToPoint=function(t,e,i){const n=i*i;let s=[],r=[],o=Number.POSITIVE_INFINITY,a=!1;for(_.each(t,(function(t){if(t.explicitClosestToPoint){const i=t.explicitClosestToPoint(e);_.each(i,(function(t){t.distanceSquared<o?(r=[t],o=t.distanceSquared):t.distanceSquared===o&&r.push(t)}))}else{const i=[0].concat(t.getInteriorExtremaTs()).concat([1]);for(let n=0;n<i.length-1;n++){const a=i[n],l=i[n+1],h=t.positionAt(a),u=t.positionAt(l),c=ne.point(h).addPoint(u),d=c.minimumDistanceToPointSquared(e);if(d<=o){const i=c.maximumDistanceToPointSquared(e);i<o&&(o=i,r=[]),s.push({ta:a,tb:l,pa:h,pb:u,segment:t,bounds:c,min:d,max:i})}}}}));s.length&&!a;){const t=s;s=[],a=!0,_.each(t,(function(t){if(t.minDistanceSquared>o)return;a&&t.pa.distanceSquared(t.pb)>n&&(a=!1);const i=(t.ta+t.tb)/2,l=t.segment.positionAt(i),h=ne.point(t.pa).addPoint(l),u=ne.point(t.pb).addPoint(l),c=h.minimumDistanceToPointSquared(e),d=u.minimumDistanceToPointSquared(e);if(c<=o){const n=h.maximumDistanceToPointSquared(e);n<o&&(o=n,r=[]),s.push({ta:t.ta,tb:i,pa:t.pa,pb:l,segment:t.segment,bounds:h,min:c,max:n})}if(d<=o){const n=u.maximumDistanceToPointSquared(e);n<o&&(o=n,r=[]),s.push({ta:i,tb:t.tb,pa:l,pb:t.pb,segment:t.segment,bounds:u,min:d,max:n})}}))}return _.each(s,(function(t){const i=(t.ta+t.tb)/2,n=t.segment.positionAt(i);r.push({segment:t.segment,t:i,closestPoint:n,distanceSquared:e.distanceSquared(n)})})),r},si.polynomialGetOverlapCubic=function(t,e,i,n,s,r,o,a){if(0===a)return si.polynomialGetOverlapQuadratic(t,e,i,s,r,o);const l=Math.sign(n/a)*Math.pow(Math.abs(n/a),1/3);return 0===l?null:{a:l,b:(i-l*l*o)/(3*l*l*a)}},si.polynomialGetOverlapQuadratic=function(t,e,i,n,s,r){if(0===r)return si.polynomialGetOverlapLinear(t,e,n,s);if(i/r<0)return null;const o=Math.sqrt(i/r);return 0===o?null:{a:o,b:(e-o*s)/(2*o*r)}},si.polynomialGetOverlapLinear=function(t,e,i,n){if(0===n)return t===i||null;const s=e/n;return 0===s?null:{a:s,b:(t-i)/n}},si.clipOverlap=function(t){},si.intersect=function(t,e){return ce.Line&&t instanceof ce.Line&&e instanceof ce.Line?ce.Line.intersect(t,e):ce.Line&&t instanceof ce.Line?ce.Line.intersectOther(t,e):ce.Line&&e instanceof ce.Line?ce.Line.intersectOther(e,t).map(oi):ce.Arc&&t instanceof ce.Arc&&e instanceof ce.Arc?ce.Arc.intersect(t,e):ni.intersect(t,e)},si.deserialize=function(t){return ce[t.type].deserialize(t)},si.isSufficientlyFlat=function(t,e,i,n,s){return!(oe.a.distToSegmentSquared(n,i,s)/i.distanceSquared(s)>e)&&!(oe.a.distToSegmentSquared(n,i,s)>t)};var ai=si;const li=new te.a(0,0);function hi(t,e){ai.call(this),this._start=t,this._end=e,this.invalidate()}ce.register("Line",hi),Object(z.a)(ai,hi,{setStart:function(t){return this._start.equals(t)||(this._start=t,this.invalidate()),this},set start(t){this.setStart(t)},getStart:function(){return this._start},get start(){return this.getStart()},setEnd:function(t){return this._end.equals(t)||(this._end=t,this.invalidate()),this},set end(t){this.setEnd(t)},getEnd:function(){return this._end},get end(){return this.getEnd()},positionAt:function(t){return this._start.plus(this._end.minus(this._start).times(t))},tangentAt:function(t){return this.getStartTangent()},curvatureAt:function(t){return 0},subdivided:function(t){if(0===t||1===t)return[this];const e=this.positionAt(t);return[new ce.Line(this._start,e),new ce.Line(e,this._end)]},invalidate:function(){this._tangent=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()},getStartTangent:function(){return null===this._tangent&&(this._tangent=this._end.minus(this._start).normalized()),this._tangent},get startTangent(){return this.getStartTangent()},getEndTangent:function(){return this.getStartTangent()},get endTangent(){return this.getEndTangent()},getBounds:function(){return null===this._bounds&&(this._bounds=ne.NOTHING.copy().addPoint(this._start).addPoint(this._end)),this._bounds},get bounds(){return this.getBounds()},getBoundsWithTransform:function(t){const e=ne.NOTHING.copy();return e.addPoint(t.multiplyVector2(li.set(this._start))),e.addPoint(t.multiplyVector2(li.set(this._end))),e},getNondegenerateSegments:function(){return this._start.equals(this._end)?[]:[this]},getSVGPathFragment:function(){return this._svgPathFragment||(this._svgPathFragment="L "+ce.svgNumber(this._end.x)+" "+ce.svgNumber(this._end.y)),this._svgPathFragment},strokeLeft:function(t){const e=this.getEndTangent().perpendicular.negated().times(t/2);return[new ce.Line(this._start.plus(e),this._end.plus(e))]},strokeRight:function(t){const e=this.getStartTangent().perpendicular.times(t/2);return[new ce.Line(this._end.plus(e),this._start.plus(e))]},getInteriorExtremaTs:function(){return[]},intersection:function(t){const e=[],i=this._start,n=this._end.minus(i);if(0===n.magnitudeSquared)return e;const s=t.direction.y*n.x-t.direction.x*n.y;if(0===s)return e;const r=(t.direction.x*(i.y-t.position.y)-t.direction.y*(i.x-t.position.x))/s;if(r<0||r>=1)return e;const o=(n.x*(i.y-t.position.y)-n.y*(i.x-t.position.x))/s;if(o<1e-8)return e;const a=n.perpendicular,l=i.plus(n.times(r)),h=(a.dot(t.direction)>0?a.negated():a).normalized(),u=t.direction.perpendicular.dot(n)<0?1:-1;return e.push(new $e(o,l,h,u,r)),e},windingIntersection:function(t){const e=this.intersection(t);return e.length?e[0].wind:0},writeToContext:function(t){t.lineTo(this._end.x,this._end.y)},transformed:function(t){return new ce.Line(t.timesVector2(this._start),t.timesVector2(this._end))},explicitClosestToPoint:function(t){const e=this._end.minus(this._start);let i=t.minus(this._start).dot(e)/e.magnitudeSquared;i=oe.a.clamp(i,0,1);const n=this.positionAt(i);return[{segment:this,t:i,closestPoint:n,distanceSquared:t.distanceSquared(n)}]},getSignedAreaFragment:function(){return.5*(this._start.x*this._end.y-this._start.y*this._end.x)},reparameterized:function(t,e){return new ce.Line(this.positionAt(e),this.positionAt(t+e))},reversed:function(){return new ce.Line(this._end,this._start)},polarToCartesian:function(t){return this._start.x===this._end.x?[new ce.Line(te.a.createPolar(this._start.y,this._start.x),te.a.createPolar(this._end.y,this._end.x))]:this._start.y===this._end.y?[new ce.Arc(te.a.ZERO,this._start.y,this._start.x,this._end.x,this._start.x>this._end.x)]:this.toPiecewiseLinearSegments(t)},getArcLength:function(){return this.start.distance(this.end)},toPiecewiseLinearOrArcSegments:function(){return[this]},serialize:function(){return{type:"Line",startX:this._start.x,startY:this._start.y,endX:this._end.x,endY:this._end.y}}}),hi.deserialize=function(t){return new hi(new te.a(t.startX,t.startY),new te.a(t.endX,t.endY))},hi.getOverlaps=function(t,e,i=1e-6){const n=[],s=t._start.x,r=-1*t._start.x+t._end.x,o=t._start.y,a=-1*t._start.y+t._end.y,l=e._start.x,h=-1*e._start.x+e._end.x,u=e._start.y,c=-1*e._start.y+e._end.y,d=Math.abs(Math.max(t._start.x,t._end.x,e._start.x,e._end.x)-Math.min(t._start.x,t._end.x,e._start.x,e._end.x)),p=Math.abs(Math.max(t._start.y,t._end.y,e._start.y,e._end.y)-Math.min(t._start.y,t._end.y,e._start.y,e._end.y)),f=ai.polynomialGetOverlapLinear(s,r,l,h),m=ai.polynomialGetOverlapLinear(o,a,u,c);let g;if(g=d>p?null===f||!0===f?m:f:null===m||!0===m?f:m,null===g||!0===g)return n;const y=g.a,b=g.b,v=l+b*h-s,_=y*h-r,A=u+b*c-o,w=y*c-a;if(Math.abs(v)>i||Math.abs(_+v)>i||Math.abs(A)>i||Math.abs(w+A)>i)return n;const x=y+b;return b>1&&x>1||b<0&&x<0?n:[new Ze(y,b)]},hi.intersect=function(t,e){const i=oe.a.lineSegmentIntersection(t.start.x,t.start.y,t.end.x,t.end.y,e.start.x,e.start.y,e.end.x,e.end.y);if(null!==i){const n=t.explicitClosestToPoint(i)[0].t,s=e.explicitClosestToPoint(i)[0].t;return[new ei(i,n,s)]}return[]},hi.intersectOther=function(t,e){const i=t.end.minus(t.start),n=i.magnitude,s=new Ge(t.start,i.normalize()),r=e.intersection(s),o=[];for(let a=0;a<r.length;a++){const t=r[a],e=t.distance/n;e>1e-8&&e<1-1e-8&&o.push(new ei(t.point,e,t.t))}return o};var ui=hi;const ci=2*Math.PI;function di(t,e,i,n,s){ai.call(this),this._center=t,this._radius=e,this._startAngle=i,this._endAngle=n,this._anticlockwise=s,this.invalidate()}ce.register("Arc",di),Object(z.a)(ai,di,{setCenter:function(t){return this._center.equals(t)||(this._center=t,this.invalidate()),this},set center(t){this.setCenter(t)},getCenter:function(){return this._center},get center(){return this.getCenter()},setRadius:function(t){return this._radius!==t&&(this._radius=t,this.invalidate()),this},set radius(t){this.setRadius(t)},getRadius:function(){return this._radius},get radius(){return this.getRadius()},setStartAngle:function(t){return this._startAngle!==t&&(this._startAngle=t,this.invalidate()),this},set startAngle(t){this.setStartAngle(t)},getStartAngle:function(){return this._startAngle},get startAngle(){return this.getStartAngle()},setEndAngle:function(t){return this._endAngle!==t&&(this._endAngle=t,this.invalidate()),this},set endAngle(t){this.setEndAngle(t)},getEndAngle:function(){return this._endAngle},get endAngle(){return this.getEndAngle()},setAnticlockwise:function(t){return this._anticlockwise!==t&&(this._anticlockwise=t,this.invalidate()),this},set anticlockwise(t){this.setAnticlockwise(t)},getAnticlockwise:function(){return this._anticlockwise},get anticlockwise(){return this.getAnticlockwise()},positionAt:function(t){return this.positionAtAngle(this.angleAt(t))},tangentAt:function(t){return this.tangentAtAngle(this.angleAt(t))},curvatureAt:function(t){return(this._anticlockwise?-1:1)/this._radius},subdivided:function(t){if(0===t||1===t)return[this];const e=this.angleAt(0),i=this.angleAt(t),n=this.angleAt(1);return[new ce.Arc(this._center,this._radius,e,i,this._anticlockwise),new ce.Arc(this._center,this._radius,i,n,this._anticlockwise)]},invalidate:function(){this._start=null,this._end=null,this._startTangent=null,this._endTangent=null,this._actualEndAngle=null,this._isFullPerimeter=null,this._angleDifference=null,this._bounds=null,this._svgPathFragment=null,this._radius<0&&(this._radius=-this._radius,this._startAngle+=Math.PI,this._endAngle+=Math.PI),this.invalidationEmitter.emit()},getStart:function(){return null===this._start&&(this._start=this.positionAtAngle(this._startAngle)),this._start},get start(){return this.getStart()},getEnd:function(){return null===this._end&&(this._end=this.positionAtAngle(this._endAngle)),this._end},get end(){return this.getEnd()},getStartTangent:function(){return null===this._startTangent&&(this._startTangent=this.tangentAtAngle(this._startAngle)),this._startTangent},get startTangent(){return this.getStartTangent()},getEndTangent:function(){return null===this._endTangent&&(this._endTangent=this.tangentAtAngle(this._endAngle)),this._endTangent},get endTangent(){return this.getEndTangent()},getActualEndAngle:function(){return null===this._actualEndAngle&&(this._actualEndAngle=di.computeActualEndAngle(this._startAngle,this._endAngle,this._anticlockwise)),this._actualEndAngle},get actualEndAngle(){return this.getActualEndAngle()},getIsFullPerimeter:function(){return null===this._isFullPerimeter&&(this._isFullPerimeter=!this._anticlockwise&&this._endAngle-this._startAngle>=2*Math.PI||this._anticlockwise&&this._startAngle-this._endAngle>=2*Math.PI),this._isFullPerimeter},get isFullPerimeter(){return this.getIsFullPerimeter()},getAngleDifference:function(){return null===this._angleDifference&&(this._angleDifference=this._anticlockwise?this._startAngle-this._endAngle:this._endAngle-this._startAngle,this._angleDifference<0&&(this._angleDifference+=2*Math.PI)),this._angleDifference},get angleDifference(){return this.getAngleDifference()},getBounds:function(){return null===this._bounds&&(this._bounds=ne.NOTHING.copy().withPoint(this.getStart()).withPoint(this.getEnd()),this._startAngle!==this._endAngle&&(this.includeBoundsAtAngle(0),this.includeBoundsAtAngle(Math.PI/2),this.includeBoundsAtAngle(Math.PI),this.includeBoundsAtAngle(3*Math.PI/2))),this._bounds},get bounds(){return this.getBounds()},getNondegenerateSegments:function(){return this._radius<=0||this._startAngle===this._endAngle?[]:[this]},includeBoundsAtAngle:function(t){this.containsAngle(t)&&(this._bounds=this._bounds.withPoint(this._center.plus(te.a.createPolar(this._radius,t))))},mapAngle:function(t){return Math.abs(oe.a.moduloBetweenDown(t-this._startAngle,-Math.PI,Math.PI))<1e-8?this._startAngle:Math.abs(oe.a.moduloBetweenDown(t-this.getActualEndAngle(),-Math.PI,Math.PI))<1e-8?this.getActualEndAngle():this._startAngle>this.getActualEndAngle()?oe.a.moduloBetweenUp(t,this._startAngle-2*Math.PI,this._startAngle):oe.a.moduloBetweenDown(t,this._startAngle,this._startAngle+2*Math.PI)},tAtAngle:function(t){const e=(this.mapAngle(t)-this._startAngle)/(this.getActualEndAngle()-this._startAngle);return e},angleAt:function(t){return this._startAngle+(this.getActualEndAngle()-this._startAngle)*t},positionAtAngle:function(t){return this._center.plus(te.a.createPolar(this._radius,t))},tangentAtAngle:function(t){const e=te.a.createPolar(1,t);return this._anticlockwise?e.perpendicular:e.perpendicular.negated()},containsAngle:function(t){const e=this._anticlockwise?t-this._endAngle:t-this._startAngle;return oe.a.moduloBetweenDown(e,0,2*Math.PI)<=this.angleDifference},getSVGPathFragment:function(){if(!this._svgPathFragment){const t=.01,e=this._anticlockwise?"0":"1";let i;if(this.angleDifference<2*Math.PI-t)i=this.angleDifference<Math.PI?"0":"1",this._svgPathFragment="A "+ce.svgNumber(this._radius)+" "+ce.svgNumber(this._radius)+" 0 "+i+" "+e+" "+ce.svgNumber(this.end.x)+" "+ce.svgNumber(this.end.y);else{const t=(this._startAngle+this._endAngle)/2,n=this._center.plus(te.a.createPolar(this._radius,t));i="0";const s="A "+ce.svgNumber(this._radius)+" "+ce.svgNumber(this._radius)+" 0 "+i+" "+e+" "+ce.svgNumber(n.x)+" "+ce.svgNumber(n.y),r="A "+ce.svgNumber(this._radius)+" "+ce.svgNumber(this._radius)+" 0 "+i+" "+e+" "+ce.svgNumber(this.end.x)+" "+ce.svgNumber(this.end.y);this._svgPathFragment=s+" "+r}}return this._svgPathFragment},strokeLeft:function(t){return[new ce.Arc(this._center,this._radius+(this._anticlockwise?1:-1)*t/2,this._startAngle,this._endAngle,this._anticlockwise)]},strokeRight:function(t){return[new ce.Arc(this._center,this._radius+(this._anticlockwise?-1:1)*t/2,this._endAngle,this._startAngle,!this._anticlockwise)]},getInteriorExtremaTs:function(){const t=this,e=[];return _.each([0,Math.PI/2,Math.PI,3*Math.PI/2],(function(i){if(t.containsAngle(i)){const n=t.tAtAngle(i),s=1e-10;n>s&&n<1-s&&e.push(n)}})),e.sort()},intersection:function(t){const e=[],i=t.position.minus(this._center),n=t.direction.dot(i),s=4*n*n-4*(i.magnitudeSquared-this._radius*this._radius);if(s<0)return e;const r=t.direction.dot(this._center)-t.direction.dot(t.position),o=Math.sqrt(s)/2,a=r-o,l=r+o;if(l<0)return e;const h=t.pointAtDistance(l),u=h.minus(this._center).normalized(),c=u.angle;if(a<0)this.containsAngle(c)&&e.push(new $e(l,h,u.negated(),this._anticlockwise?-1:1,this.tAtAngle(c)));else{const i=t.pointAtDistance(a),n=i.minus(this._center).normalized(),s=n.angle;this.containsAngle(s)&&e.push(new $e(a,i,n,this._anticlockwise?1:-1,this.tAtAngle(s))),this.containsAngle(c)&&e.push(new $e(l,h,u.negated(),this._anticlockwise?-1:1,this.tAtAngle(c)))}return e},windingIntersection:function(t){let e=0;const i=this.intersection(t);return _.each(i,(function(t){e+=t.wind})),e},writeToContext:function(t){t.arc(this._center.x,this._center.y,this._radius,this._startAngle,this._endAngle,this._anticlockwise)},transformed:function(t){const e=t.timesVector2(te.a.createPolar(1,this._startAngle)).minus(t.timesVector2(te.a.ZERO)).angle;let i=t.timesVector2(te.a.createPolar(1,this._endAngle)).minus(t.timesVector2(te.a.ZERO)).angle;const n=t.getDeterminant()>=0?this._anticlockwise:!this._anticlockwise;Math.abs(this._endAngle-this._startAngle)===2*Math.PI&&(i=n?e-2*Math.PI:e+2*Math.PI);const s=t.getScaleVector();if(s.x!==s.y){const r=s.x*this._radius,o=s.y*this._radius;return new ce.EllipticalArc(t.timesVector2(this._center),r,o,0,e,i,n)}{const r=s.x*this._radius;return new ce.Arc(t.timesVector2(this._center),r,e,i,n)}},getSignedAreaFragment:function(){const t=this._startAngle,e=this.getActualEndAngle();return.5*this._radius*(this._radius*(e-t)+this._center.x*(Math.sin(e)-Math.sin(t))-this._center.y*(Math.cos(e)-Math.cos(t)))},reversed:function(){return new ce.Arc(this._center,this._radius,this._endAngle,this._startAngle,!this._anticlockwise)},getArcLength:function(){return this.getAngleDifference()*this._radius},toPiecewiseLinearOrArcSegments:function(){return[this]},serialize:function(){return{type:"Arc",centerX:this._center.x,centerY:this._center.y,radius:this._radius,startAngle:this._startAngle,endAngle:this._endAngle,anticlockwise:this._anticlockwise}}}),di.deserialize=function(t){return new di(new te.a(t.centerX,t.centerY),t.radius,t.startAngle,t.endAngle,t.anticlockwise)},di.computeActualEndAngle=function(t,e,i){return i?t>e?e:t<e?e-2*Math.PI:t:t<e?e:t>e?e+2*Math.PI:t},di.getPartialOverlap=function(t,e,i,n,s){const r=i<e,o=r?e:i,a=r?i:e,l=Math.min(t,o);return l<a+1e-8?[]:[Ze.createLinear(oe.a.clamp(oe.a.linear(0,t,0,1,a),0,1),oe.a.clamp(oe.a.linear(e,i,n,s,a),0,1),oe.a.clamp(oe.a.linear(0,t,0,1,l),0,1),oe.a.clamp(oe.a.linear(e,i,n,s,l),0,1))]},di.getAngularOverlaps=function(t,e,i,n){let s=e-t;const r=s<0?-1:1;s*=r;const o=oe.a.moduloBetweenDown(r*(i-t),0,ci),a=r*(n-i)+o;let l;return a<-1e-10?(l=-o/(a-o),di.getPartialOverlap(s,o,0,0,l).concat(di.getPartialOverlap(s,ci,a+ci,l,1))):a>ci+1e-10?(l=(ci-o)/(a-o),di.getPartialOverlap(s,o,ci,0,l).concat(di.getPartialOverlap(s,0,a-ci,l,1))):di.getPartialOverlap(s,o,a,0,1)},di.getOverlaps=function(t,e){return t._center.distance(e._center)>1e-8||Math.abs(t._radius-e._radius)>1e-8?[]:di.getAngularOverlaps(t._startAngle,t.getActualEndAngle(),e._startAngle,e.getActualEndAngle())},di.getCircleIntersectionPoint=function(t,e,i,n){const s=i.minus(t),r=s.magnitude;let o=[];if(r<1e-10||r>e+n+1e-10);else if(r>e+n-1e-10)o=[t.blend(i,e/r)];else{const a=.5*(r*r-n*n+e*e)/r,l=r*r-n*n+e*e,h=4*r*r*e*e-l*l,u=t.blend(i,a/r);if(h>=1e-10){const t=Math.sqrt(h)/r/2,e=s.perpendicular.setMagnitude(t);o=[u.plus(e),u.minus(e)]}else h>-1e-10&&(o=[u])}return o},di.intersect=function(t,e){const i=di.getCircleIntersectionPoint(t._center,t._radius,e._center,e._radius),n=[];for(let s=0;s<i.length;s++){const r=i[s],o=r.minus(t._center).angle,a=r.minus(e._center).angle;t.containsAngle(o)&&e.containsAngle(a)&&n.push(new ei(r,t.tAtAngle(o),e.tAtAngle(a)))}return n},di.createFromPoints=function(t,e,i){const n=oe.a.circleCenterFromPoints(t,e,i);if(null===n)return new ui(t,i);{const s=t.minus(n),r=e.minus(n),o=i.minus(n),a=s.angle,l=r.angle,h=o.angle,u=(s.magnitude+r.magnitude+o.magnitude)/3,c=new di(n,u,a,h,!1);return c.containsAngle(l)?c:new di(n,u,a,h,!0)}};var pi=di;const fi=oe.a.solveQuadraticRootsReal,mi=oe.a.arePointsCollinear;function gi(t){return t>=0&&t<=1}function yi(t,e,i){ai.call(this),this._start=t,this._control=e,this._end=i,this.invalidate()}ce.register("Quadratic",yi),Object(z.a)(ai,yi,{degree:2,setStart:function(t){return this._start.equals(t)||(this._start=t,this.invalidate()),this},set start(t){this.setStart(t)},getStart:function(){return this._start},get start(){return this.getStart()},setControl:function(t){return this._control.equals(t)||(this._control=t,this.invalidate()),this},set control(t){this.setControl(t)},getControl:function(){return this._control},get control(){return this.getControl()},setEnd:function(t){return this._end.equals(t)||(this._end=t,this.invalidate()),this},set end(t){this.setEnd(t)},getEnd:function(){return this._end},get end(){return this.getEnd()},positionAt:function(t){const e=1-t;return this._start.times(e*e).plus(this._control.times(2*e*t)).plus(this._end.times(t*t))},tangentAt:function(t){return this._control.minus(this._start).times(2*(1-t)).plus(this._end.minus(this._control).times(2*t))},curvatureAt:function(t){if(Math.abs(t-.5)>.5-1e-7){const e=t<.5,i=e?this._start:this._end,n=this._control,s=e?this._end:this._start,r=n.minus(i),o=r.magnitude;return(e?-1:1)*r.perpendicular.normalized().dot(s.minus(n))*(this.degree-1)/(this.degree*o*o)}return this.subdivided(t,!0)[0].curvatureAt(1)},subdivided:function(t){if(0===t||1===t)return[this];const e=this._start.blend(this._control,t),i=this._control.blend(this._end,t),n=e.blend(i,t);return[new ce.Quadratic(this._start,e,n),new ce.Quadratic(n,i,this._end)]},invalidate:function(){this._startTangent=null,this._endTangent=null,this._tCriticalX=null,this._tCriticalY=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()},getStartTangent:function(){if(null===this._startTangent){const t=this._start.equals(this._control);this._startTangent=t?this._end.minus(this._start).normalized():this._control.minus(this._start).normalized()}return this._startTangent},get startTangent(){return this.getStartTangent()},getEndTangent:function(){if(null===this._endTangent){const t=this._end.equals(this._control);this._endTangent=t?this._end.minus(this._start).normalized():this._end.minus(this._control).normalized()}return this._endTangent},get endTangent(){return this.getEndTangent()},getTCriticalX:function(){return null===this._tCriticalX&&(this._tCriticalX=yi.extremaT(this._start.x,this._control.x,this._end.x)),this._tCriticalX},get tCriticalX(){return this.getTCriticalX()},getTCriticalY:function(){return null===this._tCriticalY&&(this._tCriticalY=yi.extremaT(this._start.y,this._control.y,this._end.y)),this._tCriticalY},get tCriticalY(){return this.getTCriticalY()},getNondegenerateSegments:function(){const t=this._start,e=this._control,i=this._end,n=t.equals(i),s=t.equals(e),r=t.equals(e);if(n&&s)return[];if(n){const e=this.positionAt(.5);return[new ce.Line(t,e),new ce.Line(e,i)]}if(mi(t,e,i)){if(s||r)return[new ce.Line(t,i)];const n=i.minus(t),o=e.minus(t).dot(n.normalized)/n.magnitude,a=yi.extremaT(0,o,1);if(!isNaN(a)&&a>0&&a<1){const e=this.positionAt(a);return _.flatten([new ce.Line(t,e).getNondegenerateSegments(),new ce.Line(e,i).getNondegenerateSegments()])}return[new ce.Line(t,i)]}return[this]},getBounds:function(){if(null===this._bounds){this._bounds=new ne(Math.min(this._start.x,this._end.x),Math.min(this._start.y,this._end.y),Math.max(this._start.x,this._end.x),Math.max(this._start.y,this._end.y));const t=this.getTCriticalX(),e=this.getTCriticalY();!isNaN(t)&&t>0&&t<1&&(this._bounds=this._bounds.withPoint(this.positionAt(t))),!isNaN(e)&&e>0&&e<1&&(this._bounds=this._bounds.withPoint(this.positionAt(e)))}return this._bounds},get bounds(){return this.getBounds()},offsetTo:function(t,e){let i=[this];for(let s=0;s<5;s++)i=_.flatten(_.map(i,(function(t){return t.subdivided(.5,!0)})));let n=_.map(i,(function(e){return e.approximateOffset(t)}));return e&&(n.reverse(),n=_.map(n,(function(t){return t.reversed(!0)}))),n},degreeElevated:function(){return new ce.Cubic(this._start,this._start.plus(this._control.timesScalar(2)).dividedScalar(3),this._end.plus(this._control.timesScalar(2)).dividedScalar(3),this._end)},approximateOffset:function(t){return new ce.Quadratic(this._start.plus((this._start.equals(this._control)?this._end.minus(this._start):this._control.minus(this._start)).perpendicular.normalized().times(t)),this._control.plus(this._end.minus(this._start).perpendicular.normalized().times(t)),this._end.plus((this._end.equals(this._control)?this._end.minus(this._start):this._end.minus(this._control)).perpendicular.normalized().times(t)))},getSVGPathFragment:function(){return this._svgPathFragment||(this._svgPathFragment="Q "+ce.svgNumber(this._control.x)+" "+ce.svgNumber(this._control.y)+" "+ce.svgNumber(this._end.x)+" "+ce.svgNumber(this._end.y)),this._svgPathFragment},strokeLeft:function(t){return this.offsetTo(-t/2,!1)},strokeRight:function(t){return this.offsetTo(t/2,!0)},getInteriorExtremaTs:function(){const t=[],e=this.getTCriticalX(),i=this.getTCriticalY();return!isNaN(e)&&e>1e-10&&e<1-1e-10&&t.push(this.tCriticalX),!isNaN(i)&&i>1e-10&&i<1-1e-10&&t.push(this.tCriticalY),t.sort()},intersection:function(t){const e=this,i=[],n=Ye.rotation2(-t.direction.angle).timesMatrix(Ye.translation(-t.position.x,-t.position.y)),s=n.timesVector2(this._start),r=n.timesVector2(this._control),o=n.timesVector2(this._end),a=s.y-2*r.y+o.y,l=-2*s.y+2*r.y,h=s.y,u=fi(a,l,h);return _.each(u,(function(n){if(n>=0&&n<=1){const s=e.positionAt(n),r=e.tangentAt(n).normalized(),o=r.perpendicular,a=s.minus(t.position);if(a.dot(t.direction)>0){const e=o.dot(t.direction)>0?o.negated():o,l=t.direction.perpendicular.dot(r)<0?1:-1;i.push(new $e(a.magnitude,s,e,l,n))}}})),i},windingIntersection:function(t){let e=0;const i=this.intersection(t);return _.each(i,(function(t){e+=t.wind})),e},writeToContext:function(t){t.quadraticCurveTo(this._control.x,this._control.y,this._end.x,this._end.y)},transformed:function(t){return new ce.Quadratic(t.timesVector2(this._start),t.timesVector2(this._control),t.timesVector2(this._end))},getSignedAreaFragment:function(){return 1/6*(this._start.x*(2*this._control.y+this._end.y)+this._control.x*(-2*this._start.y+2*this._end.y)+this._end.x*(-this._start.y-2*this._control.y))},reparameterized:function(t,e){const i=this._start.plus(this._end.plus(this._control.timesScalar(-2))),n=this._control.minus(this._start).timesScalar(2),s=this._start,r=i.timesScalar(t*t),o=i.timesScalar(t*e).timesScalar(2).plus(n.timesScalar(t)),a=i.timesScalar(e*e).plus(n.timesScalar(e)).plus(s);return new ce.Quadratic(a,o.timesScalar(.5).plus(a),r.plus(o).plus(a))},reversed:function(){return new ce.Quadratic(this._end,this._control,this._start)},serialize:function(){return{type:"Quadratic",startX:this._start.x,startY:this._start.y,controlX:this._control.x,controlY:this._control.y,endX:this._end.x,endY:this._end.y}}}),yi.deserialize=function(t){return new yi(new te.a(t.startX,t.startY),new te.a(t.controlX,t.controlY),new te.a(t.endX,t.endY))},yi.extremaT=function(t,e,i){const n=2*(i-2*e+t);return 0!==n?-2*(e-t)/n:NaN},yi.getOverlaps=function(t,e,i=1e-6){const n=[],s=t._start.x,r=-2*t._start.x+2*t._control.x,o=t._start.x-2*t._control.x+t._end.x,a=t._start.y,l=-2*t._start.y+2*t._control.y,h=t._start.y-2*t._control.y+t._end.y,u=e._start.x,c=-2*e._start.x+2*e._control.x,d=e._start.x-2*e._control.x+e._end.x,p=e._start.y,f=-2*e._start.y+2*e._control.y,m=e._start.y-2*e._control.y+e._end.y,g=Math.abs(Math.max(t._start.x,t._control.x,t._end.x,e._start.x,e._control.x,e._end.x)-Math.min(t._start.x,t._control.x,t._end.x,e._start.x,e._control.x,e._end.x)),y=Math.abs(Math.max(t._start.y,t._control.y,t._end.y,e._start.y,e._control.y,e._end.y)-Math.min(t._start.y,t._control.y,t._end.y,e._start.y,e._control.y,e._end.y)),b=ai.polynomialGetOverlapQuadratic(s,r,o,u,c,d),v=ai.polynomialGetOverlapQuadratic(a,l,h,p,f,m);let A;if(A=g>y?null===b||!0===b?v:b:null===v||!0===v?b:v,null===A||!0===A)return n;const w=A.a,x=A.b,S=w*w,T=x*x,D=2*w*x,E=u+x*c+T*d-s,C=w*c+D*d-r,P=S*d-o,k=p+x*f+T*m-a,I=w*f+D*m-l,L=S*m-h,O=oe.a.solveLinearRootsReal(2*P,C),R=oe.a.solveLinearRootsReal(2*L,I),N=_.uniq([0,1].concat(O?O.filter(gi):[])),M=_.uniq([0,1].concat(R?R.filter(gi):[]));for(let _=0;_<N.length;_++){const t=N[_];if(Math.abs((P*t+C)*t+E)>i)return n}for(let _=0;_<M.length;_++){const t=M[_];if(Math.abs((L*t+I)*t+k)>i)return n}const B=w+x;return x>1&&B>1||x<0&&B<0?n:[new Ze(w,x)]};var bi=yi;const vi=oe.a.solveQuadraticRootsReal,_i=oe.a.solveCubicRootsReal,Ai=oe.a.arePointsCollinear,wi=new te.a(0,0),xi=new te.a(0,0),Si=new te.a(0,0);function Ti(t){return t>=0&&t<=1}function Di(t,e,i,n){ai.call(this),this._start=t,this._control1=e,this._control2=i,this._end=n,this.invalidate()}ce.register("Cubic",Di),Object(z.a)(ai,Di,{degree:3,setStart:function(t){return this._start.equals(t)||(this._start=t,this.invalidate()),this},set start(t){this.setStart(t)},getStart:function(){return this._start},get start(){return this.getStart()},setControl1:function(t){return this._control1.equals(t)||(this._control1=t,this.invalidate()),this},set control1(t){this.setControl1(t)},getControl1:function(){return this._control1},get control1(){return this.getControl1()},setControl2:function(t){return this._control2.equals(t)||(this._control2=t,this.invalidate()),this},set control2(t){this.setControl2(t)},getControl2:function(){return this._control2},get control2(){return this.getControl2()},setEnd:function(t){return this._end.equals(t)||(this._end=t,this.invalidate()),this},set end(t){this.setEnd(t)},getEnd:function(){return this._end},get end(){return this.getEnd()},positionAt:function(t){const e=1-t,i=e*e*e,n=3*e*e*t,s=3*e*t*t,r=t*t*t;return new te.a(this._start.x*i+this._control1.x*n+this._control2.x*s+this._end.x*r,this._start.y*i+this._control1.y*n+this._control2.y*s+this._end.y*r)},tangentAt:function(t){const e=1-t;return new te.a(0,0).set(this._start).multiplyScalar(-3*e*e).add(wi.set(this._control1).multiplyScalar(3*e*e-6*e*t)).add(wi.set(this._control2).multiplyScalar(6*e*t-3*t*t)).add(wi.set(this._end).multiplyScalar(3*t*t))},curvatureAt:function(t){if(Math.abs(t-.5)>.5-1e-7){const e=t<.5,i=e?this._start:this._end,n=e?this._control1:this._control2,s=e?this._control2:this._control1,r=n.minus(i),o=r.magnitude;return(e?-1:1)*r.perpendicular.normalized().dot(s.minus(n))*(this.degree-1)/(this.degree*o*o)}return this.subdivided(t)[0].curvatureAt(1)},subdivided:function(t){if(0===t||1===t)return[this];const e=this._start.blend(this._control1,t),i=this._control2.blend(this._end,t),n=this._control1.blend(this._control2,t),s=e.blend(n,t),r=n.blend(i,t),o=s.blend(r,t);return[new ce.Cubic(this._start,e,s,o),new ce.Cubic(o,r,i,this._end)]},invalidate:function(){this._startTangent=null,this._endTangent=null,this._r=null,this._s=null,this._tCusp=null,this._tDeterminant=null,this._tInflection1=null,this._tInflection2=null,this._quadratics=null,this._xExtremaT=null,this._yExtremaT=null,this._bounds=null,this._svgPathFragment=null,this.invalidationEmitter.emit()},getStartTangent:function(){return null===this._startTangent&&(this._startTangent=this.tangentAt(0).normalized()),this._startTangent},get startTangent(){return this.getStartTangent()},getEndTangent:function(){return null===this._endTangent&&(this._endTangent=this.tangentAt(1).normalized()),this._endTangent},get endTangent(){return this.getEndTangent()},getR:function(){return null===this._r&&(this._r=this._control1.minus(this._start).normalized()),this._r},get r(){return this.getR()},getS:function(){return null===this._s&&(this._s=this.getR().perpendicular),this._s},get s(){return this.getS()},getTCusp:function(){return null===this._tCusp&&this.computeCuspInfo(),this._tCusp},get tCusp(){return this.getTCusp()},getTDeterminant:function(){return null===this._tDeterminant&&this.computeCuspInfo(),this._tDeterminant},get tDeterminant(){return this.getTDeterminant()},getTInflection1:function(){return null===this._tInflection1&&this.computeCuspInfo(),this._tInflection1},get tInflection1(){return this.getTInflection1()},getTInflection2:function(){return null===this._tInflection2&&this.computeCuspInfo(),this._tInflection2},get tInflection2(){return this.getTInflection2()},getQuadratics:function(){return null===this._quadratics&&this.computeCuspSegments(),this._quadratics},getXExtremaT:function(){return null===this._xExtremaT&&(this._xExtremaT=Di.extremaT(this._start.x,this._control1.x,this._control2.x,this._end.x)),this._xExtremaT},get xExtremaT(){return this.getXExtremaT()},getYExtremaT:function(){return null===this._yExtremaT&&(this._yExtremaT=Di.extremaT(this._start.y,this._control1.y,this._control2.y,this._end.y)),this._yExtremaT},get yExtremaT(){return this.getYExtremaT()},getBounds:function(){if(null===this._bounds){this._bounds=ne.NOTHING,this._bounds=this._bounds.withPoint(this._start),this._bounds=this._bounds.withPoint(this._end);const t=this;_.each(this.getXExtremaT(),(function(e){e>=0&&e<=1&&(t._bounds=t._bounds.withPoint(t.positionAt(e)))})),_.each(this.getYExtremaT(),(function(e){e>=0&&e<=1&&(t._bounds=t._bounds.withPoint(t.positionAt(e)))})),this.hasCusp()&&(this._bounds=this._bounds.withPoint(this.positionAt(this.getTCusp())))}return this._bounds},get bounds(){return this.getBounds()},computeCuspInfo:function(){const t=this._start.times(-1).plus(this._control1.times(3)).plus(this._control2.times(-3)).plus(this._end),e=this._start.times(3).plus(this._control1.times(-6)).plus(this._control2.times(3)),i=this._start.times(-3).plus(this._control1.times(3)),n=t.perpendicular,s=e.perpendicular,r=n.dot(e);if(this._tCusp=n.dot(i)/r*-.5,this._tDeterminant=this._tCusp*this._tCusp-1/3*(s.dot(i)/r),this._tDeterminant>=0){const t=Math.sqrt(this._tDeterminant);this._tInflection1=this._tCusp-t,this._tInflection2=this._tCusp+t}else this._tInflection1=NaN,this._tInflection2=NaN},computeCuspSegments:function(){if(this.hasCusp()){this._quadratics=[];const t=this.getTCusp();if(0===t)this._quadratics.push(new bi(this.start,this.control2,this.end,!1));else if(1===t)this._quadratics.push(new bi(this.start,this.control1,this.end,!1));else{const e=this.subdivided(t);this._quadratics.push(new bi(e[0].start,e[0].control1,e[0].end,!1)),this._quadratics.push(new bi(e[1].start,e[1].control2,e[1].end,!1))}}else this._quadratics=null},getNondegenerateSegments:function(){const t=this,e=this._start,i=this._control1,n=this._control2,s=this._end,r=this.degreeReduced(1e-9);if(e.equals(s)&&e.equals(i)&&e.equals(n))return[];if(this.hasCusp())return _.flatten(this.getQuadratics().map((function(t){return t.getNondegenerateSegments()})));if(r)return r.getNondegenerateSegments();if(Ai(e,i,s)&&Ai(e,n,s)){const i=this.getXExtremaT().concat(this.getYExtremaT()).sort().map((function(e){return t.positionAt(e)})),n=[];let r=e;i.length&&(n.push(new ce.Line(e,i[0])),r=i[0]);for(let t=1;t<i.length;t++)n.push(new ce.Line(i[t-1],i[t])),r=i[t];return n.push(new ce.Line(r,s)),_.flatten(n.map((function(t){return t.getNondegenerateSegments()})),!0)}return[this]},hasCusp:function(){const t=this.getTCusp();return t>=0&&t<=1&&this.tangentAt(t).magnitude<1e-7},toRS:function(t){const e=t.minus(this._start);return new te.a(e.dot(this.getR()),e.dot(this.getS()))},offsetTo:function(t,e){const i=[],n=[];for(let s=0;s<32;s++){let r=s/31;e&&(r=1-r),i.push(this.positionAt(r).plus(this.tangentAt(r).perpendicular.normalized().times(t))),s>0&&n.push(new ce.Line(i[s-1],i[s]))}return n},getSVGPathFragment:function(){return this._svgPathFragment||(this._svgPathFragment="C "+ce.svgNumber(this._control1.x)+" "+ce.svgNumber(this._control1.y)+" "+ce.svgNumber(this._control2.x)+" "+ce.svgNumber(this._control2.y)+" "+ce.svgNumber(this._end.x)+" "+ce.svgNumber(this._end.y)),this._svgPathFragment},strokeLeft:function(t){return this.offsetTo(-t/2,!1)},strokeRight:function(t){return this.offsetTo(t/2,!0)},getInteriorExtremaTs:function(){const t=this.getXExtremaT().concat(this.getYExtremaT()),e=[];return _.each(t,(function(t){t>1e-10&&t<1-1e-10&&_.every(e,(function(e){return Math.abs(t-e)>1e-10}))&&e.push(t)})),e.sort()},intersection:function(t){const e=this,i=[],n=Ye.rotation2(-t.direction.angle).timesMatrix(Ye.translation(-t.position.x,-t.position.y)),s=n.timesVector2(this._start),r=n.timesVector2(this._control1),o=n.timesVector2(this._control2),a=n.timesVector2(this._end),l=-s.y+3*r.y-3*o.y+a.y,h=3*s.y-6*r.y+3*o.y,u=-3*s.y+3*r.y,c=s.y,d=_i(l,h,u,c);return _.each(d,(function(n){if(n>=0&&n<=1){const s=e.positionAt(n),r=e.tangentAt(n).normalized(),o=r.perpendicular,a=s.minus(t.position);if(a.dot(t.direction)>0){const e=o.dot(t.direction)>0?o.negated():o,l=t.direction.perpendicular.dot(r)<0?1:-1;i.push(new $e(a.magnitude,s,e,l,n))}}})),i},windingIntersection:function(t){let e=0;const i=this.intersection(t);return _.each(i,(function(t){e+=t.wind})),e},writeToContext:function(t){t.bezierCurveTo(this._control1.x,this._control1.y,this._control2.x,this._control2.y,this._end.x,this._end.y)},transformed:function(t){return new ce.Cubic(t.timesVector2(this._start),t.timesVector2(this._control1),t.timesVector2(this._control2),t.timesVector2(this._end))},degreeReduced:function(t){t=t||0;const e=wi.set(this._control1).multiplyScalar(3).subtract(this._start).divideScalar(2),i=xi.set(this._control2).multiplyScalar(3).subtract(this._end).divideScalar(2);return Si.set(e).subtract(i).magnitude<=t?new bi(this._start,e.average(i),this._end):null},getSignedAreaFragment:function(){return.05*(this._start.x*(6*this._control1.y+3*this._control2.y+this._end.y)+this._control1.x*(-6*this._start.y+3*this._control2.y+3*this._end.y)+this._control2.x*(-3*this._start.y-3*this._control1.y+6*this._end.y)+this._end.x*(-this._start.y-3*this._control1.y-6*this._control2.y))},reversed:function(){return new ce.Cubic(this._end,this._control2,this._control1,this._start)},getSelfIntersection:function(){const t=this.getInteriorExtremaTs(),e=[0].concat(t).concat([1]),i=this.subdivisions(t);if(i.length<3)return null;for(let n=0;n<i.length;n++){const t=i[n];for(let s=n+1;s<i.length;s++){const r=i[s],o=ni.intersect(t,r);if(o.length){const t=o[0];if(t.aT>1e-7&&t.aT<1-1e-7&&t.bT>1e-7&&t.bT<1-1e-7){const i=e[n]+t.aT*(e[n+1]-e[n]),r=e[s]+t.bT*(e[s+1]-e[s]);return new ei(t.point,i,r)}}}}return null},serialize:function(){return{type:"Cubic",startX:this._start.x,startY:this._start.y,control1X:this._control1.x,control1Y:this._control1.y,control2X:this._control2.x,control2Y:this._control2.y,endX:this._end.x,endY:this._end.y}}}),Di.deserialize=function(t){return new Di(new te.a(t.startX,t.startY),new te.a(t.control1X,t.control1Y),new te.a(t.control2X,t.control2Y),new te.a(t.endX,t.endY))},Di.extremaT=function(t,e,i,n){if(t===e&&t===i&&t===n)return[];const s=-3*t+9*e-9*i+3*n,r=6*t-12*e+6*i,o=-3*t+3*e;return _.filter(vi(s,r,o),Ti)},Di.getOverlaps=function(t,e,i=1e-6){const n=[],s=t._start.x,r=-3*t._start.x+3*t._control1.x,o=3*t._start.x-6*t._control1.x+3*t._control2.x,a=-1*t._start.x+3*t._control1.x-3*t._control2.x+t._end.x,l=t._start.y,h=-3*t._start.y+3*t._control1.y,u=3*t._start.y-6*t._control1.y+3*t._control2.y,c=-1*t._start.y+3*t._control1.y-3*t._control2.y+t._end.y,d=e._start.x,p=-3*e._start.x+3*e._control1.x,f=3*e._start.x-6*e._control1.x+3*e._control2.x,m=-1*e._start.x+3*e._control1.x-3*e._control2.x+e._end.x,g=e._start.y,y=-3*e._start.y+3*e._control1.y,b=3*e._start.y-6*e._control1.y+3*e._control2.y,v=-1*e._start.y+3*e._control1.y-3*e._control2.y+e._end.y,A=Math.abs(Math.max(t._start.x,t._control1.x,t._control2.x,t._end.x,t._start.x,t._control1.x,t._control2.x,t._end.x)-Math.min(t._start.x,t._control1.x,t._control2.x,t._end.x,t._start.x,t._control1.x,t._control2.x,t._end.x)),w=Math.abs(Math.max(t._start.y,t._control1.y,t._control2.y,t._end.y,t._start.y,t._control1.y,t._control2.y,t._end.y)-Math.min(t._start.y,t._control1.y,t._control2.y,t._end.y,t._start.y,t._control1.y,t._control2.y,t._end.y)),x=ai.polynomialGetOverlapCubic(s,r,o,a,d,p,f,m),S=ai.polynomialGetOverlapCubic(l,h,u,c,g,y,b,v);let T;if(T=A>w?null===x||!0===x?S:x:null===S||!0===S?x:S,null===T||!0===T)return n;const D=T.a,E=T.b,C=D*D,P=D*D*D,k=E*E,I=E*E*E,L=2*D*E,O=3*D*k,R=3*C*E,N=d+E*p+k*f+I*m-s,M=D*p+L*f+O*m-r,B=C*f+R*m-o,F=P*m-a,V=g+E*y+k*b+I*v-l,q=D*y+L*b+O*v-h,H=C*b+R*v-u,Y=P*v-c,j=oe.a.solveQuadraticRootsReal(3*F,2*B,M),G=oe.a.solveQuadraticRootsReal(3*Y,2*H,q),z=_.uniq([0,1].concat(null!==j?j.filter(Ti):[])),W=_.uniq([0,1].concat(null!==G?G.filter(Ti):[]));for(let _=0;_<z.length;_++){const t=z[_];if(Math.abs(((F*t+B)*t+M)*t+N)>i)return n}for(let _=0;_<W.length;_++){const t=W[_];if(Math.abs(((Y*t+H)*t+q)*t+V)>i)return n}const U=D+E;return E>1&&U>1||E<0&&U<0?n:[new Ze(D,E)]};var Ei=Di;const Ci=oe.a.toDegrees;function Pi(t,e,i,n,s,r,o){ai.call(this),this._center=t,this._radiusX=e,this._radiusY=i,this._rotation=n,this._startAngle=s,this._endAngle=r,this._anticlockwise=o,this.invalidate()}ce.register("EllipticalArc",Pi),Object(z.a)(ai,Pi,{setCenter:function(t){return this._center.equals(t)||(this._center=t,this.invalidate()),this},set center(t){this.setCenter(t)},getCenter:function(){return this._center},get center(){return this.getCenter()},setRadiusX:function(t){return this._radiusX!==t&&(this._radiusX=t,this.invalidate()),this},set radiusX(t){this.setRadiusX(t)},getRadiusX:function(){return this._radiusX},get radiusX(){return this.getRadiusX()},setRadiusY:function(t){return this._radiusY!==t&&(this._radiusY=t,this.invalidate()),this},set radiusY(t){this.setRadiusY(t)},getRadiusY:function(){return this._radiusY},get radiusY(){return this.getRadiusY()},setRotation:function(t){return this._rotation!==t&&(this._rotation=t,this.invalidate()),this},set rotation(t){this.setRotation(t)},getRotation:function(){return this._rotation},get rotation(){return this.getRotation()},setStartAngle:function(t){return this._startAngle!==t&&(this._startAngle=t,this.invalidate()),this},set startAngle(t){this.setStartAngle(t)},getStartAngle:function(){return this._startAngle},get startAngle(){return this.getStartAngle()},setEndAngle:function(t){return this._endAngle!==t&&(this._endAngle=t,this.invalidate()),this},set endAngle(t){this.setEndAngle(t)},getEndAngle:function(){return this._endAngle},get endAngle(){return this.getEndAngle()},setAnticlockwise:function(t){return this._anticlockwise!==t&&(this._anticlockwise=t,this.invalidate()),this},set anticlockwise(t){this.setAnticlockwise(t)},getAnticlockwise:function(){return this._anticlockwise},get anticlockwise(){return this.getAnticlockwise()},positionAt:function(t){return this.positionAtAngle(this.angleAt(t))},tangentAt:function(t){return this.tangentAtAngle(this.angleAt(t))},curvatureAt:function(t){const e=this.angleAt(t),i=this._radiusX*Math.sin(e),n=this._radiusY*Math.cos(e),s=Math.pow(n*n+i*i,1.5);return(this._anticlockwise?-1:1)*this._radiusX*this._radiusY/s},subdivided:function(t){if(0===t||1===t)return[this];const e=this.angleAt(0),i=this.angleAt(t),n=this.angleAt(1);return[new ce.EllipticalArc(this._center,this._radiusX,this._radiusY,this._rotation,e,i,this._anticlockwise),new ce.EllipticalArc(this._center,this._radiusX,this._radiusY,this._rotation,i,n,this._anticlockwise)]},invalidate:function(){if(this._unitTransform=null,this._start=null,this._end=null,this._startTangent=null,this._endTangent=null,this._actualEndAngle=null,this._isFullPerimeter=null,this._angleDifference=null,this._unitArcSegment=null,this._bounds=null,this._svgPathFragment=null,this._radiusX<0&&(this._radiusX=-this._radiusX,this._startAngle=Math.PI-this._startAngle,this._endAngle=Math.PI-this._endAngle,this._anticlockwise=!this._anticlockwise),this._radiusY<0&&(this._radiusY=-this._radiusY,this._startAngle=-this._startAngle,this._endAngle=-this._endAngle,this._anticlockwise=!this._anticlockwise),this._radiusX<this._radiusY){this._rotation+=Math.PI/2,this._startAngle-=Math.PI/2,this._endAngle-=Math.PI/2;const t=this._radiusX;this._radiusX=this._radiusY,this._radiusY=t}if(this._radiusX<this._radiusY)throw new Error("Not verified to work if radiusX < radiusY");this.invalidationEmitter.emit()},getUnitTransform:function(){return null===this._unitTransform&&(this._unitTransform=Pi.computeUnitTransform(this._center,this._radiusX,this._radiusY,this._rotation)),this._unitTransform},get unitTransform(){return this.getUnitTransform()},getStart:function(){return null===this._start&&(this._start=this.positionAtAngle(this._startAngle)),this._start},get start(){return this.getStart()},getEnd:function(){return null===this._end&&(this._end=this.positionAtAngle(this._endAngle)),this._end},get end(){return this.getEnd()},getStartTangent:function(){return null===this._startTangent&&(this._startTangent=this.tangentAtAngle(this._startAngle)),this._startTangent},get startTangent(){return this.getStartTangent()},getEndTangent:function(){return null===this._endTangent&&(this._endTangent=this.tangentAtAngle(this._endAngle)),this._endTangent},get endTangent(){return this.getEndTangent()},getActualEndAngle:function(){return null===this._actualEndAngle&&(this._actualEndAngle=pi.computeActualEndAngle(this._startAngle,this._endAngle,this._anticlockwise)),this._actualEndAngle},get actualEndAngle(){return this.getActualEndAngle()},getIsFullPerimeter:function(){return null===this._isFullPerimeter&&(this._isFullPerimeter=!this._anticlockwise&&this._endAngle-this._startAngle>=2*Math.PI||this._anticlockwise&&this._startAngle-this._endAngle>=2*Math.PI),this._isFullPerimeter},get isFullPerimeter(){return this.getIsFullPerimeter()},getAngleDifference:function(){return null===this._angleDifference&&(this._angleDifference=this._anticlockwise?this._startAngle-this._endAngle:this._endAngle-this._startAngle,this._angleDifference<0&&(this._angleDifference+=2*Math.PI)),this._angleDifference},get angleDifference(){return this.getAngleDifference()},getUnitArcSegment:function(){return null===this._unitArcSegment&&(this._unitArcSegment=new ce.Arc(te.a.ZERO,1,this._startAngle,this._endAngle,this._anticlockwise)),this._unitArcSegment},get unitArcSegment(){return this.getUnitArcSegment()},getBounds:function(){if(null===this._bounds&&(this._bounds=ne.NOTHING.withPoint(this.getStart()).withPoint(this.getEnd()),this._startAngle!==this._endAngle)){const t=Math.atan(-this._radiusY/this._radiusX*Math.tan(this._rotation)),e=Math.atan(this._radiusY/this._radiusX/Math.tan(this._rotation));this.possibleExtremaAngles=[t,t+Math.PI,e,e+Math.PI],_.each(this.possibleExtremaAngles,this.includeBoundsAtAngle.bind(this))}return this._bounds},get bounds(){return this.getBounds()},getNondegenerateSegments:function(){if(this._radiusX<=0||this._radiusY<=0||this._startAngle===this._endAngle)return[];if(this._radiusX===this._radiusY){const t=this._startAngle-this._rotation;let e=this._endAngle-this._rotation;return Math.abs(this._endAngle-this._startAngle)===2*Math.PI&&(e=this._anticlockwise?t-2*Math.PI:t+2*Math.PI),[new ce.Arc(this._center,this._radiusX,t,e,this._anticlockwise)]}return[this]},includeBoundsAtAngle:function(t){this.unitArcSegment.containsAngle(t)&&(this._bounds=this._bounds.withPoint(this.positionAtAngle(t)))},mapAngle:function(t){return Math.abs(oe.a.moduloBetweenDown(t-this._startAngle,-Math.PI,Math.PI))<1e-8?this._startAngle:Math.abs(oe.a.moduloBetweenDown(t-this.getActualEndAngle(),-Math.PI,Math.PI))<1e-8?this.getActualEndAngle():this._startAngle>this.getActualEndAngle()?oe.a.moduloBetweenUp(t,this._startAngle-2*Math.PI,this._startAngle):oe.a.moduloBetweenDown(t,this._startAngle,this._startAngle+2*Math.PI)},tAtAngle:function(t){return(this.mapAngle(t)-this._startAngle)/(this.getActualEndAngle()-this._startAngle)},angleAt:function(t){return this._startAngle+(this.getActualEndAngle()-this._startAngle)*t},positionAtAngle:function(t){return this.getUnitTransform().transformPosition2(te.a.createPolar(1,t))},tangentAtAngle:function(t){const e=this.getUnitTransform().transformNormal2(te.a.createPolar(1,t));return this._anticlockwise?e.perpendicular:e.perpendicular.negated()},offsetTo:function(t,e){const i=[],n=[];for(let s=0;s<32;s++){let r=s/31;e&&(r=1-r);const o=this.angleAt(r);i.push(this.positionAtAngle(o).plus(this.tangentAtAngle(o).perpendicular.normalized().times(t))),s>0&&n.push(new ce.Line(i[s-1],i[s]))}return n},getSVGPathFragment:function(){if(!this._svgPathFragment){const t=.01,e=this._anticlockwise?"0":"1";let i;const n=Ci(this._rotation);if(this.getAngleDifference()<2*Math.PI-t)i=this.getAngleDifference()<Math.PI?"0":"1",this._svgPathFragment="A "+ce.svgNumber(this._radiusX)+" "+ce.svgNumber(this._radiusY)+" "+n+" "+i+" "+e+" "+ce.svgNumber(this.getEnd().x)+" "+ce.svgNumber(this.getEnd().y);else{const t=(this._startAngle+this._endAngle)/2,s=this.positionAtAngle(t);i="0";const r="A "+ce.svgNumber(this._radiusX)+" "+ce.svgNumber(this._radiusY)+" "+n+" "+i+" "+e+" "+ce.svgNumber(s.x)+" "+ce.svgNumber(s.y),o="A "+ce.svgNumber(this._radiusX)+" "+ce.svgNumber(this._radiusY)+" "+n+" "+i+" "+e+" "+ce.svgNumber(this.getEnd().x)+" "+ce.svgNumber(this.getEnd().y);this._svgPathFragment=r+" "+o}}return this._svgPathFragment},strokeLeft:function(t){return this.offsetTo(-t/2,!1)},strokeRight:function(t){return this.offsetTo(t/2,!0)},getInteriorExtremaTs:function(){const t=this,e=[];return _.each(this.possibleExtremaAngles,(function(i){if(t.unitArcSegment.containsAngle(i)){const n=t.tAtAngle(i),s=1e-10;n>s&&n<1-s&&e.push(n)}})),e.sort()},intersection:function(t){const e=this.getUnitTransform(),i=e.inverseRay2(t),n=this.getUnitArcSegment().intersection(i);return _.map(n,(function(i){const n=e.transformPosition2(i.point),s=t.position.distance(n),r=e.inverseNormal2(i.normal);return new $e(s,n,r,i.wind,i.t)}))},windingIntersection:function(t){const e=this.getUnitTransform().inverseRay2(t);return this.getUnitArcSegment().windingIntersection(e)},writeToContext:function(t){t.ellipse?t.ellipse(this._center.x,this._center.y,this._radiusX,this._radiusY,this._rotation,this._startAngle,this._endAngle,this._anticlockwise):(this.getUnitTransform().getMatrix().canvasAppendTransform(t),t.arc(0,0,1,this._startAngle,this._endAngle,this._anticlockwise),this.getUnitTransform().getInverse().canvasAppendTransform(t))},transformed:function(t){const e=t.timesVector2(te.a.createPolar(this._radiusX,this._rotation)).minus(t.timesVector2(te.a.ZERO)),i=t.timesVector2(te.a.createPolar(this._radiusY,this._rotation+Math.PI/2)).minus(t.timesVector2(te.a.ZERO)),n=e.angle,s=e.magnitude,r=i.magnitude,o=t.getDeterminant()<0,a=o?!this._anticlockwise:this._anticlockwise,l=o?-this._startAngle:this._startAngle;let h=o?-this._endAngle:this._endAngle;return Math.abs(this._endAngle-this._startAngle)===2*Math.PI&&(h=a?l-2*Math.PI:l+2*Math.PI),new ce.EllipticalArc(t.timesVector2(this._center),s,r,n,l,h,a)},getSignedAreaFragment:function(){const t=this._startAngle,e=this.getActualEndAngle(),i=Math.sin(t),n=Math.sin(e),s=Math.cos(t),r=Math.cos(e);return.5*(this._radiusX*this._radiusY*(e-t)+Math.cos(this._rotation)*(this._radiusX*this._center.y*(s-r)+this._radiusY*this._center.x*(n-i))+Math.sin(this._rotation)*(this._radiusX*this._center.x*(r-s)+this._radiusY*this._center.y*(n-i)))},reversed:function(){return new ce.EllipticalArc(this._center,this._radiusX,this._radiusY,this._rotation,this._endAngle,this._startAngle,!this._anticlockwise)},serialize:function(){return{type:"EllipticalArc",centerX:this._center.x,centerY:this._center.y,radiusX:this._radiusX,radiusY:this._radiusY,rotation:this._rotation,startAngle:this._startAngle,endAngle:this._endAngle,anticlockwise:this._anticlockwise}}}),Pi.deserialize=function(t){return new Pi(new te.a(t.centerX,t.centerY),t.radiusX,t.radiusY,t.rotation,t.startAngle,t.endAngle,t.anticlockwise)},Pi.getOverlaps=function(t,e){return t._center.distance(e._center)>1e-8||Math.abs(t._radiusX-e._radiusX)>1e-8||Math.abs(t._radiusY-e._radiusY)>1e-8||Math.abs(oe.a.moduloBetweenDown(t._rotation-e._rotation+Math.PI/2,0,Math.PI)-Math.PI/2)>1e-10?[]:pi.getAngularOverlaps(t._startAngle+t._rotation,t.getActualEndAngle()+t._rotation,e._startAngle+e._rotation,e.getActualEndAngle()+e._rotation)},Pi.computeUnitTransform=function(t,e,i,n){return new Ue(Ye.translation(t.x,t.y).timesMatrix(Ye.rotation2(n)).timesMatrix(Ye.scaling(e,i)))};var ki=Pi;const Ii=oe.a.lineLineIntersection,Li={lineWidth:1,lineCap:"butt",lineJoin:"miter",lineDash:[],lineDashOffset:0,miterLimit:10};function Oi(t){t=Object(s.a)({},Li,t),this.lineWidth=t.lineWidth,this.lineCap=t.lineCap,this.lineJoin=t.lineJoin,this.lineDash=t.lineDash,this.lineDashOffset=t.lineDashOffset,this.miterLimit=t.miterLimit}ce.register("LineStyles",Oi),Object(z.a)(Object,Oi,{equals:function(t){if(!(this.lineWidth===t.lineWidth&&this.lineCap===t.lineCap&&this.lineJoin===t.lineJoin&&this.miterLimit===t.miterLimit&&this.lineDashOffset===t.lineDashOffset))return!1;if(this.lineDash.length!==t.lineDash.length)return!1;for(let e=0;e<this.lineDash.length;e++)if(this.lineDash[e]!==t.lineDash[e])return!1;return!0},copy:function(){return new Oi({lineWidth:this.lineWidth,lineCap:this.lineCap,lineJoin:this.lineJoin,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,miterLimit:this.miterLimit})},leftJoin:function(t,e,i){e=e.normalized(),i=i.normalized();const n=t.plus(e.perpendicular.negated().times(this.lineWidth/2)),s=t.plus(i.perpendicular.negated().times(this.lineWidth/2)),r=n.equals(s)?[]:[new ui(n,s)];if(!(e.perpendicular.dot(i)>1e-12))return r;switch(this.lineJoin){case"round":var o=e.angle+Math.PI/2,a=i.angle+Math.PI/2;return[new pi(t,this.lineWidth/2,o,a,!0)];case"miter":var l=e.angleBetween(i.negated());if(1/Math.sin(l/2)<=this.miterLimit&&l<Math.PI-1e-5){const t=Ii(n,n.plus(e),s,s.plus(i));return[new ui(n,t),new ui(t,s)]}return r;case"bevel":return r;default:throw new Error("invalid lineJoin: "+this.lineJoin)}},rightJoin:function(t,e,i){return this.leftJoin(t,i.negated(),e.negated())},cap:function(t,e){e=e.normalized();const i=t.plus(e.perpendicular.times(-this.lineWidth/2)),n=t.plus(e.perpendicular.times(this.lineWidth/2));switch(this.lineCap){case"butt":return[new ui(i,n)];case"round":var s=e.angle;return[new pi(t,this.lineWidth/2,s+Math.PI/2,s-Math.PI/2,!0)];case"square":var r=e.perpendicular.negated().times(this.lineWidth/2),o=e.perpendicular.times(this.lineWidth/2),a=e.times(this.lineWidth/2),l=t.plus(r).plus(a),h=t.plus(o).plus(a);return[new ui(i,l),new ui(l,h),new ui(h,n)];default:throw new Error("invalid lineCap: "+this.lineCap)}}}),Oi.DEFAULT_OPTIONS=Li;var Ri=ce.LineStyles;function Ni(t,e,i){this.invalidatedEmitter=new H;const n=this;if(this.segments=[],this.points=e||(t&&t.length?_.map(t,(function(t){return t.start})).concat(t[t.length-1].end):[]),this.closed=!!i,this._strokedSubpaths=null,this._strokedSubpathsComputed=!1,this._strokedStyles=null,this._bounds=null,this._invalidateListener=this.invalidate.bind(this),this._invalidatingPoints=!1,t)for(let s=0;s<t.length;s++)_.each(t[s].getNondegenerateSegments(),(function(t){n.addSegmentDirectly(t)}))}ce.register("Subpath",Ni),Object(z.a)(Object,Ni,{getBounds:function(){if(null===this._bounds){const t=ne.NOTHING.copy();_.each(this.segments,(function(e){t.includeBounds(e.getBounds())})),this._bounds=t}return this._bounds},get bounds(){return this.getBounds()},getArcLength:function(t,e,i){let n=0;for(let s=0;s<this.segments.length;s++)n+=this.segments[s].getArcLength(t,e,i);return n},copy:function(){return new Ni(this.segments.slice(0),this.points.slice(0),this.closed)},invalidatePoints:function(){this._invalidatingPoints=!0;const t=this.segments.length;for(let e=0;e<t;e++)this.segments[e].invalidate();this._invalidatingPoints=!1,this.invalidate()},invalidate:function(){this._invalidatingPoints||(this._bounds=null,this._strokedSubpathsComputed=!1,this.invalidatedEmitter.emit())},addPoint:function(t){return this.points.push(t),this},addSegmentDirectly:function(t){return this.segments.push(t),t.invalidationEmitter.addListener(this._invalidateListener),this},addSegment:function(t){const e=t.getNondegenerateSegments().length;for(let i=0;i<e;i++)this.addSegmentDirectly(t);return this.invalidate(),this},addClosingSegment:function(){if(this.hasClosingSegment()){const t=this.getClosingSegment();this.addSegmentDirectly(t),this.invalidate(),this.addPoint(this.getFirstPoint()),this.closed=!0}},close:function(){this.closed=!0,this.addClosingSegment()},getLength:function(){return this.points.length},getFirstPoint:function(){return _.first(this.points)},getLastPoint:function(){return _.last(this.points)},getFirstSegment:function(){return _.first(this.segments)},getLastSegment:function(){return _.last(this.segments)},getFillSegments:function(){const t=this.segments.slice();return this.hasClosingSegment()&&t.push(this.getClosingSegment()),t},isDrawable:function(){return this.segments.length>0},isClosed:function(){return this.closed},hasClosingSegment:function(){return!this.getFirstPoint().equalsEpsilon(this.getLastPoint(),1e-9)},getClosingSegment:function(){return new ui(this.getLastPoint(),this.getFirstPoint())},writeToContext:function(t){if(this.isDrawable()){const e=this.getFirstSegment().start;t.moveTo(e.x,e.y);let i=this.segments.length;this.closed&&i>=2&&this.segments[i-1]instanceof ui&&i--;for(let n=0;n<i;n++)this.segments[n].writeToContext(t);this.closed&&t.closePath()}},toPiecewiseLinear:function(t){return new Ni(_.flatten(_.map(this.segments,(function(e){return e.toPiecewiseLinearSegments(t)}))),null,this.closed)},transformed:function(t){return new Ni(_.map(this.segments,(function(e){return e.transformed(t)})),_.map(this.points,(function(e){return t.timesVector2(e)})),this.closed)},nonlinearTransformed:function(t){return new Ni(_.flatten(_.map(this.segments,(function(e){return t.methodName&&e[t.methodName]?e[t.methodName](t):e.toPiecewiseLinearSegments(t)}))),null,this.closed)},getBoundsWithTransform:function(t){const e=ne.NOTHING.copy(),i=this.segments.length;for(let n=0;n<i;n++)e.includeBounds(this.segments[n].getBoundsWithTransform(t));return e},offset:function(t){if(!this.isDrawable())return new Ni([],null,this.closed);if(0===t)return new Ni(this.segments.slice(),null,this.closed);let e;const i=this.segments.slice(),n=[];for(e=0;e<i.length;e++)n.push(i[e].strokeLeft(2*t));let s=[];for(e=0;e<i.length;e++){if(this.closed||e>0){const n=(e>0?e:i.length)-1,r=i[e].start,o=i[n].endTangent,a=i[e].startTangent,l=o.perpendicular.negated().times(t).angle,h=a.perpendicular.negated().times(t).angle,u=o.perpendicular.dot(a)>0;s.push(new pi(r,Math.abs(t),l,h,u))}s=s.concat(n[e])}return new Ni(s,null,this.closed)},stroked:function(t){if(!this.isDrawable())return[];if(void 0===t&&(t=new Ri),this._strokedSubpathsComputed&&this._strokedStyles.equals(t))return this._strokedSubpaths;const e=t.lineWidth;let i,n=[],s=[];const r=this.getFirstSegment(),o=this.getLastSegment();function a(t){n=n.concat(t)}function l(t){s=s.concat(t)}const h=o.end.equals(r.start),u=h?null:new ui(this.segments[this.segments.length-1].end,this.segments[0].start);for(i=0;i<this.segments.length;i++)i>0&&a(t.leftJoin(this.segments[i].start,this.segments[i-1].endTangent,this.segments[i].startTangent)),a(this.segments[i].strokeLeft(e));for(i=this.segments.length-1;i>=0;i--)i<this.segments.length-1&&l(t.rightJoin(this.segments[i].end,this.segments[i].endTangent,this.segments[i+1].startTangent)),l(this.segments[i].strokeRight(e));let c;return this.closed?(h?(a(t.leftJoin(o.end,o.endTangent,r.startTangent)),l(t.rightJoin(o.end,o.endTangent,r.startTangent))):(a(t.leftJoin(u.start,o.endTangent,u.startTangent)),a(u.strokeLeft(e)),a(t.leftJoin(u.end,u.endTangent,r.startTangent)),l(t.rightJoin(u.end,u.endTangent,r.startTangent)),l(u.strokeRight(e)),l(t.rightJoin(u.start,o.endTangent,u.startTangent))),c=[new Ni(n,null,!0),new Ni(s,null,!0)]):c=[new Ni(n.concat(t.cap(o.end,o.endTangent)).concat(s).concat(t.cap(r.start,r.startTangent.negated())),null,!0)],this._strokedSubpaths=c,this._strokedSubpathsComputed=!0,this._strokedStyles=t.copy(),c},dashed:function(t,e,i,n){function s(t,e){const i=t[t.length-1].concat(e[0]),n=t.slice(0,t.length-1).concat([i]).concat(e.slice(1));return n}function r(t,e){if(!t.hasRightFilled||!e.hasLeftFilled)return!1;const i=_.last(_.last(t.segmentArrays)),n=e.segmentArrays[0][0];return i.end.distance(n.start)<1e-5}const o=[];for(var a=0;a<this.segments.length;a++){const s=this.segments[a],r=s.getDashValues(t,e,i,n);o.push(r),e+=r.arcLength;const l=[0].concat(r.values).concat([1]),h=r.initiallyInside;r.hasLeftFilled=h,r.hasRightFilled=l.length%2==0?h:!h,r.segmentArrays=[];for(let t=h?0:1;t<l.length-1;t+=2)l[t]!==l[t+1]&&r.segmentArrays.push([s.slice(l[t],l[t+1])])}for(a=o.length-1;a>=1;a--){var l=o[a-1],h=o[a];r(l,h)&&o.splice(a-1,2,{segmentArrays:s(l.segmentArrays,h.segmentArrays),hasLeftFilled:l.hasLeftFilled,hasRightFilled:h.hasRightFilled})}return o.length>1&&r(o[o.length-1],o[0])&&(l=o.pop(),h=o.shift(),o.push({segmentArrays:s(l.segmentArrays,h.segmentArrays),hasLeftFilled:l.hasLeftFilled,hasRightFilled:h.hasRightFilled})),this.closed&&1===o.length&&1===o[0].segmentArrays.length&&o[0].hasLeftFilled&&o[0].hasRightFilled?[new Ni(o[0].segmentArrays[0],null,!0)]:_.flatten(o.map((function(t){return t.segmentArrays}))).map((function(t){return new Ni(t)}))},serialize:function(){return{type:"Subpath",segments:this.segments.map((function(t){return t.serialize()})),points:this.points.map((function(t){return{x:t.x,y:t.y}})),closed:this.closed}}}),Ni.deserialize=function(t){return new Ni(t.segments.map(ai.deserialize),t.points.map((function(t){return new te.a(t.x,t.y)})),t.closed)};var Mi=Ni;let Bi=0;function Fi(t){this.id=++Bi,this.initialize(t)}ce.register("Boundary",Fi),Object(z.a)(Object,Fi,{initialize:function(t){return this.halfEdges=t,this.signedArea=this.computeSignedArea(),this.bounds=this.computeBounds(),this.childBoundaries=Ke(this.childBoundaries),this},dispose:function(){this.halfEdges=[],Ke(this.childBoundaries),this.freeToPool()},isInner:function(){return this.signedArea>0},computeSignedArea:function(){let t=0;for(let e=0;e<this.halfEdges.length;e++)t+=this.halfEdges[e].signedAreaFragment;return t},computeBounds:function(){const t=ne.NOTHING.copy();for(let e=0;e<this.halfEdges.length;e++)t.includeBounds(this.halfEdges[e].edge.segment.getBounds());return t},computeExtremePoint:function(t){const e=[];for(var i=0;i<this.halfEdges.length;i++)e.push(this.halfEdges[i].edge.segment.transformed(t.getMatrix()));const n=ne.NOTHING.copy();for(i=0;i<e.length;i++)n.includeBounds(e[i].getBounds());for(i=0;i<e.length;i++){const s=e[i];if(s.getBounds().top===n.top){let e=new te.a(0,Number.POSITIVE_INFINITY);const i=[0,1].concat(s.getInteriorExtremaTs());for(let t=0;t<i.length;t++){const n=s.positionAt(i[t]);n.y<e.y&&(e=n)}return t.inversePosition2(e)}}throw new Error("Should not reach here if we have segments")},computeExtremeRay:function(t){const e=this.computeExtremePoint(t),i=t.inverseDelta2(new te.a(0,-1)).normalized();return new Ge(e.plus(i.timesScalar(1e-4)),i)},hasHalfEdge:function(t){for(let e=0;e<this.halfEdges.length;e++)if(this.halfEdges[e]===t)return!0;return!1},toSubpath:function(){const t=[];for(let e=0;e<this.halfEdges.length;e++)t.push(this.halfEdges[e].getDirectionalSegment());return new Mi(t,null,!0)}}),$t.a.mixInto(Fi,{initialize:Fi.prototype.initialize});var Vi=ce.Boundary;function qi(t,e){this.initialize(t,e)}ce.register("HalfEdge",qi),Object(z.a)(Object,qi,{initialize:function(t,e){return this.edge=t,this.face=null,this.isReversed=e,this.signedAreaFragment=t.signedAreaFragment*(e?-1:1),this.startVertex=null,this.endVertex=null,this.sortVector=this.sortVector||new te.a(0,0),this.data=null,this.updateReferences(),this},dispose:function(){this.edge=null,this.face=null,this.startVertex=null,this.endVertex=null,this.data=null,this.freeToPool()},getNext:function(t){for(let e=1;;e++){let i=this.endVertex.incidentHalfEdges.indexOf(this)-e;i<0&&(i+=this.endVertex.incidentHalfEdges.length);const n=this.endVertex.incidentHalfEdges[i].getReversed();if(!t||t(n.edge))return n}},updateReferences:function(){this.startVertex=this.isReversed?this.edge.endVertex:this.edge.startVertex,this.endVertex=this.isReversed?this.edge.startVertex:this.edge.endVertex},getEndTangent:function(){return this.isReversed?this.edge.segment.startTangent:this.edge.segment.endTangent.negated()},getEndCurvature:function(){return this.isReversed?-this.edge.segment.curvatureAt(0):this.edge.segment.curvatureAt(1)},getReversed:function(){return this.isReversed?this.edge.forwardHalf:this.edge.reversedHalf},getDirectionalSegment:function(){return this.isReversed?this.edge.segment.reversed():this.edge.segment}}),$t.a.mixInto(qi,{initialize:qi.prototype.initialize});var Hi=ce.HalfEdge;let Yi=0;function ji(t){this.id=++Yi,this.initialize(t)}ce.register("Vertex",ji),Object(z.a)(Object,ji,{initialize:function(t){return this.point=t,this.incidentHalfEdges=Ke(this.incidentHalfEdges),this.visited=!1,this.visitIndex=0,this.lowIndex=0,this},dispose:function(){this.point=te.a.ZERO,Ke(this.incidentHalfEdges),this.freeToPool()},sortEdges:function(){const t=[];for(var e=0;e<this.incidentHalfEdges.length;e++){const i=this.incidentHalfEdges[e];t.push(i.sortVector.setXY(i.getEndTangent().angle,i.getEndCurvature()))}const i=1e-4-Math.PI;let n=!1;for(;!n;){for(n=!0,e=0;e<t.length;e++)t[e].x<i&&(n=!1);if(!n)for(e=0;e<t.length;e++){const i=t[e];i.x-=1.62594024516,i.x<-Math.PI-1e-4&&(i.x+=2*Math.PI)}}this.incidentHalfEdges.sort(ji.edgeComparison)}},{edgeComparison:function(t,e){const i=t.sortVector.x,n=e.sortVector.x;if(Math.abs(i-n)>1e-5||i!==n&&t.edge.segment instanceof ui&&e.edge.segment instanceof ui)return i<n?-1:1;{const i=t.sortVector.y,n=e.sortVector.y;if(Math.abs(i-n)>1e-5)return i<n?1:-1;throw new Error("TODO: Need to implement more advanced disambiguation ")}}}),$t.a.mixInto(ji,{initialize:ji.prototype.initialize});var Gi=ce.Vertex;let zi=0;function Wi(t,e,i){this.id=++zi,this.initialize(t,e,i)}ce.register("Edge",Wi),Object(z.a)(Object,Wi,{initialize:function(t,e,i){return this.segment=t,this.startVertex=e,this.endVertex=i,this.signedAreaFragment=t.getSignedAreaFragment(),this.forwardHalf=Hi.createFromPool(this,!1),this.reversedHalf=Hi.createFromPool(this,!0),this.visited=!1,this.data=null,this},dispose:function(){this.segment=null,this.startVertex=null,this.endVertex=null,this.forwardHalf.dispose(),this.reversedHalf.dispose(),this.forwardHalf=null,this.reversedHalf=null,this.data=null,this.freeToPool()},getOtherVertex:function(t){return this.startVertex===t?this.endVertex:this.startVertex},updateReferences:function(){this.forwardHalf.updateReferences(),this.reversedHalf.updateReferences()}}),$t.a.mixInto(Wi,{initialize:Wi.prototype.initialize});var Ui=ce.Edge;let Xi=0;function Ki(t){this.id=++Xi,this.initialize(t)}ce.register("Face",Ki),Object(z.a)(Object,Ki,{initialize:function(t){return this.boundary=t,this.holes=Ke(this.holes),this.windingMap=null,this.filled=null,t&&this.addBoundaryFaceReferences(t),this},dispose:function(){this.boundary=null,Ke(this.holes),this.windingMap=null,this.filled=null,this.freeToPool()},addBoundaryFaceReferences:function(t){for(let e=0;e<t.halfEdges.length;e++)t.halfEdges[e].face=this},recursivelyAddHoles:function(t){this.holes.push(t),this.addBoundaryFaceReferences(t);for(let e=0;e<t.childBoundaries.length;e++)this.recursivelyAddHoles(t.childBoundaries[e])}}),$t.a.mixInto(Ki,{initialize:Ki.prototype.initialize});var Qi=ce.Face;let Zi=0;function Ji(t,e){this.id=++Zi,this.initialize(t,e)}ce.register("Loop",Ji),Object(z.a)(Object,Ji,{initialize:function(t,e){return this.shapeId=t,this.closed=e,this.halfEdges=Ke(this.halfEdges),this},toSubpath:function(){const t=[];for(let e=0;e<this.halfEdges.length;e++)t.push(this.halfEdges[e].getDirectionalSegment());return new Mi(t,void 0,this.closed)},dispose:function(){Ke(this.halfEdges),this.freeToPool()}}),$t.a.mixInto(Ji,{initialize:Ji.prototype.initialize});var $i=ce.Loop;let tn=0;function en(){this.vertices=[],this.edges=[],this.innerBoundaries=[],this.outerBoundaries=[],this.boundaries=[],this.shapeIds=[],this.loops=[],this.unboundedFace=Qi.createFromPool(null),this.faces=[this.unboundedFace]}ce.register("Graph",en),Object(z.a)(Object,en,{addShape:function(t,e,i){for(let n=0;n<e.subpaths.length;n++)this.addSubpath(t,e.subpaths[n],i)},addSubpath:function(t,e,i){if(i=Object(s.a)({ensureClosed:!0},i),this.shapeIds.indexOf(t)<0&&this.shapeIds.push(t),0===e.segments.length)return;const n=e.closed||i.ensureClosed,r=i.ensureClosed?e.getFillSegments():e.segments;let o;const a=[];for(o=0;o<r.length;o++){let t=o-1;t<0&&(t=r.length-1);let e=r[t].end;const i=r[o].start;n||0!==o||(e=i),i.equals(e)?a.push(Gi.createFromPool(i)):a.push(Gi.createFromPool(i.average(e)))}n||a.push(Gi.createFromPool(r[r.length-1].end));const l=$i.createFromPool(t,n);for(o=0;o<r.length;o++){let t=o+1;n&&t===r.length&&(t=0);const e=Ui.createFromPool(r[o],a[o],a[t]);l.halfEdges.push(e.forwardHalf),this.addEdge(e)}this.loops.push(l),this.vertices.push.apply(this.vertices,a)},computeSimplifiedFaces:function(){this.eliminateOverlap(),this.eliminateSelfIntersection(),this.eliminateIntersection(),this.collapseVertices(),this.removeBridges(),this.removeLowOrderVertices(),this.orderVertexEdges(),this.extractFaces(),this.computeBoundaryTree(),this.computeWindingMap()},computeFaceInclusion:function(t){for(let e=0;e<this.faces.length;e++){const i=this.faces[e];i.filled=t(i.windingMap)}},createFilledSubGraph:function(){const t=new en,e={};for(let i=0;i<this.edges.length;i++){const n=this.edges[i];if(n.forwardHalf.face.filled!==n.reversedHalf.face.filled){if(!e[n.startVertex.id]){const i=Gi.createFromPool(n.startVertex.point);t.vertices.push(i),e[n.startVertex.id]=i}if(!e[n.endVertex.id]){const i=Gi.createFromPool(n.endVertex.point);t.vertices.push(i),e[n.endVertex.id]=i}const i=e[n.startVertex.id],s=e[n.endVertex.id];t.addEdge(Ui.createFromPool(n.segment,i,s))}}return t.collapseAdjacentEdges(),t.orderVertexEdges(),t.extractFaces(),t.computeBoundaryTree(),t.fillAlternatingFaces(),t},facesToShape:function(){const t=[];for(let e=0;e<this.faces.length;e++){const i=this.faces[e];if(i.filled){t.push(i.boundary.toSubpath());for(let e=0;e<i.holes.length;e++)t.push(i.holes[e].toSubpath())}}return new ce.Shape(t)},dispose:function(){for(;this.boundaries.length;)this.boundaries.pop().dispose();for(Ke(this.innerBoundaries),Ke(this.outerBoundaries);this.loops.length;)this.loops.pop().dispose();for(;this.faces.length;)this.faces.pop().dispose();for(;this.vertices.length;)this.vertices.pop().dispose();for(;this.edges.length;)this.edges.pop().dispose()},addEdge:function(t){this.edges.push(t),t.startVertex.incidentHalfEdges.push(t.reversedHalf),t.endVertex.incidentHalfEdges.push(t.forwardHalf)},removeEdge:function(t){Object(wt.a)(this.edges,t),Object(wt.a)(t.startVertex.incidentHalfEdges,t.reversedHalf),Object(wt.a)(t.endVertex.incidentHalfEdges,t.forwardHalf)},replaceEdgeInLoops:function(t,e){const i=[];for(var n=0;n<e.length;n++)i.push(e[e.length-1-n].getReversed());for(n=0;n<this.loops.length;n++){const s=this.loops[n];for(let n=s.halfEdges.length-1;n>=0;n--){const r=s.halfEdges[n];if(r.edge===t){const o=r===t.forwardHalf?e:i;Array.prototype.splice.apply(s.halfEdges,[n,1].concat(o))}}}},collapseAdjacentEdges:function(){let t=!0;for(;t;){t=!1;t:for(let e=0;e<this.vertices.length;e++){const i=this.vertices[e];if(2===i.incidentHalfEdges.length){const e=i.incidentHalfEdges[0].edge,n=i.incidentHalfEdges[1].edge;let s=e.segment,r=n.segment;const o=e.getOtherVertex(i),a=n.getOtherVertex(i);if(e.startVertex===i&&(s=s.reversed()),n.endVertex===i&&(r=r.reversed()),s instanceof ui&&r instanceof ui&&s.tangentAt(0).normalized().distance(r.tangentAt(0).normalized())<1e-6){this.removeEdge(e),this.removeEdge(n),e.dispose(),n.dispose(),Object(wt.a)(this.vertices,i),i.dispose();const s=new ui(o.point,a.point);this.addEdge(new Ui(s,o,a)),t=!0;break t}}}}},eliminateOverlap:function(){let t=!0;for(;t;){t=!1;t:for(let e=0;e<this.edges.length;e++){const i=this.edges[e],n=i.segment;for(let s=e+1;s<this.edges.length;s++){const e=this.edges[s],r=e.segment;let o=null;if(n instanceof ui&&r instanceof ui&&(o=ui.getOverlaps),n instanceof bi&&r instanceof bi&&(o=bi.getOverlaps),n instanceof Ei&&r instanceof Ei&&(o=Ei.getOverlaps),n instanceof pi&&r instanceof pi&&(o=pi.getOverlaps),n instanceof ki&&r instanceof ki&&(o=ki.getOverlaps),o){const s=o(n,r);if(s.length)for(let n=0;n<s.length;n++){const r=s[n];if(Math.abs(r.t1-r.t0)>1e-5&&Math.abs(r.qt1-r.qt0)>1e-5){this.splitOverlap(i,e,r),t=!0;break t}}}}}}},splitOverlap:function(t,e,i){const n=t.segment,s=e.segment;this.removeEdge(t),this.removeEdge(e);let r=i.t0,o=i.t1,a=i.qt0,l=i.qt1;r<1e-5&&(r=0),o>.99999&&(o=1),a<1e-5&&(a=0),l>.99999&&(l=1);const h=r>0?n.subdivided(r)[0]:null,u=a>0?s.subdivided(a)[0]:null,c=o<1?n.subdivided(o)[1]:null,d=l<1?s.subdivided(l)[1]:null;let p,f,m=n;r>0&&(m=m.subdivided(r)[1]),o<1&&(m=m.subdivided(oe.a.linear(r,1,0,1,o))[0]),h&&u?(p=Gi.createFromPool(m.start),this.vertices.push(p)):p=h?i.a>0?e.startVertex:e.endVertex:t.startVertex,c&&d?(f=Gi.createFromPool(m.end),this.vertices.push(f)):f=c?i.a>0?e.endVertex:e.startVertex:t.endVertex;const g=Ui.createFromPool(m,p,f);let y,b,v,_;this.addEdge(g),h&&(y=Ui.createFromPool(h,t.startVertex,p),this.addEdge(y)),c&&(b=Ui.createFromPool(c,f,t.endVertex),this.addEdge(b)),u&&(v=Ui.createFromPool(u,e.startVertex,i.a>0?p:f),this.addEdge(v)),d&&(_=Ui.createFromPool(d,i.a>0?f:p,e.endVertex),this.addEdge(_));const A=(h?[y]:[]).concat([g]).concat(c?[b]:[]),w=(u?[v]:[]).concat([g]).concat(d?[_]:[]),x=[],S=[];for(var T=0;T<A.length;T++)x.push(A[T].forwardHalf);for(T=0;T<w.length;T++){const t=w[T]!==g||i.a>0;S.push(t?w[T].forwardHalf:w[T].reversedHalf)}this.replaceEdgeInLoops(t,x),this.replaceEdgeInLoops(e,S),t.dispose(),e.dispose()},eliminateSelfIntersection:function(){for(let t=this.edges.length-1;t>=0;t--){const e=this.edges[t],i=e.segment;if(i instanceof Ei){const t=i.getSelfIntersection();if(t){const n=i.subdivisions([t.aT,t.bT]),s=Gi.createFromPool(t.point);this.vertices.push(s);const r=Ui.createFromPool(n[0],e.startVertex,s),o=Ui.createFromPool(n[1],s,s),a=Ui.createFromPool(n[2],s,e.endVertex);this.removeEdge(e),this.addEdge(r),this.addEdge(o),this.addEdge(a),this.replaceEdgeInLoops(e,[r.forwardHalf,o.forwardHalf,a.forwardHalf]),e.dispose()}}}},eliminateIntersection:function(){let t=!0;for(;t;){t=!1;t:for(let e=0;e<this.edges.length;e++){const i=this.edges[e],n=i.segment;for(let s=e+1;s<this.edges.length;s++){const e=this.edges[s],r=e.segment;let o=ai.intersect(n,r);if(o=o.filter((function(t){const e=t.aT,i=t.bT;return e>1e-5&&e<.99999||i>1e-5&&i<.99999})),o.length){const n=o[0];t=this.simpleSplit(i,e,n.aT,n.bT,n.point);break t}}}}},simpleSplit:function(t,e,i,n,s){let r=!1;const o=i>1e-6&&i<.999999,a=n>1e-6&&n<.999999;let l=null;return o?a?(l=Gi.createFromPool(s),this.vertices.push(l)):l=n<.5?e.startVertex:e.endVertex:l=i<.5?t.startVertex:t.endVertex,o&&l!==t.startVertex&&l!==t.endVertex&&(this.splitEdge(t,i,l),r=!0),a&&l!==e.startVertex&&l!==e.endVertex&&(this.splitEdge(e,n,l),r=!0),r},splitEdge:function(t,e,i){const n=t.segment.subdivided(e),s=Ui.createFromPool(n[0],t.startVertex,i),r=Ui.createFromPool(n[1],i,t.endVertex);this.removeEdge(t),this.addEdge(s),this.addEdge(r),this.replaceEdgeInLoops(t,[s.forwardHalf,r.forwardHalf]),t.dispose()},collapseVertices:function(){let t=!0;for(;t;){t=!1;t:for(let e=0;e<this.vertices.length;e++){const i=this.vertices[e];for(let n=e+1;n<this.vertices.length;n++){const e=this.vertices[n],s=i.point.distance(e.point);if(s<1e-5){const n=Gi.createFromPool(0===s?i.point:i.point.average(e.point));this.vertices.push(n),Object(wt.a)(this.vertices,i),Object(wt.a)(this.vertices,e);for(let t=this.edges.length-1;t>=0;t--){const s=this.edges[t],r=s.startVertex===i||s.startVertex===e,o=s.endVertex===i||s.endVertex===e;if(r&&o){if((s.segment.bounds.width>1e-5||s.segment.bounds.height>1e-5)&&(s.segment instanceof Ei||s.segment instanceof pi||s.segment instanceof ki)){const t=Ui.createFromPool(s.segment,n,n);this.addEdge(t),this.replaceEdgeInLoops(s,[t.forwardHalf])}else this.replaceEdgeInLoops(s,[]);this.removeEdge(s),s.dispose()}else r?(s.startVertex=n,n.incidentHalfEdges.push(s.reversedHalf),s.updateReferences()):o&&(s.endVertex=n,n.incidentHalfEdges.push(s.forwardHalf),s.updateReferences())}i.dispose(),e.dispose(),t=!0;break t}}}}},markBridges:function(t,e){e.visited=!0,e.visitIndex=e.lowIndex=tn++;for(let i=0;i<e.incidentHalfEdges.length;i++){const n=e.incidentHalfEdges[i].edge,s=e.incidentHalfEdges[i].startVertex;s.visited?n.visited||(e.lowIndex=Math.min(e.lowIndex,s.visitIndex)):(n.visited=!0,s.parent=e,this.markBridges(t,s),e.lowIndex=Math.min(e.lowIndex,s.lowIndex),s.lowIndex>e.visitIndex&&t.push(n))}},removeBridges:function(){const t=[];for(var e=0;e<this.vertices.length;e++){const i=this.vertices[e];i.visited||this.markBridges(t,i)}for(e=0;e<t.length;e++){const i=t[e];this.removeEdge(i),this.replaceEdgeInLoops(i,[]),i.dispose()}},removeLowOrderVertices:function(){let t=!0;for(;t;){t=!1;t:for(let e=this.vertices.length-1;e>=0;e--){const i=this.vertices[e];if(i.incidentHalfEdges.length<2){for(let t=0;t<i.incidentHalfEdges.length;t++){const e=i.incidentHalfEdges[t].edge;this.removeEdge(e),this.replaceEdgeInLoops(e,[]),e.dispose()}this.vertices.splice(e,1),i.dispose(),t=!0;break t}}}},orderVertexEdges:function(){for(let t=0;t<this.vertices.length;t++)this.vertices[t].sortEdges()},extractFaces:function(){const t=[];for(var e=0;e<this.edges.length;e++)t.push(this.edges[e].forwardHalf),t.push(this.edges[e].reversedHalf);for(;t.length;){const e=[];let i=t[0];const n=i;for(;i&&(Object(wt.a)(t,i),e.push(i),i=i.getNext(),i!==n););const s=Vi.createFromPool(e);(s.signedArea>0?this.innerBoundaries:this.outerBoundaries).push(s),this.boundaries.push(s)}for(e=0;e<this.innerBoundaries.length;e++)this.faces.push(Qi.createFromPool(this.innerBoundaries[e]))},computeBoundaryTree:function(){const t=[],e=new Ue(Ye.rotation2(1.5729657));for(var i=0;i<this.outerBoundaries.length;i++){const n=this.outerBoundaries[i],s=n.computeExtremeRay(e);let r=null,o=Number.POSITIVE_INFINITY,a=!1;for(let t=0;t<this.edges.length;t++){const e=this.edges[t],i=e.segment.intersection(s);for(let t=0;t<i.length;t++){const n=i[t];n.distance<o&&(r=e,o=n.distance,a=n.wind)}}if(null===r)t.push(n);else{const t=a<0?r.reversedHalf:r.forwardHalf;this.getBoundaryOfHalfEdge(t).childBoundaries.push(n)}}for(t.forEach(this.unboundedFace.recursivelyAddHoles.bind(this.unboundedFace)),i=0;i<this.faces.length;i++){const t=this.faces[i];null!==t.boundary&&t.boundary.childBoundaries.forEach(t.recursivelyAddHoles.bind(t))}},computeWindingMap:function(){const t=this.edges.slice(),e={};for(let i=0;i<this.shapeIds.length;i++)e[this.shapeIds[i]]=0;for(this.unboundedFace.windingMap=e;t.length;)for(let e=t.length-1;e>=0;e--){const i=t[e],n=i.forwardHalf,s=i.reversedHalf,r=n.face,o=s.face,a=null!==r.windingMap,l=null!==o.windingMap;if(a&&l)t.splice(e,1);else{if(!a&&!l)continue;{const t=a?r:o,e=a?o:r,n={};for(let s=0;s<this.shapeIds.length;s++){const e=this.shapeIds[s],r=this.computeDifferential(i,e);n[e]=t.windingMap[e]+r*(a?-1:1)}e.windingMap=n}}}},computeDifferential:function(t,e){let i=0;for(let n=0;n<this.loops.length;n++){const s=this.loops[n];if(s.shapeId===e)for(let e=0;e<s.halfEdges.length;e++){const n=s.halfEdges[e];n===t.forwardHalf?i++:n===t.reversedHalf&&i--}}return i},fillAlternatingFaces:function(){let t=0;for(var e=0;e<this.faces.length;e++)this.faces[e].filled=null,t++;for(this.unboundedFace.filled=!1,t--;t;)for(e=0;e<this.edges.length;e++){const i=this.edges[e],n=i.forwardHalf.face,s=i.reversedHalf.face,r=null===n.filled,o=null===s.filled;r&&!o?(n.filled=!s.filled,t--):!r&&o&&(s.filled=!n.filled,t--)}},getBoundaryOfHalfEdge:function(t){for(let e=0;e<this.boundaries.length;e++){const i=this.boundaries[e];if(i.hasHalfEdge(t))return i}throw new Error("Could not find boundary")}}),en.BINARY_NONZERO_UNION=function(t){return 0!==t[0]||0!==t[1]},en.BINARY_NONZERO_INTERSECTION=function(t){return 0!==t[0]&&0!==t[1]},en.BINARY_NONZERO_DIFFERENCE=function(t){return 0!==t[0]&&0===t[1]},en.BINARY_NONZERO_XOR=function(t){return 1==(0!==t[0]^0!==t[1])},en.binaryResult=function(t,e,i){const n=new en;n.addShape(0,t),n.addShape(1,e),n.computeSimplifiedFaces(),n.computeFaceInclusion(i);const s=n.createFilledSubGraph(),r=s.facesToShape();return n.dispose(),s.dispose(),r},en.unionNonZero=function(t){const e=new en;for(let s=0;s<t.length;s++)e.addShape(s,t[s]);e.computeSimplifiedFaces(),e.computeFaceInclusion((function(e){for(let i=0;i<t.length;i++)if(0!==e[i])return!0;return!1}));const i=e.createFilledSubGraph(),n=i.facesToShape();return e.dispose(),i.dispose(),n},en.intersectionNonZero=function(t){const e=new en;for(let s=0;s<t.length;s++)e.addShape(s,t[s]);e.computeSimplifiedFaces(),e.computeFaceInclusion((function(e){for(let i=0;i<t.length;i++)if(0===e[i])return!1;return!0}));const i=e.createFilledSubGraph(),n=i.facesToShape();return e.dispose(),i.dispose(),n},en.xorNonZero=function(t){const e=new en;for(let s=0;s<t.length;s++)e.addShape(s,t[s]);e.computeSimplifiedFaces(),e.computeFaceInclusion((function(e){let i=!1;for(let n=0;n<t.length;n++)0!==e[n]&&(i=!i);return i}));const i=e.createFilledSubGraph(),n=i.facesToShape();return e.dispose(),i.dispose(),n},en.simplifyNonZero=function(t){const e=new en;e.addShape(0,t),e.computeSimplifiedFaces(),e.computeFaceInclusion((function(t){return 0!==t[0]}));const i=e.createFilledSubGraph(),n=i.facesToShape();return e.dispose(),i.dispose(),n},en.clipShape=function(t,e,i){let n,r,o;i=Object(s.a)({includeExterior:!1,includeBoundary:!0,includeInterior:!0},i);const a=en.simplifyNonZero(t),l=new en;for(l.addShape(0,e,{ensureClosed:!1}),l.addShape(1,a),l.eliminateOverlap(),l.eliminateSelfIntersection(),l.eliminateIntersection(),l.collapseVertices(),n=0;n<l.loops.length;n++)if(o=l.loops[n],1===o.shapeId)for(r=0;r<o.halfEdges.length;r++)o.halfEdges[r].edge.data=!0;const h=[];for(n=0;n<l.loops.length;n++)if(o=l.loops[n],0===o.shapeId){let t=[];for(r=0;r<o.halfEdges.length;r++){const e=o.halfEdges[r];(e.edge.data?i.includeBoundary:a.containsPoint(e.edge.segment.positionAt(.5))?i.includeInterior:i.includeExterior)?t.push(e.getDirectionalSegment()):t.length&&(h.push(new Mi(t,void 0,o.closed)),t=[])}t.length&&h.push(new Mi(t,void 0,o.closed))}return l.dispose(),new ce.Shape(h)};var nn=ce.Graph;function sn(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var rn={parse:function(t,e){var i={svgPath:function(){var t,e,i,s,r,o;r=n,o=n,t=[],e=W();for(;null!==e;)t.push(e),e=W();if(null!==t)if(null!==(e=null!==(e=a())?e:"")){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i?t=[t,e,i]:(t=null,n=o)}else t=null,n=o;else t=null,n=o;null!==t&&(l=t[1],t=l||[]);var l;null===t&&(n=r);return t},movetoDrawtoCommandGroups:a,movetoDrawtoCommandGroup:l,drawtoCommands:h,drawtoCommand:u,moveto:c,movetoArgumentSequence:d,closepath:p,lineto:f,linetoArgumentSequence:m,horizontalLineto:g,horizontalLinetoArgumentSequence:y,verticalLineto:b,verticalLinetoArgumentSequence:v,curveto:_,curvetoArgumentSequence:A,curvetoArgument:w,smoothCurveto:x,smoothCurvetoArgumentSequence:S,smoothCurvetoArgument:T,quadraticBezierCurveto:D,quadraticBezierCurvetoArgumentSequence:E,quadraticBezierCurvetoArgument:C,smoothQuadraticBezierCurveto:P,smoothQuadraticBezierCurvetoArgumentSequence:k,ellipticalArc:I,ellipticalArcArgumentSequence:L,ellipticalArcArgument:O,coordinatePair:R,nonnegativeNumber:N,number:M,flag:B,commaWsp:F,comma:V,floatingPointConstant:q,fractionalConstant:H,exponent:Y,sign:j,digitSequence:G,digit:z,wsp:W};if(void 0!==e){if(void 0===i[e])throw new Error("Invalid rule name: "+sn(e)+".")}else e="svgPath";var n=0,s=0,r=[];function o(t){n<s||(n>s&&(s=n,r=[]),r.push(t))}function a(){var t,e,i,s,r,o,h;if(s=n,r=n,null!==(t=l())){for(e=[],i=W();null!==i;)e.push(i),i=W();null!==e&&null!==(i=a())?t=[t,e,i]:(t=null,n=r)}else t=null,n=r;return null!==t&&(o=t[0],h=t[2],t=o.concat(h)),null===t&&(n=s),null===t&&(s=n,null!==(t=l())&&(t=function(t,e){return e}(0,t)),null===t&&(n=s)),t}function l(){var t,e,i,s,r,o,a;if(s=n,r=n,null!==(t=c())){for(e=[],i=W();null!==i;)e.push(i),i=W();null!==e&&null!==(i=null!==(i=h())?i:"")?t=[t,e,i]:(t=null,n=r)}else t=null,n=r;return null!==t&&(o=t[0],t=(a=t[2]).length?o.concat(a):o),null===t&&(n=s),t}function h(){var t,e,i,s,r,o,a;if(s=n,r=n,null!==(t=u())){for(e=[],i=W();null!==i;)e.push(i),i=W();null!==e&&null!==(i=h())?t=[t,e,i]:(t=null,n=r)}else t=null,n=r;return null!==t&&(o=t[0],a=t[2],t=o.concat(a)),null===t&&(n=s),null===t&&(s=n,null!==(t=u())&&(t=function(t,e){return e}(0,t)),null===t&&(n=s)),t}function u(){var t;return null===(t=p())&&null===(t=f())&&null===(t=g())&&null===(t=b())&&null===(t=_())&&null===(t=x())&&null===(t=D())&&null===(t=P())&&(t=I()),t}function c(){var e,i,s,r,a;if(r=n,a=n,77===t.charCodeAt(n)?(e="M",n++):(e=null,o('"M"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=d())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;if(null!==e&&(e=U(e[2],!1)),null===e&&(n=r),null===e){if(r=n,a=n,109===t.charCodeAt(n)?(e="m",n++):(e=null,o('"m"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=d())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;null!==e&&(e=function(t,e){return U(e,!0)}(0,e[2])),null===e&&(n=r)}return e}function d(){var t,e,i,s,r,o,a;return s=n,r=n,null!==(t=R())&&null!==(e=null!==(e=F())?e:"")&&null!==(i=m())?t=[t,e,i]:(t=null,n=r),null!==t&&(o=t[0],a=t[2],t=[o].concat(a)),null===t&&(n=s),null===t&&(s=n,null!==(t=R())&&(t=function(t,e){return[e]}(0,t)),null===t&&(n=s)),t}function p(){var e,i;return i=n,90===t.charCodeAt(n)?(e="Z",n++):(e=null,o('"Z"')),null===e&&(122===t.charCodeAt(n)?(e="z",n++):(e=null,o('"z"'))),null!==e&&(e={cmd:"close"}),null===e&&(n=i),e}function f(){var e,i,s,r,a;if(r=n,a=n,76===t.charCodeAt(n)?(e="L",n++):(e=null,o('"L"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=m())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;if(null!==e&&(e=e[2].map((function(t){return{cmd:"lineTo",args:[t.x,t.y]}}))),null===e&&(n=r),null===e){if(r=n,a=n,108===t.charCodeAt(n)?(e="l",n++):(e=null,o('"l"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=m())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;null!==e&&(e=function(t,e){return e.map((function(t){return{cmd:"lineToRelative",args:[t.x,t.y]}}))}(0,e[2])),null===e&&(n=r)}return e}function m(){var t,e,i,s,r,o,a;return s=n,r=n,null!==(t=R())&&null!==(e=null!==(e=F())?e:"")&&null!==(i=m())?t=[t,e,i]:(t=null,n=r),null!==t&&(o=t[0],a=t[2],t=[o].concat(a)),null===t&&(n=s),null===t&&(s=n,null!==(t=R())&&(t=function(t,e){return[e]}(0,t)),null===t&&(n=s)),t}function g(){var e,i,s,r,a;if(r=n,a=n,72===t.charCodeAt(n)?(e="H",n++):(e=null,o('"H"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=y())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;if(null!==e&&(e=e[2].map((function(t){return{cmd:"horizontalLineTo",args:[t]}}))),null===e&&(n=r),null===e){if(r=n,a=n,104===t.charCodeAt(n)?(e="h",n++):(e=null,o('"h"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=y())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;null!==e&&(e=function(t,e){return e.map((function(t){return{cmd:"horizontalLineToRelative",args:[t]}}))}(0,e[2])),null===e&&(n=r)}return e}function y(){var t,e,i,s,r,o,a;return s=n,r=n,null!==(t=M())&&null!==(e=null!==(e=F())?e:"")&&null!==(i=y())?t=[t,e,i]:(t=null,n=r),null!==t&&(o=t[0],a=t[2],t=[o].concat(a)),null===t&&(n=s),null===t&&(s=n,null!==(t=M())&&(t=function(t,e){return[e]}(0,t)),null===t&&(n=s)),t}function b(){var e,i,s,r,a;if(r=n,a=n,86===t.charCodeAt(n)?(e="V",n++):(e=null,o('"V"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=v())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;if(null!==e&&(e=e[2].map((function(t){return{cmd:"verticalLineTo",args:[t]}}))),null===e&&(n=r),null===e){if(r=n,a=n,118===t.charCodeAt(n)?(e="v",n++):(e=null,o('"v"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=v())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;null!==e&&(e=function(t,e){return e.map((function(t){return{cmd:"verticalLineToRelative",args:[t]}}))}(0,e[2])),null===e&&(n=r)}return e}function v(){var t,e,i,s,r,o,a;return s=n,r=n,null!==(t=M())&&null!==(e=null!==(e=F())?e:"")&&null!==(i=v())?t=[t,e,i]:(t=null,n=r),null!==t&&(o=t[0],a=t[2],t=[o].concat(a)),null===t&&(n=s),null===t&&(s=n,null!==(t=M())&&(t=function(t,e){return[e]}(0,t)),null===t&&(n=s)),t}function _(){var e,i,s,r,a;if(r=n,a=n,67===t.charCodeAt(n)?(e="C",n++):(e=null,o('"C"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=A())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;if(null!==e&&(e=e[2].map((function(t){return{cmd:"cubicCurveTo",args:t}}))),null===e&&(n=r),null===e){if(r=n,a=n,99===t.charCodeAt(n)?(e="c",n++):(e=null,o('"c"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=A())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;null!==e&&(e=function(t,e){return e.map((function(t){return{cmd:"cubicCurveToRelative",args:t}}))}(0,e[2])),null===e&&(n=r)}return e}function A(){var t,e,i,s,r,o,a;return s=n,r=n,null!==(t=w())&&null!==(e=null!==(e=F())?e:"")&&null!==(i=A())?t=[t,e,i]:(t=null,n=r),null!==t&&(o=t[0],a=t[2],t=[o].concat(a)),null===t&&(n=s),null===t&&(s=n,null!==(t=w())&&(t=function(t,e){return[e]}(0,t)),null===t&&(n=s)),t}function w(){var t,e,i,s,r,o,a,l,h,u;return o=n,a=n,null!==(t=R())&&null!==(e=null!==(e=F())?e:"")&&null!==(i=R())&&null!==(s=null!==(s=F())?s:"")&&null!==(r=R())?t=[t,e,i,s,r]:(t=null,n=a),null!==t&&(l=t[0],h=t[2],u=t[4],t=[l.x,l.y,h.x,h.y,u.x,u.y]),null===t&&(n=o),t}function x(){var e,i,s,r,a;if(r=n,a=n,83===t.charCodeAt(n)?(e="S",n++):(e=null,o('"S"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=S())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;if(null!==e&&(e=e[2].map((function(t){return{cmd:"smoothCubicCurveTo",args:t}}))),null===e&&(n=r),null===e){if(r=n,a=n,115===t.charCodeAt(n)?(e="s",n++):(e=null,o('"s"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=S())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;null!==e&&(e=function(t,e){return e.map((function(t){return{cmd:"smoothCubicCurveToRelative",args:t}}))}(0,e[2])),null===e&&(n=r)}return e}function S(){var t,e,i,s,r,o,a;return s=n,r=n,null!==(t=T())&&null!==(e=null!==(e=F())?e:"")&&null!==(i=S())?t=[t,e,i]:(t=null,n=r),null!==t&&(o=t[0],a=t[2],t=[o].concat(a)),null===t&&(n=s),null===t&&(s=n,null!==(t=T())&&(t=function(t,e){return[e]}(0,t)),null===t&&(n=s)),t}function T(){var t,e,i,s,r,o,a;return s=n,r=n,null!==(t=R())&&null!==(e=null!==(e=F())?e:"")&&null!==(i=R())?t=[t,e,i]:(t=null,n=r),null!==t&&(o=t[0],a=t[2],t=[o.x,o.y,a.x,a.y]),null===t&&(n=s),t}function D(){var e,i,s,r,a;if(r=n,a=n,81===t.charCodeAt(n)?(e="Q",n++):(e=null,o('"Q"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=E())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;if(null!==e&&(e=e[2].map((function(t){return{cmd:"quadraticCurveTo",args:t}}))),null===e&&(n=r),null===e){if(r=n,a=n,113===t.charCodeAt(n)?(e="q",n++):(e=null,o('"q"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=E())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;null!==e&&(e=function(t,e){return e.map((function(t){return{cmd:"quadraticCurveToRelative",args:t}}))}(0,e[2])),null===e&&(n=r)}return e}function E(){var t,e,i,s,r,o,a;return s=n,r=n,null!==(t=C())&&null!==(e=null!==(e=F())?e:"")&&null!==(i=E())?t=[t,e,i]:(t=null,n=r),null!==t&&(o=t[0],a=t[2],t=[o].concat(a)),null===t&&(n=s),null===t&&(s=n,null!==(t=C())&&(t=function(t,e){return[e]}(0,t)),null===t&&(n=s)),t}function C(){var t,e,i,s,r,o,a;return s=n,r=n,null!==(t=R())&&null!==(e=null!==(e=F())?e:"")&&null!==(i=R())?t=[t,e,i]:(t=null,n=r),null!==t&&(o=t[0],a=t[2],t=[o.x,o.y,a.x,a.y]),null===t&&(n=s),t}function P(){var e,i,s,r,a;if(r=n,a=n,84===t.charCodeAt(n)?(e="T",n++):(e=null,o('"T"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=k())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;if(null!==e&&(e=e[2].map((function(t){return{cmd:"smoothQuadraticCurveTo",args:[t.x,t.y]}}))),null===e&&(n=r),null===e){if(r=n,a=n,116===t.charCodeAt(n)?(e="t",n++):(e=null,o('"t"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=k())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;null!==e&&(e=function(t,e){return e.map((function(t){return{cmd:"smoothQuadraticCurveToRelative",args:[t.x,t.y]}}))}(0,e[2])),null===e&&(n=r)}return e}function k(){var t,e,i,s,r,o,a;return s=n,r=n,null!==(t=R())&&null!==(e=null!==(e=F())?e:"")&&null!==(i=k())?t=[t,e,i]:(t=null,n=r),null!==t&&(o=t[0],a=t[2],t=[o].concat(a)),null===t&&(n=s),null===t&&(s=n,null!==(t=R())&&(t=function(t,e){return[e]}(0,t)),null===t&&(n=s)),t}function I(){var e,i,s,r,a;if(r=n,a=n,65===t.charCodeAt(n)?(e="A",n++):(e=null,o('"A"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=L())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;if(null!==e&&(e=e[2].map((function(t){return t[2]*=Math.PI/180,{cmd:"ellipticalArcTo",args:t}}))),null===e&&(n=r),null===e){if(r=n,a=n,97===t.charCodeAt(n)?(e="a",n++):(e=null,o('"a"')),null!==e){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i&&null!==(s=L())?e=[e,i,s]:(e=null,n=a)}else e=null,n=a;null!==e&&(e=function(t,e){return e.map((function(t){return t[2]*=Math.PI/180,{cmd:"ellipticalArcToRelative",args:t}}))}(0,e[2])),null===e&&(n=r)}return e}function L(){var t,e,i,s,r,o,a;return s=n,r=n,null!==(t=O())&&null!==(e=null!==(e=F())?e:"")&&null!==(i=L())?t=[t,e,i]:(t=null,n=r),null!==t&&(o=t[0],a=t[2],t=[o].concat(a)),null===t&&(n=s),null===t&&(s=n,null!==(t=O())&&(t=function(t,e){return[e]}(0,t)),null===t&&(n=s)),t}function O(){var t,e,i,s,r,o,a,l,h,u,c,d,p,f,m,g,y,b,v;return d=n,p=n,null!==(t=N())&&null!==(e=null!==(e=F())?e:"")&&null!==(i=N())&&null!==(s=null!==(s=F())?s:"")&&null!==(r=M())&&null!==(o=F())&&null!==(a=B())&&null!==(l=null!==(l=F())?l:"")&&null!==(h=B())&&null!==(u=null!==(u=F())?u:"")&&null!==(c=R())?t=[t,e,i,s,r,o,a,l,h,u,c]:(t=null,n=p),null!==t&&(f=t[0],m=t[2],g=t[4],y=t[6],b=t[8],v=t[10],t=[f,m,g,y,b,v.x,v.y]),null===t&&(n=d),t}function R(){var t,e,i,s,r,o,a;return s=n,r=n,null!==(t=M())&&null!==(e=null!==(e=F())?e:"")&&null!==(i=M())?t=[t,e,i]:(t=null,n=r),null!==t&&(o=t[0],a=t[2],t={x:o,y:a}),null===t&&(n=s),t}function N(){var t,e;return e=n,null!==(t=q())&&(t=parseFloat(t)),null===t&&(n=e),null===t&&(e=n,null!==(t=G())&&(t=function(t,e){return parseInt(e,10)}(0,t)),null===t&&(n=e)),t}function M(){var t,e,i,s,r,o;return i=n,s=n,null!==(t=null!==(t=j())?t:"")&&null!==(e=q())?t=[t,e]:(t=null,n=s),null!==t&&(r=t[0],o=t[1],t=parseFloat(r+o)),null===t&&(n=i),null===t&&(i=n,s=n,null!==(t=null!==(t=j())?t:"")&&null!==(e=G())?t=[t,e]:(t=null,n=s),null!==t&&(t=function(t,e,i){return parseInt(e+i,10)}(0,t[0],t[1])),null===t&&(n=i)),t}function B(){var e,i;return i=n,48===t.charCodeAt(n)?(e="0",n++):(e=null,o('"0"')),null!==e&&(e=!1),null===e&&(n=i),null===e&&(i=n,49===t.charCodeAt(n)?(e="1",n++):(e=null,o('"1"')),null!==e&&(e=!0),null===e&&(n=i)),e}function F(){var t,e,i,s,r;if(r=n,null!==(e=W()))for(t=[];null!==e;)t.push(e),e=W();else t=null;if(null!==t)if(null!==(e=null!==(e=V())?e:"")){for(i=[],s=W();null!==s;)i.push(s),s=W();null!==i?t=[t,e,i]:(t=null,n=r)}else t=null,n=r;else t=null,n=r;if(null===t)if(r=n,null!==(t=V())){for(e=[],i=W();null!==i;)e.push(i),i=W();null!==e?t=[t,e]:(t=null,n=r)}else t=null,n=r;return t}function V(){var e;return 44===t.charCodeAt(n)?(e=",",n++):(e=null,o('","')),e}function q(){var t,e,i,s,r,o;return i=n,s=n,null!==(t=H())&&null!==(e=null!==(e=Y())?e:"")?t=[t,e]:(t=null,n=s),null!==t&&(r=t[0],o=t[1],t=r+o),null===t&&(n=i),null===t&&(i=n,s=n,null!==(t=G())&&null!==(e=Y())?t=[t,e]:(t=null,n=s),null!==t&&(t=function(t,e,i){return e+i}(0,t[0],t[1])),null===t&&(n=i)),t}function H(){var e,i,s,r,a,l,h;return r=n,a=n,null!==(e=null!==(e=G())?e:"")?(46===t.charCodeAt(n)?(i=".",n++):(i=null,o('"."')),null!==i&&null!==(s=G())?e=[e,i,s]:(e=null,n=a)):(e=null,n=a),null!==e&&(l=e[0],h=e[2],e=l+"."+h),null===e&&(n=r),null===e&&(r=n,a=n,null!==(e=G())?(46===t.charCodeAt(n)?(i=".",n++):(i=null,o('"."')),null!==i?e=[e,i]:(e=null,n=a)):(e=null,n=a),null!==e&&(e=function(t,e){return e}(0,e[0])),null===e&&(n=r)),e}function Y(){var e,i,s,r,a,l,h,u;return r=n,a=n,101===t.charCodeAt(n)?(e="e",n++):(e=null,o('"e"')),null===e&&(69===t.charCodeAt(n)?(e="E",n++):(e=null,o('"E"'))),null!==e&&null!==(i=null!==(i=j())?i:"")&&null!==(s=G())?e=[e,i,s]:(e=null,n=a),null!==e&&(l=e[0],h=e[1],u=e[2],e=l+h+u),null===e&&(n=r),e}function j(){var e;return 43===t.charCodeAt(n)?(e="+",n++):(e=null,o('"+"')),null===e&&(45===t.charCodeAt(n)?(e="-",n++):(e=null,o('"-"'))),e}function G(){var t,e,i,s,r,o;return i=n,s=n,null!==(t=z())&&null!==(e=G())?t=[t,e]:(t=null,n=s),null!==t&&(r=t[0],o=t[1],t=r+o),null===t&&(n=i),null===t&&(t=z()),t}function z(){var e;return/^[0-9]/.test(t.charAt(n))?(e=t.charAt(n),n++):(e=null,o("[0-9]")),e}function W(){var e;return 32===t.charCodeAt(n)?(e=" ",n++):(e=null,o('" "')),null===e&&(9===t.charCodeAt(n)?(e="\t",n++):(e=null,o('"\\t"')),null===e&&(13===t.charCodeAt(n)?(e="\r",n++):(e=null,o('"\\r"')),null===e&&(10===t.charCodeAt(n)?(e="\n",n++):(e=null,o('"\\n"'))))),e}function U(t,e){var i=[{cmd:e?"moveToRelative":"moveTo",args:[t[0].x,t[0].y]}];if(t.length>1)for(var n=1;n<t.length;n++)i.push({cmd:e?"lineToRelative":"lineTo",args:[t[n].x,t[n].y]});return i}var X=i[e]();if(null===X||n!==t.length){var K=Math.max(n,s),Q=K<t.length?t.charAt(K):null,Z=function(){for(var e=1,i=1,r=!1,o=0;o<Math.max(n,s);o++){var a=t.charAt(o);"\n"===a?(r||e++,i=1,r=!1):"\r"===a||"\u2028"===a||"\u2029"===a?(e++,i=1,r=!0):(i++,r=!1)}return{line:e,column:i}}();throw new this.SyntaxError(function(t){t.sort();for(var e=null,i=[],n=0;n<t.length;n++)t[n]!==e&&(i.push(t[n]),e=t[n]);return i}(r),Q,K,Z.line,Z.column)}return X},toSource:function(){return this._source},SyntaxError:function(t,e,i,n,s){this.name="SyntaxError",this.expected=t,this.found=e,this.message=function(t,e){var i;switch(t.length){case 0:i="end of input";break;case 1:i=t[0];break;default:i=t.slice(0,t.length-1).join(", ")+" or "+t[t.length-1]}return"Expected "+i+" but "+(e?sn(e):"end of input")+" found."}(t,e),this.offset=i,this.line=n,this.column=s}};rn.SyntaxError.prototype=Error.prototype,ce.register("svgPath",rn);var on=ce.svgPath;const an=Math.random;function ln(t,e){return new te.a(t,e)}function hn(t,e,i,n){return i.copy().subtract(t).multiplyScalar((1-n)/6).add(e)}function un(t,e){const i=this;if(this.subpaths=[],this._bounds=e?e.copy():null,this.invalidatedEmitter=new H,this.resetControlPoints(),this._invalidateListener=this.invalidate.bind(this),this._invalidatingPoints=!1,this._immutable=!1,"object"==typeof t)for(let n=0;n<t.length;n++)this.addSubpath(t[n]);t&&"object"!=typeof t&&_.each(on.parse(t),(function(t){i[t.cmd].apply(i,t.args)})),this.invalidate()}ce.register("Shape",un),Object(z.a)(Object,un,{resetControlPoints:function(){this.lastQuadraticControlPoint=null,this.lastCubicControlPoint=null},setQuadraticControlPoint:function(t){this.lastQuadraticControlPoint=t,this.lastCubicControlPoint=null},setCubicControlPoint:function(t){this.lastQuadraticControlPoint=null,this.lastCubicControlPoint=t},moveTo:function(t,e){return this.moveToPoint(ln(t,e))},moveToRelative:function(t,e){return this.moveToPointRelative(ln(t,e))},moveToPointRelative:function(t){return this.moveToPoint(this.getRelativePoint().plus(t))},moveToPoint:function(t){return this.addSubpath((new Mi).addPoint(t)),this.resetControlPoints(),this},lineTo:function(t,e){return this.lineToPoint(ln(t,e))},lineToRelative:function(t,e){return this.lineToPointRelative(ln(t,e))},lineToPointRelative:function(t){return this.lineToPoint(this.getRelativePoint().plus(t))},lineToPoint:function(t){if(this.hasSubpaths()){const e=this.getLastSubpath().getLastPoint(),i=t,n=new ui(e,i);this.getLastSubpath().addPoint(i),this.addSegmentAndBounds(n)}else this.ensure(t);return this.resetControlPoints(),this},horizontalLineTo:function(t){return this.lineTo(t,this.getRelativePoint().y)},horizontalLineToRelative:function(t){return this.lineToRelative(t,0)},verticalLineTo:function(t){return this.lineTo(this.getRelativePoint().x,t)},verticalLineToRelative:function(t){return this.lineToRelative(0,t)},zigZagTo:function(t,e,i,n,s){return this.zigZagToPoint(new te.a(t,e),i,n,s)},zigZagToPoint:function(t,e,i,n){this.ensure(t);const s=this.getLastPoint(),r=t.minus(s),o=r.normalized(),a=o.perpendicular.times(e);let l;l=n?r.magnitude/(i+.5):r.magnitude/i;for(let h=0;h<i;h++){const t=o.times(h*l).plus(s),e=t.plus(o.times(l/4)).plus(a),i=t.plus(o.times(3*l/4)).minus(a);this.lineToPoint(e),this.lineToPoint(i)}if(n){const t=o.times(i*l).plus(s).plus(o.times(l/4)).plus(a);this.lineToPoint(t)}return this.lineToPoint(t)},quadraticCurveTo:function(t,e,i,n){return this.quadraticCurveToPoint(ln(t,e),ln(i,n))},quadraticCurveToRelative:function(t,e,i,n){return this.quadraticCurveToPointRelative(ln(t,e),ln(i,n))},quadraticCurveToPointRelative:function(t,e){const i=this.getRelativePoint();return this.quadraticCurveToPoint(i.plus(t),i.plus(e))},smoothQuadraticCurveTo:function(t,e){return this.quadraticCurveToPoint(this.getSmoothQuadraticControlPoint(),ln(t,e))},smoothQuadraticCurveToRelative:function(t,e){return this.quadraticCurveToPoint(this.getSmoothQuadraticControlPoint(),ln(t,e).plus(this.getRelativePoint()))},quadraticCurveToPoint:function(t,e){const i=this;this.ensure(t);const n=this.getLastSubpath().getLastPoint(),s=new bi(n,t,e);this.getLastSubpath().addPoint(e);const r=s.getNondegenerateSegments();return _.each(r,(function(t){i.addSegmentAndBounds(t)})),this.setQuadraticControlPoint(t),this},cubicCurveTo:function(t,e,i,n,s,r){return this.cubicCurveToPoint(ln(t,e),ln(i,n),ln(s,r))},cubicCurveToRelative:function(t,e,i,n,s,r){return this.cubicCurveToPointRelative(ln(t,e),ln(i,n),ln(s,r))},cubicCurveToPointRelative:function(t,e,i){const n=this.getRelativePoint();return this.cubicCurveToPoint(n.plus(t),n.plus(e),n.plus(i))},smoothCubicCurveTo:function(t,e,i,n){return this.cubicCurveToPoint(this.getSmoothCubicControlPoint(),ln(t,e),ln(i,n))},smoothCubicCurveToRelative:function(t,e,i,n){return this.cubicCurveToPoint(this.getSmoothCubicControlPoint(),ln(t,e).plus(this.getRelativePoint()),ln(i,n).plus(this.getRelativePoint()))},cubicCurveToPoint:function(t,e,i){const n=this;this.ensure(t);const s=this.getLastSubpath().getLastPoint(),r=new Ei(s,t,e,i).getNondegenerateSegments();return _.each(r,(function(t){n.addSegmentAndBounds(t)})),this.getLastSubpath().addPoint(i),this.setCubicControlPoint(e),this},arc:function(t,e,i,n,s,r){return this.arcPoint(ln(t,e),i,n,s,r)},arcPoint:function(t,e,i,n,s){void 0===s&&(s=!1);const r=new pi(t,e,i,n,s),o=r.getStart(),a=r.getEnd();return this.hasSubpaths()&&this.getLastSubpath().getLength()>0&&!o.equals(this.getLastSubpath().getLastPoint(),0)&&this.addSegmentAndBounds(new ui(this.getLastSubpath().getLastPoint(),o)),this.hasSubpaths()||this.addSubpath(new Mi),this.getLastSubpath().addPoint(o),this.getLastSubpath().addPoint(a),this.addSegmentAndBounds(r),this.resetControlPoints(),this},ellipticalArc:function(t,e,i,n,s,r,o,a){return this.ellipticalArcPoint(ln(t,e),i,n,s,r,o,a)},ellipticalArcPoint:function(t,e,i,n,s,r,o){void 0===o&&(o=!1);const a=new ki(t,e,i,n,s,r,o),l=a.start,h=a.end;return this.hasSubpaths()&&this.getLastSubpath().getLength()>0&&!l.equals(this.getLastSubpath().getLastPoint(),0)&&this.addSegmentAndBounds(new ui(this.getLastSubpath().getLastPoint(),l)),this.hasSubpaths()||this.addSubpath(new Mi),this.getLastSubpath().addPoint(l),this.getLastSubpath().addPoint(h),this.addSegmentAndBounds(a),this.resetControlPoints(),this},close:function(){if(this.hasSubpaths()){const t=this.getLastSubpath(),e=new Mi;t.close(),this.addSubpath(e),e.addPoint(t.getFirstPoint())}return this.resetControlPoints(),this},newSubpath:function(){return this.addSubpath(new Mi),this.resetControlPoints(),this},makeImmutable:function(){return this._immutable=!0,this.notifyInvalidationListeners(),this},isImmutable:function(){return this._immutable},ellipticalArcToRelative:function(t,e,i,n,s,r,o){const a=this.getRelativePoint();return this.ellipticalArcTo(t,e,i,n,s,r+a.x,o+a.y)},ellipticalArcTo:function(t,e,i,n,s,r,o){const a=this,l=new te.a(r,o);this.ensure(l);const h=this.getLastSubpath().getLastPoint();this.getLastSubpath().addPoint(l),t<0&&(t*=-1),e<0&&(e*=-1);let u=t*t,c=e*e;const d=h.minus(l).dividedScalar(2).rotated(-i),p=d.x*d.x,f=d.y*d.y;let m=new te.a(t*d.y/e,-e*d.x/t);const g=p/u+f/c;g>1&&(u=(t*=Math.sqrt(g))*t,c=(e*=Math.sqrt(g))*e,m=new te.a(t*d.y/e,-e*d.x/t)),m.multiplyScalar(Math.sqrt(Math.max(0,(u*c-u*f-c*p)/(u*f+c*p)))),n===s&&m.multiplyScalar(-1);const y=h.blend(l,.5).plus(m.rotated(i));function b(t,e){return(t.x*e.y-t.y*e.x>0?1:-1)*t.angleBetween(e)}const v=new te.a((d.x-m.x)/t,(d.y-m.y)/e),A=new te.a((-d.x-m.x)/t,(-d.y-m.y)/e),w=b(te.a.X_UNIT,v);let x=b(v,A)%(2*Math.PI);!s&&x>0&&(x-=2*Math.PI),s&&x<0&&(x+=2*Math.PI);const S=new ki(y,t,e,i,w,w+x,!s).getNondegenerateSegments();return _.each(S,(function(t){a.addSegmentAndBounds(t)})),this},circle:function(t,e,i){if("object"==typeof t){const n=t;return i=e,this.arcPoint(n,i,0,2*Math.PI,!1).close()}return this.arcPoint(ln(t,e),i,0,2*Math.PI,!1).close()},ellipse:function(t,e,i,n,s){if("object"==typeof t){const r=t;return s=n,n=i,i=e,this.ellipticalArcPoint(r,i,n,s||0,0,2*Math.PI,!1).close()}return this.ellipticalArcPoint(ln(t,e),i,n,s||0,0,2*Math.PI,!1).close()},rect:function(t,e,i,n){const s=new Mi;return this.addSubpath(s),s.addPoint(ln(t,e)),s.addPoint(ln(t+i,e)),s.addPoint(ln(t+i,e+n)),s.addPoint(ln(t,e+n)),this.addSegmentAndBounds(new ui(s.points[0],s.points[1])),this.addSegmentAndBounds(new ui(s.points[1],s.points[2])),this.addSegmentAndBounds(new ui(s.points[2],s.points[3])),s.close(),this.addSubpath(new Mi),this.getLastSubpath().addPoint(ln(t,e)),this.resetControlPoints(),this},roundRect:function(t,e,i,n,s,r){const o=t+s,a=t+i-s,l=e+r,h=e+n-r;return s===r?this.arc(a,l,s,-Math.PI/2,0,!1).arc(a,h,s,0,Math.PI/2,!1).arc(o,h,s,Math.PI/2,Math.PI,!1).arc(o,l,s,Math.PI,3*Math.PI/2,!1).close():this.ellipticalArc(a,l,s,r,0,-Math.PI/2,0,!1).ellipticalArc(a,h,s,r,0,0,Math.PI/2,!1).ellipticalArc(o,h,s,r,0,Math.PI/2,Math.PI,!1).ellipticalArc(o,l,s,r,0,Math.PI,3*Math.PI/2,!1).close(),this},polygon:function(t){const e=t.length;if(e>0){this.moveToPoint(t[0]);for(let i=1;i<e;i++)this.lineToPoint(t[i])}return this.close()},cardinalSpline:function(t,e){e=Object(s.a)({tension:0,isClosedLineSegments:!1},e);const i=t.length,n=e.isClosedLineSegments?i:i-1;for(let s=0;s<n;s++){var r;const o=[(r=0!==s||e.isClosedLineSegments?s!==n-1||e.isClosedLineSegments?[t[(s-1+i)%i],t[s%i],t[(s+1)%i],t[(s+2)%i]]:[t[s-1],t[s],t[s+1],t[s+1]]:[t[0],t[0],t[1],t[2]])[1],hn(r[0],r[1],r[2],e.tension),hn(r[3],r[2],r[1],e.tension),r[2]];0===s&&(this.ensure(o[0]),this.getLastSubpath().addPoint(o[0])),this.cubicCurveToPoint(o[1],o[2],o[3])}return this},copy:function(){return new un(_.map(this.subpaths,(function(t){return t.copy()})),this.bounds)},writeToContext:function(t){const e=this.subpaths.length;for(let i=0;i<e;i++)this.subpaths[i].writeToContext(t)},getSVGPath:function(){let t="";const e=this.subpaths.length;for(let i=0;i<e;i++){const e=this.subpaths[i];if(e.isDrawable()){const i=e.segments[0].start;t+="M "+ce.svgNumber(i.x)+" "+ce.svgNumber(i.y)+" ";for(let n=0;n<e.segments.length;n++)t+=e.segments[n].getSVGPathFragment()+" ";e.isClosed()&&(t+="Z ")}}return t},transformed:function(t){const e=_.map(this.subpaths,(function(e){return e.transformed(t)}));return new un(e,_.reduce(e,(function(t,e){return t.union(e.bounds)}),ne.NOTHING))},nonlinearTransformed:function(t){t=Object(s.a)({minLevels:0,maxLevels:7,distanceEpsilon:.16,curveEpsilon:t&&t.includeCurvature?.002:null},t);const e=_.map(this.subpaths,(function(e){return e.nonlinearTransformed(t)}));return new un(e,_.reduce(e,(function(t,e){return t.union(e.bounds)}),ne.NOTHING))},polarToCartesian:function(t){return this.nonlinearTransformed(Object(s.a)({pointMap:function(t){return te.a.createPolar(t.y,t.x)},methodName:"polarToCartesian"},t))},toPiecewiseLinear:function(t){return this.nonlinearTransformed(t)},containsPoint:function(t){const e=new Ge(t,te.a.X_UNIT);return 0!==this.windingIntersection(e)},intersection:function(t){let e=[];const i=this.subpaths.length;for(let n=0;n<i;n++){const i=this.subpaths[n];if(i.isDrawable()){const n=i.segments.length;for(let s=0;s<n;s++){const n=i.segments[s];e=e.concat(n.intersection(t))}i.hasClosingSegment()&&(e=e.concat(i.getClosingSegment().intersection(t)))}}return _.sortBy(e,(function(t){return t.distance}))},interiorIntersectsLineSegment:function(t,e){const i=t.blend(e,.5);if(this.containsPoint(i))return!0;const n=e.minus(t),s=n.magnitude;if(0===s)return!1;n.normalize();const r=this.intersection(new Ge(t,n));for(let o=0;o<r.length;o++)if(r[o].distance<=s)return!0;return!1},windingIntersection:function(t){let e=0;const i=this.subpaths.length;for(let n=0;n<i;n++){const i=this.subpaths[n];if(i.isDrawable()){const n=i.segments.length;for(let s=0;s<n;s++)e+=i.segments[s].windingIntersection(t);i.hasClosingSegment()&&(e+=i.getClosingSegment().windingIntersection(t))}}return e},intersectsBounds:function(t){if(this.bounds.intersection(t).equals(this.bounds))return!0;const e=new Ge(new te.a(t.minX,t.minY),new te.a(1,0)),i=new Ge(new te.a(t.minX,t.minY),new te.a(0,1)),n=new Ge(new te.a(t.maxX,t.maxY),new te.a(-1,0)),s=new Ge(new te.a(t.maxX,t.maxY),new te.a(0,-1));let r,o;const a=this.intersection(e).concat(this.intersection(n));for(o=0;o<a.length;o++)if(r=a[o].point,r.x>=t.minX&&r.x<=t.maxX)return!0;const l=this.intersection(i).concat(this.intersection(s));for(o=0;o<l.length;o++)if(r=l[o].point,r.y>=t.minY&&r.y<=t.maxY)return!0;return!1},getStrokedShape:function(t){let e=[];const i=ne.NOTHING.copy();let n=this.subpaths.length;for(var s=0;s<n;s++){const i=this.subpaths[s].stroked(t);e=e.concat(i)}for(n=e.length,s=0;s<n;s++)i.includeBounds(e[s].bounds);return new un(e,i)},getOffsetShape:function(t){const e=[],i=ne.NOTHING.copy();let n=this.subpaths.length;for(var s=0;s<n;s++)e.push(this.subpaths[s].offset(t));for(n=e.length,s=0;s<n;s++)i.includeBounds(e[s].bounds);return new un(e,i)},getDashedShape:function(t,e,i){return i=Object(s.a)({distanceEpsilon:1e-10,curveEpsilon:1e-8},i),new un(_.flatten(this.subpaths.map((function(n){return n.dashed(t,e,i.distanceEpsilon,i.curveEpsilon)}))))},getBounds:function(){if(null===this._bounds){const t=ne.NOTHING.copy();_.each(this.subpaths,(function(e){t.includeBounds(e.getBounds())})),this._bounds=t}return this._bounds},get bounds(){return this.getBounds()},getStrokedBounds:function(t){let e=!0;for(var i=0;i<this.subpaths.length;i++){const t=this.subpaths[i];if(t.isDrawable()&&!t.isClosed()){e=!1;break}for(var n=0;n<t.segments.length;n++){if(!t.segments[n].areStrokedBoundsDilated()){e=!1;break}}}if(e)return this.bounds.dilated(t.lineWidth/2);{const e=this.bounds.copy();for(i=0;i<this.subpaths.length;i++){const s=this.subpaths[i].stroked(t);for(n=0;n<s.length;n++)e.includeBounds(s[n].bounds)}return e}},getSimplifiedAreaShape:function(){return nn.simplifyNonZero(this)},getBoundsWithTransform:function(t,e){const i=ne.NOTHING.copy(),n=this.subpaths.length;for(let s=0;s<n;s++){const e=this.subpaths[s];i.includeBounds(e.getBoundsWithTransform(t))}return e&&i.includeBounds(this.getStrokedShape(e).getBoundsWithTransform(t)),i},getApproximateArea:function(t){const e=this.bounds.minX,i=this.bounds.minY,n=this.bounds.width,s=this.bounds.height,r=n*s;let o=0;const a=new te.a(0,0);for(let l=0;l<t;l++)a.x=e+an()*n,a.y=i+an()*s,this.containsPoint(a)&&o++;return r*o/t},getNonoverlappingArea:function(){return Math.abs(_.sum(this.subpaths.map((function(t){return _.sum(t.getFillSegments().map((function(t){return t.getSignedAreaFragment()})))}))))},getArea:function(){return this.getSimplifiedAreaShape().getNonoverlappingArea()},getApproximateCentroid:function(t){const e=this.bounds.minX,i=this.bounds.minY,n=this.bounds.width,s=this.bounds.height;let r=0;const o=new te.a(0,0),a=new te.a(0,0);for(let l=0;l<t;l++)a.x=e+an()*n,a.y=i+an()*s,this.containsPoint(a)&&(o.add(a),r++);return o.dividedScalar(r)},invalidatePoints:function(){this._invalidatingPoints=!0;const t=this.subpaths.length;for(let e=0;e<t;e++)this.subpaths[e].invalidatePoints();this._invalidatingPoints=!1,this.invalidate()},toString:function(){return"new kite.Shape( '"+this.getSVGPath()+"' )"},invalidate:function(){this._invalidatingPoints||(this._bounds=null,this.notifyInvalidationListeners())},notifyInvalidationListeners:function(){this.invalidatedEmitter.emit()},addSegmentAndBounds:function(t){this.getLastSubpath().addSegment(t),this.invalidate()},ensure:function(t){this.hasSubpaths()||(this.addSubpath(new Mi),this.getLastSubpath().addPoint(t))},addSubpath:function(t){return this.subpaths.push(t),t.invalidatedEmitter.addListener(this._invalidateListener),this.invalidate(),this},hasSubpaths:function(){return this.subpaths.length>0},getLastSubpath:function(){return _.last(this.subpaths)},getLastPoint:function(){return this.hasSubpaths()?this.getLastSubpath().getLastPoint():null},getLastSegment:function(){if(!this.hasSubpaths())return null;const t=this.getLastSubpath();return t.isDrawable()?t.getLastSegment():null},getSmoothQuadraticControlPoint:function(){const t=this.getLastPoint();return this.lastQuadraticControlPoint?t.plus(t.minus(this.lastQuadraticControlPoint)):t},getSmoothCubicControlPoint:function(){const t=this.getLastPoint();return this.lastCubicControlPoint?t.plus(t.minus(this.lastCubicControlPoint)):t},getRelativePoint:function(){const t=this.getLastPoint();return t||te.a.ZERO},shapeUnion:function(t){return nn.binaryResult(this,t,nn.BINARY_NONZERO_UNION)},shapeIntersection:function(t){return nn.binaryResult(this,t,nn.BINARY_NONZERO_INTERSECTION)},shapeDifference:function(t){return nn.binaryResult(this,t,nn.BINARY_NONZERO_DIFFERENCE)},shapeXor:function(t){return nn.binaryResult(this,t,nn.BINARY_NONZERO_XOR)},shapeClip:function(t,e){return nn.clipShape(t,this,e)},getArcLength:function(t,e,i){let n=0;for(let s=0;s<this.subpaths.length;s++)n+=this.subpaths[s].getArcLength(t,e,i);return n},serialize:function(){return{type:"Shape",subpaths:this.subpaths.map((function(t){return t.serialize()}))}}}),un.deserialize=function(t){return new un(t.subpaths.map(Mi.deserialize))},un.rectangle=function(t,e,i,n){return(new un).rect(t,e,i,n)},un.rect=un.rectangle,un.roundRect=function(t,e,i,n,s,r){return(new un).roundRect(t,e,i,n,s,r)},un.roundRectangle=un.roundRect,un.roundedRectangleWithRadii=function(t,e,i,n,s){const r=s&&s.topLeft||0,o=s&&s.topRight||0,a=s&&s.bottomLeft||0,l=s&&s.bottomRight||0,h=new ce.Shape,u=t+i,c=e+n;return l>0?h.arc(u-l,c-l,l,0,Math.PI/2,!1):h.moveTo(u,c),a>0?h.arc(t+a,c-a,a,Math.PI/2,Math.PI,!1):h.lineTo(t,c),r>0?h.arc(t+r,e+r,r,Math.PI,3*Math.PI/2,!1):h.lineTo(t,e),o>0?h.arc(u-o,e+o,o,3*Math.PI/2,2*Math.PI,!1):h.lineTo(u,e),h.close(),h},un.boundsOffsetWithRadii=function(t,e,i){const n=t.withOffsets(e.left,e.top,e.right,e.bottom);return un.roundedRectangleWithRadii(n.minX,n.minY,n.width,n.height,i)},un.polygon=function(t){return(new un).polygon(t)},un.bounds=function(t){return(new un).rect(t.minX,t.minY,t.maxX-t.minX,t.maxY-t.minY)},un.lineSegment=function(t,e,i,n){return"number"==typeof t?(new un).moveTo(t,e).lineTo(i,n):(new un).moveToPoint(t).lineToPoint(e)},un.regularPolygon=function(t,e){const i=new un;return _.each(_.range(t),(function(n){const s=te.a.createPolar(e,2*Math.PI*n/t);0===n?i.moveToPoint(s):i.lineToPoint(s)})),i.close()},un.circle=function(t,e,i){return void 0===e?(new un).circle(0,0,t):(new un).circle(t,e,i)},un.ellipse=function(t,e,i,n,s){return void 0===n?(new un).ellipse(0,0,t,e,i):(new un).ellipse(t,e,i,n,s)},un.arc=function(t,e,i,n,s,r){return(new un).arc(t,e,i,n,s,r)},un.union=function(t){return nn.unionNonZero(t)},un.intersection=function(t){return nn.intersectionNonZero(t)},un.xor=function(t){return nn.xorNonZero(t)},un.segments=function(t,e){return new un([new Mi(t,void 0,!!e)])};var cn=un;function dn(t,e,i,n,s){i=i||[],n=n||[],s=s||[],Array.prototype.push.apply(i,t),Array.prototype.push.apply(n,e);t:for(let r=0;r<i.length;r++){const t=i[r];for(let e=0;e<n.length;e++){if(t===n[e]){if(s.push(t),i.splice(r,1),n.splice(e,1),e=0,r===i.length)break t;r-=1}}}return i}a.a.register("arrayDifference",dn);var pn=dn;i(14);function fn(t,e){this.trail=t,this.setBefore(e)}we.register("TrailPointer",fn),Object(z.a)(Object,fn,{copy:function(){return new fn(this.trail.copy(),this.isBefore)},setBefore:function(t){this.isBefore=t,this.isAfter=!t},getRenderSwappedPointer:function(){const t=this.isBefore?this.trail.previous():this.trail.next();return null===t?null:new fn(t,!this.isBefore)},getRenderBeforePointer:function(){return this.isBefore?this:this.getRenderSwappedPointer()},getRenderAfterPointer:function(){return this.isAfter?this:this.getRenderSwappedPointer()},compareRender:function(t){const e=this.getRenderBeforePointer(),i=t.getRenderBeforePointer();return null!==e&&null!==i?e.trail.compare(i.trail):e===i?0:null===e?1:-1},compareNested:function(t){const e=this.trail.compare(t.trail);return 0===e?this.isBefore===t.isBefore?0:this.isBefore?-1:1:this.trail.isExtensionOf(t.trail)?t.isBefore?1:-1:t.trail.isExtensionOf(this.trail)?this.isBefore?-1:1:e},equalsRender:function(t){return 0===this.compareRender(t)},equalsNested:function(t){return 0===this.compareNested(t)},hasTrail:function(){return!!this.trail},nestedForwards:function(){if(this.isBefore)this.trail.lastNode()._children.length>0?this.trail.addDescendant(this.trail.lastNode()._children[0],0):this.setBefore(!1);else{if(0===this.trail.indices.length)return this.trail=null,null;{const t=this.trail.indices[this.trail.indices.length-1];this.trail.removeDescendant(),this.trail.lastNode()._children.length>t+1&&(this.trail.addDescendant(this.trail.lastNode()._children[t+1],t+1),this.setBefore(!0))}}return this},nestedBackwards:function(){if(this.isBefore){if(0===this.trail.indices.length)return this.trail=null,null;{const t=this.trail.indices[this.trail.indices.length-1];this.trail.removeDescendant(),t-1>=0&&(this.trail.addDescendant(this.trail.lastNode()._children[t-1],t-1),this.setBefore(!1))}}else if(this.trail.lastNode()._children.length>0){const t=this.trail.lastNode()._children;this.trail.addDescendant(t[t.length-1],t.length-1)}else this.setBefore(!0);return this},eachNodeBetween:function(t,e){this.eachTrailBetween(t,(function(t){return e(t.lastNode())}))},eachTrailBetween:function(t,e){this.isBefore&&e(this.trail),this.depthFirstUntil(t,(function(t){if(t.isBefore)return e(t.trail)}),!0)},depthFirstUntil:function(t,e,i){this.trail.reindex(),t.trail.reindex();const n=this.copy();n.trail.setMutable();let s=!0;for(;!n.equalsNested(t);){let r=!1;if(s?(i||(r=e(n)),s=!1):r=e(n),r&&n.isBefore){if(n.setBefore(!1),1===n.compareNested(t))break}else n.nestedForwards()}i||e(n)},toString:function(){return"["+(this.isBefore?"before":"after")+" "+this.trail.toString().slice(1)}}),fn.compareNested=function(t,e,i,n){const s=t.compare(i);return 0===s?e===n?0:e?-1:1:t.isExtensionOf(i)?n?1:-1:i.isExtensionOf(t)?e?-1:1:s};var mn=fn;function gn(t){if(t instanceof gn){const e=t;return this.nodes=e.nodes.slice(0),this.length=e.length,this.uniqueId=e.uniqueId,void(this.indices=e.indices.slice(0))}this.nodes=[],this.length=0,this.uniqueId="",this.indices=[];const e=this;if(t)if(t instanceof Wo){const i=t;e.addDescendant(i)}else{const i=t.length;for(let n=0;n<i;n++)e.addDescendant(t[n])}}we.register("Trail",gn),Object(z.a)(Object,gn,{copy:function(){return new gn(this)},isPainted:function(){return this.lastNode().isPainted()},isValid:function(){this.reindex();const t=this.indices.length;for(let e=0;e<t;e++)if(this.indices[e]<0)return!1;return!0},isVisible:function(){let t=this.nodes.length;for(;t--;)if(!this.nodes[t].isVisible())return!1;return!0},isAccessibleVisible:function(){let t=this.nodes.length;for(;t--;)if(!this.nodes[t].isVisible()||!this.nodes[t].getAccessibleVisible())return!1;return!0},getOpacity:function(){let t=1,e=this.nodes.length;for(;e--;)t*=this.nodes[e].getOpacity();return t},isPickable:function(){return!_.some(this.nodes,(function(t){return!1===t.pickable||!1===t.visible}))&&(!!_.some(this.nodes,(function(t){return t._inputListeners.length>0||!0===t.pickableProperty.value}))||this.lastNode()._picker._subtreePickableCount>0)},get:function(t){return t>=0?this.nodes[t]:this.nodes[this.nodes.length+t]},slice:function(t,e){return new gn(this.nodes.slice(t,e))},subtrailTo:function(t,e){return this.slice(0,_.indexOf(this.nodes,t)+(e?0:1))},isEmpty:function(){return 0===this.nodes.length},getMatrix:function(){const t=Ye.identity(),e=this.nodes,i=e.length;for(let n=0;n<i;n++)t.multiplyMatrix(e[n].getMatrix());return t},getAncestorMatrix:function(){const t=Ye.identity(),e=this.nodes,i=e.length;for(let n=1;n<i;n++)t.multiplyMatrix(e[n].getMatrix());return t},getParentMatrix:function(){const t=Ye.identity(),e=this.nodes,i=e.length;for(let n=0;n<i-1;n++)t.multiplyMatrix(e[n].getMatrix());return t},getTransform:function(){return new Ue(this.getMatrix())},getParentTransform:function(){return new Ue(this.getParentMatrix())},addAncestor:function(t,e){if(this.nodes.length){const i=this.nodes[0];this.indices.unshift(void 0===e?_.indexOf(t._children,i):e)}return this.nodes.unshift(t),this.length++,this.uniqueId=this.uniqueId?t.id+"-"+this.uniqueId:t.id+"",this},removeAncestor:function(){return this.nodes.shift(),this.indices.length&&this.indices.shift(),this.length--,this.updateUniqueId(),this},addDescendant:function(t,e){if(this.nodes.length){const i=this.lastNode();this.indices.push(void 0===e?_.indexOf(i._children,t):e)}return this.nodes.push(t),this.length++,this.uniqueId=this.uniqueId?this.uniqueId+"-"+t.id:t.id+"",this},removeDescendant:function(){return this.nodes.pop(),this.indices.length&&this.indices.pop(),this.length--,this.updateUniqueId(),this},addDescendantTrail:function(t){const e=t.length;e&&this.addDescendant(t.nodes[0]);for(let i=1;i<e;i++)this.addDescendant(t.nodes[i],this.indices[i-1])},removeDescendantTrail:function(t){for(let e=t.length-1;e>=0;e--)this.removeDescendant()},reindex:function(){const t=this.length;for(let e=1;e<t;e++){const t=this.indices[e-1],i=this.nodes[e-1];i._children[t]!==this.nodes[e]&&(this.indices[e-1]=_.indexOf(i._children,this.nodes[e]))}},setImmutable:function(){return this},setMutable:function(){return this},areIndicesValid:function(){for(let t=1;t<this.length;t++){const e=this.indices[t-1];if(this.nodes[t-1]._children[e]!==this.nodes[t])return!1}return!0},equals:function(t){if(this.length!==t.length)return!1;for(let e=0;e<this.nodes.length;e++)if(this.nodes[e]!==t.nodes[e])return!1;return!0},upToNode:function(t){_.indexOf(this.nodes,t);return this.slice(0,_.indexOf(this.nodes,t)+1)},isExtensionOf:function(t,e){if(this.length<=t.length-(e?1:0))return!1;for(let i=0;i<t.nodes.length;i++)if(this.nodes[i]!==t.nodes[i])return!1;return!0},containsNode:function(t){return _.includes(this.nodes,t)},getTransformTo:function(t){return new Ue(this.getMatrixTo(t))},getMatrixTo:function(t){this.reindex(),t.reindex();const e=this.getBranchIndexTo(t);let i,n=Ye.IDENTITY;for(i=this.length-1;i>=e;i--)n=this.nodes[i].getMatrix().timesMatrix(n);for(i=e;i<t.length;i++)n=t.nodes[i].getTransform().getInverse().timesMatrix(n);return n},getBranchIndexTo:function(t){let e;const i=Math.min(this.length,t.length);for(e=0;e<i&&this.nodes[e]===t.nodes[e];e++);return e},getLastInputEnabledIndex:function(){let t=-1;for(let e=0;e<this.length&&this.nodes[e].inputEnabled;e++)t=e;return t},getCursorCheckIndex:function(){const t=this.getLastInputEnabledIndex();return t+1<this.length?t+1:t},nodeFromTop:function(t){return this.nodes[this.length-1-t]},lastNode:function(){return this.nodeFromTop(0)},rootNode:function(){return this.nodes[0]},previous:function(){if(this.nodes.length<=1)return null;const t=this.nodeFromTop(0),e=this.nodeFromTop(1),i=_.indexOf(e._children,t),n=this.nodes.slice(0,this.nodes.length-1);if(0===i)return new gn(n);for(n.push(e._children[i-1]);0!==n[n.length-1]._children.length;){const t=n[n.length-1];n.push(t._children[t._children.length-1])}return new gn(n)},previousPainted:function(){let t=this.previous();for(;t&&!t.isPainted();)t=t.previous();return t},next:function(){const t=this.nodes.slice(0),e=this.nodeFromTop(0);if(e._children.length>0)return t.push(e._children[0]),new gn(t);{let e=this.nodes.length-1;for(;e>0;){const i=this.nodes[e],n=this.nodes[e-1];t.pop();const s=_.indexOf(n._children,i);if(s!==n._children.length-1)return t.push(n._children[s+1]),new gn(t);e--}return null}},nextPainted:function(){let t=this.next();for(;t&&!t.isPainted();)t=t.next();return t},eachTrailUnder:function(t){new mn(this,!0).eachTrailBetween(new mn(this,!1),t)},compare:function(t){const e=Math.min(this.indices.length,t.indices.length);for(let i=0;i<e;i++)if(this.indices[i]!==t.indices[i])return this.indices[i]<t.indices[i]?-1:1;return this.nodes.length<t.nodes.length?-1:this.nodes.length>t.nodes.length?1:0},isBefore:function(t){return-1===this.compare(t)},isAfter:function(t){return 1===this.compare(t)},localToGlobalPoint:function(t){return this.getMatrix().timesVector2(t)},localToGlobalBounds:function(t){return t.transformed(this.getMatrix())},globalToLocalPoint:function(t){return this.getTransform().inversePosition2(t)},globalToLocalBounds:function(t){return this.getTransform().inverseBounds2(t)},parentToGlobalPoint:function(t){return this.getParentMatrix().timesVector2(t)},parentToGlobalBounds:function(t){return t.transformed(this.getParentMatrix())},globalToParentPoint:function(t){return this.getParentTransform().inversePosition2(t)},globalToParentBounds:function(t){return this.getParentTransform().inverseBounds2(t)},updateUniqueId:function(){let t="";const e=this.nodes.length;e>0&&(t+=this.nodes[0]._id);for(let i=1;i<e;i++)t+="-"+this.nodes[i]._id;this.uniqueId=t},getUniqueId:function(){return this.uniqueId},toString:function(){return this.reindex(),this.length?"[Trail "+this.indices.join(".")+" "+this.getUniqueId()+"]":"Empty Trail"},toPathString:function(){const t=_.filter(this.nodes,(function(t){return"Node"!==t.constructor.name}));return _.map(t,(function(t){return t.constructor.name})).join("/")},toDebugString:function(){return this.toString()+" "+this.toPathString()}}),gn.eachPaintedTrailBetween=function(t,e,i,n,s){gn.eachTrailBetween(t,e,(function(t){if(t&&t.isPainted())return i(t)}),n,s)},gn.eachTrailBetween=function(t,e,i,n,s){const r=new mn(t?t.copy():new gn(s),!0),o=e?new mn(e.copy(),!0):new mn(new gn(s),!1);n&&(r.nestedForwards(),o.nestedBackwards(),1===r.compareNested(o))||r.depthFirstUntil(o,(function(t){if(t.isBefore)return i(t.trail)}),!1)},gn.branchIndex=function(t,e){let i;const n=Math.min(t.length,e.length);for(i=0;i<n&&t.nodes[i]===e.nodes[i];i++);return i},gn.sharedTrail=function(t,e){return t.slice(0,gn.branchIndex(t,e))},gn.appendAncestorTrailsWithPredicate=function(t,e,i){const n=e.rootNode();i(n)&&t.push(e.copy());const s=n._parents.length;for(let r=0;r<s;r++){const s=n._parents[r];e.addAncestor(s),gn.appendAncestorTrailsWithPredicate(t,e,i),e.removeAncestor()}},gn.appendDescendantTrailsWithPredicate=function(t,e,i){const n=e.lastNode();i(n)&&t.push(e.copy());const s=n._children.length;for(let r=0;r<s;r++){const s=n._children[r];e.addDescendant(s,r),gn.appendDescendantTrailsWithPredicate(t,e,i),e.removeDescendant()}},gn.spannedSubtrees=function(t,e){},gn.fromUniqueId=function(t,e){const i=e.split("-").map((function(t){return parseInt(t,10)}));let n=t;i.shift();const s=[n];for(;i.length>0;){const t=i.shift(),e=(n.accessibleOrder||[]).concat(n.children);for(let i=0;i<e.length;i++)if(null!==e[i]&&e[i].id===t){const t=e[i];s.push(t),n=t;break}}return new gn(s)};var yn=gn;const bn={validateA11yBehaviorFunctionDef:function(t){}};we.register("A11yBehaviorFunctionDef",bn);const vn={};we.register("Renderer",vn),vn.numActiveRenderers=4,vn.bitsPerRenderer=5,vn.bitmaskRendererArea=255,vn.bitmaskCurrentRendererArea=15,vn.bitmaskLacksOffset=65536,vn.bitmaskLacksShift=16,vn.bitmaskNodeDefault=vn.bitmaskRendererArea,vn.bitmaskCanvas=1,vn.bitmaskSVG=2,vn.bitmaskDOM=4,vn.bitmaskWebGL=8,vn.bitmaskSingleCanvas=256,vn.bitmaskSingleSVG=512,vn.bitmaskNotPainted=4096,vn.bitmaskBoundsValid=8192,vn.bitmaskNotAccessible=16384,vn.bitmaskLacksCanvas=vn.bitmaskCanvas<<vn.bitmaskLacksShift,vn.bitmaskLacksSVG=vn.bitmaskSVG<<vn.bitmaskLacksShift,vn.bitmaskLacksDOM=vn.bitmaskDOM<<vn.bitmaskLacksShift,vn.bitmaskLacksWebGL=vn.bitmaskWebGL<<vn.bitmaskLacksShift,vn.isCanvas=function(t){return 0!=(t&vn.bitmaskCanvas)},vn.isSVG=function(t){return 0!=(t&vn.bitmaskSVG)},vn.isDOM=function(t){return 0!=(t&vn.bitmaskDOM)},vn.isWebGL=function(t){return 0!=(t&vn.bitmaskWebGL)};const _n={canvas:vn.bitmaskCanvas,svg:vn.bitmaskSVG,dom:vn.bitmaskDOM,webgl:vn.bitmaskWebGL};vn.fromName=function(t){return _n[t]},vn.stripBitmask=function(t){return t&vn.bitmaskRendererArea},vn.createOrderBitmask=function(t,e,i,n){return(t=t||0)|(e=e||0)<<5|(i=i||0)<<10|(n=n||0)<<15},vn.bitmaskOrder=function(t,e){return e>0&&(t>>=5*e),t&vn.bitmaskCurrentRendererArea},vn.bitmaskOrderFirst=function(t){return t&vn.bitmaskCurrentRendererArea},vn.bitmaskOrderSecond=function(t){return t>>5&vn.bitmaskCurrentRendererArea},vn.bitmaskOrderThird=function(t){return t>>10&vn.bitmaskCurrentRendererArea},vn.bitmaskOrderFourth=function(t){return t>>15&vn.bitmaskCurrentRendererArea},vn.pushOrderBitmask=function(t,e){let i=e;const n=vn.bitsPerRenderer*vn.numActiveRenderers;for(let s=0;s<=n;s+=vn.bitsPerRenderer){const n=t>>s&vn.bitmaskCurrentRendererArea;if(n===i)return t;if(0===n)return t|=i<<s;if(t&=~(vn.bitmaskCurrentRendererArea<<s),t|=i<<s,i=n,i===e)return t}throw new Error("pushOrderBitmask overflow")},vn.createSelfDrawable=function(t,e,i,n){let s;if(vn.isCanvas(i))s=e.createCanvasDrawable(i,t);else if(vn.isSVG(i))s=e.createSVGDrawable(i,t);else if(vn.isDOM(i))s=e.createDOMDrawable(i,t);else{if(!vn.isWebGL(i))throw new Error("Unrecognized renderer: "+i);s=e.createWebGLDrawable(i,t)}return s.setFittable(n),s},vn.webglCustom=1,vn.webglTexturedTriangles=2,vn.webglVertexColorPolygons=3;var An=vn;function wn(t){this.node=t,this.accessibleDisplays=[]}we.register("PDOMDisplaysInfo",wn),Object(z.a)(Object,wn,{onAddChild:function(t){t._accessibleDisplaysInfo.canHaveAccessibleDisplays()&&t._accessibleDisplaysInfo.addAccessibleDisplays(this.accessibleDisplays)},onRemoveChild:function(t){t._accessibleDisplaysInfo.canHaveAccessibleDisplays()&&t._accessibleDisplaysInfo.removeAccessibleDisplays(this.accessibleDisplays)},onSummaryChange:function(t,e){if(this.node.visible&&this.node.accessibleVisible){const i=!(An.bitmaskNotAccessible&t),n=!(An.bitmaskNotAccessible&e);n&&!i&&this.addAllAccessibleDisplays(),!n&&i&&this.removeAllAccessibleDisplays()}},onVisibilityChange:function(t){this.node.accessibleVisible&&!this.node._rendererSummary.isNotAccessible()&&(t?this.addAllAccessibleDisplays():this.removeAllAccessibleDisplays())},onAccessibleVisibilityChange:function(t){this.node.visible&&!this.node._rendererSummary.isNotAccessible()&&(t?this.addAllAccessibleDisplays():this.removeAllAccessibleDisplays())},onAddedRootedDisplay:function(t){t._accessible&&this.canHaveAccessibleDisplays()&&this.addAccessibleDisplays([t])},onRemovedRootedDisplay:function(t){t._accessible&&this.canHaveAccessibleDisplays()&&this.removeAccessibleDisplays([t])},canHaveAccessibleDisplays:function(){return this.node.visible&&this.node.accessibleVisible&&!this.node._rendererSummary.isNotAccessible()},addAllAccessibleDisplays:function(){let t;const e=[];for(t=0;t<this.node._parents.length;t++)Array.prototype.push.apply(e,this.node._parents[t]._accessibleDisplaysInfo.accessibleDisplays);for(t=0;t<this.node._rootedDisplays.length;t++){const i=this.node._rootedDisplays[t];i._accessible&&e.push(i)}this.addAccessibleDisplays(e)},removeAllAccessibleDisplays:function(){this.removeAccessibleDisplays(this.accessibleDisplays.slice())},addAccessibleDisplays:function(t){if(0!==t.length){Array.prototype.push.apply(this.accessibleDisplays,t);for(let e=0;e<this.node._children.length;e++){this.node._children[e]._accessibleDisplaysInfo.canHaveAccessibleDisplays()&&this.node._children[e]._accessibleDisplaysInfo.addAccessibleDisplays(t)}this.node.accessibleDisplaysEmitter.emit()}},removeAccessibleDisplays:function(t){if(0!==t.length){let e;for(e=t.length-1;e>=0;e--){this.accessibleDisplays.lastIndexOf(t[e]);this.accessibleDisplays.splice(e,1)}for(e=0;e<this.node._children.length;e++){const i=this.node._children[e];i._accessibleDisplaysInfo.canHaveAccessibleDisplays()&&!i._isGettingRemovedFromParent&&i._accessibleDisplaysInfo.removeAccessibleDisplays(t)}this.node.accessibleDisplaysEmitter.emit()}}});var xn=wn;const Sn=navigator.userAgent;function Tn(t){return En()===t}function Dn(){return!!(window.phet&&phet.chipper&&phet.chipper.queryParameters&&phet.chipper.queryParameters["phet-app"]||(Sn.match(/(iPod|iPhone|iPad)/)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>=2)&&Sn.match(/AppleWebKit/))}function En(){let t=-1,e=null;return"Microsoft Internet Explorer"===navigator.appName?(e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!==e.exec(Sn)&&(t=parseFloat(RegExp.$1))):"Netscape"===navigator.appName&&(e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==e.exec(Sn)&&(t=parseFloat(RegExp.$1))),t}const Cn={firefox:Sn.toLowerCase().indexOf("firefox")>-1,mobileSafari:Dn(),safari5:!!(Sn.match(/Version\/5\./)&&Sn.match(/Safari\//)&&Sn.match(/AppleWebKit/)),safari6:!!(Sn.match(/Version\/6\./)&&Sn.match(/Safari\//)&&Sn.match(/AppleWebKit/)),safari7:!!(Sn.match(/Version\/7\./)&&Sn.match(/Safari\//)&&Sn.match(/AppleWebKit/)),safari10:!!(Sn.match(/Version\/10\./)&&Sn.match(/Safari\//)&&Sn.match(/AppleWebKit/)),safari11:!!(Sn.match(/Version\/11\./)&&Sn.match(/Safari\//)&&Sn.match(/AppleWebKit/)),safari9:!!(Sn.match(/Version\/9\./)&&Sn.match(/Safari\//)&&Sn.match(/AppleWebKit/)),safari:Dn()||!!(Sn.match(/Version\//)&&Sn.match(/Safari\//)&&Sn.match(/AppleWebKit/)),ie:-1!==En(),ie9:Tn(9),ie10:Tn(10),ie11:Tn(11),android:Sn.indexOf("Android")>0,edge:!!Sn.match(/Edge\//),chromium:/chrom(e|ium)/.test(Sn.toLowerCase())&&!Sn.match(/Edge\//)};a.a.register("platform",Cn);var Pn=Cn;function kn(t,e){const i=this;e=Object(s.a)({isStatic:!1},e),this._isStatic=e.isStatic,this.trail=t,this._matrices=null,this._dirtyIndex=0,this._listeners=[],this._nodeTransformListeners=[];for(let n=1;n<this.trail.length;n++){const e=function(t){return function(){i.onTransformChange(t)}}(n-1);this._nodeTransformListeners.push(e),t.nodes[n].transformEmitter.addListener(e)}}we.register("TransformTracker",kn),Object(z.a)(Object,kn,{dispose:function(){for(let t=1;t<this.trail.length;t++){const e=this._nodeTransformListeners[t-1];this.trail.nodes[t].transformEmitter.hasListener(e)&&this.trail.nodes[t].transformEmitter.removeListener(e)}},addListener:function(t){this._listeners.push(t)},removeListener:function(t){const e=_.indexOf(this._listeners,t);this._listeners.splice(e,1)},notifyListeners:function(){let t=this._listeners;this._isStatic||(t=t.slice());const e=t.length;for(let i=0;i<e;i++)t[i]()},onTransformChange:function(t){this._dirtyIndex=Math.min(this._dirtyIndex,t),this.notifyListeners()},getMatrix:function(){if(null===this._matrices){this._matrices=[];for(let t=1;t<this.trail.length;t++)this._matrices.push(new Ye)}if(this._matrices.length<=0)return Ye.IDENTITY;const t=this._matrices.length;for(let e=this._dirtyIndex;e<t;e++){const t=this.trail.nodes[e+1].matrix;0===e?this._matrices[e].set(t):(this._matrices[e].set(this._matrices[e-1]),this._matrices[e].multiplyMatrix(t))}return this._dirtyIndex=t,this._matrices[t-1]},get matrix(){return this.getMatrix()}});var In=kn;function Ln(t,e){return void 0!==t[e]?e:void 0!==t["moz"+(e=e.charAt(0).toUpperCase()+e.slice(1))]?"moz"+e:void 0!==t["Moz"+e]?"Moz"+e:void 0!==t["webkit"+e]?"webkit"+e:void 0!==t["ms"+e]?"ms"+e:void 0!==t["o"+e]?"o"+e:void 0}a.a.register("detectPrefix",Ln);var On=Ln;function Rn(t,e,i){return void 0!==t["on"+e]?e:void 0!==t["onmoz"+e]?"moz"+e:void 0!==t["onMoz"+e]?"Moz"+e:void 0!==t["onwebkit"+e]?"webkit"+e:void 0!==t["onms"+e]?"ms"+e:void 0!==t["ono"+e]?"o"+e:void 0}a.a.register("detectPrefixEvent",Rn);var Nn=Rn;const Mn=On(document,"exitFullscreen")||On(document,"cancelFullScreen"),Bn=On(document,"fullscreenElement")||On(document,"fullScreenElement"),Fn=On(document,"fullscreenEnabled")||On(document,"fullScreenEnabled");let Vn=Nn(document,"fullscreenchange");"msfullscreenchange"===Vn&&(Vn="MSFullscreenChange");var qn={isFullScreen:function(){return!!document[Bn]},isFullScreenEnabled:function(){return document[Fn]&&!Pn.safari7},enterFullScreen:function(t){const e=On(document.body,"requestFullscreen")||On(document.body,"requestFullScreen");if(Pn.ie9||Pn.ie10){if(void 0!==window.ActiveXObject){const t=new window.ActiveXObject("WScript.Shell");null!==t&&t.SendKeys("{F11}")}}else t.domElement[e]&&t.domElement[e]()},exitFullScreen:function(){document[Mn]&&document[Mn]()},toggleFullScreen:function(t){qn.isFullScreen()?qn.exitFullScreen():qn.enterFullScreen(t)},isFullScreenProperty:new Ot(!1)};document.addEventListener(Vn,(function(t){qn.isFullScreenProperty.set(qn.isFullScreen())})),we.register("FullScreen",qn);var Hn=qn;const Yn=document.createElement("style");Yn.type="text/css",document.head.appendChild(Yn);const jn=document.styleSheets[document.styleSheets.length-1],Gn={stylesheet:jn,styleElement:Yn,addRule:function(t){this.stylesheet.insertRule(t,0)}};we.register("SceneryStyle",Gn);var zn=Gn;zn.addRule(".pdom-sibling{position: fixed;pointer-events: none;top: 0px;left: 0px;transform-origin: left top 0px;border-width: 0px;border: 0px;padding: 1px 1px;margin: 0px;white-space: nowrap;outline: none;box-shadow:none;border-color:transparent;font-size: 1px;clip: rect(1px, 1px, 1px, 1px);}"),zn.addRule(".pdom-root{position: absolute;z-index: 1;opacity: 0.0001;}");const Wn={SIBLING_CLASS_NAME:"pdom-sibling",ROOT_CLASS_NAME:"pdom-root"};we.register("PDOMSiblingStyle",Wn);var Un=Wn;function Xn(t){return t.replace(/\u202a|\u202b|\u202c/g,"")}a.a.register("stripEmbeddingMarks",Xn);var Kn=Xn;const Qn=["A","AREA","INPUT","SELECT","TEXTAREA","BUTTON","IFRAME"],Zn=["B","STRONG","I","EM","MARK","SMALL","DEL","INS","SUB","SUP","BR"],Jn=["INPUT"];function $n(t){const e=t.getElementsByTagName("*"),i=[];for(let n=0;n<e.length;n++)e[n].nodeType===Node.ELEMENT_NODE&&(i[n]=e[n]);return i}function ts(t,e){const i=$n(e||document.body),n=document.activeElement,s="NEXT"===t?1:-1;let r=i.indexOf(n)+s;for(;r<i.length&&r>=0;){const t=i[r];if(r+=s,is.isElementFocusable(t))return t}return n}function es(t){return!_.includes(Jn,t.toUpperCase())}var is={getNextFocusable:function(t){return ts("NEXT",t)},getPreviousFocusable:function(t){return ts("PREVIOUS",t)},getRandomFocusable:function(t){const e=$n(document.body),i=[];for(let n=0;n<e.length;n++)is.isElementFocusable(e[n])&&i.push(e[n]);return i[t.nextInt(i.length)]},containsFormattingTags:function(t){if(null===t)return!1;let e=0;const i=[],n=[];for(;e<t.length;){const s=t.indexOf("<",e),r=t.indexOf(">",e);s>-1&&(i.push(s),e=s+1),r>-1?(n.push(r),e=r+1):e++}if(i.length!==n.length||0===i.length)return!1;let s=!0;const r=t.toUpperCase();for(let o=0;o<i.length;o++){let t=r.substring(i[o]+1,n[o]);t=t.replace("/","");const e=t.replace(/^\s+/,"");t.length-e.length>0||(_.includes(Zn,t)||(s=!1))}return s},setTextContent:function(t,e){const i=Kn(e);y(i,m.STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR),es(t.tagName)&&(is.containsFormattingTags(i)?t.innerHTML=i:t.textContent=i)},tagIsDefaultFocusable:function(t){return _.includes(Qn,t.toUpperCase())},isElementFocusable:function(t){return!!document.body.contains(t)&&(!function t(e){return!!e.hidden||e!==document.body&&t(e.parentElement)}(t)&&(!_.includes(Zn,t.tagName)&&"true"===t.getAttribute("data-focusable")))},tagNameSupportsContent:function(t){return es(t)},removeElements:function(t,e){for(let i=0;i<e.length;i++){const n=e[i];t.removeChild(n)}},insertElements:function(t,e,i){for(let n=0;n<e.length;n++){const s=e[n];t.insertBefore(s,i||null)}},validateAssociationObject:function(t){Object.keys(t)},createElement:function(t,e,i){const n=(i=Object(s.a)({namespace:null,id:null,trailId:null},i)).namespace?document.createElementNS(i.namespace,t):document.createElement(t);return i.trailId&&n.setAttribute(is.DATA_TRAIL_ID,i.trailId),i.id&&(n.id=i.id),is.overrideFocusWithTabIndex(n,e),n.className=Un.SIBLING_CLASS_NAME,n},overrideFocusWithTabIndex:function(t,e){is.tagIsDefaultFocusable(t.tagName)!==e?t.tabIndex=e?0:-1:t.removeAttribute("tabindex"),t.setAttribute("data-focusable",e)},TAGS:{INPUT:"INPUT",LABEL:"LABEL",BUTTON:"BUTTON",TEXTAREA:"TEXTAREA",SELECT:"SELECT",OPTGROUP:"OPTGROUP",DATALIST:"DATALIST",OUTPUT:"OUTPUT",DIV:"DIV",A:"A",P:"P",B:"B",STRONG:"STRONG",I:"I",EM:"EM",MARK:"MARK",SMALL:"SMALL",DEL:"DEL",INS:"INS",SUB:"SUB",SUP:"SUP"},FORM_ELEMENTS:["INPUT","BUTTON","TEXTAREA","SELECT","OPTGROUP","DATALIST","OUTPUT","A"],DEFAULT_CONTAINER_TAG_NAME:"DIV",DEFAULT_DESCRIPTION_TAG_NAME:"P",DEFAULT_LABEL_TAG_NAME:"P",ASSOCIATION_ATTRIBUTES:["aria-labelledby","aria-describedby","aria-activedescendant"],INPUT_TYPES_THAT_SUPPORT_CHECKED:["RADIO","CHECKBOX"],DOM_EVENTS:["focusin","focusout","input","change","click","keydown","keyup"],DATA_TRAIL_ID:"data-trail-id",DATA_EXCLUDE_FROM_INPUT:"data-exclude-from-input"};we.register("PDOMUtils",is);var ns=is;const ss=ns.TAGS.LABEL,rs=ns.TAGS.INPUT,os={attributes:!1,childList:!0,characterData:!0};let as=1;const ls=new ne(0,0,0,0),hs=new ne(0,0,0,0),us=new Ye,cs=new Ye,ds=new Ye;function ps(t,e){this.initializeAccessiblePeer(t,e)}function fs(t,e,i,n){(n=Object(s.a)({siblingName:null,excludeFromInput:!1},n)).id=n.siblingName?`${n.siblingName}-${i}`:i,n.trailId=i;const r=ns.createElement(t,e,n);return n.excludeFromInput&&r.setAttribute(ns.DATA_EXCLUDE_FROM_INPUT,!0),r}function ms(t,e,i){return us.setToTranslation(i.minX,i.minY),cs.setToScale(i.width/t,i.height/e),us.multiplyMatrix(cs).multiplyMatrix(ds)}function gs(t){let e=t.clientWidth,i=t.clientHeight;if(0===e&&0===i){const n=t.getBoundingClientRect();e=n.width,i=n.height}return{width:e,height:i}}function ys(t,e){t.style.top=e.top+"px",t.style.left=e.left+"px",t.style.width=e.width+"px",t.style.height=e.height+"px"}we.register("PDOMPeer",ps),Object(z.a)(Object,ps,{initializeAccessiblePeer:function(t,e){return e=Object(s.a)({primarySibling:null},e),this.id=this.id||as++,this.accessibleInstance=t,this.node=this.accessibleInstance.node,this.display=t.display,this.trail=t.trail,this.visible=null,this.focusable=null,this._labelSibling=null,this._descriptionSibling=null,this._containerParent=null,this.topLevelElements=[],this.positionDirty=!1,this.childPositionDirty=!1,this.mutationObserver=this.mutationObserver||new MutationObserver(this.invalidateCSSPositioning.bind(this)),this.transformListener=this.transformListener||this.invalidateCSSPositioning.bind(this),this.accessibleInstance.transformTracker.addListener(this.transformListener),this.isDisposed=!1,this.accessibleInstance.isRootInstance&&(this._primarySibling=e.primarySibling,this._primarySibling.className=Un.ROOT_CLASS_NAME),this},update:function(){const t=this.accessibleInstance.trail.getUniqueId();let e=this.node.getBaseOptions();null!==this.node.accessibleName&&(e=this.node.accessibleNameBehavior(this.node,e,this.node.accessibleName)),null!==this.node.accessibleHeading&&(e=this.node.accessibleHeadingBehavior(this.node,e,this.node.accessibleHeading)),null!==this.node.helpText&&(e=this.node.helpTextBehavior(this.node,e,this.node.helpText)),this._primarySibling=fs(e.tagName,this.node.focusable,t,{namespace:e.accessibleNamespace}),e.containerTagName&&(this._containerParent=fs(e.containerTagName,!1,t,{siblingName:"container"})),e.labelTagName&&(this._labelSibling=fs(e.labelTagName,!1,t,{siblingName:"label",excludeFromInput:this.node.excludeLabelSiblingFromInput})),e.descriptionTagName&&(this._descriptionSibling=fs(e.descriptionTagName,!1,t,{siblingName:"description"})),this.orderElements(e),this.mutationObserver.disconnect(),this.mutationObserver.observe(this._primarySibling,os),e.labelContent&&null!==e.labelTagName&&this.setLabelSiblingContent(e.labelContent),e.innerContent&&null!==e.tagName&&this.setPrimarySiblingContent(e.innerContent),e.descriptionContent&&null!==e.descriptionTagName&&this.setDescriptionSiblingContent(e.descriptionContent),e.tagName.toUpperCase()===rs&&e.inputType&&this.setAttributeToElement("type",e.inputType),this.setFocusable(this.node.focusable),this.onAriaLabelledbyAssociationChange(),this.onAriaDescribedbyAssociationChange(),this.onActiveDescendantAssociationChange(),this.onAttributeChange(e),this.onInputValueChange(),this.node.updateOtherNodesAriaLabelledby(),this.node.updateOtherNodesAriaDescribedby(),this.node.updateOtherNodesActiveDescendant()},orderElements:function(t){this._containerParent?(this._containerParent.insertBefore(this._primarySibling,this._containerParent.children[0]||null),this.topLevelElements=[this._containerParent]):this.topLevelElements=[this._labelSibling,this._descriptionSibling,this._primarySibling].filter(_.identity),this._labelSibling&&this.arrangeContentElement(this._labelSibling,t.appendLabel),this._descriptionSibling&&this.arrangeContentElement(this._descriptionSibling,t.appendDescription)},getPrimarySibling:function(){return this._primarySibling},get primarySibling(){return this.getPrimarySibling()},getLabelSibling:function(){return this._labelSibling},get labelSibling(){return this.getLabelSibling()},getDescriptionSibling:function(){return this._descriptionSibling},get descriptionSibling(){return this.getDescriptionSibling()},getContainerParent:function(){return this._containerParent},get containerParent(){return this.getContainerParent()},onAriaLabelledbyAssociationChange:function(){this.removeAttributeFromAllElements("aria-labelledby");for(let t=0;t<this.node.ariaLabelledbyAssociations.length;t++){const e=this.node.ariaLabelledbyAssociations[t];this.setAssociationAttribute("aria-labelledby",e)}},onAriaDescribedbyAssociationChange:function(){this.removeAttributeFromAllElements("aria-describedby");for(let t=0;t<this.node.ariaDescribedbyAssociations.length;t++){const e=this.node.ariaDescribedbyAssociations[t];this.setAssociationAttribute("aria-describedby",e)}},onActiveDescendantAssociationChange:function(){this.removeAttributeFromAllElements("aria-activedescendant");for(let t=0;t<this.node.activeDescendantAssociations.length;t++){const e=this.node.activeDescendantAssociations[t];this.setAssociationAttribute("aria-activedescendant",e)}},onAttributeChange:function(t){for(let e=0;e<this.node.accessibleAttributes.length;e++){const i=this.node.accessibleAttributes[e],n=i.attribute;let s=i.value;"aria-label"===n&&t&&"string"==typeof t.ariaLabel&&"PRIMARY_SIBLING"===i.options.elementName&&(s=t.ariaLabel),this.setAttributeToElement(n,s,i.options)}},onInputValueChange:function(){if(null===this.node.inputValue)this.removeAttributeFromElement("value");else{const t=this.node.inputValue+"";this.setAttributeToElement("value",t,{asProperty:!0})}},getElementByName:function(t){return t===ps.PRIMARY_SIBLING?this._primarySibling:t===ps.LABEL_SIBLING?this._labelSibling:t===ps.DESCRIPTION_SIBLING?this._descriptionSibling:t===ps.CONTAINER_PARENT?this._containerParent:void 0},setAttributeToElement:function(t,e,i){const n=(i=Object(s.a)({namespace:null,asProperty:!1,elementName:"PRIMARY_SIBLING",element:null},i)).element||this.getElementByName(i.elementName);i.namespace?n.setAttributeNS(i.namespace,t,e):i.asProperty?n[t]=e:n.setAttribute(t,e)},removeAttributeFromElement:function(t,e){const i=(e=Object(s.a)({namespace:null,elementName:"PRIMARY_SIBLING",element:null},e)).element||this.getElementByName(e.elementName);e.namespace?i.removeAttributeNS(e.namespace,t):i.removeAttribute(t)},removeAttributeFromAllElements:function(t){this._primarySibling&&this._primarySibling.removeAttribute(t),this._labelSibling&&this._labelSibling.removeAttribute(t),this._descriptionSibling&&this._descriptionSibling.removeAttribute(t),this._containerParent&&this._containerParent.removeAttribute(t)},setAssociationAttribute:function(t,e){const i=e.otherNode.getAccessibleInstances();if(i.length>0){const n=i[0];n===this.accessibleInstance&&(n.peer=this);const s=n.peer.getElementByName(e.otherElementName),r=this.getElementByName(e.thisElementName);if(r&&s){const i=r.getAttribute(t)||"",n=[i.trim(),s.id].join(" ").trim();this.setAttributeToElement(t,n,{elementName:e.thisElementName})}}},arrangeContentElement:function(t,e){if(this.topLevelElements[0]===this._containerParent)e?this._containerParent.appendChild(t):this._containerParent.insertBefore(t,this._primarySibling);else{Object(wt.a)(this.topLevelElements,t);const i=this.topLevelElements.indexOf(this._primarySibling),n=e?this.topLevelElements.length:i;this.topLevelElements.splice(n,0,t)}},isVisible:function(){return null===this.visible||this.visible},setVisible:function(t){if(this.visible!==t){this.visible=t;for(let e=0;e<this.topLevelElements.length;e++){const i=this.topLevelElements[e];t?this.removeAttributeFromElement("hidden",{element:i}):this.setAttributeToElement("hidden","",{element:i})}this.invalidateCSSPositioning()}},isFocused:function(){const t=we.PDOMInstance.guessVisualTrail(this.trail,this.display.rootNode);return we.Display.focusProperty.value&&we.Display.focusProperty.value.trail.equals(t)},focus:function(){this._primarySibling.focus()},blur:function(){if(document.activeElement===this._primarySibling){const t=this;Pn.ie11&&Hn.isFullScreen()?window.setTimeout((function(){t._primarySibling&&t._primarySibling.blur()}),0):this._primarySibling.blur()}},setFocusable:function(t){const e=this.isFocused();this.focusable!==t&&(this.focusable=t,ns.overrideFocusWithTabIndex(this.primarySibling,t),e&&!t&&this.blur(),this.invalidateCSSPositioning())},setLabelSiblingContent:function(t){this._labelSibling&&(ns.setTextContent(this._labelSibling,t),this._labelSibling.tagName.toUpperCase()===ss&&this.setAttributeToElement("for",this._primarySibling.id,{elementName:ps.LABEL_SIBLING}))},setDescriptionSiblingContent:function(t){this._descriptionSibling&&ns.setTextContent(this._descriptionSibling,t)},setPrimarySiblingContent:function(t){this._primarySibling&&ns.setTextContent(this._primarySibling,t)},setPDOMTransformSourceNode:function(t){this.accessibleInstance.transformTracker.removeListener(this.transformListener),this.accessibleInstance.updateTransformTracker(t),this.accessibleInstance.transformTracker.addListener(this.transformListener),this.invalidateCSSPositioning()},invalidateCSSPositioning:function(){if(!this.positionDirty&&this.focusable){this.positionDirty=!0;let t=this.accessibleInstance.parent;for(;t;)t.peer.childPositionDirty=!0,t=t.parent}},positionElements:function(){if(this.node.focusable){const t=this.node.pdomTransformSourceNode||this.node;if(ls.set(t.localBounds),ls.isFinite()){ls.transform(this.accessibleInstance.transformTracker.getMatrix());const t=this.display.bounds;if(t.intersectsBounds(ls)){ls.constrainBounds(t);let e=gs(this._primarySibling),i=e.width,n=e.height;i>0&&n>0&&(hs.setMinMax(0,0,i,n),hs.transform(ms(i,n,ls)),ys(this._primarySibling,hs)),this.labelSibling&&(e=gs(this._labelSibling),i=e.width,n=e.height,n>0&&i>0&&(hs.setMinMax(0,0,i,n),hs.transform(ms(i,n,ls)),ys(this._labelSibling,hs)))}}}this.positionDirty=!1},updateSubtreePositioning:function(){this.childPositionDirty=!1,this.positionDirty&&this.positionElements();for(let t=0;t<this.accessibleInstance.children.length;t++){const e=this.accessibleInstance.children[t].peer;(e.positionDirty||e.childPositionDirty)&&this.accessibleInstance.children[t].peer.updateSubtreePositioning()}},dispose:function(){this.isDisposed=!0,this.blur(),this._primarySibling.removeEventListener("blur",this.blurEventListener),this._primarySibling.removeEventListener("focus",this.focusEventListener),this.accessibleInstance.transformTracker.removeListener(this.transformListener),this.mutationObserver.disconnect(),this.accessibleInstance=null,this.node=null,this.display=null,this.trail=null,this._primarySibling=null,this._labelSibling=null,this._descriptionSibling=null,this._containerParent=null,this.focusable=null,this.freeToPool()}},{PRIMARY_SIBLING:"PRIMARY_SIBLING",LABEL_SIBLING:"LABEL_SIBLING",DESCRIPTION_SIBLING:"DESCRIPTION_SIBLING",CONTAINER_PARENT:"CONTAINER_PARENT"}),$t.a.mixInto(ps,{initalize:ps.prototype.initializeAccessiblePeer});var bs=ps;let vs=1;function _s(t,e,i){this.initializeAccessibleInstance(t,e,i)}we.register("PDOMInstance",_s),Object(z.a)(Object,_s,{initializeAccessibleInstance:function(t,e,i){if(this.id=this.id||vs++,this.parent=t,this.display=e,this.trail=i,this.isRootInstance=null===t,this.node=this.isRootInstance?null:i.lastNode(),this.children=Ke(this.children),this.node&&this.node.addAccessibleInstance(this),this.peer=null,this.invisibleCount=0,this.relativeNodes=[],this.relativeVisibilities=[],this.relativeListeners=[],this.transformTracker=null,this.updateTransformTracker(this.node?this.node.pdomTransformSourceNode:null),this.isDisposed=!1,this.isRootInstance){const t=document.createElement("div");this.peer=bs.createFromPool(this,{primarySibling:t})}else{this.peer=bs.createFromPool(this),this.peer.update();const t=this.parent.trail;for(let n=t.length;n<i.length;n++){const s=i.nodes[n];this.relativeNodes.push(s);const r=s._accessibleDisplaysInfo.accessibleDisplays,o=_.includes(r,e);this.relativeVisibilities.push(o),o||this.invisibleCount++;const a=this.checkAccessibleDisplayVisibility.bind(this,n-t.length);s.accessibleDisplaysEmitter.addListener(a),this.relativeListeners.push(a)}this.updateVisibility()}return this},addConsecutiveInstances:function(t){const e=this.children.length>0;Array.prototype.push.apply(this.children,t);for(let i=0;i<t.length;i++)ns.insertElements(this.peer.primarySibling,t[i].peer.topLevelElements);e&&this.sortChildren()},removeInstancesForTrail:function(t){for(let e=0;e<this.children.length;e++){const i=this.children[e],n=i.trail;let s=n.length<t.length;if(!s)for(let e=this.trail.length;e<t.length;e++)if(t.nodes[e]!==n.nodes[e]){s=!0;break}s||(this.children.splice(e,1),i.dispose(),e-=1)}},removeAllChildren:function(){for(;this.children.length;)this.children.pop().dispose()},findChildWithTrail:function(t){for(let e=0;e<this.children.length;e++){const i=this.children[e];if(i.trail.equals(t))return i}return null},removeSubtree:function(t){for(let e=this.children.length-1;e>=0;e--){const i=this.children[e];i.trail.isExtensionOf(t,!0)&&(this.children.splice(e,1),i.dispose())}},checkAccessibleDisplayVisibility:function(t){const e=_.includes(this.relativeNodes[t]._accessibleDisplaysInfo.accessibleDisplays,this.display);if(e!==this.relativeVisibilities[t]){this.relativeVisibilities[t]=e;const i=0===this.invisibleCount;this.invisibleCount+=e?-1:1,0===this.invisibleCount!==i&&this.updateVisibility()}},updateVisibility:function(){this.peer.setVisible(this.invisibleCount<=0),this.peer.isVisible()||this.peer.primarySibling.contains(document.activeElement)&&(we.Display.focus=null),Pn.edge&&(this.display.getAccessibleDOMElement().style.display="none",this.display.getAccessibleDOMElement().style.display="block")},isGloballyVisible:function(){return!!this.peer.isVisible()&&(!this.parent||this.parent.isGloballyVisible())},getChildOrdering:function(t){const e=t.lastNode(),i=e.getEffectiveChildren();let n;const s=[];if(e.accessibleContent&&e!==this.node){const i=e.accessibleInstances;t:for(n=0;n<i.length;n++){const e=i[n];if(e.parent===this){for(let i=0;i<t.length;i++)if(t.nodes[i]!==e.trail.nodes[i+e.trail.length-t.length])continue t;s.push(e)}}}else for(n=0;n<i.length;n++)t.addDescendant(i[n],n),Array.prototype.push.apply(s,this.getChildOrdering(t)),t.removeDescendant();return s},sortChildren:function(){const t=this.getChildOrdering(new we.Trail(this.isRootInstance?this.display.rootNode:this.node));this.children=t;const e=this.peer.primarySibling;let i=e.childNodes.length-1;for(let n=this.children.length-1;n>=0;n--){const t=this.children[n].peer;for(let n=t.topLevelElements.length-1;n>=0;n--){const s=t.topLevelElements[n];e.childNodes[i]!==s&&e.insertBefore(s,e.childNodes[i+1]),i--}}},updateTransformTracker(t){this.transformTracker&&this.transformTracker.dispose();let e=null;e=t?t.getUniqueTrail():_s.guessVisualTrail(this.trail,this.display.rootNode),this.transformTracker=new In(e)},dispose:function(){if(!this.isRootInstance){ns.removeElements(this.parent.peer.primarySibling,this.peer.topLevelElements);for(let t=0;t<this.relativeNodes.length;t++)this.relativeNodes[t].accessibleDisplaysEmitter.removeListener(this.relativeListeners[t])}for(;this.children.length;)this.children.pop().dispose();this.peer.dispose(),this.transformTracker.dispose(),this.transformTracker=null,this.node&&this.node.removeAccessibleInstance(this),this.relativeNodes=null,this.display=null,this.trail=null,this.node=null,this.peer=null,this.isDisposed=!0,this.freeToPool()},toString:function(){return this.id+"#{"+this.trail.toString()+"}"},auditRoot:function(){return void 0}},{guessVisualTrail:function(t,e){t.reindex();const i=t.indices.lastIndexOf(-1);if(i<0)return t;const n=i+1,s=t.nodes[n].getTrailsTo(e);if(0===s.length)return t;const r=s[0];for(let o=n+1;o<t.length;o++)r.addDescendant(t.nodes[o]);return r},createFakeAccessibleTree:function(t){return{node:null,children:function t(e){let i=_.flatten(e.getEffectiveChildren().map(t));return e.accessibleContent&&(i=[{node:e,children:i}]),i}(t)}}}),$t.a.mixInto(_s,{initialize:_s.prototype.initializeAccessibleInstance});var As=_s;function ws(t,e,i){this.accessibleInstance=t,this.trail=e,this.isRoot=i,this.fullTrail=this.accessibleInstance.trail.copy();for(let n=this.isRoot?0:1;n<this.trail.length;n++)this.fullTrail.addDescendant(this.trail.nodes[n])}we.register("PartialPDOMTrail",ws),Object(z.a)(Object,ws);var xs=ws;let Ss=null;var Ts={addChild:function(t,e){const i=Ts.beforeOp(e);e._accessibleParent||Ts.addTree(t,e),Ts.afterOp(i)},removeChild:function(t,e){const i=Ts.beforeOp(e);e._accessibleParent||Ts.removeTree(t,e),Ts.afterOp(i)},childrenOrderChange:function(t){const e=Ts.beforeOp(t);Ts.reorder(t),Ts.afterOp(e)},accessibleOrderChange:function(t,e,i){const n=Ts.beforeOp(t),s=[],r=[];let o,a;pn(e||[],i||[],s,r);const l=Ts.findAccessibleTrails(t);for(o=0;o<s.length;o++){const e=s[o];e&&(Ts.removeTree(t,e,l),e._accessibleParent=null)}for(o=0;o<r.length;o++){const e=r[o];if(e){const i=e._parents;for(a=0;a<i.length;a++)Ts.removeTree(i[a],e);e._accessibleParent=t}}for(o=0;o<s.length;o++){const t=s[o];if(t){const e=t._parents;for(a=0;a<e.length;a++)Ts.addTree(e[a],t)}}for(o=0;o<r.length;o++){const e=r[o];e&&Ts.addTree(t,e,l)}Ts.reorder(t,l),Ts.afterOp(n)},accessibleContentChange:function(t){const e=Ts.beforeOp(t);let i;const n=t._accessibleParent?[t._accessibleParent]:t._parents,s=[];for(i=0;i<n.length;i++){const e=n[i],r=Ts.findAccessibleTrails(e);s.push(r),Ts.removeTree(e,t,r)}for(i=0;i<n.length;i++)Ts.addTree(n[i],t,s[i]);for(i=0;i<t._rootedDisplays.length;i++){const e=t._rootedDisplays[i];e._accessible&&Ts.rebuildInstanceTree(e._rootAccessibleInstance)}Ts.afterOp(e)},rebuildInstanceTree:function(t){const e=t.display.rootNode;t.removeAllChildren(),t.addConsecutiveInstances(Ts.createTree(new yn(e),t.display,t))},addTree:function(t,e,i){i=i||Ts.findAccessibleTrails(t);for(let n=0;n<i.length;n++){const t=i[n],s=t.accessibleInstance;t.fullTrail.addDescendant(e);const r=Ts.createTree(t.fullTrail,s.display,s);t.fullTrail.removeDescendant(e),s.addConsecutiveInstances(r)}},removeTree:function(t,e,i){i=i||Ts.findAccessibleTrails(t);for(let n=0;n<i.length;n++){const t=i[n];t.fullTrail.addDescendant(e),t.accessibleInstance.removeInstancesForTrail(t.fullTrail),t.fullTrail.removeDescendant(e)}},reorder:function(t,e){e=e||Ts.findAccessibleTrails(t);for(let i=0;i<e.length;i++){e[i].accessibleInstance.sortChildren()}},createTree:function(t,e,i){const n=t.lastNode(),s=n.getEffectiveChildren();let r,o=!1;n.accessibleContent&&(r=i.findChildWithTrail(t),r?o=!0:r=As.createFromPool(i,e,t.copy()),i=r);const a=[];for(let l=0;l<s.length;l++)t.addDescendant(s[l],l),Array.prototype.push.apply(a,Ts.createTree(t,e,i)),t.removeDescendant();return r?(r.addConsecutiveInstances(a),o?[]:[r]):a},beforeOp:function(t){Ss=we.Display&&we.Display.focusedNode;const e=[],i=this.findAccessibleTrails(t);for(let n=0;n<i.length;n++){const t=i[n].accessibleInstance.display;t.blockFocusCallbacks=!0,e.push(t)}return e},afterOp:function(t){Ss&&Ss.focus();for(let e=0;e<t.length;e++)t[e].blockFocusCallbacks=!1},findAccessibleTrails:function(t){const e=[];return Ts.recursiveAccessibleTrailSearch(e,new yn(t)),e},recursiveAccessibleTrailSearch:function(t,e){const i=e.rootNode();let n;if(i.accessibleContent){const s=i.accessibleInstances;for(n=0;n<s.length;n++)t.push(new xs(s[n],e.copy(),!1));return}{const s=i.rootedDisplays;for(n=0;n<s.length;n++){const i=s[n];i._accessible&&t.push(new xs(i._rootAccessibleInstance,e.copy(),!0))}}const s=i._accessibleParent?[i._accessibleParent]:i._parents,r=s.length;for(n=0;n<r;n++){const i=s[n];e.addAncestor(i),Ts.recursiveAccessibleTrailSearch(t,e),e.removeAncestor()}},auditAccessibleDisplays:function(t){0},auditNodeForAccessibleCycles:function(t){0},debugOrder:function(t){return null===t?"null":"["+t.map((function(t){return null===t?"null":t._id})).join(",")+"]"}};we.register("PDOMTree",Ts);var Ds=Ts;ns.TAGS.INPUT;const Es=ns.TAGS.P,Cs=Es,Ps=Es,ks=function(t,e,i){return"input"===t.tagName?(e.labelTagName="label",e.labelContent=i):ns.tagNameSupportsContent(t.tagName)?e.innerContent=i:e.ariaLabel=i,e},Is=function(t,e,i){return e.descriptionTagName=ns.DEFAULT_DESCRIPTION_TAG_NAME,e.descriptionContent=i,e.appendDescription=!0,e},Ls=function(t,e,i){return e.labelTagName="h"+t.headingLevel,e.labelContent=i,e},Os=(ns.FORM_ELEMENTS,ns.INPUT_TYPES_THAT_SUPPORT_CHECKED,ns.ASSOCIATION_ATTRIBUTES,["focusable","tagName","accessibleName","helpText","helpTextBehavior","accessibleHeading","accessibleHeadingBehavior","containerTagName","containerAriaRole","innerContent","inputType","inputValue","accessibleChecked","accessibleNamespace","ariaLabel","ariaRole","ariaValueText","labelTagName","labelContent","appendLabel","descriptionTagName","descriptionContent","appendDescription","focusHighlight","focusHighlightLayerable","groupFocusHighlight","accessibleVisible","accessibleOrder","ariaLabelledbyAssociations","ariaDescribedbyAssociations","activeDescendantAssociations","pdomTransformSourceNode"]),Rs={compose:function(t){const e=t.prototype;Object(de.a)(e,{_mutatorKeys:Os.concat(e._mutatorKeys),initializeAccessibility:function(){this._tagName=null,this._containerTagName=null,this._labelTagName=null,this._descriptionTagName=null,this._inputType=null,this._inputValue=null,this._accessibleChecked=!1,this._appendLabel=!1,this._appendDescription=!1,this._accessibleAttributes=[],this._labelContent=null,this._innerContent=null,this._descriptionContent=null,this._accessibleNamespace=null,this._ariaLabel=null,this._ariaRole=null,this._containerAriaRole=null,this._ariaValueText=null,this._ariaLabelledbyAssociations=[],this._nodesThatAreAriaLabelledbyThisNode=[],this._ariaDescribedbyAssociations=[],this._nodesThatAreAriaDescribedbyThisNode=[],this._activeDescendantAssociations=[],this._nodesThatAreActiveDescendantToThisNode=[],this._focusableOverride=null,this._focusHighlight=null,this._focusHighlightLayerable=!1,this._groupFocusHighlight=!1,this._accessibleVisible=!0,this._accessibleOrder=null,this._accessibleParent=null,this._pdomTransformSourceNode=null,this._accessibleDisplaysInfo=new xn(this),this._accessibleInstances=[],this.excludeLabelSiblingFromInput=!1,this._accessibleName=null,this._accessibleNameBehavior=ks,this._helpText=null,this._helpTextBehavior=Is,this._accessibleHeading=null,this._headingLevel=null,this._accessibleHeadingBehavior=Ls},disposeAccessibility:function(){this.accessibleOrder=null,this.setPDOMTransformSourceNode(null),this.setAriaLabelledbyAssociations([]),this.setAriaDescribedbyAssociations([]),this.setActiveDescendantAssociations([])},isFocused:function(){for(let t=0;t<this._accessibleInstances.length;t++){if(this._accessibleInstances[t].peer.isFocused())return!0}return!1},get focused(){return this.isFocused()},focus:function(){if(this._accessibleInstances.length>0){const t=this._accessibleInstances[0].peer;t.focus()}},blur:function(){if(this._accessibleInstances.length>0){const t=this._accessibleInstances[0].peer;t.blur(),this.interruptInput()}},accessibleAudit:function(){this.accessibleContent;for(let t=0;t<this.children.length;t++)this.children[t].accessibleAudit()},setAccessibleName:function(t){this._accessibleName!==t&&(this._accessibleName=t,this.onAccessibleContentChange())},set accessibleName(t){this.setAccessibleName(t)},getAccessibleName:function(){return this._accessibleName},get accessibleName(){return this.getAccessibleName()},setAccessibleNameBehavior:function(t){this._accessibleNameBehavior!==t&&(this._accessibleNameBehavior=t,this.onAccessibleContentChange())},set accessibleNameBehavior(t){this.setAccessibleNameBehavior(t)},getAccessibleNameBehavior:function(){return this._accessibleNameBehavior},get accessibleNameBehavior(){return this.getAccessibleNameBehavior()},setAccessibleHeading:function(t){this._accessibleHeading!==t&&(this._accessibleHeading=t,this.onAccessibleContentChange())},set accessibleHeading(t){this.setAccessibleHeading(t)},getAccessibleHeading:function(){return this._accessibleHeading},get accessibleHeading(){return this.getAccessibleHeading()},setAccessibleHeadingBehavior:function(t){this._accessibleHeadingBehavior!==t&&(this._accessibleHeadingBehavior=t,this.onAccessibleContentChange())},set accessibleHeadingBehavior(t){this.setAccessibleHeadingBehavior(t)},getAccessibleHeadingBehavior:function(){return this._accessibleHeadingBehavior},get accessibleHeadingBehavior(){return this.getAccessibleHeadingBehavior()},getHeadingLevel:function(){return this._headingLevel},get headingLevel(){return this.getHeadingLevel()},computeHeadingLevel:function(){if(!this._accessibleParent)return this._accessibleHeading?(this._headingLevel=1,1):0;if(this._accessibleHeading){const t=this._accessibleParent.computeHeadingLevel()+1;return this._headingLevel=t,t}return this._accessibleParent.computeHeadingLevel()},setHelpText:function(t){this._helpText!==t&&(this._helpText=t,this.onAccessibleContentChange())},set helpText(t){this.setHelpText(t)},getHelpText:function(){return this._helpText},get helpText(){return this.getHelpText()},setHelpTextBehavior:function(t){this._helpTextBehavior!==t&&(this._helpTextBehavior=t,this.onAccessibleContentChange())},set helpTextBehavior(t){this.setHelpTextBehavior(t)},getHelpTextBehavior:function(){return this._helpTextBehavior},get helpTextBehavior(){return this.getHelpTextBehavior()},setTagName:function(t){t!==this._tagName&&(this._tagName=t,this.onAccessibleContentChange())},set tagName(t){this.setTagName(t)},getTagName:function(){return this._tagName},get tagName(){return this.getTagName()},setLabelTagName:function(t){t!==this._labelTagName&&(this._labelTagName=t,this.onAccessibleContentChange())},set labelTagName(t){this.setLabelTagName(t)},getLabelTagName:function(){return this._labelTagName},get labelTagName(){return this.getLabelTagName()},setDescriptionTagName:function(t){t!==this._descriptionTagName&&(this._descriptionTagName=t,this.onAccessibleContentChange())},set descriptionTagName(t){this.setDescriptionTagName(t)},getDescriptionTagName:function(){return this._descriptionTagName},get descriptionTagName(){return this.getDescriptionTagName()},setInputType:function(t){if(t!==this._inputType){this._inputType=t;for(let e=0;e<this._accessibleInstances.length;e++){const i=this._accessibleInstances[e].peer;null===t?i.removeAttributeFromElement("type"):i.setAttributeToElement("type",t)}}},set inputType(t){this.setInputType(t)},getInputType:function(){return this._inputType},get inputType(){return this.getInputType()},setAppendLabel:function(t){this._appendLabel!==t&&(this._appendLabel=t,this.onAccessibleContentChange())},set appendLabel(t){this.setAppendLabel(t)},getAppendLabel:function(){return this._appendLabel},get appendLabel(){return this.getAppendLabel()},setAppendDescription:function(t){this._appendDescription!==t&&(this._appendDescription=t,this.onAccessibleContentChange())},set appendDescription(t){this.setAppendDescription(t)},getAppendDescription:function(){return this._appendDescription},get appendDescription(){return this.getAppendDescription()},setContainerTagName:function(t){this._containerTagName!==t&&(this._containerTagName=t,this.onAccessibleContentChange())},set containerTagName(t){this.setContainerTagName(t)},getContainerTagName:function(){return this._containerTagName},get containerTagName(){return this.getContainerTagName()},setLabelContent:function(t){if(this._labelContent!==t){this._labelContent=t,this._labelTagName||this.setLabelTagName(Ps);for(let t=0;t<this._accessibleInstances.length;t++){this._accessibleInstances[t].peer.setLabelSiblingContent(this._labelContent)}}},set labelContent(t){this.setLabelContent(t)},getLabelContent:function(){return this._labelContent},get labelContent(){return this.getLabelContent()},setInnerContent:function(t){if(this._innerContent!==t){this._innerContent=t;for(let t=0;t<this._accessibleInstances.length;t++){this._accessibleInstances[t].peer.setPrimarySiblingContent(this._innerContent)}}},set innerContent(t){this.setInnerContent(t)},getInnerContent:function(){return this._innerContent},get innerContent(){return this.getInnerContent()},setDescriptionContent:function(t){if(this._descriptionContent!==t){this._descriptionContent=t,this._descriptionTagName||this.setDescriptionTagName(Cs);for(let t=0;t<this._accessibleInstances.length;t++){this._accessibleInstances[t].peer.setDescriptionSiblingContent(this._descriptionContent)}}},set descriptionContent(t){this.setDescriptionContent(t)},getDescriptionContent:function(){return this._descriptionContent},get descriptionContent(){return this.getDescriptionContent()},setAriaRole:function(t){this._ariaRole!==t&&(this._ariaRole=t,null!==t?this.setAccessibleAttribute("role",t):this.removeAccessibleAttribute("role"))},set ariaRole(t){this.setAriaRole(t)},getAriaRole:function(){return this._ariaRole},get ariaRole(){return this.getAriaRole()},setContainerAriaRole:function(t){this._containerAriaRole!==t&&(this._containerAriaRole=t,null===this._containerAriaRole?this.removeAccessibleAttribute("role",{elementName:bs.CONTAINER_PARENT}):this.setAccessibleAttribute("role",t,{elementName:bs.CONTAINER_PARENT}))},set containerAriaRole(t){this.setContainerAriaRole(t)},getContainerAriaRole:function(){return this._containerAriaRole},get containerAriaRole(){return this.getContainerAriaRole()},setAriaValueText:function(t){this._ariaValueText!==t&&(this._ariaValueText=t,null===this._ariaValueText?this.removeAccessibleAttribute("aria-valuetext"):this.setAccessibleAttribute("aria-valuetext",t))},set ariaValueText(t){this.setAriaValueText(t)},getAriaValueText:function(){return this._ariaValueText},get ariaValueText(){return this.getAriaValueText()},setAccessibleNamespace:function(t){return this._accessibleNamespace!==t&&(this._accessibleNamespace=t,this.onAccessibleContentChange()),this},set accessibleNamespace(t){this.setAccessibleNamespace(t)},getAccessibleNamespace:function(){return this._accessibleNamespace},get accessibleNamespace(){return this.getAccessibleNamespace()},setAriaLabel:function(t){this._ariaLabel!==t&&(this._ariaLabel=t,null===this._ariaLabel?this.removeAccessibleAttribute("aria-label"):this.setAccessibleAttribute("aria-label",t))},set ariaLabel(t){this.setAriaLabel(t)},getAriaLabel:function(){return this._ariaLabel},get ariaLabel(){return this.getAriaLabel()},setFocusHighlight:function(t){this._focusHighlight!==t&&(this._focusHighlight=t,this._focusHighlightLayerable&&(t.visible=this.focused),this.focusHighlightChangedEmitter.emit())},set focusHighlight(t){this.setFocusHighlight(t)},getFocusHighlight:function(){return this._focusHighlight},get focusHighlight(){return this.getFocusHighlight()},setFocusHighlightLayerable:function(t){this._focusHighlightLayerable!==t&&(this._focusHighlightLayerable=t,this._focusHighlight&&(this._focusHighlight.visible=this.focused))},set focusHighlightLayerable(t){this.setFocusHighlightLayerable(t)},getFocusHighlightLayerable:function(){return this._focusHighlightLayerable},get focusHighlightLayerable(){return this.getFocusHighlightLayerable()},setGroupFocusHighlight:function(t){this._groupFocusHighlight=t},set groupFocusHighlight(t){this.setGroupFocusHighlight(t)},getGroupFocusHighlight:function(){return this._groupFocusHighlight},get groupFocusHighlight(){return this.getGroupFocusHighlight()},setAriaLabelledbyAssociations:function(t){let e,i;if(0===t.length&&0===this._ariaLabelledbyAssociations.length)return;const n=[],s=[],r=[];for(pn(t,this._ariaLabelledbyAssociations,s,n,r),i=0;i<n.length;i++)e=n[i],this.removeAriaLabelledbyAssociation(e);for(i=0;i<s.length;i++){const e=t[i];this.addAriaLabelledbyAssociation(e)}},set ariaLabelledbyAssociations(t){return this.setAriaLabelledbyAssociations(t)},getAriaLabelledbyAssociations:function(){return this._ariaLabelledbyAssociations},get ariaLabelledbyAssociations(){return this.getAriaLabelledbyAssociations()},addAriaLabelledbyAssociation:function(t){this._ariaLabelledbyAssociations.push(t),t.otherNode._nodesThatAreAriaLabelledbyThisNode.push(this),this.updateAriaLabelledbyAssociationsInPeers()},removeAriaLabelledbyAssociation:function(t){this._ariaLabelledbyAssociations.splice(_.indexOf(this._ariaLabelledbyAssociations,t),1)[0].otherNode.removeNodeThatIsAriaLabelledByThisNode(this),this.updateAriaLabelledbyAssociationsInPeers()},removeNodeThatIsAriaLabelledByThisNode:function(t){const e=_.indexOf(this._nodesThatAreAriaLabelledbyThisNode,t);this._nodesThatAreAriaLabelledbyThisNode.splice(e,1)},updateAriaLabelledbyAssociationsInPeers:function(){for(let t=0;t<this.accessibleInstances.length;t++){this.accessibleInstances[t].peer.onAriaLabelledbyAssociationChange()}},updateOtherNodesAriaLabelledby:function(){for(let t=0;t<this._nodesThatAreAriaLabelledbyThisNode.length;t++){this._nodesThatAreAriaLabelledbyThisNode[t].updateAriaLabelledbyAssociationsInPeers()}},getNodesThatAreAriaLabelledbyThisNode:function(){return this._nodesThatAreAriaLabelledbyThisNode},get nodesThatAreAriaLabelledbyThisNode(){return this.getNodesThatAreAriaLabelledbyThisNode()},setAriaDescribedbyAssociations:function(t){let e;if(0===t.length&&0===this._ariaDescribedbyAssociations.length)return;const i=[],n=[],s=[];let r;for(pn(t,this._ariaDescribedbyAssociations,n,i,s),r=0;r<i.length;r++)e=i[r],this.removeAriaDescribedbyAssociation(e);for(r=0;r<n.length;r++){const e=t[r];this.addAriaDescribedbyAssociation(e)}},set ariaDescribedbyAssociations(t){return this.setAriaDescribedbyAssociations(t)},getAriaDescribedbyAssociations:function(){return this._ariaDescribedbyAssociations},get ariaDescribedbyAssociations(){return this.getAriaDescribedbyAssociations()},addAriaDescribedbyAssociation:function(t){this._ariaDescribedbyAssociations.push(t),t.otherNode._nodesThatAreAriaDescribedbyThisNode.push(this),this.updateAriaDescribedbyAssociationsInPeers()},hasAriaDescribedbyAssociation:function(t){return _.includes(this._ariaDescribedbyAssociations,t)},removeAriaDescribedbyAssociation:function(t){this._ariaDescribedbyAssociations.splice(_.indexOf(this._ariaDescribedbyAssociations,t),1)[0].otherNode.removeNodeThatIsAriaDescribedByThisNode(this),this.updateAriaDescribedbyAssociationsInPeers()},removeNodeThatIsAriaDescribedByThisNode:function(t){const e=_.indexOf(this._nodesThatAreAriaDescribedbyThisNode,t);this._nodesThatAreAriaDescribedbyThisNode.splice(e,1)},updateAriaDescribedbyAssociationsInPeers:function(){for(let t=0;t<this.accessibleInstances.length;t++){this.accessibleInstances[t].peer.onAriaDescribedbyAssociationChange()}},updateOtherNodesAriaDescribedby:function(){for(let t=0;t<this._nodesThatAreAriaDescribedbyThisNode.length;t++){this._nodesThatAreAriaDescribedbyThisNode[t].updateAriaDescribedbyAssociationsInPeers()}},getNodesThatAreAriaDescribedbyThisNode:function(){return this._nodesThatAreAriaDescribedbyThisNode},get nodesThatAreAriaDescribedbyThisNode(){return this.getNodesThatAreAriaDescribedbyThisNode()},setActiveDescendantAssociations:function(t){let e;if(0===t.length&&0===this._activeDescendantAssociations.length)return;const i=[],n=[],s=[];let r;for(pn(t,this._activeDescendantAssociations,n,i,s),r=0;r<i.length;r++)e=i[r],this.removeActiveDescendantAssociation(e);for(r=0;r<n.length;r++){const e=t[r];this.addActiveDescendantAssociation(e)}},set activeDescendantAssociations(t){return this.setActiveDescendantAssociations(t)},getActiveDescendantAssociations:function(){return this._activeDescendantAssociations},get activeDescendantAssociations(){return this.getActiveDescendantAssociations()},addActiveDescendantAssociation:function(t){this._activeDescendantAssociations.push(t),t.otherNode._nodesThatAreActiveDescendantToThisNode.push(this),this.updateActiveDescendantAssociationsInPeers()},removeActiveDescendantAssociation:function(t){this._activeDescendantAssociations.splice(_.indexOf(this._activeDescendantAssociations,t),1)[0].otherNode.removeNodeThatIsActiveDescendantThisNode(this),this.updateActiveDescendantAssociationsInPeers()},removeNodeThatIsActiveDescendantThisNode:function(t){const e=_.indexOf(this._nodesThatAreActiveDescendantToThisNode,t);this._nodesThatAreActiveDescendantToThisNode.splice(e,1)},updateActiveDescendantAssociationsInPeers:function(){for(let t=0;t<this.accessibleInstances.length;t++){this.accessibleInstances[t].peer.onActiveDescendantAssociationChange()}},updateOtherNodesActiveDescendant:function(){for(let t=0;t<this._nodesThatAreActiveDescendantToThisNode.length;t++){this._nodesThatAreActiveDescendantToThisNode[t].updateActiveDescendantAssociationsInPeers()}},getNodesThatAreActiveDescendantToThisNode:function(){return this._nodesThatAreActiveDescendantToThisNode},get nodesThatAreActiveDescendantToThisNode(){return this.getNodesThatAreActiveDescendantToThisNode()},setAccessibleOrder:function(t){if(this._accessibleOrder!==t){const e=this._accessibleOrder;this._accessibleOrder=null===t?null:t.slice(),Ds.accessibleOrderChange(this,e,t),this.rendererSummaryRefreshEmitter.emit()}},set accessibleOrder(t){this.setAccessibleOrder(t)},getAccessibleOrder:function(){return this._accessibleOrder?this._accessibleOrder.slice(0):this._accessibleOrder},get accessibleOrder(){return this.getAccessibleOrder()},hasAccessibleOrder:function(){return null!==this._accessibleOrder&&0!==this._accessibleOrder.length&&(this._accessibleOrder.length>1||null!==this._accessibleOrder[0])},getAccessibleParent:function(){return this._accessibleParent},get accessibleParent(){return this.getAccessibleParent()},getEffectiveChildren:function(){const t=[];for(let e=0;e<this._children.length;e++){const i=this._children[e];i._accessibleParent||t.push(i)}if(this.hasAccessibleOrder()){const e=this.accessibleOrder.slice(),i=e.indexOf(null);return i>=0?(t.unshift(i,1),Array.prototype.splice.apply(e,t)):Array.prototype.push.apply(e,t),e}return t},setAccessibleVisible:function(t){this._accessibleVisible!==t&&(this._accessibleVisible=t,this._accessibleDisplaysInfo.onAccessibleVisibilityChange(t))},set accessibleVisible(t){this.setAccessibleVisible(t)},getAccessibleVisible:function(){return this._accessibleVisible},get accessibleVisible(){return this.getAccessibleVisible()},isAccessibleDisplayed:function(){for(let t=0;t<this._accessibleInstances.length;t++)if(this._accessibleInstances[t].isGloballyVisible())return!0;return!1},get accessibleDisplayed(){return this.isAccessibleDisplayed()},setInputValue:function(t){if((t=""+t)!==this._inputValue){this._inputValue=t;for(let t=0;t<this.accessibleInstances.length;t++){this.accessibleInstances[t].peer.onInputValueChange()}}},set inputValue(t){this.setInputValue(t)},getInputValue:function(){return this._inputValue},get inputValue(){return this.getInputValue()},setAccessibleChecked:function(t){this._tagName,this._inputType,this._accessibleChecked!==t&&(this._accessibleChecked=t,this.setAccessibleAttribute("checked",t,{asProperty:!0}))},set accessibleChecked(t){this.setAccessibleChecked(t)},getAccessibleChecked:function(){return this._accessibleChecked},get accessibleChecked(){return this.getAccessibleChecked()},getAccessibleAttributes:function(){return this._accessibleAttributes.slice(0)},get accessibleAttributes(){return this.getAccessibleAttributes()},setAccessibleAttribute:function(t,e,i){i=Object(s.a)({namespace:null,asProperty:!1,elementName:bs.PRIMARY_SIBLING},i);for(let n=0;n<this._accessibleAttributes.length;n++){const e=this._accessibleAttributes[n];e.attribute===t&&e.options.namespace===i.namespace&&e.options.asProperty===i.asProperty&&e.options.elementName===i.elementName&&this._accessibleAttributes.splice(n,1)}this._accessibleAttributes.push({attribute:t,value:e,options:i});for(let n=0;n<this._accessibleInstances.length;n++){this._accessibleInstances[n].peer.setAttributeToElement(t,e,i)}},removeAccessibleAttribute:function(t,e){e=Object(s.a)({namespace:null,elementName:bs.PRIMARY_SIBLING},e);let i=!1;for(let n=0;n<this._accessibleAttributes.length;n++)this._accessibleAttributes[n].attribute===t&&this._accessibleAttributes[n].options.namespace===e.namespace&&this._accessibleAttributes[n].options.elementName===e.elementName&&(this._accessibleAttributes.splice(n,1),i=!0);for(let n=0;n<this._accessibleInstances.length;n++){this._accessibleInstances[n].peer.removeAttributeFromElement(t,e)}},removeAccessibleAttributes:function(){const t=this.getAccessibleAttributes();for(let e=0;e<t.length;e++){const i=t[e].attribute;this.removeAccessibleAttribute(i)}},hasAccessibleAttribute:function(t,e){e=Object(s.a)({namespace:null,elementName:bs.PRIMARY_SIBLING},e);let i=!1;for(let n=0;n<this._accessibleAttributes.length;n++)this._accessibleAttributes[n].attribute===t&&this._accessibleAttributes[n].options.namespace===e.namespace&&this._accessibleAttributes[n].options.elementName===e.elementName&&(i=!0);return i},setFocusable:function(t){if(this._focusableOverride!==t){this._focusableOverride=t;for(let t=0;t<this._accessibleInstances.length;t++)this._accessibleInstances[t].peer.setFocusable(this.focusable)}},set focusable(t){this.setFocusable(t)},isFocusable:function(){return null!==this._focusableOverride?this._focusableOverride:null!==this._tagName&&ns.tagIsDefaultFocusable(this._tagName)},get focusable(){return this.isFocusable()},setPDOMTransformSourceNode:function(t){this._pdomTransformSourceNode=t;for(let e=0;e<this._accessibleInstances.length;e++)this._accessibleInstances[e].peer.setPDOMTransformSourceNode(this._pdomTransformSourceNode)},set pdomTransformSourceNode(t){this.setPDOMTransformSourceNode(t)},getPDOMTransformSourceNode:function(){return this._pdomTransformSourceNode},get pdomTransformSourceNode(){return this.getPDOMTransformSourceNode()},setExcludeLabelSiblingFromInput:function(){this.excludeLabelSiblingFromInput=!0,this.onAccessibleContentChange()},getBaseOptions:function(){const t={};for(let e=0;e<Os.length;e++){const i=Os[e];t[i]=this[i]}return t},getNestedAccessibleOrder:function(){const t=new yn(this);let e=[];const i=[],n=[i];return function i(s,r){let o=0;if(_.each(e,(function(t){s===t&&o++})),o>1||1===o&&!r)return;if(s.accessibleContent){const e={trail:t.copy(),children:[]};n[n.length-1].push(e),n.push(e.children)}const a=null===s._accessibleOrder?[]:s._accessibleOrder;e=e.concat(a),_.each(a,(function(e){_.each(s.getLeafTrailsTo(e),(function(n){n.removeAncestor(),t.addDescendantTrail(n),i(e,!0),t.removeDescendantTrail(n)}))}));const l=s._children.length;for(let e=0;e<l;e++){const n=s._children[e];t.addDescendant(n,e),i(n,!1),t.removeDescendant()}_.each(a,(function(){e.pop()})),s.accessibleContent&&n.pop()}(this,!1),i},onAccessibleContentChange:function(){Ds.accessibleContentChange(this),this._accessibleHeading&&this.computeHeadingLevel(),this.rendererSummaryRefreshEmitter.emit()},hasAccessibleContent:function(){return!!this._tagName},get accessibleContent(){return this.hasAccessibleContent()},onAccessibleAddChild:function(t){this._accessibleDisplaysInfo.onAddChild(t),Ds.addChild(this,t)},onAccessibleRemoveChild:function(t){this._accessibleDisplaysInfo.onRemoveChild(t),Ds.removeChild(this,t),t.updateOtherNodesAriaLabelledby(),t.updateOtherNodesAriaDescribedby(),t.updateOtherNodesActiveDescendant()},onAccessibleReorderedChildren:function(){Ds.childrenOrderChange(this)},getAccessibleInstances:function(){return this._accessibleInstances},get accessibleInstances(){return this.getAccessibleInstances()},addAccessibleInstance:function(t){this._accessibleInstances.push(t)},removeAccessibleInstance:function(t){const e=_.indexOf(this._accessibleInstances,t);this._accessibleInstances.splice(e,1)}})}};we.register("ParallelDOM",Rs);var Ns=Rs;const Ms={};function Bs(t){try{const e=document.createElement("canvas");e.width=1,e.height=1;const i=e.getContext("2d");i.fillStyle="black",i.fillRect(0,0,1,1);const n=e.toDataURL([t]),s="data:"+t;return n.slice(0,s.length)===s}catch(e){return!1}}function Fs(t,e){const i=document.createElement("canvas");i.width=1,i.height=1;const n=i.getContext("2d"),s=document.createElement("img");s.crossOrigin="Anonymous";const r=function(){try{n.drawImage(s,0,0),i.toDataURL(),Ms[t]=!0}catch(e){Ms[t]=!1}};s.onload=r;try{s.src=e,s.complete&&r()}catch(o){Ms[t]=!1}}we.register("Features",Ms),Ms.canvasPNGOutput=Bs("image/png"),Ms.canvasJPEGOutput=Bs("image/jpeg"),Ms.canvasGIFOutput=Bs("image/gif"),Ms.canvasICONOutput=Bs("image/x-icon"),Fs("canvasPNGInput","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQIW2NkYGD4DwABCQEBtxmN7wAAAABJRU5ErkJggg=="),Fs("canvasJPEGInput","data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/2wBDAQMDAwQDBAgEBAgQCwkLEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBD/wAARCAABAAEDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD8qqKKKAP/2Q=="),Fs("canvasSVGInput","data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3cG9ydD0iMCAwIDEgMSIgd2lkdGg9IjEiIGhlaWdodD0iMSIgPg0KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiByeD0iMCIgcnk9IjAiIHN0eWxlPSJmaWxsOiBibGFjazsgc3Ryb2tlOiBub25lOyI+PC9yZWN0Pg0KPC9zdmc+DQo="),Fs("canvasGIFInput","data:image/gif;base64,R0lGODlhAQABAJEAAAAAAP///////wAAACH5BAEAAAIALAAAAAABAAEAAAICRAEAOw==");const Vs=document.createElement("canvas"),qs=Vs.getContext("2d");Ms.toDataURLHD=On(Vs,"toDataURLHD"),Ms.createImageDataHD=On(qs,"createImageDataHD"),Ms.getImageDataHD=On(qs,"getImageDataHD"),Ms.putImageDataHD=On(qs,"putImageDataHD"),Ms.currentTransform=On(qs,"currentTransform");const Hs=document.createElement("span"),Ys=document.createElement("div");Ms.textStroke=On(Hs.style,"textStroke"),Ms.textStrokeColor=On(Hs.style,"textStrokeColor"),Ms.textStrokeWidth=On(Hs.style,"textStrokeWidth"),Ms.transform=On(Ys.style,"transform"),Ms.transformOrigin=On(Ys.style,"transformOrigin"),Ms.backfaceVisibility=On(Ys.style,"backfaceVisibility"),Ms.borderRadius=On(Ys.style,"borderRadius"),Ms.userSelect=On(Ys.style,"userSelect"),Ms.touchAction=On(Ys.style,"touchAction"),Ms.touchCallout=On(Ys.style,"touchCallout"),Ms.userDrag=On(Ys.style,"userDrag"),Ms.tapHighlightColor=On(Ys.style,"tapHighlightColor"),Ms.fontSmoothing=On(Ys.style,"fontSmoothing"),Ms.requestAnimationFrame=On(window,"requestAnimationFrame"),Ms.cancelAnimationFrame=On(window,"cancelAnimationFrame"),Ms.setStyle=function(t,e,i){void 0!==e&&(t.style[e]=i)},Ms.passive=!1,window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Ms.passive=!0}}));var js=Ms;function Gs(t,e){return new te.a(t,e)}const zs=js.transform,Ws=js.transformOrigin||"transformOrigin";let Us=!0;var Xs={prepareForTransform:function(t,e){t.style[Ws]="top left",e?Xs.setTransformAcceleration(t):Xs.unsetTransformAcceleration(t)},setTransformAcceleration:function(t){t.style.webkitBackfaceVisibility="hidden"},unsetTransformAcceleration:function(t){t.style.webkitBackfaceVisibility=""},applyPreparedTransform:function(t,e,i){e.style[zs]=t.getCSSTransform()},setTransform:function(t,e,i){e.style[zs]=t},unsetTransform:function(t){t.style[zs]=""},polyfillRequestAnimationFrame:function(){window.requestAnimationFrame&&window.cancelAnimationFrame||(js.requestAnimationFrame&&js.cancelAnimationFrame?(window.requestAnimationFrame=window[js.requestAnimationFrame],window.cancelAnimationFrame=window[js.cancelAnimationFrame]):(window.requestAnimationFrame=function(t){const e=Date.now();return window.setTimeout((function(){t(Date.now()-e)}),16)},window.cancelAnimationFrame=clearTimeout))},backingStorePixelRatio:function(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1},backingScale:function(t){if("devicePixelRatio"in window){const e=Xs.backingStorePixelRatio(t);return window.devicePixelRatio/e}return 1},scanBounds:function(t,e,i){const n=_.map(_.range(e),(function(){return!1})),s=_.map(_.range(e),(function(){return!1}));for(let u=0;u<e;u++)for(let i=0;i<e;i++){const r=4*(i*e+u);0===t.data[r]&&0===t.data[r+1]&&0===t.data[r+2]&&0===t.data[r+3]||(n[u]=!0,s[i]=!0)}const r=_.indexOf(n,!0),o=_.lastIndexOf(n,!0),a=_.indexOf(s,!0),l=_.lastIndexOf(s,!0),h=e/16;return{minBounds:new ne(r<1||r>=e-1?Number.POSITIVE_INFINITY:i.inversePosition2(Gs(r+1+h,0)).x,a<1||a>=e-1?Number.POSITIVE_INFINITY:i.inversePosition2(Gs(0,a+1+h)).y,o<1||o>=e-1?Number.NEGATIVE_INFINITY:i.inversePosition2(Gs(o-h,0)).x,l<1||l>=e-1?Number.NEGATIVE_INFINITY:i.inversePosition2(Gs(0,l-h)).y),maxBounds:new ne(r<1||r>=e-1?Number.NEGATIVE_INFINITY:i.inversePosition2(Gs(r-1-h,0)).x,a<1||a>=e-1?Number.NEGATIVE_INFINITY:i.inversePosition2(Gs(0,a-1-h)).y,o<1||o>=e-1?Number.POSITIVE_INFINITY:i.inversePosition2(Gs(o+2+h,0)).x,l<1||l>=e-1?Number.POSITIVE_INFINITY:i.inversePosition2(Gs(0,l+2+h)).y)}},canvasAccurateBounds:function(t,e){const i=e&&e.precision?e.precision:.001,n=e&&e.resolution?e.resolution:128,s=e&&e.initialScale?e.initialScale:1/16;let r=ne.NOTHING,o=ne.EVERYTHING;const a=document.createElement("canvas");a.width=n,a.height=n;const l=a.getContext("2d");function h(e){l.save(),e.matrix.canvasSetTransform(l),t(l),l.restore();const i=l.getImageData(0,0,n,n),s=Xs.scanBounds(i,n,e);return l.clearRect(0,0,n,n),s}function u(t){const e=(n-4)/(t.maxX-t.minX),i=(n-4)/(t.maxY-t.minY),s=-e*t.minX+2,r=-i*t.minY+2;return new Ue(Ye.translation(s,r).timesMatrix(Ye.scaling(e,i)))}const c=new Ue;c.append(Ye.translation(n/2,n/2)),c.append(Ye.scaling(s));const d=h(c);let p,f,m;for(r=r.union(d.minBounds),o=o.intersection(d.maxBounds),p=o.minY,f=o.maxY;isFinite(r.minX)&&isFinite(o.minX)&&Math.abs(r.minX-o.minX)>i;){if(m=h(u(new ne(o.minX,p,r.minX,f))),r.minX<=m.minBounds.minX&&o.minX>=m.maxBounds.minX){0;break}r=r.withMinX(Math.min(r.minX,m.minBounds.minX)),o=o.withMinX(Math.max(o.minX,m.maxBounds.minX)),p=Math.max(p,m.maxBounds.minY),f=Math.min(f,m.maxBounds.maxY)}for(p=o.minY,f=o.maxY;isFinite(r.maxX)&&isFinite(o.maxX)&&Math.abs(r.maxX-o.maxX)>i;){if(m=h(u(new ne(r.maxX,p,o.maxX,f))),r.maxX>=m.minBounds.maxX&&o.maxX<=m.maxBounds.maxX){0;break}r=r.withMaxX(Math.max(r.maxX,m.minBounds.maxX)),o=o.withMaxX(Math.min(o.maxX,m.maxBounds.maxX)),p=Math.max(p,m.maxBounds.minY),f=Math.min(f,m.maxBounds.maxY)}for(p=o.minX,f=o.maxX;isFinite(r.minY)&&isFinite(o.minY)&&Math.abs(r.minY-o.minY)>i;){if(m=h(u(new ne(p,o.minY,f,r.minY))),r.minY<=m.minBounds.minY&&o.minY>=m.maxBounds.minY){0;break}r=r.withMinY(Math.min(r.minY,m.minBounds.minY)),o=o.withMinY(Math.max(o.minY,m.maxBounds.minY)),p=Math.max(p,m.maxBounds.minX),f=Math.min(f,m.maxBounds.maxX)}for(p=o.minX,f=o.maxX;isFinite(r.maxY)&&isFinite(o.maxY)&&Math.abs(r.maxY-o.maxY)>i;){if(m=h(u(new ne(p,r.maxY,f,o.maxY))),r.maxY>=m.minBounds.maxY&&o.maxY<=m.maxBounds.maxY){0;break}r=r.withMaxY(Math.max(r.maxY,m.minBounds.maxY)),o=o.withMaxY(Math.min(o.maxY,m.maxBounds.maxY)),p=Math.max(p,m.maxBounds.minX),f=Math.min(f,m.maxBounds.maxX)}const g=new ne(isFinite(r.minX)&&isFinite(o.minX)?(r.minX+o.minX)/2:Number.POSITIVE_INFINITY,isFinite(r.minY)&&isFinite(o.minY)?(r.minY+o.minY)/2:Number.POSITIVE_INFINITY,isFinite(r.maxX)&&isFinite(o.maxX)?(r.maxX+o.maxX)/2:Number.NEGATIVE_INFINITY,isFinite(r.maxY)&&isFinite(o.maxY)?(r.maxY+o.maxY)/2:Number.NEGATIVE_INFINITY);return g.minBounds=r,g.maxBounds=o,g.isConsistent=o.containsBounds(r),g.precision=Math.max(Math.abs(r.minX-o.minX),Math.abs(r.minY-o.minY),Math.abs(r.maxX-o.maxX),Math.abs(r.maxY-o.maxY)),g},toPowerOf2:function(t){let e=1;for(;e<t;)e*=2;return e},createShader:function(t,e,i){const n=t.createShader(i);return t.shaderSource(n,e),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)||(console.log("GLSL compile error:"),console.log(t.getShaderInfoLog(n)),console.log(e)),n},applyWebGLContextDefaults:function(t){t.clearColor(0,0,0,0),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)},setWebGLEnabled(t){Us=t},checkWebGLSupport:function(t){if(!1===Us)return!1;const e=document.createElement("canvas"),i={failIfMajorPerformanceCaveat:!0};try{const n=!!window.WebGLRenderingContext&&(e.getContext("webgl",i)||e.getContext("experimental-webgl",i));if(!n)return!1;if(t)for(let e=0;e<t.length;e++)if(null===n.getExtension(t[e]))return!1;return!0}catch(n){return!1}},checkIE11StencilSupport:function(){const t=document.createElement("canvas");try{const e=!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"));return!!e&&(e.clearStencil(0),0===e.getError())}catch(e){return!1}},get isWebGLSupported(){return void 0===this._extensionlessWebGLSupport&&(this._extensionlessWebGLSupport=Xs.checkWebGLSupport()),this._extensionlessWebGLSupport},loseContext:function(t){const e=t.getExtension("WEBGL_lose_context");e&&(e.loseContext(),setTimeout((function(){e.restoreContext()}),1e3))}};we.register("Utils",Xs);var Ks=Xs;let Qs=1;function Zs(t){this.initializeDrawable(t)}we.register("Drawable",Zs),Object(z.a)(Object,Zs,{initializeDrawable:function(t){return this.id=this.id||Qs++,this.cleanDrawable(),this.renderer=t,this.dirty=!0,this.isDisposed=!1,this.linksDirty=!1,this.visibleProperty=new Pe(!0),this.fittableProperty=new Pe(!0),this},cleanDrawable:function(){this.parentDrawable=null,this.backbone=null,this.pendingParentDrawable=null,this.pendingBackbone=null,this.pendingAddition=!1,this.pendingRemoval=!1,this.previousDrawable=null,this.nextDrawable=null,this.oldPreviousDrawable=null,this.oldNextDrawable=null,this.visibleProperty&&this.visibleProperty.removeAllListeners(),this.fittableProperty&&this.fittableProperty.removeAllListeners()},update:function(){let t=!1;return this.dirty&&!this.isDisposed&&(this.dirty=!1,t=!0),t},setVisible:function(t){this.visibleProperty.value=t},set visible(t){this.setVisible(t)},isVisible:function(){return this.visibleProperty.value},get visible(){return this.isVisible()},setFittable:function(t){this.fittableProperty.value=t},set fittable(t){this.setFittable(t)},isFittable:function(){return this.fittableProperty.value},get fittable(){return this.isFittable()},setBlockBackbone:function(t){this.parentDrawable=t,this.backbone=t,this.pendingParentDrawable=t,this.pendingBackbone=t,this.pendingAddition=!1,this.pendingRemoval=!1},notePendingAddition:function(t,e,i){this.pendingParentDrawable=e,this.pendingBackbone=i,this.pendingAddition=!0,this.pendingRemoval||t.markDrawableChangedBlock(this)},notePendingRemoval:function(t){this.pendingRemoval=!0,this.pendingAddition||t.markDrawableChangedBlock(this)},notePendingMove:function(t,e){this.pendingParentDrawable=e,this.pendingRemoval&&this.pendingAddition||t.markDrawableChangedBlock(this),this.pendingAddition=!0,this.pendingRemoval=!0},updateBlock:function(){let t=!1;return(this.pendingRemoval||this.pendingAddition)&&(t=!this.pendingRemoval||!this.pendingAddition||this.parentDrawable!==this.pendingParentDrawable||this.backbone!==this.pendingBackbone,t?(this.pendingRemoval&&(this.parentDrawable.removeDrawable(this),this.pendingAddition||(this.pendingParentDrawable=null,this.pendingBackbone=null)),this.parentDrawable=this.pendingParentDrawable,this.backbone=this.pendingBackbone,this.pendingAddition&&this.parentDrawable.addDrawable(this)):this.pendingAddition&&An.isCanvas(this.renderer)&&this.parentDrawable.onPotentiallyMovedDrawable(this),this.pendingAddition=!1,this.pendingRemoval=!1),t},updateLinks:function(){this.oldNextDrawable=this.nextDrawable,this.oldPreviousDrawable=this.previousDrawable,this.linksDirty=!1},markDirty:function(){this.dirty||(this.dirty=!0,this.parentDrawable&&this.parentDrawable.markDirtyDrawable(this))},markLinksDirty:function(t){this.linksDirty||(this.linksDirty=!0,t.markDrawableForLinksUpdate(this))},markForDisposal:function(t){Zs.disconnectBefore(this,t),Zs.disconnectAfter(this,t),t.markDrawableForDisposal(this)},disposeImmediately:function(t){Zs.disconnectBefore(this,t),Zs.disconnectAfter(this,t),this.dispose()},dispose:function(){this.cleanDrawable(),this.isDisposed=!0,this.freeToPool()},audit:function(t,e,i){0},toString:function(){return this.constructor.name+"#"+this.id},toDetailedString:function(){return this.toString()}}),Zs.connectDrawables=function(t,e,i){t.nextDrawable!==e&&(t.nextDrawable&&(t.nextDrawable.markLinksDirty(i),t.nextDrawable.previousDrawable=null),e.previousDrawable&&(e.previousDrawable.markLinksDirty(i),e.previousDrawable.nextDrawable=null),t.nextDrawable=e,e.previousDrawable=t,t.markLinksDirty(i),e.markLinksDirty(i))},Zs.disconnectBefore=function(t,e){t.previousDrawable&&(t.markLinksDirty(e),t.previousDrawable.markLinksDirty(e),t.previousDrawable.nextDrawable=null,t.previousDrawable=null)},Zs.disconnectAfter=function(t,e){t.nextDrawable&&(t.markLinksDirty(e),t.nextDrawable.markLinksDirty(e),t.nextDrawable.previousDrawable=null,t.nextDrawable=null)},Zs.listToArray=function(t,e){const i=[];for(let n=t;i.push(n),n!==e;n=n.nextDrawable);return i},Zs.oldListToArray=function(t,e){const i=[];for(let n=t;i.push(n),n!==e;n=n.oldNextDrawable);return i};var Js=Zs;function $s(t,e){throw new Error("Should never be called")}we.register("Block",$s),Object(z.a)(Js,$s,{initializeBlock:function(t,e){return this.initializeDrawable(e),this.display=t,this.drawableCount=0,this.used=!0,this.firstDrawable=null,this.lastDrawable=null,this.pendingFirstDrawable=null,this.pendingLastDrawable=null,this.previousBlock=null,this.nextBlock=null,this.zIndex=0,this},dispose:function(){this.display=null,this.firstDrawable=null,this.lastDrawable=null,this.pendingFirstDrawable=null,this.pendingLastDrawable=null,this.previousBlock=null,this.nextBlock=null,Js.prototype.dispose.call(this)},addDrawable:function(t){this.drawableCount++,this.markDirtyDrawable(t)},removeDrawable:function(t){this.drawableCount--,this.markDirty()},onIntervalChange:function(t,e){},updateInterval:function(){this.pendingFirstDrawable===this.firstDrawable&&this.pendingLastDrawable===this.lastDrawable||(this.onIntervalChange(this.pendingFirstDrawable,this.pendingLastDrawable),this.firstDrawable=this.pendingFirstDrawable,this.lastDrawable=this.pendingLastDrawable)},notifyInterval:function(t,e){this.pendingFirstDrawable=t,this.pendingLastDrawable=e,this.updateInterval()},audit:function(t,e,i){0}});var tr=$s;function er(t,e){this.initialize(t,e)}we.register("ChangeInterval",er),Object(z.a)(Object,er,{initialize:function(t,e){return this.nextChangeInterval=null,this.drawableBefore=t,this.drawableAfter=e,this.collapsedEmpty=!1,this},dispose:function(){this.nextChangeInterval=null,this.drawableBefore=null,this.drawableAfter=null,this.freeToPool()},constrict:function(){let t=!1;if(this.isEmpty())return!0;for(;this.drawableBefore&&this.drawableBefore.nextDrawable===this.drawableBefore.oldNextDrawable;)if(this.drawableBefore=this.drawableBefore.nextDrawable,t=!0,this.drawableBefore||(this.collapsedEmpty=!0),this.isEmpty())return!0;for(;this.drawableAfter&&this.drawableAfter.previousDrawable===this.drawableAfter.oldPreviousDrawable;)if(this.drawableAfter=this.drawableAfter.previousDrawable,t=!0,this.drawableAfter||(this.collapsedEmpty=!0),this.isEmpty())return!0;return t},isEmpty:function(){return this.collapsedEmpty||null!==this.drawableBefore&&this.drawableBefore===this.drawableAfter},getOldInternalDrawableCount:function(t,e){const i=this.drawableBefore?this.drawableBefore.oldNextDrawable:t,n=this.drawableAfter;let s=0;for(let r=i;r!==n;r=r.oldNextDrawable)s++;return s},getNewInternalDrawableCount:function(t,e){const i=this.drawableBefore?this.drawableBefore.nextDrawable:t,n=this.drawableAfter;let s=0;for(let r=i;r!==n;r=r.nextDrawable)s++;return s}}),$t.a.mixInto(er,{initialize:er.prototype.initialize}),er.newForDisplay=function(t,e,i){const n=er.createFromPool(t,e);return i.markChangeIntervalToDispose(n),n};var ir=er;function nr(t,e){this.canvas=t,this.context=e,this.resetStyles()}we.register("CanvasContextWrapper",nr),Object(z.a)(Object,nr,{resetStyles:function(){this.fillStyle=void 0,this.strokeStyle=void 0,this.lineWidth=void 0,this.lineCap=void 0,this.lineJoin=void 0,this.lineDash=void 0,this.lineDashOffset=void 0,this.miterLimit=void 0,this.font=void 0,this.direction=void 0},setDimensions:function(t,e){this.canvas.width=t,this.canvas.height=e,this.resetStyles()},setFillStyle:function(t){t&&t instanceof Ot&&(t=t.value),t&&t.getCanvasStyle&&(t=t.getCanvasStyle()),this.fillStyle!==t&&(this.fillStyle=t,this.context.fillStyle=t)},setStrokeStyle:function(t){t&&t instanceof Ot&&(t=t.value),t&&t.getCanvasStyle&&(t=t.getCanvasStyle()),this.strokeStyle!==t&&(this.strokeStyle=t,this.context.strokeStyle=t)},setLineWidth:function(t){this.lineWidth!==t&&(this.lineWidth=t,this.context.lineWidth=t)},setLineCap:function(t){this.lineCap!==t&&(this.lineCap=t,this.context.lineCap=t)},setLineJoin:function(t){this.lineJoin!==t&&(this.lineJoin=t,this.context.lineJoin=t)},setMiterLimit:function(t){this.miterLimit!==t&&(this.miterLimit=t,this.context.miterLimit=t)},setLineDash:function(t){this.lineDash!==t&&(this.lineDash=t,this.context.setLineDash?this.context.setLineDash(null===t?[]:t):void 0!==this.context.mozDash?this.context.mozDash=t:void 0!==this.context.webkitLineDash&&(this.context.webkitLineDash=t||[]))},setLineDashOffset:function(t){this.lineDashOffset!==t&&(this.lineDashOffset=t,void 0!==this.context.lineDashOffset?this.context.lineDashOffset=t:void 0!==this.context.webkitLineDashOffset&&(this.context.webkitLineDashOffset=t))},setFont:function(t){this.font!==t&&(this.font=t,this.context.font=t)},setDirection:function(t){this.direction!==t&&(this.direction=t,this.context.direction=t)}});var sr=nr;const rr=ne.NOTHING.copy();function or(t,e,i){this.initialize(t,e,i)}we.register("FittedBlock",or),Object(z.a)(tr,or,{initializeFittedBlock:function(t,e,i,n){return this.initializeBlock(t,e),this.transformRootInstance=i,this.canBeFullDisplay=i.isDisplayRoot,this.preferredFit=n,this.fit=n,this.dirtyFit=!0,this.dirtyFitListener=this.dirtyFitListener||this.markDirtyFit.bind(this),this.commonFitInstance=null,this.fitBounds=ne.NOTHING.copy(),this.oldFitBounds=ne.NOTHING.copy(),this.fitOffset=new te.a(0,0),this.unfittableDrawableCount=0,this.fittableListener=this.onFittabilityChange.bind(this),this.forceAcceleration=!1,this.display.sizeProperty.lazyLink(this.dirtyFitListener),this},setFit:function(t){this.canBeFullDisplay||t!==or.FULL_DISPLAY||(t=or.COMMON_ANCESTOR),this.fit!==t&&(this.fit=t,this.markDirtyFit(),this.oldFitBounds.set(ne.NOTHING),t===or.COMMON_ANCESTOR&&this.removeCommonFitInstance())},markDirtyFit:function(){this.dirtyFit=!0,this.markDirty()},updateFit:function(){if(this.dirtyFit||this.fit!==or.FULL_DISPLAY)if(this.dirtyFit=!1,this.fit===or.COMMON_ANCESTOR&&null===this.commonFitInstance&&this.addCommonFitInstance(this.computeCommonAncestorInstance()),this.fit===or.COMMON_ANCESTOR&&this.commonFitInstance.fittability.subtreeUnfittableCount>0&&this.canBeFullDisplay&&(this.oldFitBounds.set(ne.NOTHING),this.fit=or.FULL_DISPLAY),this.fit===or.FULL_DISPLAY)this.fitBounds.set(ne.NOTHING),this.setSizeFullDisplay();else{if(this.fit!==or.COMMON_ANCESTOR)throw new Error("unknown fit");{this.fitBounds.set(this.commonFitInstance.node.getLocalBounds());let t=this.commonFitInstance;for(;t!==this.transformRootInstance;)this.fitBounds.transform(t.node.getMatrix()),t=t.parent;this.fitBounds.roundOut(),this.fitBounds.dilate(4),this.transformRootInstance.isDisplayRoot&&(rr.setMinMax(0,0,this.display.width,this.display.height),this.fitBounds.constrainBounds(rr)),this.fitBounds.isValid()||this.fitBounds.setMinMax(0,0,0,0),this.fitBounds.equals(this.oldFitBounds)||(this.oldFitBounds.set(this.fitBounds),this.setSizeFitBounds())}}},setSizeFullDisplay:function(){},setSizeFitBounds:function(){},addCommonFitInstance:function(t){t&&(this.commonFitInstance=t,this.commonFitInstance.fittability.subtreeFittabilityChangeEmitter.addListener(this.dirtyFitListener))},removeCommonFitInstance:function(){this.commonFitInstance&&(this.commonFitInstance.fittability.subtreeFittabilityChangeEmitter.removeListener(this.dirtyFitListener),this.commonFitInstance=null)},dispose:function(){this.display.sizeProperty.unlink(this.dirtyFitListener),this.removeCommonFitInstance(),this.transformRootInstance=null,tr.prototype.dispose.call(this)},addDrawable:function(t){tr.prototype.addDrawable.call(this,t),t.fittableProperty.lazyLink(this.fittableListener),t.fittable||this.incrementUnfittable()},removeDrawable:function(t){tr.prototype.removeDrawable.call(this,t),t.fittableProperty.unlink(this.fittableListener),t.fittable||this.decrementUnfittable()},onFittabilityChange:function(t){t?this.decrementUnfittable():this.incrementUnfittable()},incrementUnfittable:function(){this.unfittableDrawableCount++,1===this.unfittableDrawableCount&&this.checkFitConstraints()},decrementUnfittable:function(){this.unfittableDrawableCount--,0===this.unfittableDrawableCount&&this.checkFitConstraints()},checkFitConstraints:function(){this.unfittableDrawableCount>0&&this.canBeFullDisplay?this.setFit(or.FULL_DISPLAY):this.setFit(this.preferredFit)},computeCommonAncestorInstance:function(){let t=this.firstDrawable.instance,e=this.lastDrawable.instance;const i=Math.min(t.trail.length,e.trail.length);for(;t.trail.length>i;)t=t.parent;for(;e.trail.length>i;)e=e.parent;for(;t!==e;)t=t.parent,e=e.parent;return t},onIntervalChange:function(t,e){tr.prototype.onIntervalChange.call(this,t,e),this.fit===or.COMMON_ANCESTOR&&(this.removeCommonFitInstance(),this.markDirtyFit())}}),or.FULL_DISPLAY=1,or.COMMON_ANCESTOR=2,or.fitString={1:"fullDisplay",2:"commonAncestor"};var ar=or;const lr=new Ye,hr=new Ye;function ur(t,e,i,n){this.initialize(t,e,i,n)}we.register("CanvasBlock",ur),Object(z.a)(ar,ur,{initialize:function(t,e,i,n){return this.initializeFittedBlock(t,e,i,ar.COMMON_ANCESTOR),this.filterRootInstance=n,this.dirtyDrawables=Ke(this.dirtyDrawables),this.domElement||(this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.left="0",this.canvas.style.top="0",this.canvas.style.pointerEvents="none",this.canvasId=this.canvas.id="scenery-canvas"+this.id,this.context=this.canvas.getContext("2d"),this.context.save(),this.context.miterLimit=20,this.context.miterLimit=10,this.wrapper=new sr(this.canvas,this.context),this.domElement=this.canvas,this.wrapperStack=[this.wrapper]),this.wrapperStackIndex=0,this.filterListenerCountMap=this.filterListenerCountMap||{},Ks.prepareForTransform(this.canvas,this.forceAcceleration),Ks.unsetTransform(this.canvas),this.canvasDrawOffset=new te.a(0,0),this.currentDrawable=null,this.clipDirty=!0,this.clipCount=0,this.backingScale=e&An.bitmaskCanvasLowResolution?1:Ks.backingScale(this.context),this.clipDirtyListener=this.markDirty.bind(this),this.opacityDirtyListener=this.markDirty.bind(this),this.filterRootNode=this.filterRootInstance.node,this},setSizeFullDisplay:function(){const t=this.display.getSize();this.canvas.width=t.width*this.backingScale,this.canvas.height=t.height*this.backingScale,this.canvas.style.width=t.width+"px",this.canvas.style.height=t.height+"px",this.wrapper.resetStyles(),this.canvasDrawOffset.setXY(0,0),Ks.unsetTransform(this.canvas)},setSizeFitBounds:function(){const t=this.fitBounds.minX,e=this.fitBounds.minY;this.canvasDrawOffset.setXY(-t,-e),Ks.setTransform("matrix(1,0,0,1,"+t+","+e+")",this.canvas,this.forceAcceleration),this.canvas.width=this.fitBounds.width*this.backingScale,this.canvas.height=this.fitBounds.height*this.backingScale,this.canvas.style.width=this.fitBounds.width+"px",this.canvas.style.height=this.fitBounds.height+"px",this.wrapper.resetStyles()},update:function(){if(!ar.prototype.update.call(this))return!1;for(;this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();this.updateFit(),this.context.restore(),this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.save(),this.wrapper.resetStyles(),this.currentDrawable=null;for(let t=this.firstDrawable;null!==t&&(this.renderDrawable(t),t!==this.lastDrawable);t=t.nextDrawable);return this.currentDrawable&&this.walkDown(this.currentDrawable.instance.trail,0),!0},applyClip:function(t){this.clipDirty=!1;const e=this.wrapperStack[this.wrapperStackIndex],i=e.context;if(i.restore(),i.save(),e.resetStyles(),this.clipCount){const e=t.instance.trail;lr.rowMajor(this.backingScale,0,this.canvasDrawOffset.x*this.backingScale,0,this.backingScale,this.canvasDrawOffset.y*this.backingScale,0,0,1),hr.set(this.transformRootInstance.trail.getMatrix()).invert(),hr.multiplyMatrix(lr).canvasSetTransform(i);for(let t=0;t<e.length;t++){const n=e.nodes[t];n.getMatrix().canvasAppendTransform(i),n.hasClipArea()&&(i.beginPath(),n.clipArea.writeToContext(i),i.clip())}}},walkDown:function(t,e){const i=this.filterRootInstance.trail.length-1;for(let n=t.length-1;n>=e;n--){const e=t.nodes[n];if(e.hasClipArea()&&(this.clipCount--,this.clipDirty=!0),n>i&&1!==e.getOpacity()){const t=this.wrapperStack[this.wrapperStackIndex],i=this.wrapperStack[this.wrapperStackIndex-1];this.wrapperStackIndex--,this.clipDirty=!0,i.context.setTransform(1,0,0,1,0,0),i.context.globalAlpha=e.getOpacity(),i.context.drawImage(t.canvas,0,0),i.context.globalAlpha=1}}},walkUp:function(t,e){const i=this.filterRootInstance.trail.length-1;for(let n=e;n<t.length;n++){const e=t.nodes[n];if(n>i&&1!==e.getOpacity()){if(this.wrapperStackIndex++,this.clipDirty=!0,this.wrapperStackIndex===this.wrapperStack.length){const t=document.createElement("canvas"),e=t.getContext("2d");e.save(),this.wrapperStack.push(new sr(t,e))}const t=this.wrapperStack[this.wrapperStackIndex],e=t.context;t.setDimensions(this.canvas.width,this.canvas.height),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,this.canvas.width,this.canvas.height)}e.hasClipArea()&&(this.clipCount++,this.clipDirty=!0)}},renderDrawable:function(t){if(!t.visible)return;const e=this.currentDrawable?t.instance.getBranchIndexTo(this.currentDrawable.instance):0;this.currentDrawable&&this.walkDown(this.currentDrawable.instance.trail,e),this.walkUp(t.instance.trail,e);const i=this.wrapperStack[this.wrapperStackIndex],n=i.context;this.clipDirty&&this.applyClip(t);const s=t.instance.relativeTransform.matrix;n.setTransform(this.backingScale,0,0,this.backingScale,this.canvasDrawOffset.x*this.backingScale,this.canvasDrawOffset.y*this.backingScale),t.instance!==this.transformRootInstance&&s.canvasAppendTransform(n),t.paintCanvas(i,t.instance.node,t.instance.relativeTransform.matrix),this.currentDrawable=t},dispose:function(){this.filterRootNode=null,this.transformRootInstance=null,Ke(this.dirtyDrawables),this.canvas.width=0,this.canvas.height=0,ar.prototype.dispose.call(this)},markDirtyDrawable:function(t){this.dirtyDrawables.push(t),this.markDirty()},addDrawable:function(t){ar.prototype.addDrawable.call(this,t);for(let e=t.instance;e&&e!==this.filterRootInstance;e=e.parent){const t=e.node;this.filterListenerCountMap[t.id]?this.filterListenerCountMap[t.id]++:(this.filterListenerCountMap[t.id]=1,t.opacityProperty.lazyLink(this.opacityDirtyListener),t.clipAreaProperty.lazyLink(this.clipDirtyListener))}},removeDrawable:function(t){for(let e=t.instance;e&&e!==this.filterRootInstance;e=e.parent){const t=e.node;this.filterListenerCountMap[t.id]--,0===this.filterListenerCountMap[t.id]&&(delete this.filterListenerCountMap[t.id],t.clipAreaProperty.unlink(this.clipDirtyListener),t.opacityProperty.unlink(this.opacityDirtyListener))}ar.prototype.removeDrawable.call(this,t)},onIntervalChange:function(t,e){ar.prototype.onIntervalChange.call(this,t,e),this.markDirty()},onPotentiallyMovedDrawable:function(t){t.markDirty()},toString:function(){return`CanvasBlock#${this.id}-${ar.fitString[this.fit]}`}}),$t.a.mixInto(ur,{initialize:ur.prototype.initialize});var cr=ur;function dr(t,e){this.initialize(t,e)}we.register("DOMBlock",dr),Object(z.a)(tr,dr,{initialize:function(t,e){return this.initializeBlock(t,e.renderer),this.domDrawable=e,this.domElement=e.domElement,this},update:function(){return!!tr.prototype.update.call(this)&&(this.domDrawable.update(),!0)},dispose:function(){this.domDrawable=null,this.domElement=null,tr.prototype.dispose.call(this)},markDirtyDrawable:function(t){this.markDirty()},addDrawable:function(t){tr.prototype.addDrawable.call(this,t)},removeDrawable:function(t){tr.prototype.removeDrawable.call(this,t)}}),$t.a.mixInto(dr,{initialize:dr.prototype.initialize});var pr=dr;const fr="http://www.w3.org/2000/svg";we.register("svgns",fr);var mr=fr;function gr(t,e,i){this.initialize(t,e,i)}we.register("SVGGroup",gr),Object(z.a)(Object,gr,{initialize:function(t,e,i){return this.block=t,this.instance=e,this.node=e.trail.lastNode(),this.parent=i,this.children=Ke(this.children),this.hasSelfDrawable=!1,this.selfDrawable=null,this.dirty=!0,this.willApplyTransforms=this.block.transformRootInstance.trail.nodes.length<this.instance.trail.nodes.length,this.willApplyFilters=this.block.filterRootInstance.trail.nodes.length<this.instance.trail.nodes.length,this.transformDirty=!0,this.hasTransform=void 0!==this.hasTransform&&this.hasTransform,this.transformDirtyListener=this.transformDirtyListener||this.markTransformDirty.bind(this),this.willApplyTransforms&&this.node.transformEmitter.addListener(this.transformDirtyListener),this.opacityDirty=!0,this.visibilityDirty=!0,this.clipDirty=!0,this.hasOpacity=void 0!==this.hasOpacity&&this.hasOpacity,this.clipDefinition=void 0!==this.clipDefinition?this.clipDefinition:null,this.clipPath=void 0!==this.clipPath?this.clipPath:null,this.opacityDirtyListener=this.opacityDirtyListener||this.markOpacityDirty.bind(this),this.visibilityDirtyListener=this.visibilityDirtyListener||this.markVisibilityDirty.bind(this),this.clipDirtyListener=this.clipDirtyListener||this.markClipDirty.bind(this),this.node.visibleProperty.lazyLink(this.visibilityDirtyListener),this.willApplyFilters&&this.node.opacityProperty.lazyLink(this.opacityDirtyListener),this.node.clipAreaProperty.lazyLink(this.clipDirtyListener),this.orderDirty=!0,this.orderDirtyListener=this.orderDirtyListener||this.markOrderDirty.bind(this),this.node.childrenChangedEmitter.addListener(this.orderDirtyListener),this.svgGroup||(this.svgGroup=document.createElementNS(mr,"g")),this.instance.addSVGGroup(this),this.block.markDirtyGroup(this),this},addSelfDrawable:function(t){this.selfDrawable=t,this.svgGroup.insertBefore(t.svgElement,this.children.length?this.children[0].svgGroup:null),this.hasSelfDrawable=!0},removeSelfDrawable:function(t){this.hasSelfDrawable=!1,this.svgGroup.removeChild(t.svgElement),this.selfDrawable=null},addChildGroup:function(t){this.markOrderDirty(),t.parent=this,this.children.push(t),this.svgGroup.appendChild(t.svgGroup)},removeChildGroup:function(t){this.markOrderDirty(),t.parent=null,this.children.splice(_.indexOf(this.children,t),1),this.svgGroup.removeChild(t.svgGroup)},markDirty:function(){this.dirty||(this.dirty=!0,this.block.markDirtyGroup(this))},markOrderDirty:function(){this.orderDirty||(this.orderDirty=!0,this.markDirty())},markTransformDirty:function(){this.transformDirty||(this.transformDirty=!0,this.markDirty())},markOpacityDirty:function(){this.opacityDirty||(this.opacityDirty=!0,this.markDirty())},markVisibilityDirty:function(){this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())},markClipDirty:function(){this.clipDirty||(this.clipDirty=!0,this.markDirty())},update:function(){if(!this.block)return;const t=this.svgGroup;if(this.dirty=!1,this.transformDirty)if(this.transformDirty=!1,this.willApplyTransforms){this.node.transform.isIdentity()?this.hasTransform&&(this.hasTransform=!1,Pn.ie9||Pn.ie10?t.setAttribute("transform",""):t.removeAttribute("transform")):(this.hasTransform=!0,t.setAttribute("transform",this.node.transform.getMatrix().getSVGTransform()))}else this.hasTransform&&(this.hasTransform=!1,Pn.ie9||Pn.ie10?t.setAttribute("transform",""):t.removeAttribute("transform"));if(this.visibilityDirty&&(this.visibilityDirty=!1,t.style.display=this.node.isVisible()?"":"none"),this.opacityDirty&&(this.opacityDirty=!1,this.willApplyFilters&&1!==this.node.opacity?(this.hasOpacity=!0,t.setAttribute("opacity",this.node.opacity)):this.hasOpacity&&(this.hasOpacity=!1,t.removeAttribute("opacity"))),this.clipDirty)if(this.clipDirty=!1,this.node.clipArea){if(!this.clipDefinition){const e="clip"+this.node.getId();this.clipDefinition=document.createElementNS(mr,"clipPath"),this.clipDefinition.setAttribute("id",e),this.clipDefinition.setAttribute("clipPathUnits","userSpaceOnUse"),this.block.defs.appendChild(this.clipDefinition),this.clipPath=document.createElementNS(mr,"path"),this.clipDefinition.appendChild(this.clipPath),t.setAttribute("clip-path","url(#"+e+")")}this.clipPath.setAttribute("d",this.node.clipArea.getSVGPath())}else this.clipDefinition&&(t.removeAttribute("clip-path"),this.block.defs.removeChild(this.clipDefinition),this.clipDefinition=null,this.clipPath=null);if(this.orderDirty){this.orderDirty=!1;let e=this.children.length-1;const i=this.instance.children;for(let n=i.length-1;n>=0;n--){const s=i[n].lookupSVGGroup(this.block);if(s){if(this.children[e]!==s){t.insertBefore(s.svgGroup,e+1>=this.children.length?null:this.children[e+1].svgGroup);const i=_.indexOf(this.children,s);this.children.splice(i,1),this.children.splice(e,0,s)}e--}}}},isReleasable:function(){return!this.hasSelfDrawable&&!this.children.length&&this.parent},dispose:function(){this.willApplyTransforms&&this.node.transformEmitter.removeListener(this.transformDirtyListener),this.node.visibleProperty.unlink(this.visibilityDirtyListener),this.willApplyFilters&&this.node.opacityProperty.unlink(this.opacityDirtyListener),this.node.clipAreaProperty.unlink(this.clipDirtyListener),this.node.childrenChangedEmitter.removeListener(this.orderDirtyListener),this.instance.active&&this.instance.removeSVGGroup(this),this.clipDefinition&&(this.svgGroup.removeAttribute("clip-path"),this.block.defs.removeChild(this.clipDefinition),this.clipDefinition=null,this.clipPath=null),this.parent=null,this.block=null,this.instance=null,this.node=null,Ke(this.children),this.selfDrawable=null,this.freeToPool()},toString:function(){return"SVGGroup:"+this.block.toString()+"_"+this.instance.toString()}}),gr.addDrawable=function(t,e){gr.ensureGroupsToInstance(t,e.instance).addSelfDrawable(e)},gr.removeDrawable=function(t,e){e.instance.lookupSVGGroup(t).removeSelfDrawable(e),gr.releaseGroupsToInstance(t,e.instance)},gr.ensureGroupsToInstance=function(t,e){let i=e.lookupSVGGroup(t);if(!i){const n=gr.ensureGroupsToInstance(t,e.parent);i=gr.createFromPool(t,e,n),n.addChildGroup(i)}return i},gr.releaseGroupsToInstance=function(t,e){const i=e.lookupSVGGroup(t);if(i.isReleasable()){const e=i.parent;e.removeChildGroup(i),gr.releaseGroupsToInstance(t,e.instance),i.dispose()}},$t.a.mixInto(gr,{initialize:gr.prototype.initialize});var yr=gr;function br(t,e,i,n){this.initialize(t,e,i,n)}we.register("SVGBlock",br),Object(z.a)(ar,br,{initialize:function(t,e,i,n){this.initializeFittedBlock(t,e,i,ar.COMMON_ANCESTOR),this.filterRootInstance=n,this.dirtyGradients=Ke(this.dirtyGradients),this.dirtyGroups=Ke(this.dirtyGroups),this.dirtyDrawables=Ke(this.dirtyDrawables),this.paintMap={},this.domElement||(this.svg=document.createElementNS(mr,"svg"),this.svg.style.position="absolute",this.svg.style.left="0",this.svg.style.top="0",this.svg.setAttribute("focusable",!1),this.svg.style["pointer-events"]="none",this.defs=document.createElementNS(mr,"defs"),this.svg.appendChild(this.defs),this.baseTransformGroup=document.createElementNS(mr,"g"),this.svg.appendChild(this.baseTransformGroup),this.domElement=this.svg),Ks.prepareForTransform(this.svg,this.forceAcceleration),Ks.unsetTransform(this.svg),this.baseTransformGroup.setAttribute("transform","");const s=i.trail.nodes.length>n.trail.nodes.length?n:i;return this.rootGroup=yr.createFromPool(this,s,null),this.baseTransformGroup.appendChild(this.rootGroup.svgGroup),this},incrementPaint:function(t){if(this.paintMap.hasOwnProperty(t.id))this.paintMap[t.id].count++;else{const e=t.createSVGPaint(this);e.definition.setAttribute("id",t.id+"-"+this.id),this.paintMap[t.id]={count:1,paint:t,svgPaint:e},this.defs.appendChild(e.definition)}},decrementPaint:function(t){if(this.paintMap.hasOwnProperty(t.id)){const e=this.paintMap[t.id];1===e.count?(this.defs.removeChild(e.svgPaint.definition),e.svgPaint.dispose(),delete this.paintMap[t.id]):e.count--}},markDirtyGradient:function(t){this.dirtyGradients.push(t),this.markDirty()},markDirtyGroup:function(t){this.dirtyGroups.push(t),this.markDirty()},markDirtyDrawable:function(t){this.dirtyDrawables.push(t),this.markDirty()},setSizeFullDisplay:function(){this.baseTransformGroup.removeAttribute("transform"),Ks.unsetTransform(this.svg);const t=this.display.getSize();this.svg.setAttribute("width",t.width),this.svg.setAttribute("height",t.height)},setSizeFitBounds:function(){const t=this.fitBounds.minX,e=this.fitBounds.minY;this.baseTransformGroup.setAttribute("transform","translate("+-t+","+-e+")"),Ks.setTransform("matrix(1,0,0,1,"+t+","+e+")",this.svg,this.forceAcceleration),this.svg.setAttribute("width",this.fitBounds.width),this.svg.setAttribute("height",this.fitBounds.height)},update:function(){if(!ar.prototype.update.call(this))return!1;for(;this.dirtyGroups.length;){const t=this.dirtyGroups.pop();t.block===this&&t.update()}for(;this.dirtyGradients.length;)this.dirtyGradients.pop().update();for(;this.dirtyDrawables.length;){const t=this.dirtyDrawables.pop();t.parentDrawable===this&&t.update()}return this.updateFit(),!0},dispose:function(){for(this.svg.setAttribute("width","0"),this.svg.setAttribute("height","0"),this.filterRootInstance=null,Ke(this.dirtyGradients),Ke(this.dirtyGroups),Ke(this.dirtyDrawables),this.paintMap={},this.baseTransformGroup.removeChild(this.rootGroup.svgGroup),this.rootGroup.dispose(),this.rootGroup=null;this.defs.childNodes.length;)this.defs.removeChild(this.defs.childNodes[0]);ar.prototype.dispose.call(this)},addDrawable:function(t){ar.prototype.addDrawable.call(this,t),yr.addDrawable(this,t),t.updateSVGBlock(this)},removeDrawable:function(t){yr.removeDrawable(this,t),ar.prototype.removeDrawable.call(this,t)},onIntervalChange:function(t,e){ar.prototype.onIntervalChange.call(this,t,e)},toString:function(){return"SVGBlock#"+this.id+"-"+ar.fitString[this.fit]}}),$t.a.mixInto(br,{initialize:br.prototype.initialize});var vr=br;const _r={isValidValue:t=>t instanceof(window.phet?phet.axon.Action:o.Action)},Ar=t=>t.typeName,wr={};function xr(t){const e=t.map(Ar).join(",");return wr.hasOwnProperty(e)||(wr[e]=Sr(t)),wr[e]}const Sr=t=>{class e extends A{}return e.methods={execute:{returnType:V,parameterTypes:t,implementation:function(){this.phetioObject.execute.apply(this.phetioObject,arguments)},documentation:"Executes the function the Action is wrapping.",invocableForReadOnlyElements:!1}},e.documentation="Executes when an event occurs.",e.events=["emitted"],e.validator=_r,e.typeName=`ActionIO<${t.map(Ar).join(", ")}>`,e.parameterTypes=t,A.validateSubtype(e),e};o.register("ActionIO",xr);var Tr=xr;const Dr=[],Er=(["name","phetioType","phetioDocumentation","phetioPrivate"].concat(m.VALIDATOR_KEYS),t=>t.phetioType),Cr=t=>t.name;class Pr extends vt{constructor(t,e){const i=(e=Object(s.a)({parameters:Dr,tandem:T.a.OPTIONAL,phetioOuterType:Tr,phetioState:!1,phetioPlayback:vt.DEFAULT_OPTIONS.phetioPlayback,phetioEventMetadata:vt.DEFAULT_OPTIONS.phetioEventMetadata,phetioDocumentation:"A function that executes."},e)).parameters.filter(Er);e.phetioType=e.phetioOuterType(i.map(Er)),e.phetioPlayback&&(e.phetioEventMetadata=e.phetioEventMetadata||{},e.phetioEventMetadata.dataKeys=e.parameters.map(Cr)),e.phetioDocumentation=Pr.getPhetioDocumentation(e.phetioDocumentation,i),super(e),this._parameters=e.parameters,this._action=t,this._phetioOuterType=e.phetioOuterType}static validateParameters(t,e){y(t,{valueType:Array});let i=!1;for(let n=0;n<t.length;n++){const e=t[n];i=i||e.phetioPrivate;for(const t in e);m.validateValidator(e)}}getPhetioData(){let t=null;if(this._parameters.length>0){t={};for(let e=0;e<this._parameters.length;e++){const i=this._parameters[e];i.phetioPrivate||(t[i.name]=i.phetioType.toStateObject(arguments[e]))}}return t}static getPhetioDocumentation(t,e){return t+(0===e.length?" No arguments.":" The arguments are:<br/><ol>"+e.map(t=>{const e=t.phetioDocumentation?" - "+t.phetioDocumentation:"";return`<li>${t.name}: ${t.phetioType.typeName}${e}</li>`}).join("<br/>")+"</ol>")}execute(){this.phetioStartEvent("emitted",{getData:()=>this.getPhetioData.apply(this,arguments)}),this._action.apply(null,arguments),this.phetioEndEvent()}}o.register("Action",Pr);var kr=Pr;const Ir={isValidValue:t=>t instanceof(window.phet?phet.axon.Emitter:o.Emitter)},Lr={};function Or(t){const e=t.map(t=>t.typeName).join(",");return Lr.hasOwnProperty(e)||(Lr[e]=Rr(t)),Lr[e]}const Rr=t=>{class e extends(Tr(t)){}return e.methods={addListener:{returnType:V,parameterTypes:[B(V,t)],implementation:function(t){this.phetioObject.addListener(t)},documentation:"Adds a listener which will be called when the emitter emits."},emit:{returnType:V,parameterTypes:t,implementation:function(){this.phetioObject.emit.apply(this.phetioObject,arguments)},documentation:"Emits a single event to all listeners.",invocableForReadOnlyElements:!1}},e.documentation="Emits when an event occurs and calls added listeners.",e.parameterTypes=t,e.validator=Ir,e.typeName=`EmitterIO<${t.map(t=>t.typeName).join(", ")}>`,A.validateSubtype(e),e};o.register("EmitterIO",Or);var Nr=Or;class Mr extends kr{constructor(t){super((function(){e.tinyEmitter.emit.apply(e.tinyEmitter,arguments)}),t=Object(s.a)({phetioOuterType:Nr},t));const e=this;this.tinyEmitter=new H}execute(){}emit(){super.execute.apply(this,arguments)}dispose(){this.tinyEmitter.dispose(),super.dispose()}addListener(t){this.tinyEmitter.addListener(t)}removeListener(t){this.tinyEmitter.removeListener(t)}removeAllListeners(){this.tinyEmitter.removeAllListeners()}hasListener(t){return this.tinyEmitter.hasListener(t)}hasListeners(){return this.tinyEmitter.hasListeners()}getListenerCount(){return this.tinyEmitter.getListenerCount()}}o.register("Emitter",Mr);var Br=Mr;function Fr(t,e,i,n){n=Object(s.a)({attributes:[],uniforms:[]},n),this.vertexSource=e,this.fragmentSource=i,this.attributeNames=n.attributes,this.uniformNames=n.uniforms,this.initialize(t)}we.register("ShaderProgram",Fr),Object(z.a)(Object,Fr,{initialize:function(t){const e=this;this.gl=t,this.used=!1,this.program=this.gl.createProgram(),this.vertexShader=Ks.createShader(this.gl,this.vertexSource,this.gl.VERTEX_SHADER),this.fragmentShader=Ks.createShader(this.gl,this.fragmentSource,this.gl.FRAGMENT_SHADER),this.gl.attachShader(this.program,this.vertexShader),this.gl.attachShader(this.program,this.fragmentShader),this.gl.linkProgram(this.program),this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)||(console.log("GLSL link error:"),console.log(this.gl.getProgramInfoLog(this.program)),console.log("for vertex shader"),console.log(this.vertexSource),console.log("for fragment shader"),console.log(this.fragmentSource)),this.gl.deleteShader(this.vertexShader),this.gl.deleteShader(this.fragmentShader),this.uniformLocations={},this.attributeLocations={},this.activeAttributes={},_.each(this.attributeNames,(function(t){e.attributeLocations[t]=e.gl.getAttribLocation(e.program,t),e.activeAttributes[t]=!0})),_.each(this.uniformNames,(function(t){e.uniformLocations[t]=e.gl.getUniformLocation(e.program,t)})),this.isInitialized=!0},use:function(){if(this.used)return;const t=this;this.used=!0,this.gl.useProgram(this.program),_.each(this.attributeNames,(function(e){t.activeAttributes[e]&&t.enableVertexAttribArray(e)}))},activateAttribute:function(t){this.activeAttributes[t]||(this.activeAttributes[t]=!0,this.used&&this.enableVertexAttribArray(t))},enableVertexAttribArray:function(t){this.gl.enableVertexAttribArray(this.attributeLocations[t])},unuse:function(){if(!this.used)return;const t=this;this.used=!1,_.each(this.attributeNames,(function(e){t.activeAttributes[e]&&t.disableVertexAttribArray(e)}))},disableVertexAttribArray:function(t){this.gl.disableVertexAttribArray(this.attributeLocations[t])},deactivateAttribute:function(t){this.activeAttributes[t]&&(this.activeAttributes[t]=!1,this.used&&this.disableVertexAttribArray(t))},dispose:function(){this.gl.deleteProgram(this.program)}});var Vr=Fr;function qr(t){this.rootBin=new w.a.BinPacker.Bin(t,null)}w.a.register("BinPacker",qr),Object(z.a)(Object,qr,{allocate:function(t,e){const i=this.rootBin.findAvailableBin(t,e);if(i){const n=i.split(t,e);return n.use(),n}return null},deallocate:function(t){t.unuse()},toString:function(){let t="",e="";return function i(n){t+=e+n.toString()+"\n",e+="  ",_.each(n.children,i),e=e.substring(2)}(this.rootBin),t}}),qr.Bin=function(t,e){this.bounds=t,this.parent=e,this.isSplit=!1,this.isUsed=!1,this.children=[]},Object(z.a)(Object,qr.Bin,{findAvailableBin:function(t,e){if(this.isUsed)return null;if(this.bounds.width<t||this.bounds.height<e)return null;if(this.isSplit){for(let i=0;i<this.children.length;i++){const n=this.children[i].findAvailableBin(t,e);if(n)return n}return null}return this},split:function(t,e){if(t===this.bounds.width&&e===this.bounds.height)return this;this.isSplit=!0;const i=this.bounds.minX+t,n=this.bounds.minY+e,s=new ne(this.bounds.minX,this.bounds.minY,i,n),r=new ne(i,this.bounds.minY,this.bounds.maxX,n),o=new ne(this.bounds.minX,n,this.bounds.maxX,this.bounds.maxY),a=new w.a.BinPacker.Bin(s,this);return this.children.push(a),r.hasNonzeroArea()&&this.children.push(new w.a.BinPacker.Bin(r,this)),o.hasNonzeroArea()&&this.children.push(new w.a.BinPacker.Bin(o,this)),a},use:function(){this.isUsed=!0},unuse:function(){this.isUsed=!1,this.parent&&this.parent.attemptToCollapse()},attemptToCollapse:function(){for(let t=0;t<this.children.length;t++){const e=this.children[t];if(e.isSplit||e.isUsed)return}this.children=[],this.isSplit=!1,this.parent&&this.parent.attemptToCollapse()},toString:function(){return this.bounds.toString()+(this.isUsed?" used":"")}});var Hr=qr;const Yr=new re(1024,1024);function jr(t){this.useMipmaps=t,this.gl=null,this.texture=null,this.bounds=new ne(0,0,Yr.width,Yr.height),this.width=this.bounds.width,this.height=this.bounds.height,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.binPacker=new Hr(this.bounds),this.dirty=!0,this.usedSprites=[],this.unusedSprites=[]}we.register("SpriteSheet",jr),Object(z.a)(Object,jr,{initializeContext:function(t){this.gl=t,this.createTexture()},createTexture:function(){const t=this.gl;this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.useMipmaps?t.LINEAR_MIPMAP_LINEAR:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.canvas),this.useMipmaps&&(t.hint(t.GENERATE_MIPMAP_HINT,t.NICEST),t.generateMipmap(t.TEXTURE_2D)),t.bindTexture(t.TEXTURE_2D,null),this.dirty=!1},updateTexture:function(){if(this.dirty){this.dirty=!1;const t=this.gl;t.bindTexture(t.TEXTURE_2D,this.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.canvas),this.useMipmaps&&(t.hint(t.GENERATE_MIPMAP_HINT,t.NICEST),t.generateMipmap(t.TEXTURE_2D)),t.bindTexture(t.TEXTURE_2D,null)}},addImage:function(t,e,i){let n,s;for(n=0;n<this.usedSprites.length;n++){const e=this.usedSprites[n];if(e.image===t)return e.count++,e}for(n=0;n<this.unusedSprites.length;n++){const e=this.unusedSprites[n];if(e.image===t)return e.count++,this.unusedSprites.splice(n,1),this.usedSprites.push(e),e}for(;!(s=this.binPacker.allocate(e+2+1,i+2+1))&&this.unusedSprites.length;){const t=this.unusedSprites.shift();this.dirty=!0;const e=t.bin.bounds;this.context.clearRect(e.x,e.y,e.width,e.height),this.binPacker.deallocate(t.bin)}if(s){const n=new ne((s.bounds.minX+1)/this.width,(s.bounds.minY+1)/this.height,(s.bounds.maxX-1-1)/this.width,(s.bounds.maxY-1-1)/this.height),r=new jr.Sprite(this,s,n,t,1);return this.copyImageWithGutter(t,e,i,s.bounds.x,s.bounds.y),this.dirty=!0,this.usedSprites.push(r),r}return null},removeImage:function(t){let e,i;for(i=0;i<this.usedSprites.length;i++)if(this.usedSprites[i].image===t){e=this.usedSprites[i];break}--e.count<=0&&(this.usedSprites.splice(i,1),this.unusedSprites.push(e))},containsImage:function(t){let e;for(e=0;e<this.usedSprites.length;e++)if(this.usedSprites[e].image===t)return!0;for(e=0;e<this.unusedSprites.length;e++)if(this.unusedSprites[e].image===t)return!0;return!1},copyImageWithGutter:function(t,e,i,n,s){this.copyImageRegion(t,1,1,0,0,n,s),this.copyImageRegion(t,1,1,e-1,0,n+1+e,s),this.copyImageRegion(t,1,1,e-1,i-1,n+1+e,s+1+i),this.copyImageRegion(t,1,1,0,i-1,n,s+1+i),this.copyImageRegion(t,e,1,0,0,n+1,s),this.copyImageRegion(t,e,1,0,i-1,n+1,s+1+i),this.copyImageRegion(t,1,i,0,0,n,s+1),this.copyImageRegion(t,1,i,e-1,0,n+1+e,s+1),this.context.drawImage(t,n+1,s+1)},copyImageRegion:function(t,e,i,n,s,r,o){this.context.drawImage(t,n,s,e,i,r,o,e,i)}}),jr.Sprite=function(t,e,i,n,s){this.spriteSheet=t,this.bin=e,this.uvBounds=i,this.image=n,this.count=s},jr.MAX_DIMENSION=Yr;var Gr=jr;function zr(t,e,i,n){this.initialize(t,e,i,n)}we.register("WebGLBlock",zr),Object(z.a)(ar,zr,{initialize:function(t,e,i,n){return this.initializeFittedBlock(t,e,i,ar.FULL_DISPLAY),this.filterRootInstance=n,this.preserveDrawingBuffer=t.options.preserveDrawingBuffer,this.dirtyDrawables=Ke(this.dirtyDrawables),this.spriteSheets=this.spriteSheets||[],this.projectionMatrix=this.projectionMatrix||new Ye,this.projectionMatrixArray=new Float32Array(9),this.customProcessor=this.customProcessor||new zr.CustomProcessor,this.vertexColorPolygonsProcessor=this.vertexColorPolygonsProcessor||new zr.VertexColorPolygons(this.projectionMatrixArray),this.texturedTrianglesProcessor=this.texturedTrianglesProcessor||new zr.TexturedTrianglesProcessor(this.projectionMatrixArray),this.glChangedEmitter=new Br,this.isContextLost=!1,this.contextLostListener=this.onContextLoss.bind(this),this.contextRestoreListener=this.onContextRestoration.bind(this),this.domElement||(this.domElement=document.createElement("div"),this.domElement.className="webgl-container",this.domElement.style.position="absolute",this.domElement.style.left="0",this.domElement.style.top="0",this.rebuildCanvas()),this.gl.clear(this.gl.COLOR_BUFFER_BIT),Ks.prepareForTransform(this.canvas,!1),Ks.unsetTransform(this.canvas),this},rebuildCanvas:function(){const t=document.createElement("canvas"),e=this.getContextFromCanvas(t);e&&(this.canvas&&(this.domElement.removeChild(this.canvas),this.canvas.removeEventListener("webglcontextlost",this.contextLostListener,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoreListener,!1)),this.canvas=t,this.canvas.style.pointerEvents="none",this.canvasId=this.canvas.id="scenery-webgl"+this.id,this.canvas.addEventListener("webglcontextlost",this.contextLostListener,!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestoreListener,!1),this.domElement.appendChild(this.canvas),this.setupContext(e))},setupContext:function(t){this.isContextLost=!1,this.gl=t,this.backingScale=Ks.backingScale(this.gl),this.display._allowBackingScaleAntialiasing&&0===t.getParameter(t.SAMPLES)&&(this.backingScale*=2),this.originalBackingScale=this.backingScale,Ks.applyWebGLContextDefaults(this.gl),this.markDirty(),this.dirtyFit=!0,this.customProcessor.initializeContext(this.gl),this.vertexColorPolygonsProcessor.initializeContext(this.gl),this.texturedTrianglesProcessor.initializeContext(this.gl);for(let e=0;e<this.spriteSheets.length;e++)this.spriteSheets[e].initializeContext(this.gl);this.glChangedEmitter.emit()},delayedRebuildCanvas:function(){const t=this;window.setTimeout((function(){t.rebuildCanvas()}))},onContextLoss:function(t){this.isContextLost||(this.isContextLost=!0,t.preventDefault(),this.canvas.style.display="none",this.markDirty())},onContextRestoration:function(t){if(this.isContextLost){const t=this.getContextFromCanvas(this.canvas);this.setupContext(t),this.canvas.style.display=""}},getContextFromCanvas:function(t){const e={antialias:!0,preserveDrawingBuffer:this.preserveDrawingBuffer};return t.getContext("webgl",e)||t.getContext("experimental-webgl",e)},setSizeFullDisplay:function(){const t=this.display.getSize();this.canvas.width=Math.ceil(t.width*this.backingScale),this.canvas.height=Math.ceil(t.height*this.backingScale),this.canvas.style.width=t.width+"px",this.canvas.style.height=t.height+"px"},setSizeFitBounds:function(){throw new Error("setSizeFitBounds unimplemented for WebGLBlock")},update:function(){if(!ar.prototype.update.call(this))return!1;const t=this.gl;for(this.isContextLost&&this.display._aggressiveContextRecreation&&this.delayedRebuildCanvas();this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();const e=this.spriteSheets.length;for(let s=0;s<e;s++)this.spriteSheets[s].updateTexture();this.firstDrawable&&this.firstDrawable===this.lastDrawable&&this.firstDrawable.node&&null!==this.firstDrawable.node._hints.webglScale&&this.backingScale!==this.originalBackingScale*this.firstDrawable.node._hints.webglScale&&(this.backingScale=this.originalBackingScale*this.firstDrawable.node._hints.webglScale,this.dirtyFit=!0),this.updateFit(),this.projectionMatrix.rowMajor(2/this.display.width,0,-1,0,-2/this.display.height,1,0,0,1),this.projectionMatrix.copyToArray(this.projectionMatrixArray),this.preserveDrawingBuffer&&t.clear(t.COLOR_BUFFER_BIT),t.viewport(0,0,this.canvas.width,this.canvas.height);let i=null,n=0;for(let s=this.firstDrawable;null!==s;s=s.nextDrawable){if(s.visible){let t=null;s.webglRenderer===An.webglTexturedTriangles?t=this.texturedTrianglesProcessor:s.webglRenderer===An.webglCustom?t=this.customProcessor:s.webglRenderer===An.webglVertexColorPolygons&&(t=this.vertexColorPolygonsProcessor),t!==i&&(i&&(n+=i.deactivate()),i=t,i.activate()),i.processDrawable(s)}if(s===this.lastDrawable)break}return i&&(n+=i.deactivate()),0!==n||this.preserveDrawingBuffer||t.clear(t.COLOR_BUFFER_BIT),t.flush(),!0},dispose:function(){Ke(this.dirtyDrawables),ar.prototype.dispose.call(this)},markDirtyDrawable:function(t){this.dirtyDrawables.push(t),this.markDirty()},addDrawable:function(t){ar.prototype.addDrawable.call(this,t),t.onAddToBlock(this)},removeDrawable:function(t){let e=0;for(;(e=this.dirtyDrawables.indexOf(t,e))>=0;)this.dirtyDrawables.splice(e,1);t.onRemoveFromBlock(this),ar.prototype.removeDrawable.call(this,t)},addSpriteSheetImage:function(t,e,i){let n=null;const s=this.spriteSheets.length;for(let r=0;r<s;r++){if(n=this.spriteSheets[r].addImage(t,e,i),n)break}if(!n){const s=new Gr(!0);if(n=s.addImage(t,e,i),s.initializeContext(this.gl),this.spriteSheets.push(s),!n)throw new Error("Attempt to load image that is too large for sprite sheets")}return n},removeSpriteSheetImage:function(t){t.spriteSheet.removeImage(t.image)},onIntervalChange:function(t,e){ar.prototype.onIntervalChange.call(this,t,e),this.markDirty()},onPotentiallyMovedDrawable:function(t){this.markDirty()},toString:function(){return"WebGLBlock#"+this.id+"-"+ar.fitString[this.fit]}}),zr.CustomProcessor=function(){this.drawable=null},Object(z.a)(Object,zr.CustomProcessor,{initializeContext:function(t){},activate:function(){this.drawCount=0},processDrawable:function(t){this.drawable=t,this.draw()},deactivate:function(){return this.drawCount},draw:function(){if(this.drawable){const t=this.drawable.draw();this.drawCount+=t,this.drawable=null}}}),zr.VertexColorPolygons=function(t){this.projectionMatrixArray=t,this.lastArrayLength=128,this.vertexArray=new Float32Array(this.lastArrayLength)},Object(z.a)(Object,zr.VertexColorPolygons,{initializeContext:function(t){this.gl=t,this.shaderProgram=new Vr(t,["attribute vec2 aVertex;","attribute vec4 aColor;","varying vec4 vColor;","uniform mat3 uProjectionMatrix;","void main() {","  vColor = aColor;","  vec3 ndc = uProjectionMatrix * vec3( aVertex, 1.0 );","  gl_Position = vec4( ndc.xy, 0.0, 1.0 );","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main() {","  gl_FragColor = vec4( vColor.rgb * vColor.a, vColor.a );","}"].join("\n"),{attributes:["aVertex","aColor"],uniforms:["uProjectionMatrix"]}),this.vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.DYNAMIC_DRAW)},activate:function(){this.shaderProgram.use(),this.vertexArrayIndex=0,this.drawCount=0},processDrawable:function(t){if(t.includeVertices){const e=t.vertexArray;for(;e.length+this.vertexArrayIndex>this.vertexArray.length;){const t=new Float32Array(2*this.vertexArray.length);t.set(this.vertexArray),this.vertexArray=t}this.vertexArray.set(e,this.vertexArrayIndex),this.vertexArrayIndex+=e.length,this.drawCount++}},deactivate:function(){return this.drawCount&&this.draw(),this.shaderProgram.unuse(),this.drawCount},draw:function(){const t=this.gl;t.uniformMatrix3fv(this.shaderProgram.uniformLocations.uProjectionMatrix,!1,this.projectionMatrixArray),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray.length>this.lastArrayLength?t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.DYNAMIC_DRAW):t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray.subarray(0,this.vertexArrayIndex));const e=Float32Array.BYTES_PER_ELEMENT,i=6*e;t.vertexAttribPointer(this.shaderProgram.attributeLocations.aVertex,2,t.FLOAT,!1,i,0*e),t.vertexAttribPointer(this.shaderProgram.attributeLocations.aColor,4,t.FLOAT,!1,i,2*e),t.drawArrays(t.TRIANGLES,0,this.vertexArrayIndex/6),this.vertexArrayIndex=0}}),zr.TexturedTrianglesProcessor=function(t){this.projectionMatrixArray=t,this.lastArrayLength=128,this.vertexArray=new Float32Array(this.lastArrayLength)},Object(z.a)(Object,zr.TexturedTrianglesProcessor,{initializeContext:function(t){this.gl=t,this.shaderProgram=new Vr(t,["attribute vec2 aVertex;","attribute vec2 aTextureCoord;","attribute float aAlpha;","varying vec2 vTextureCoord;","varying float vAlpha;","uniform mat3 uProjectionMatrix;","void main() {","  vTextureCoord = aTextureCoord;","  vAlpha = aAlpha;","  vec3 ndc = uProjectionMatrix * vec3( aVertex, 1.0 );","  gl_Position = vec4( ndc.xy, 0.0, 1.0 );","}"].join("\n"),["precision mediump float;","varying vec2 vTextureCoord;","varying float vAlpha;","uniform sampler2D uTexture;","void main() {","  vec4 color = texture2D( uTexture, vTextureCoord, -0.7 );","  color.a *= vAlpha;","  gl_FragColor = color;","}"].join("\n"),{attributes:["aVertex","aTextureCoord","aAlpha"],uniforms:["uTexture","uProjectionMatrix"]}),this.vertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.DYNAMIC_DRAW)},activate:function(){this.shaderProgram.use(),this.currentSpriteSheet=null,this.vertexArrayIndex=0,this.drawCount=0},processDrawable:function(t){if(!t.sprite)return;this.currentSpriteSheet&&t.sprite.spriteSheet!==this.currentSpriteSheet&&this.draw(),this.currentSpriteSheet=t.sprite.spriteSheet;const e=t.vertexArray;for(;e.length+this.vertexArrayIndex>this.vertexArray.length;){const t=new Float32Array(2*this.vertexArray.length);t.set(this.vertexArray),this.vertexArray=t}this.vertexArray.set(e,this.vertexArrayIndex),this.vertexArrayIndex+=e.length},deactivate:function(){return this.currentSpriteSheet&&this.draw(),this.shaderProgram.unuse(),this.drawCount},draw:function(){const t=this.gl;t.uniformMatrix3fv(this.shaderProgram.uniformLocations.uProjectionMatrix,!1,this.projectionMatrixArray),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray.length>this.lastArrayLength?t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.DYNAMIC_DRAW):t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray.subarray(0,this.vertexArrayIndex));const e=Float32Array.BYTES_PER_ELEMENT,i=5*e;t.vertexAttribPointer(this.shaderProgram.attributeLocations.aVertex,2,t.FLOAT,!1,i,0*e),t.vertexAttribPointer(this.shaderProgram.attributeLocations.aTextureCoord,2,t.FLOAT,!1,i,2*e),t.vertexAttribPointer(this.shaderProgram.attributeLocations.aAlpha,1,t.FLOAT,!1,i,4*e),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.currentSpriteSheet.texture),t.uniform1i(this.shaderProgram.uniformLocations.uTexture,0),t.drawArrays(t.TRIANGLES,0,this.vertexArrayIndex/5),t.bindTexture(t.TEXTURE_2D,null),this.drawCount++,this.currentSpriteSheet=null,this.vertexArrayIndex=0}}),$t.a.mixInto(zr,{initialize:zr.prototype.initialize});var Wr=zr;function Ur(t,e){throw new Error("We are too abstract for that!")}we.register("Stitcher",Ur),Object(z.a)(Object,Ur,{initialize:function(t,e,i,n,s,r,o){this.backbone=t,this.firstDrawable=e,this.lastDrawable=i,this.touchedBlocks=Ke(this.touchedBlocks)},clean:function(){this.backbone=null,this.firstDrawable=null,this.lastDrawable=null},recordBackboneBoundaries:function(){this.backbone.previousFirstDrawable=this.firstDrawable,this.backbone.previousLastDrawable=this.lastDrawable},notePendingAddition:function(t,e){t.notePendingAddition(this.backbone.display,e,this.backbone)},notePendingMove:function(t,e){t.notePendingMove(this.backbone.display,e)},notePendingRemoval:function(t){t.notePendingRemoval(this.backbone.display)},markBlockForDisposal:function(t){t.domElement.parentNode===this.backbone.domElement&&this.backbone.domElement.removeChild(t.domElement),t.markForDisposal(this.backbone.display)},removeAllBlocks:function(){for(;this.backbone.blocks.length;){const t=this.backbone.blocks[0];this.removeBlock(t),this.markBlockForDisposal(t)}},notifyInterval:function(t,e,i){t.notifyInterval(e,i),this.backbone.markDirtyDrawable(t)},markBeforeBlock:function(t,e){t.pendingFirstDrawable=e,this.touchedBlocks.push(t)},markAfterBlock:function(t,e){t.pendingLastDrawable=e,this.touchedBlocks.push(t)},updateBlockIntervals:function(){for(;this.touchedBlocks.length;){const t=this.touchedBlocks.pop();t.used&&(t.updateInterval(),this.backbone.markDirtyDrawable(t))}},createBlock:function(t,e){const i=this.backbone;let n;if(An.isCanvas(t))n=cr.createFromPool(i.display,t,i.transformRootInstance,i.backboneInstance);else if(An.isSVG(t))n=vr.createFromPool(i.display,t,i.transformRootInstance,i.backboneInstance);else if(An.isDOM(t))n=pr.createFromPool(i.display,e);else{if(!An.isWebGL(t))throw new Error("unsupported renderer for createBlock: "+t);n=Wr.createFromPool(i.display,t,i.transformRootInstance,i.backboneInstance)}return n.setBlockBackbone(i),i.domElement.appendChild(n.domElement),i.isDisplayRoot&&n.domElement.setAttribute("aria-hidden",!0),i.markDirtyDrawable(n),n},appendBlock:function(t){this.backbone.blocks.push(t)},removeBlock:function(t){const e=_.indexOf(this.backbone.blocks,t);this.backbone.blocks.splice(e,1)},useNoBlocks:function(){Ke(this.backbone.blocks)},reindex:function(){this.backbone.reindexBlocks()},auditStitch:function(){0}}),Ur.debugIntervals=function(t){0},Ur.debugDrawables=function(t,e,i,n,s){0};var Xr=Ur;function Kr(t,e){return t.renderer!==e.renderer||An.isDOM(t.renderer)||An.isDOM(e.renderer)}function Qr(t){return null!==t.previousDrawable&&!Kr(t.previousDrawable,t)}function Zr(t){return null!==t.nextDrawable&&!Kr(t,t.nextDrawable)}function Jr(t,e,i){return t.drawableBefore?t.drawableBefore.oldNextDrawable!==t.drawableAfter:t.drawableAfter?t.drawableAfter.oldPreviousDrawable!==t.drawableBefore:null!==e}function $r(t,e,i){const n=t.drawableBefore?t.drawableBefore.parentDrawable:null,s=t.drawableAfter?t.drawableAfter.parentDrawable:null;return(!n||!s||n!==s)&&(n?n.nextBlock!==s:s?s.previousBlock!==n:null!==e)}const to={stitch:function(t,e,i,n,s,r,o){let a;if(this.initialize(t,e,i,n,s,r,o),this.blockOrderChanged=!1,this.reusableBlocks=Ke(this.reusableBlocks),this.blockWasAdded=!1,this.recordBackboneBoundaries(),t.blocks.length){const e=t.blocks[0];t.blocks[t.blocks.length-1];for(a=r;null!==a;a=a.nextChangeInterval){if(Jr(a,n)){const t=a.drawableBefore?a.drawableBefore.oldNextDrawable:n,e=a.drawableAfter?a.drawableAfter.oldPreviousDrawable:s;for(let i=t;this.notePendingRemoval(i),i!==e;i=i.oldNextDrawable);}if($r(a,e)){const e=null===a.drawableBefore?t.blocks[0]:a.drawableBefore.parentDrawable.nextBlock,i=null===a.drawableAfter?t.blocks[t.blocks.length-1]:a.drawableAfter.parentDrawable.previousBlock;for(let t=e;this.unuseBlock(t),t!==i;t=t.nextBlock);}}}if(e)for(a=r;null!==a;a=a.nextChangeInterval)this.processInterval(t,a,e,i);this.removeUnusedBlocks(),this.updateBlockIntervals(),null===e?this.useNoBlocks():this.blockOrderChanged&&(this.processBlockLinkedList(t,e.pendingParentDrawable,i.pendingParentDrawable),this.reindex()),this.clean(),Ke(this.reusableBlocks)},processInterval:function(t,e,i,n){if(function(t,e,i){return t.drawableBefore?t.drawableBefore.nextDrawable!==t.drawableAfter:t.drawableAfter?t.drawableAfter.previousDrawable!==t.drawableBefore:null!==e}(e,i)){let n=e.drawableBefore?e.drawableBefore.nextDrawable:i,s=null,r=null,o=!0;for(;;){const i=n.nextDrawable,a=i===e.drawableAfter;if(s||(s=n),null===r&&n.parentDrawable&&!n.parentDrawable.used&&n.backbone===t&&n.parentDrawable.parentDrawable===t&&(r=n.parentDrawable),(a||Kr(n,i))&&(o&&this.processEdgeCases(e,Qr(s),Zr(n)),this.processSubBlock(e,s,n,r,o,a),s=null,r=null,o=!1),a)break;n=i}}else{if(e.drawableBefore&&e.drawableAfter){const t=!Kr(e.drawableBefore,e.drawableAfter);this.processEdgeCases(e,t,t)}e.drawableBefore&&!Zr(e.drawableBefore)?this.linkAfterDrawable(e.drawableBefore):e.drawableAfter&&!Qr(e.drawableAfter)&&this.linkBeforeDrawable(e.drawableAfter)}},processSubBlock:function(t,e,i,n,s,r){const o=Qr(e),a=Zr(i);o&&(n=e.previousDrawable.pendingParentDrawable),a&&(n=i.nextDrawable.pendingParentDrawable),n=this.ensureUsedBlock(n,e);for(let l=e;this.notePendingAddition(l,n),l!==i;l=l.nextDrawable);o||this.linkBeforeDrawable(e),r&&!a&&this.linkAfterDrawable(i)},processEdgeCases:function(t,e,i){if(null!==t.drawableBefore&&null!==t.drawableAfter){const n=t.drawableBefore.pendingParentDrawable,s=t.drawableAfter.pendingParentDrawable,r=t.nextChangeInterval&&t.nextChangeInterval.drawableAfter?t.nextChangeInterval.drawableAfter.pendingParentDrawable:null;let o;n===s&&(this.blockWasAdded=!0),e&&i?o=n:this.blockWasAdded||n===s?(o=this.createBlock(t.drawableAfter.renderer,t.drawableAfter),this.blockOrderChanged=!0):o=s,s===o?this.blockWasAdded=!0:this.changeExternals(t,o),r!==s&&(this.blockWasAdded||this.unuseBlock(s),this.blockWasAdded=!1)}},changeExternals:function(t,e){const i=function(t){const e=t.drawableAfter;if(e){const i=e.renderer,n=t.nextChangeInterval?t.nextChangeInterval.drawableBefore.nextDrawable:null;let s=e;for(;;){const t=s.nextDrawable;if(t===n||t.renderer!==i)break;s=t}return s}return null}(t);this.notePendingMoves(e,t.drawableAfter,i),t.nextChangeInterval&&t.nextChangeInterval.drawableBefore===i||this.linkAfterDrawable(i)},notePendingMoves:function(t,e,i){for(let n=e;this.notePendingMove(n,t),n!==i;n=n.nextDrawable);},ensureUsedBlock:function(t,e){return t?t.used||this.useBlock(t):t=this.getBlockForRenderer(e.renderer,e),t},getBlockForRenderer:function(t,e){let i;if(!An.isDOM(t))for(let n=this.reusableBlocks.length-1;n>=0;n--){const e=this.reusableBlocks[n];if(e.renderer===t){this.useBlockAtIndex(e,n),i=e;break}}return i||(i=this.createBlock(t,e)),this.blockOrderChanged=!0,i},unuseBlock:function(t){t.used&&(t.used=!1,this.reusableBlocks.push(t))},useBlock:function(t){this.useBlockAtIndex(t,_.indexOf(this.reusableBlocks,t))},useBlockAtIndex:function(t,e){this.reusableBlocks.splice(e,1),t.used=!0},removeUnusedBlocks:function(){for(;this.reusableBlocks.length;){const t=this.reusableBlocks.pop();this.markBlockForDisposal(t),this.blockOrderChanged=!0}},linkBeforeDrawable:function(t){const e=t.previousDrawable;this.linkBlocks(e?e.pendingParentDrawable:null,t.pendingParentDrawable,e,t)},linkAfterDrawable:function(t){const e=t.nextDrawable;this.linkBlocks(t.pendingParentDrawable,e?e.pendingParentDrawable:null,t,e)},linkBlocks:function(t,e,i,n){t&&(t.nextBlock!==e&&(this.blockOrderChanged=!0,t.nextBlock&&(t.nextBlock.previousBlock=null),t.nextBlock=e),this.markAfterBlock(t,i)),e&&(e.previousBlock!==t&&(this.blockOrderChanged=!0,e.previousBlock&&(e.previousBlock.nextBlock=null),e.previousBlock=t),this.markBeforeBlock(e,n))},processBlockLinkedList:function(t,e,i){for(;t.blocks.length;)t.blocks.pop();if(e)for(let n=e;t.blocks.push(n),n!==i;n=n.nextBlock);}},eo=Object(z.a)(Xr,(function(){}),to);we.register("GreedyStitcher",eo),eo.stitchPrototype=to;var io=eo;const no={stitch:function(t,e,i,n,s,r,o){this.initialize(t,e,i,n,s,r,o);for(let u=t.previousFirstDrawable;null!==u&&(this.notePendingRemoval(u),u!==t.previousLastDrawable);u=u.oldNextDrawable);this.recordBackboneBoundaries(),this.removeAllBlocks();let a=null,l=0,h=null;for(let u=e;null!==u&&(a&&u.renderer===l||(a&&this.notifyInterval(a,h,u.previousDrawable),l=u.renderer,a=this.createBlock(l,u),An.isDOM(l)&&(l=0),this.appendBlock(a),h=u),this.notePendingAddition(u,a),u!==i);u=u.nextDrawable);a&&this.notifyInterval(a,h,i),this.reindex(),this.clean()}},so=Object(z.a)(Xr,(function(){}),no);we.register("RebuildStitcher",so),so.stitchPrototype=no;function ro(t,e,i,n,s){this.initialize(t,e,i,n,s)}we.register("BackboneDrawable",ro),Object(z.a)(Js,ro,{initialize:function(t,e,i,n,s){if(Js.call(this,n),this.display=t,this.forceAcceleration=!1,this.backboneInstance=e,this.transformRootInstance=i,this.filterRootAncestorInstance=e.parent?e.parent.getFilterRootInstance():e,this.transformRootAncestorInstance=e.parent?e.parent.getTransformRootInstance():e,this.willApplyTransform=this.transformRootAncestorInstance!==this.transformRootInstance,this.willApplyFilters=this.filterRootAncestorInstance!==this.backboneInstance,this.transformListener=this.transformListener||this.markTransformDirty.bind(this),this.willApplyTransform&&(this.backboneInstance.relativeTransform.addListener(this.transformListener),this.backboneInstance.relativeTransform.addPrecompute()),this.backboneVisibilityListener=this.backboneVisibilityListener||this.updateBackboneVisibility.bind(this),this.backboneInstance.relativeVisibleEmitter.addListener(this.backboneVisibilityListener),this.updateBackboneVisibility(),this.visibilityDirty=!0,this.renderer=n,this.domElement=s?t._domElement:ro.createDivBackbone(),this.isDisplayRoot=s,this.dirtyDrawables=Ke(this.dirtyDrawables),Ks.prepareForTransform(this.domElement,this.forceAcceleration),this.watchedFilterNodes=Ke(this.watchedFilterNodes),this.opacityDirty=!0,this.clipDirty=!0,this.opacityDirtyListener=this.opacityDirtyListener||this.markOpacityDirty.bind(this),this.clipDirtyListener=this.clipDirtyListener||this.markClipDirty.bind(this),this.willApplyFilters)for(let r=this.backboneInstance;r!==this.filterRootAncestorInstance;r=r.parent){const t=r.node;this.watchedFilterNodes.push(t),t.opacityProperty.lazyLink(this.opacityDirtyListener),t.clipAreaProperty.lazyLink(this.clipDirtyListener)}return this.lastZIndex=0,this.blocks=this.blocks||[],this.previousFirstDrawable=null,this.previousLastDrawable=null,this.removedDrawables=!1,this.stitcher=this.stitcher||new io,this},dispose:function(){for(;this.watchedFilterNodes.length;){const t=this.watchedFilterNodes.pop();t.opacityProperty.unlink(this.opacityDirtyListener),t.clipAreaProperty.unlink(this.clipDirtyListener)}if(this.backboneInstance.relativeVisibleEmitter.removeListener(this.backboneVisibilityListener),!this.removedDrawables)for(let t=this.previousFirstDrawable;null!==t&&(t.parentDrawable.removeDrawable(t),t!==this.previousLastDrawable);t=t.nextDrawable);this.markBlocksForDisposal(),this.willApplyTransform&&(this.backboneInstance.relativeTransform.removeListener(this.transformListener),this.backboneInstance.relativeTransform.removePrecompute()),this.backboneInstance=null,this.transformRootInstance=null,this.filterRootAncestorInstance=null,this.transformRootAncestorInstance=null,Ke(this.dirtyDrawables),Ke(this.watchedFilterNodes),this.previousFirstDrawable=null,this.previousLastDrawable=null,Js.prototype.dispose.call(this)},markBlocksForDisposal:function(){for(;this.blocks.length;){const t=this.blocks.pop();t.domElement.parentNode===this.domElement&&this.domElement.removeChild(t.domElement),t.markForDisposal(this.display)}},updateBackboneVisibility:function(){this.visible=this.backboneInstance.relativeVisible,this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())},markForDisposal:function(t){for(let e=this.previousFirstDrawable;null!==e&&(e.notePendingRemoval(this.display),e!==this.previousLastDrawable);e=e.oldNextDrawable);this.removedDrawables=!0,Js.prototype.markForDisposal.call(this,t)},markDirtyDrawable:function(t){this.dirtyDrawables.push(t),this.markDirty()},markTransformDirty:function(){Ks.applyPreparedTransform(this.backboneInstance.relativeTransform.matrix,this.domElement,this.forceAcceleration)},markOpacityDirty:function(){this.opacityDirty||(this.opacityDirty=!0,this.markDirty())},markClipDirty:function(){this.clipDirty||(this.clipDirty=!0,this.markDirty())},update:function(){if(!Js.prototype.update.call(this))return!1;for(;this.dirtyDrawables.length;)this.dirtyDrawables.pop().update();if(this.opacityDirty){this.opacityDirty=!1;const t=this.willApplyFilters?this.getFilterOpacity():1;this.domElement.style.opacity=1!==t?t:""}return this.visibilityDirty&&(this.visibilityDirty=!1,this.domElement.style.display=this.visible?"":"none"),this.clipDirty&&(this.clipDirty=!1),!0},getFilterOpacity:function(){let t=1;const e=this.watchedFilterNodes.length;for(let i=0;i<e;i++)t*=this.watchedFilterNodes[i].getOpacity();return t},getFilterVisibility:function(){const t=this.watchedFilterNodes.length;for(let e=0;e<t;e++)if(!this.watchedFilterNodes[e].isVisible())return!1;return!0},getFilterClip:function(){return""},reindexBlocks:function(){let t=0;for(let e=0;e<this.blocks.length;e++){const i=this.blocks[e];if(i.zIndex<=t){const n=e+1<this.blocks.length&&this.blocks[e+1].zIndex-1>t?Math.ceil((t+this.blocks[e+1].zIndex)/2):t+20;i.domElement.style.zIndex=i.zIndex=n}t=i.zIndex}this.lastZIndex=t+1},stitch:function(t,e,i,n){if(null===i||null===n)return;let s=null,r=i,o=!1;for(;r;)o=r.constrict()||o,r.isEmpty()?s&&(s.nextChangeInterval=r.nextChangeInterval):(s||(i=r),s=r),r=r.nextChangeInterval;s&&((n=s).nextChangeInterval=null,this.stitcher.stitch(this,t,e,this.previousFirstDrawable,this.previousLastDrawable,i,n))},audit:function(t,e,i){0}}),ro.createDivBackbone=function(){const t=document.createElement("div");return t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.width="0",t.style.height="0",t},ro.repurposeBackboneContainer=function(t){return"relative"===t.style.position&&"absolute"===t.style.position||(t.style.position="relative"),t.style.left="0",t.style.top="0",t},$t.a.mixInto(ro,{initialize:ro.prototype.initialize});var oo=ro;function ao(t){this.instance=t}we.register("Fittability",ao),Object(z.a)(Object,ao,{initialize:function(t,e){return this.display=t,this.trail=e,this.node=e&&e.lastNode(),this.selfFittable=!!e&&this.isSelfFitSupported(),this.ancestorsFittable=this.selfFittable,this.subtreeUnfittableCount=this.selfFittable?0:1,this.subtreeFittabilityChangeEmitter=this.subtreeFittabilityChangeEmitter||new H,this},get parent(){return this.instance.parent?this.instance.parent.fittability:null},checkSelfFittability:function(){const t=this.isSelfFitSupported();this.selfFittable!==t&&this.updateSelfFittable()},isSelfFitSupported:function(){return!this.node.isPreventFit()},markSubtreeFittable:function(){if(!this.selfFittable)return;this.ancestorsFittable=!0;const t=this.instance.children;for(let e=0;e<t.length;e++)t[e].fittability.markSubtreeFittable();this.instance.updateDrawableFittability(!0)},markSubtreeUnfittable:function(){if(!this.ancestorsFittable)return;this.ancestorsFittable=!1;const t=this.instance.children;for(let e=0;e<t.length;e++)t[e].fittability.markSubtreeUnfittable();this.instance.updateDrawableFittability(!1)},updateSelfFittable:function(){const t=this.isSelfFitSupported();this.selfFittable=t,!this.selfFittable||this.parent&&!this.parent.ancestorsFittable?this.selfFittable||this.markSubtreeUnfittable():this.markSubtreeFittable(),this.selfFittable?this.decrementSubtreeUnfittableCount():this.incrementSubtreeUnfittableCount()},incrementSubtreeUnfittableCount:function(){this.subtreeUnfittableCount++,1===this.subtreeUnfittableCount&&(this.parent&&this.parent.incrementSubtreeUnfittableCount(),this.subtreeFittabilityChangeEmitter.emit())},decrementSubtreeUnfittableCount:function(){this.subtreeUnfittableCount--,0===this.subtreeUnfittableCount&&(this.parent&&this.parent.decrementSubtreeUnfittableCount(),this.subtreeFittabilityChangeEmitter.emit())},onInsert:function(t){this.ancestorsFittable||t.markSubtreeUnfittable(),t.subtreeUnfittableCount>0&&this.incrementSubtreeUnfittableCount()},onRemove:function(t){this.ancestorsFittable||t.markSubtreeFittable(),t.subtreeUnfittableCount>0&&this.decrementSubtreeUnfittableCount()},audit:function(){0}});var lo=ao;function ho(t,e){Js.call(this,t),this.instance=e}we.register("InlineCanvasCacheDrawable",ho),Object(z.a)(Js,ho,{stitch:function(t,e,i,n){}});var uo=ho;function co(t){this.instance=t}we.register("RelativeTransform",co),Object(z.a)(Object,co,{initialize:function(t,e){return this.display=t,this.trail=e,this.node=e&&e.lastNode(),this.transformDirty=!0,this.nodeTransformListener=this.nodeTransformListener||this.onNodeTransformDirty.bind(this),this.matrix=this.matrix||Ye.identity(),this.relativeSelfDirty=!0,this.relativeChildrenListenersCount=0,this.relativePrecomputeCount=0,this.relativeChildrenPrecomputeCount=0,this.relativeFrameId=-1,this.relativeChildDirtyFrame=t?t._frameId:0,this.relativeTransformListeners=Ke(this.relativeTransformListeners),this},get parent(){return this.instance.parent?this.instance.parent.relativeTransform:null},addInstance:function(t){t.stateless||(t.relativeTransform.hasAncestorListenerNeed()&&this.incrementTransformListenerChildren(),t.relativeTransform.hasAncestorComputeNeed()&&this.incrementTransformPrecomputeChildren()),t.relativeTransform.forceMarkTransformDirty()},removeInstance:function(t){t.relativeTransform.hasAncestorListenerNeed()&&this.decrementTransformListenerChildren(),t.relativeTransform.hasAncestorComputeNeed()&&this.decrementTransformPrecomputeChildren()},attachNodeListeners:function(){this.node.transformEmitter.addListener(this.nodeTransformListener)},detachNodeListeners:function(){this.node.transformEmitter.removeListener(this.nodeTransformListener)},hasDescendantListenerNeed:function(){return this.instance.isTransformed?this.relativeChildrenListenersCount>0:this.relativeChildrenListenersCount>0||this.relativeTransformListeners.length>0},hasAncestorListenerNeed:function(){return this.instance.isTransformed?this.relativeTransformListeners.length>0:this.relativeChildrenListenersCount>0||this.relativeTransformListeners.length>0},hasSelfListenerNeed:function(){return this.relativeTransformListeners.length>0},incrementTransformListenerChildren:function(){const t=this.hasAncestorListenerNeed();this.relativeChildrenListenersCount++,t!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.incrementTransformListenerChildren()},decrementTransformListenerChildren:function(){const t=this.hasAncestorListenerNeed();this.relativeChildrenListenersCount--,t!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.decrementTransformListenerChildren()},addListener:function(t){const e=this.hasAncestorListenerNeed();this.relativeTransformListeners.push(t),e!==this.hasAncestorListenerNeed()&&(this.parent&&this.parent.incrementTransformListenerChildren(),this.hasAncestorComputeNeed()||this.forceMarkTransformDirty())},removeListener:function(t){const e=this.hasAncestorListenerNeed();this.relativeTransformListeners.splice(_.indexOf(this.relativeTransformListeners,t),1),e!==this.hasAncestorListenerNeed()&&this.parent&&this.parent.decrementTransformListenerChildren()},hasDescendantComputeNeed:function(){return this.instance.isTransformed?this.relativeChildrenPrecomputeCount>0:this.relativeChildrenPrecomputeCount>0||this.relativePrecomputeCount>0},hasAncestorComputeNeed:function(){return this.instance.isTransformed?this.relativePrecomputeCount>0:this.relativeChildrenPrecomputeCount>0||this.relativePrecomputeCount>0},hasSelfComputeNeed:function(){return this.relativePrecomputeCount>0},incrementTransformPrecomputeChildren:function(){const t=this.hasAncestorComputeNeed();this.relativeChildrenPrecomputeCount++,t!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.incrementTransformPrecomputeChildren()},decrementTransformPrecomputeChildren:function(){const t=this.hasAncestorComputeNeed();this.relativeChildrenPrecomputeCount--,t!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.decrementTransformPrecomputeChildren()},addPrecompute:function(){const t=this.hasAncestorComputeNeed();this.relativePrecomputeCount++,t!==this.hasAncestorComputeNeed()&&(this.parent&&this.parent.incrementTransformPrecomputeChildren(),this.hasAncestorListenerNeed()||this.forceMarkTransformDirty())},removePrecompute:function(){const t=this.hasAncestorComputeNeed();this.relativePrecomputeCount--,t!==this.hasAncestorComputeNeed()&&this.parent&&this.parent.decrementTransformPrecomputeChildren()},onNodeTransformDirty:function(){this.transformDirty||this.forceMarkTransformDirty()},forceMarkTransformDirty:function(){this.transformDirty=!0,this.relativeSelfDirty=!0;const t=this.display._frameId;let e=this.instance.parent;for(;e&&e.relativeTransform.relativeChildDirtyFrame!==t;){const i=e.parent,n=e.isTransformed;if(e.relativeTransform.relativeChildDirtyFrame=t,null===i){this.display.markTransformRootDirty(e,n);break}if(n){this.display.markTransformRootDirty(e,!0);break}e=i}},computeRelativeTransform:function(){const t=this.node.getMatrix();this.instance.parent&&!this.instance.parent.isTransformed?(this.matrix.set(this.parent.matrix),this.matrix.multiplyMatrix(t)):this.matrix.set(t),this.relativeFrameId=this.display._frameId,this.relativeSelfDirty=!1},isValidationNotNeeded:function(){return this.hasAncestorComputeNeed()||this.relativeFrameId===this.display._frameId},validate:function(){if(!this.isValidationNotNeeded()&&(this.instance.parent&&!this.instance.parent.isTransformed&&this.parent.validate(),this.relativeSelfDirty)){this.computeRelativeTransform();const t=this.instance.children.length;for(let e=0;e<t;e++)this.instance.children[e].relativeTransform.relativeSelfDirty=!0}},updateTransformListenersAndCompute:function(t,e,i,n){let s,r;if(n)for(s=this.instance.children.length,r=0;r<s;r++)this.instance.children[r].relativeTransform.updateTransformListenersAndCompute(!1,!1,i,!1);else{const o=t||this.relativeSelfDirty,a=o||this.relativeChildDirtyFrame===i,l=this.hasDescendantComputeNeed(),h=this.hasDescendantListenerNeed(),u=this.hasSelfComputeNeed(),c=this.hasSelfListenerNeed();if(l||!o||e||(this.relativeSelfDirty=!0),!a||!l&&!h&&!u&&!c)return;if(o&&(l||u)&&this.computeRelativeTransform(),this.transformDirty&&(this.transformDirty=!1),this.notifyRelativeTransformListeners(),!this.instance.isTransformed||n){const t=o&&!(l||u);for(s=this.instance.children.length,r=0;r<s;r++)this.instance.children[r].relativeTransform.updateTransformListenersAndCompute(o,t,i,!1)}}},notifyRelativeTransformListeners:function(){const t=this.relativeTransformListeners.length;for(let e=0;e<t;e++)this.relativeTransformListeners[e]()},audit:function(t,e){}});var po=co;function fo(t,e,i,n){Js.call(this,e),this.instance=i,this.sharedInstance=n}we.register("SharedCanvasCacheDrawable",fo),Object(z.a)(Js,fo,{});var mo=fo;let go=1;const yo=An.createOrderBitmask(An.bitmaskSVG,An.bitmaskCanvas,An.bitmaskDOM,An.bitmaskWebGL);function bo(t,e,i,n){this.active=!1,this.initialize(t,e,i,n)}we.register("Instance",bo),Object(z.a)(Object,bo,{initialize:function(t,e,i,n){return e.setImmutable(),this.id=this.id||go++,this.isWebGLSupported=t._allowWebGL&&Ks.isWebGLSupported,this.relativeTransform=this.relativeTransform||new po(this),this.fittability=this.fittability||new lo(this),this.visible=!0,this.relativeVisible=!0,this.selfVisible=!0,this.visibilityDirty=!0,this.childVisibilityDirty=!0,this.branchIndexMap={}||this.branchIndexMap,this.branchIndexReferences=Ke(this.branchIndexReferences),this.addRemoveCounter=0,this.stitchChangeFrame=t._frameId,this.stitchChangeBefore=0,this.stitchChangeAfter=0,this.stitchChangeOnChildren=0,this.stitchChangeIncluded=!1,this.childInsertedListener=this.childInsertedListener||this.onChildInserted.bind(this),this.childRemovedListener=this.childRemovedListener||this.onChildRemoved.bind(this),this.childrenReorderedListener=this.childrenReorderedListener||this.onChildrenReordered.bind(this),this.visibilityListener=this.visibilityListener||this.onVisibilityChange.bind(this),this.markRenderStateDirtyListener=this.markRenderStateDirtyListener||this.markRenderStateDirty.bind(this),this.visibleEmitter=new H,this.relativeVisibleEmitter=new H,this.selfVisibleEmitter=new H,this.cleanInstance(t,e),this.node.addInstance(this),this.externalReferenceCount=0,this.stateless=!0,this.isDisplayRoot=i,this.isSharedCanvasCacheRoot=n,this.preferredRenderers=0,this.isUnderCanvasCache=n,this.isBackbone=!1,this.isTransformed=!1,this.isVisibilityApplied=!1,this.isInstanceCanvasCache=!1,this.isSharedCanvasCachePlaceholder=!1,this.isSharedCanvasCacheSelf=n,this.selfRenderer=0,this.groupRenderer=0,this.sharedCacheRenderer=0,this.renderStateDirtyFrame=t._frameId,this.skipPruningFrame=t._frameId,this.active=!0,this},cleanInstance:function(t,e){this.display=t,this.trail=e,this.node=e?e.lastNode():null,this.parent=null,this.oldParent=null,this.children=Ke(this.children),this.sharedCacheInstance=null,this.relativeTransform.initialize(t,e),this.fittability.initialize(t,e),this.instanceRemovalCheckList=Ke(this.instanceRemovalCheckList),this.selfDrawable=null,this.groupDrawable=null,this.sharedCacheDrawable=null,this.firstDrawable=null,this.lastDrawable=null,this.firstInnerDrawable=null,this.lastInnerDrawable=null,this.svgGroups=Ke(this.svgGroups),this.cleanSyncTreeResults()},cleanSyncTreeResults:function(){this.beforeStableIndex=this.children.length,this.afterStableIndex=-1,this.firstChangeInterval=null,this.lastChangeInterval=null,this.incompatibleStateChange=!1,this.groupChanged=!1,this.cascadingStateChange=!1,this.anyStateChange=!1},updateRenderingState:function(){const t=this.isBackbone,e=this.isTransformed,i=this.isVisibilityApplied,n=this.isInstanceCanvasCache,s=this.isSharedCanvasCacheSelf,r=this.isSharedCanvasCachePlaceholder,o=this.isUnderCanvasCache,a=this.selfRenderer,l=this.groupRenderer,h=this.sharedCacheRenderer,u=this.preferredRenderers;this.isBackbone=!1,this.isTransformed=!1,this.isVisibilityApplied=!1,this.isInstanceCanvasCache=!1,this.isSharedCanvasCacheSelf=!1,this.isSharedCanvasCachePlaceholder=!1,this.selfRenderer=0,this.groupRenderer=0,this.sharedCacheRenderer=0;const c=this.node._hints;this.isUnderCanvasCache=this.isSharedCanvasCacheRoot||!!this.parent&&(this.parent.isUnderCanvasCache||this.parent.isInstanceCanvasCache||this.parent.isSharedCanvasCacheSelf),this.preferredRenderers=this.parent?this.parent.preferredRenderers:yo,c.renderer&&(this.preferredRenderers=An.pushOrderBitmask(this.preferredRenderers,c.renderer));const d=this.node.hasClipArea(),p=1!==this.node.opacity||c.usesOpacity,f=c.requireElement||c.cssTransform||c.layerSplit,m=this.isDisplayRoot||!this.isUnderCanvasCache&&f,g=!m&&(p||d)&&(this.node._rendererSummary.isSubtreeRenderedExclusivelySVG(this.preferredRenderers)||this.node._rendererSummary.isSubtreeRenderedExclusivelyCanvas(this.preferredRenderers));if(!g&&(m||p||d)?(this.isBackbone=!0,this.isVisibilityApplied=!0,this.isTransformed=this.isDisplayRoot||!!c.cssTransform,this.groupRenderer=An.bitmaskDOM):!g&&(p||d||c.canvasCache)&&(c.singleCache?this.isSharedCanvasCacheRoot?(this.isSharedCanvasCacheSelf=!0,this.sharedCacheRenderer=this.isWebGLSupported?An.bitmaskWebGL:An.bitmaskCanvas):this.isSharedCanvasCachePlaceholder=!0:(this.isInstanceCanvasCache=!0,this.isUnderCanvasCache=!0,this.groupRenderer=this.isWebGLSupported?An.bitmaskWebGL:An.bitmaskCanvas)),this.node.isPainted())if(this.isUnderCanvasCache)this.selfRenderer=An.bitmaskCanvas;else{let t=this.node._rendererBitmask;if(!this.isWebGLSupported){t^=t&An.bitmaskWebGL}this.selfRenderer=t&An.bitmaskOrder(this.preferredRenderers,0)||t&An.bitmaskOrder(this.preferredRenderers,1)||t&An.bitmaskOrder(this.preferredRenderers,2)||t&An.bitmaskOrder(this.preferredRenderers,3)||t&An.bitmaskSVG||t&An.bitmaskCanvas||t&An.bitmaskDOM||t&An.bitmaskWebGL||0}this.groupChanged=t!==this.isBackbone||n!==this.isInstanceCanvasCache||s!==this.isSharedCanvasCacheSelf,this.cascadingStateChange=o!==this.isUnderCanvasCache||u!==this.preferredRenderers,this.incompatibleStateChange=this.isTransformed!==e||this.isSharedCanvasCachePlaceholder!==r,this.anyStateChange=this.groupChanged||this.cascadingStateChange||this.incompatibleStateChange||a!==this.selfRenderer||l!==this.groupRenderer||h!==this.sharedCacheRenderer,i!==this.isVisibilityApplied&&(this.visibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty()),this.fittability.checkSelfFittability()},getStateString:function(){return"S[ "+(this.isDisplayRoot?"displayRoot ":"")+(this.isBackbone?"backbone ":"")+(this.isInstanceCanvasCache?"instanceCache ":"")+(this.isSharedCanvasCachePlaceholder?"sharedCachePlaceholder ":"")+(this.isSharedCanvasCacheSelf?"sharedCacheSelf ":"")+(this.isTransformed?"TR ":"")+(this.isVisibilityApplied?"VIS ":"")+(this.selfRenderer?this.selfRenderer.toString(16):"-")+","+(this.groupRenderer?this.groupRenderer.toString(16):"-")+","+(this.sharedCacheRenderer?this.sharedCacheRenderer.toString(16):"-")+" "+"]"},baseSyncTree:function(){this.syncTree(),this.cleanSyncTreeResults()},syncTree:function(){const t=this.stateless;if((t||this.parent&&this.parent.cascadingStateChange||this.renderStateDirtyFrame===this.display._frameId)&&this.updateRenderingState(),!t&&this.incompatibleStateChange)return!1;if(this.stateless=!1,t&&(this.isTransformed&&this.display.markTransformRootDirty(this,!0),this.attachNodeListeners()),this.isSharedCanvasCachePlaceholder)this.sharedSyncTree();else if(t||this.skipPruningFrame===this.display._frameId||this.anyStateChange){this.prepareChildInstances(t);this.firstDrawable,this.lastDrawable,this.firstInnerDrawable,this.lastInnerDrawable;const e=this.updateSelfDrawable();this.localSyncTree(e),this.groupSyncTree(t)}return!0},localSyncTree:function(t){const e=this.display._frameId;let i=this.selfDrawable,n=i,s=null;t&&(s=ir.newForDisplay(null,null,this.display));let r=s,o=t?null:this.selfDrawable;for(let a=0;a<this.children.length;a++){let t=this.children[a];t.syncTree()||(t=this.updateIncompatibleChildInstance(t,a),t.syncTree());const l=t.shouldIncludeInParentDrawables();l&&t.firstDrawable&&(n?Js.connectDrawables(n,t.firstDrawable,this.display):i=t.firstDrawable,n=t.lastDrawable);const h=t.stitchChangeIncluded,u=l;t.stitchChangeIncluded=u,t.stitchChangeFrame===e&&(t.firstChangeInterval=t.lastChangeInterval=ir.newForDisplay(null,null,this.display));const c=t.firstChangeInterval;let d=r&&null===r.drawableAfter;const p=c&&null===c.drawableBefore;if(t.stitchChangeBefore===e&&!d&&!p){const t=ir.newForDisplay(o,null,this.display);r&&(r.nextChangeInterval=t),r=t,s=s||r,d=!0}if((h||u)&&(d?c?null===c.drawableBefore?(r.drawableAfter=c.drawableAfter,r.nextChangeInterval=c.nextChangeInterval,r=t.lastChangeInterval===c?r:t.lastChangeInterval):(r.drawableAfter=t.firstDrawable,r.nextChangeInterval=c,r=t.lastChangeInterval):r.drawableAfter=t.firstDrawable:c&&(s=s||c,null===c.drawableBefore&&(c.drawableBefore=o),r&&(r.nextChangeInterval=c),r=t.lastChangeInterval),o=r&&null===r.drawableAfter?null:t.lastDrawable?t.lastDrawable:o),a===this.children.length-1&&t.stitchChangeAfter===e&&(!r||null!==r.drawableAfter)){const t=ir.newForDisplay(o,null,this.display);r&&(r.nextChangeInterval=t),r=t,s=s||r}t.cleanSyncTreeResults()}s||this.stitchChangeOnChildren!==this.display._frameId||0!==this.children.length||(s=r=ir.newForDisplay(null,null,this.display)),this.firstChangeInterval=s,this.lastChangeInterval=r,this.firstDrawable=this.firstInnerDrawable=i,this.lastDrawable=this.lastInnerDrawable=n},updateSelfDrawable:function(){if(this.node.isPainted()){const t=this.selfRenderer;if(!this.selfDrawable||0==(this.selfDrawable.renderer&t&An.bitmaskRendererArea))return this.selfDrawable&&this.selfDrawable.markForDisposal(this.display),this.selfDrawable=An.createSelfDrawable(this,this.node,t,this.fittability.ancestorsFittable),!0}return!1},updateIncompatibleChildInstance:function(t,e){this.display.markInstanceRootForDisposal(t);const i=bo.createFromPool(this.display,this.trail.copy().addDescendant(t.node,e),!1,!1);return this.replaceInstanceWithIndex(t,i,e),i},groupSyncTree:function(t){const e=this.groupRenderer,i=!!e!=!!this.groupDrawable||!t&&this.groupChanged||this.groupDrawable&&this.groupDrawable.renderer!==e;i&&(this.groupDrawable&&(this.groupDrawable.markForDisposal(this.display),this.groupDrawable=null),this.firstChangeInterval=this.lastChangeInterval=ir.newForDisplay(null,null,this.display)),e&&(this.firstDrawable&&Js.disconnectBefore(this.firstDrawable,this.display),this.lastDrawable&&Js.disconnectAfter(this.lastDrawable,this.display),this.isBackbone?(i&&(this.groupDrawable=oo.createFromPool(this.display,this,this.getTransformRootInstance(),e,this.isDisplayRoot),this.isTransformed&&this.display.markTransformRootDirty(this,!0)),this.firstChangeInterval&&this.groupDrawable.stitch(this.firstDrawable,this.lastDrawable,this.firstChangeInterval,this.lastChangeInterval)):this.isInstanceCanvasCache?(i&&(this.groupDrawable=uo.createFromPool(e,this)),this.firstChangeInterval&&this.groupDrawable.stitch(this.firstDrawable,this.lastDrawable,this.firstChangeInterval,this.lastChangeInterval)):this.isSharedCanvasCacheSelf&&i&&(this.groupDrawable=cr.createFromPool(e,this)),this.groupDrawable.setFittable(this.fittability.ancestorsFittable),this.firstDrawable=this.lastDrawable=this.groupDrawable),i?this.firstChangeInterval=this.lastChangeInterval=ir.newForDisplay(null,null,this.display):e&&(this.firstChangeInterval=this.lastChangeInterval=null)},sharedSyncTree:function(){this.ensureSharedCacheInitialized();const t=this.sharedCacheRenderer;this.sharedCacheDrawable&&this.sharedCacheDrawable.renderer===t||(this.sharedCacheDrawable&&this.sharedCacheDrawable.markForDisposal(this.display),this.sharedCacheDrawable=new mo(this.trail,t,this,this.sharedCacheInstance),this.firstDrawable=this.sharedCacheDrawable,this.lastDrawable=this.sharedCacheDrawable,this.firstChangeInterval=this.lastChangeInterval=ir.newForDisplay(null,null,this.display))},prepareChildInstances:function(t){for(;this.instanceRemovalCheckList.length;){const t=this.instanceRemovalCheckList.pop();-1===t.addRemoveCounter&&(t.addRemoveCounter=0,this.display.markInstanceRootForDisposal(t))}if(t)for(let e=0;e<this.node.children.length;e++){const t=this.node.children[e];this.appendInstance(bo.createFromPool(this.display,this.trail.copy().addDescendant(t,e),!1,!1))}},ensureSharedCacheInitialized:function(){if(!this.sharedCacheInstance){const t=this.node.getId();this.sharedCacheInstance=this.display._sharedCanvasInstances[t],this.sharedCacheInstance||(this.sharedCacheInstance=bo.createFromPool(this.display,new yn(this.node),!1,!0),this.sharedCacheInstance.syncTree(),this.display._sharedCanvasInstances[t]=this.sharedCacheInstance,this.display.markTransformRootDirty(this.sharedCacheInstance,!0)),this.sharedCacheInstance.externalReferenceCount++,this.isTransformed&&this.display.markTransformRootDirty(this,!0)}},shouldIncludeInParentDrawables:function(){return this.node.isVisible()||!this.node.isExcludeInvisible()},findPreviousDrawable:function(t){for(let e=t-1;e>=0;e--){const t=this.children[e].lastDrawable;if(null!==t)return t}return null},findNextDrawable:function(t){const e=this.children.length;for(let i=t+1;i<e;i++){const t=this.children[i].firstDrawable;if(null!==t)return t}return null},appendInstance:function(t){this.insertInstance(t,this.children.length)},insertInstance:function(t,e){t.stitchChangeFrame=this.display._frameId,this.stitchChangeOnChildren=this.display._frameId,this.children.splice(e,0,t),t.parent=this,t.oldParent=this,e<=this.beforeStableIndex&&(this.beforeStableIndex=e-1),e>this.afterStableIndex?this.afterStableIndex=e+1:this.afterStableIndex++,this.fittability.onInsert(t.fittability),this.relativeTransform.addInstance(t),this.markChildVisibilityDirty()},removeInstance:function(t){return this.removeInstanceWithIndex(t,_.indexOf(this.children,t))},removeInstanceWithIndex:function(t,e){const i=this.display._frameId;t.stitchChangeFrame=i,this.stitchChangeOnChildren=i,e-1>=0&&(this.children[e-1].stitchChangeAfter=i),e+1<this.children.length&&(this.children[e+1].stitchChangeBefore=i),this.children.splice(e,1),t.parent=null,t.oldParent=this,e<=this.beforeStableIndex&&(this.beforeStableIndex=e-1),e>=this.afterStableIndex?this.afterStableIndex=e:this.afterStableIndex--,this.fittability.onRemove(t.fittability),this.relativeTransform.removeInstance(t)},replaceInstanceWithIndex:function(t,e,i){this.removeInstanceWithIndex(t,i),this.insertInstance(e,i)},reorderInstances:function(t,e){const i=this.display._frameId;this.children.splice(t,e-t+1);for(let n=t;n<=e;n++){const s=this.findChildInstanceOnNode(this.node._children[n]);this.children.splice(n,0,s),s.stitchChangeFrame=i,n>t&&(s.stitchChangeAfter=i),n<e&&(s.stitchChangeBefore=i)}this.stitchChangeOnChildren=i,this.beforeStableIndex=Math.min(this.beforeStableIndex,t-1),this.afterStableIndex=Math.max(this.afterStableIndex,e+1)},findChildInstanceOnNode:function(t){const e=t.getInstances();for(let i=0;i<e.length;i++)if(e[i].oldParent===this)return e[i];return null},onChildInserted:function(t,e){let i=this.findChildInstanceOnNode(t);i?i.addRemoveCounter+=1:i=bo.createFromPool(this.display,this.trail.copy().addDescendant(t,e),!1,!1),this.insertInstance(i,e),this.markSkipPruning()},onChildRemoved:function(t,e){const i=this.findChildInstanceOnNode(t);i.addRemoveCounter-=1,this.instanceRemovalCheckList.push(i),this.removeInstanceWithIndex(i,e),this.markSkipPruning()},onChildrenReordered:function(t,e){this.reorderInstances(t,e),this.markSkipPruning()},onVisibilityChange:function(){this.stitchChangeFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning(),this.visibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty()},onOpacityChange:function(){this.markRenderStateDirty()},markChildVisibilityDirty:function(){this.childVisibilityDirty||(this.childVisibilityDirty=!0,this.parent&&this.parent.markChildVisibilityDirty())},updateDrawableFittability:function(t){this.selfDrawable&&this.selfDrawable.setFittable(t),this.groupDrawable&&this.groupDrawable.setFittable(t)},updateVisibility:function(t,e,i){this.visibilityDirty&&(i=!0);const n=this.node.isVisible(),s=this.visible,r=this.relativeVisible,o=this.selfVisible;this.visible=t&&n,this.relativeVisible=e&&n,this.selfVisible=!!this.isVisibilityApplied||this.relativeVisible;const a=this.children.length;for(let l=0;l<a;l++){const t=this.children[l];(i||t.visibilityDirty||t.childVisibilityDirty)&&t.updateVisibility(this.visible,!!this.isVisibilityApplied||this.relativeVisible,i)}this.visibilityDirty=!1,this.childVisibilityDirty=!1,this.visible!==s&&this.visibleEmitter.emit(),this.relativeVisible!==r&&this.relativeVisibleEmitter.emit(),this.selfVisible!==o&&this.selfVisibleEmitter.emit()},getDescendantCount:function(){let t=this.children.length;for(let e=0;e<this.children.length;e++)t+=this.children[e].getDescendantCount();return t},addSVGGroup:function(t){this.svgGroups.push(t)},removeSVGGroup:function(t){const e=_.indexOf(this.svgGroups,t);this.svgGroups.splice(e,1)},lookupSVGGroup:function(t){const e=this.svgGroups.length;for(let i=0;i<e;i++){const e=this.svgGroups[i];if(e.block===t)return e}return null},getFilterRootInstance:function(){return this.isBackbone||this.isInstanceCanvasCache||!this.parent?this:this.parent.getFilterRootInstance()},getTransformRootInstance:function(){return this.isTransformed||!this.parent?this:this.parent.getTransformRootInstance()},getVisibilityRootInstance:function(){return this.isVisibilityApplied||!this.parent?this:this.parent.getVisibilityRootInstance()},attachNodeListeners:function(){this.relativeTransform.attachNodeListeners(),this.isSharedCanvasCachePlaceholder||(this.node.childInsertedEmitter.addListener(this.childInsertedListener),this.node.childRemovedEmitter.addListener(this.childRemovedListener),this.node.childrenReorderedEmitter.addListener(this.childrenReorderedListener),this.node.visibleProperty.lazyLink(this.visibilityListener),this.node.opacityProperty.lazyLink(this.markRenderStateDirtyListener),this.node.clipAreaProperty.lazyLink(this.markRenderStateDirtyListener),this.node.instanceRefreshEmitter.addListener(this.markRenderStateDirtyListener))},detachNodeListeners:function(){this.relativeTransform.detachNodeListeners(),this.isSharedCanvasCachePlaceholder||(this.node.childInsertedEmitter.removeListener(this.childInsertedListener),this.node.childRemovedEmitter.removeListener(this.childRemovedListener),this.node.childrenReorderedEmitter.removeListener(this.childrenReorderedListener),this.node.visibleProperty.unlink(this.visibilityListener),this.node.opacityProperty.unlink(this.markRenderStateDirtyListener),this.node.clipAreaProperty.unlink(this.markRenderStateDirtyListener),this.node.instanceRefreshEmitter.removeListener(this.markRenderStateDirtyListener))},markRenderStateDirty:function(){this.renderStateDirtyFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning()},markSkipPruning:function(){this.skipPruningFrame=this.display._frameId,this.parent&&this.parent.markSkipPruning()},getBranchIndexTo:function(t){const e=this.branchIndexMap[t.id];if(void 0!==e)return e;const i=this.trail.getBranchIndexTo(t.trail);return this.branchIndexMap[t.id]=i,t.branchIndexMap[this.id]=i,this.branchIndexReferences.push(t),t.branchIndexReferences.push(this),i},dispose:function(){for(this.active=!1;this.branchIndexReferences.length;){const t=this.branchIndexReferences.pop();delete this.branchIndexMap[t.id],delete t.branchIndexMap[this.id],Object(wt.a)(t.branchIndexReferences,this)}this.groupDrawable&&this.groupDrawable.disposeImmediately(this.display),this.sharedCacheDrawable&&this.sharedCacheDrawable.disposeImmediately(this.display),this.selfDrawable&&this.selfDrawable.disposeImmediately(this.display);const t=this.children.length;for(let e=0;e<t;e++)this.children[e].dispose();for(;this.instanceRemovalCheckList.length;){const t=this.instanceRemovalCheckList.pop();t.active&&t.dispose()}this.stateless||this.detachNodeListeners(),this.node.removeInstance(this),this.sharedCacheInstance&&(this.sharedCacheInstance.externalReferenceCount--,0===this.sharedCacheInstance.externalReferenceCount&&(delete this.display._sharedCanvasInstances[this.node.getId()],this.sharedCacheInstance.dispose())),this.cleanInstance(null,null),this.visibleEmitter.removeAllListeners(),this.relativeVisibleEmitter.removeAllListeners(),this.selfVisibleEmitter.removeAllListeners(),this.freeToPool()},audit:function(t,e){0},auditVisibility:function(t){0},auditChangeIntervals:function(t,e,i,n){if(t){let i=t;for(;i!==e;)i=i.oldNextDrawable}if(i){let t=i;for(;t!==n;)t=t.nextDrawable}},toString:function(){return this.id+"#"+(this.node?(this.node.constructor.name?this.node.constructor.name:"?")+"#"+this.node.id:"-")}}),$t.a.mixInto(bo,{initialize:bo.prototype.initialize});var vo=bo;const _o=h.byKeys(["DRAG","MULTI_DRAG","KEYBOARD_DRAG"]);function Ao(t,e,i){this.point=t,this.type=i,this.trail=null,this.isDownProperty=new Ee(e),this.attachedProperty=new Ee(!1),this._listeners=[],this._attachedListener=null,this._cursor=null,this.lastDOMEvent=null,this._intents=[],this._listenerForDragReserve=null,this._listenerForKeyboardDragReserve=null}we.register("Pointer",Ao),Object(z.a)(Object,Ao,{setCursor:function(t){return this._cursor=t,this},set cursor(t){return this.setCursor(t)},getCursor:function(){return this._cursor},get cursor(){return this.getCursor()},getListeners:function(){return this._listeners.slice()},get listeners(){return this.getListeners()},addInputListener:function(t,e){this._listeners.push(t),e&&this.attach(t)},removeInputListener:function(t){const e=_.indexOf(this._listeners,t);this.isAttached()&&t===this._attachedListener&&this.detach(t),this._listeners.splice(e,1)},isAttached:function(){return this.attachedProperty.value},set isDown(t){this.isDownProperty.value=t},get isDown(){return this.isDownProperty.value},interruptAttached:function(){this.isAttached()&&this._attachedListener.interrupt()},interruptAll:function(){const t=this._listeners.slice();for(let e=0;e<t.length;e++){const i=t[e];i.interrupt&&i.interrupt()}},attach:function(t){this.attachedProperty.value=!0,this._attachedListener=t},detach:function(t){this.attachedProperty.value=!1,this._attachedListener=null},hasPointChanged:function(t){return!(this.point===t||t&&this.point&&this.point.equals(t))},addIntent:function(t){this._intents.includes(t)||this._intents.push(t)},removeIntent:function(t){if(this._intents.includes(t)){const e=this._intents.indexOf(t);this._intents.splice(e,1)}},hasIntent:function(t){return this._intents.includes(t)},reserveForDrag:function(){if(!this._intents.includes(_o.DRAG)){this.addIntent(_o.DRAG);const t={up:t=>{this.removeIntent(_o.DRAG),this.removeInputListener(this._listenerForDragReserve),this._listenerForDragReserve=null}};this._listenerForDragReserve=t,this.addInputListener(this._listenerForDragReserve)}},reserveForKeyboardDrag:function(){if(!this._intents.includes(_o.KEYBOARD_DRAG)){this.addIntent(_o.KEYBOARD_DRAG);const t={keyup:t=>e(),blur:t=>e()},e=()=>{this.removeIntent(_o.KEYBOARD_DRAG),this.removeInputListener(this._listenerForKeyboardDragReserve),this._listenerForKeyboardDragReserve=null};this._listenerForKeyboardDragReserve=t,this.addInputListener(this._listenerForKeyboardDragReserve)}},dispose:function(){this._listeners.indexOf(this._listenerForDragReserve)>=0&&this.removeInputListener(this._listenerForDragReserve),this._listeners.indexOf(this._listenerForKeyboardDragReserve)>=0&&this.removeInputListener(this._listenerForKeyboardDragReserve)}},{Intent:_o});var wo=Ao;function xo(){wo.call(this,null,!1,"mouse"),this.id=null,this.leftDown=!1,this.middleDown=!1,this.rightDown=!1,this.wheelDelta=new Re.a(0,0,0),this.wheelDeltaMode=0}we.register("Mouse",xo),Object(z.a)(wo,xo,{down:function(t,e){const i=this.hasPointChanged(t);switch(this.point=t,this.isDown=!0,e.button){case 0:this.leftDown=!0;break;case 1:this.middleDown=!0;break;case 2:this.rightDown=!0}return i},up:function(t,e){const i=this.hasPointChanged(t);switch(this.point=t,this.isDown=!1,e.button){case 0:this.leftDown=!1;break;case 1:this.middleDown=!1;break;case 2:this.rightDown=!1}return i},move:function(t,e){const i=this.hasPointChanged(t);return this.point=t,i},over:function(t,e){const i=this.hasPointChanged(t);return this.point=t,i},out:function(t,e){const i=this.hasPointChanged(t);return this.point=null,i},wheel:function(t){this.wheelDelta.setXYZ(t.deltaX,t.deltaY,t.deltaZ),this.wheelDeltaMode=t.deltaMode},toString:function(){return"Mouse"}});var So=xo;function To(t,e,i){wo.call(this,e,!0,"pen"),this.id=t}we.register("Pen",To),Object(z.a)(wo,To,{move:function(t,e){const i=this.hasPointChanged(t);return this.point=t,i},end:function(t,e){const i=this.hasPointChanged(t);return this.point=t,this.isDown=!1,i},cancel:function(t,e){const i=this.hasPointChanged(t);return this.point=t,this.isDown=!1,i},toString:function(){return"Pen#"+this.id}});var Do=To;function Eo(t,e,i){wo.call(this,e,!0,"touch"),this.id=t}we.register("Touch",Eo),Object(z.a)(wo,Eo,{move:function(t,e){const i=this.hasPointChanged(t);return this.point=t,i},end:function(t,e){const i=this.hasPointChanged(t);return this.point=t,this.isDown=!1,i},cancel:function(t,e){const i=this.hasPointChanged(t);return this.point=t,this.isDown=!1,i},toString:function(){return"Touch#"+this.id}});var Co=Eo;function Po(t){this.node=t,this.selfPruned=!1,this.selfInclusive=!1,this.subtreePrunable=!0,this.subtreePickableCount=0,this.mouseInclusiveBounds=ne.NOTHING.copy(),this.mouseExclusiveBounds=ne.NOTHING.copy(),this.touchInclusiveBounds=ne.NOTHING.copy(),this.touchExclusiveBounds=ne.NOTHING.copy(),this.mouseInclusiveDirty=!0,this.mouseExclusiveDirty=!0,this.touchInclusiveDirty=!0,this.touchExclusiveDirty=!0,this.scratchVector=new te.a(0,0)}we.register("Picker",Po),Object(z.a)(Object,Po,{hitTest:function(t,e,i){const n=this.selfInclusive;return e?n?this.validateMouseInclusive():this.validateMouseExclusive():i?n?this.validateTouchInclusive():this.validateTouchExclusive():this.node.validateBounds(),this.recursiveHitTest(t,e,i,!1)},recursiveHitTest:function(t,e,i,n){if(n=n||this.selfInclusive,this.selfPruned||!n&&this.subtreePrunable)return null;let s;if(s=e?n?this.mouseInclusiveBounds:this.mouseExclusiveBounds:i?n?this.touchInclusiveBounds:this.touchExclusiveBounds:this.node.bounds,!s.containsPoint(t))return null;const r=this.node._transform.getInverse().multiplyVector2(this.scratchVector.set(t));if(this.node.hasClipArea()&&!this.node.clipArea.containsPoint(r))return null;for(let o=this.node._children.length-1;o>=0;o--){const t=this.node._children[o]._picker.recursiveHitTest(r,e,i,n);if(t)return t.addAncestor(this.node,o)}return e&&this.node._mouseArea?this.node._mouseArea.containsPoint(r)?new yn(this.node):null:i&&this.node._touchArea?this.node._touchArea.containsPoint(r)?new yn(this.node):null:this.node.selfBounds.containsPoint(r)&&this.node.containsPointSelf(r)?new yn(this.node):null},invalidate:function(t,e){let i=!!e||!this.mouseInclusiveDirty||!this.touchInclusiveDirty;if(this.mouseInclusiveDirty=!0,this.touchInclusiveDirty=!0,t&&(i=i||!this.mouseExclusiveDirty||!this.touchExclusiveDirty,this.mouseExclusiveDirty=!0,this.touchExclusiveDirty=!0),!this.selfPruned&&i){const e=this.node._parents;for(let i=0;i<e.length;i++)e[i]._picker.invalidate(t||this.selfInclusive,!1)}},validateMouseInclusive:function(){if(!this.mouseInclusiveDirty)return;this.mouseInclusiveBounds.set(this.node.selfBounds);const t=this.node._children;for(let e=0;e<t.length;e++){const i=t[e]._picker;i.selfPruned||(i.validateMouseInclusive(),this.mouseInclusiveBounds.includeBounds(i.mouseInclusiveBounds))}this.applyAreasAndTransform(this.mouseInclusiveBounds,this.node._mouseArea),this.mouseInclusiveDirty=!1},validateMouseExclusive:function(){if(!this.mouseExclusiveDirty)return;this.mouseExclusiveBounds.set(this.node.selfBounds);const t=this.node._children;for(let e=0;e<t.length;e++){const i=t[e]._picker;i.subtreePrunable||(i.selfInclusive?(i.validateMouseInclusive(),this.mouseExclusiveBounds.includeBounds(i.mouseInclusiveBounds)):(i.validateMouseExclusive(),this.mouseExclusiveBounds.includeBounds(i.mouseExclusiveBounds)))}this.applyAreasAndTransform(this.mouseExclusiveBounds,this.node._mouseArea),this.mouseExclusiveDirty=!1},validateTouchInclusive:function(){if(!this.touchInclusiveDirty)return;this.touchInclusiveBounds.set(this.node.selfBounds);const t=this.node._children;for(let e=0;e<t.length;e++){const i=t[e]._picker;i.selfPruned||(i.validateTouchInclusive(),this.touchInclusiveBounds.includeBounds(i.touchInclusiveBounds))}this.applyAreasAndTransform(this.touchInclusiveBounds,this.node._touchArea),this.touchInclusiveDirty=!1},validateTouchExclusive:function(){if(!this.touchExclusiveDirty)return;this.touchExclusiveBounds.set(this.node.selfBounds);const t=this.node._children;for(let e=0;e<t.length;e++){const i=t[e]._picker;i.subtreePrunable||(i.selfInclusive?(i.validateTouchInclusive(),this.touchExclusiveBounds.includeBounds(i.touchInclusiveBounds)):(i.validateTouchExclusive(),this.touchExclusiveBounds.includeBounds(i.touchExclusiveBounds)))}this.applyAreasAndTransform(this.touchExclusiveBounds,this.node._touchArea),this.touchExclusiveDirty=!1},applyAreasAndTransform:function(t,e){if(e&&t.includeBounds(e.isBounds?e:e.bounds),this.node.hasClipArea()){const e=this.node.clipArea.bounds;t.minX=Math.max(t.minX,e.minX),t.minY=Math.max(t.minY,e.minY),t.maxX=Math.min(t.maxX,e.maxX),t.maxY=Math.min(t.maxY,e.maxY)}this.node.transformBoundsFromLocalToParent(t)},onInsertChild:function(t){if(!t._picker.selfPruned){const e=t._picker.subtreePickableCount>0;e&&this.changePickableCount(1),this.invalidate(e,!0)}},onRemoveChild:function(t){if(!t._picker.selfPruned){const e=t._picker.subtreePickableCount>0;e&&this.changePickableCount(-1),this.invalidate(e,!0)}},onAddInputListener:function(){this.checkSelfInclusive(),this.checkSubtreePrunable(),this.changePickableCount(1)},onRemoveInputListener:function(){this.checkSelfInclusive(),this.checkSubtreePrunable(),this.changePickableCount(-1)},onPickableChange:function(t,e){this.checkSelfPruned(),this.checkSelfInclusive(),this.checkSubtreePrunable();const i=(!0===t?-1:0)+(!0===e?1:0);i&&this.changePickableCount(i)},onVisibilityChange:function(){this.checkSelfPruned(),this.checkSubtreePrunable()},onMouseAreaChange:function(){this.invalidate(!0)},onTouchAreaChange:function(){this.invalidate(!0)},onTransformChange:function(){this.invalidate(!0)},onSelfBoundsDirty:function(){this.invalidate(!0)},onClipAreaChange:function(){this.invalidate(!0)},checkSelfPruned:function(){const t=!1===this.node.pickableProperty.value||!this.node.isVisible();if(this.selfPruned!==t){this.selfPruned=t;const e=this.node._parents;for(let t=0;t<e.length;t++){const i=e[t]._picker;this.subtreePickableCount>0?(i.invalidate(!0,!0),i.changePickableCount(this.selfPruned?-1:1)):i.invalidate(!1,!0)}}},checkSelfInclusive:function(){const t=!0===this.node.pickableProperty.value||this.node._inputListeners.length>0;this.selfInclusive!==t&&(this.selfInclusive=t,this.invalidate(!0,!0))},checkSubtreePrunable:function(){const t=!1===this.node.pickableProperty.value||!this.node.isVisible()||!0!==this.node.pickableProperty.value&&0===this.subtreePickableCount;this.subtreePrunable!==t&&(this.subtreePrunable=t,this.invalidate(!0,!0))},changePickableCount:function(t){if(0===t)return;const e=0===this.subtreePickableCount;this.subtreePickableCount+=t;const i=0===this.subtreePickableCount;if(this.checkSubtreePrunable(),!this.selfPruned&&e!==i){const t=this.node._parents.length;for(let i=0;i<t;i++)this.node._parents[i]._picker.changePickableCount(e?1:-1)}},audit:function(){0}});var ko=Po;const Io=[An.bitmaskCanvas,An.bitmaskSVG,An.bitmaskDOM,An.bitmaskWebGL,An.bitmaskSingleCanvas,An.bitmaskSingleSVG,An.bitmaskNotPainted,An.bitmaskBoundsValid,An.bitmaskNotAccessible,An.bitmaskLacksCanvas,An.bitmaskLacksSVG,An.bitmaskLacksDOM,An.bitmaskLacksWebGL],Lo=Io.length;let Oo=0;for(let _=0;_<Lo;_++)Oo|=Io[_];function Ro(t){this.node=t,this._counts={};for(let i=0;i<Lo;i++)this._counts[Io[i]]=0;this.bitmask=Oo,this.selfBitmask=Ro.summaryBitmaskForNodeSelf(t),this.summaryChange(this.bitmask,this.selfBitmask);const e=this.selfChange.bind(this);this.node.opacityProperty.lazyLink(e),this.node.clipAreaProperty.lazyLink(e),this.node.rendererSummaryRefreshEmitter.addListener(e)}we.register("RendererSummary",Ro),Object(z.a)(Object,Ro,{summaryChange:function(t,e){const i=t^e;let n=0,s=0;for(let r=0;r<Lo;r++){const t=Io[r];t&i&&(t&e?(this._counts[t]--,0===this._counts[t]&&(s|=t)):(this._counts[t]++,1===this._counts[t]&&(n|=t)))}if(n||s){const t=this.bitmask;for(let i=0;i<Lo;i++){const t=Io[i];s&t&&(this.bitmask|=t),n&t&&(this.bitmask^=t)}this.node.instanceRefreshEmitter.emit(),this.node.onSummaryChange(t,this.bitmask);const e=this.node._parents.length;for(let i=0;i<e;i++)this.node._parents[i]._rendererSummary.summaryChange(n,s)}},selfChange:function(){const t=this.selfBitmask,e=Ro.summaryBitmaskForNodeSelf(this.node);t!==e&&(this.summaryChange(t,e),this.selfBitmask=e)},computeBitmask:function(){let t=0;for(let e=0;e<Lo;e++)0===this._counts[Io[e]]&&(t|=Io[e]);return t},isSubtreeFullyCompatible:function(t){return!!(t&this.bitmask)},isSubtreeContainingCompatible:function(t){return!(t<<An.bitmaskLacksShift&this.bitmask)},isSingleCanvasSupported:function(){return!!(An.bitmaskSingleCanvas&this.bitmask)},isSingleSVGSupported:function(){return!!(An.bitmaskSingleSVG&this.bitmask)},isNotPainted:function(){return!!(An.bitmaskNotPainted&this.bitmask)},isNotAccessible:function(){return!!(An.bitmaskNotAccessible&this.bitmask)},areBoundsValid:function(){return!!(An.bitmaskBoundsValid&this.bitmask)},isSubtreeRenderedExclusivelySVG:function(t){if(!this.isSingleSVGSupported())return!1;for(let e=0;e<An.numActiveRenderers;e++){const i=An.bitmaskOrder(t,e);if(An.bitmaskSVG&i)return!0;if(this.isSubtreeContainingCompatible(i))return!1}return!1},isSubtreeRenderedExclusivelyCanvas:function(t){if(!this.isSingleCanvasSupported())return!1;for(let e=0;e<An.numActiveRenderers;e++){const i=An.bitmaskOrder(t,e);if(An.bitmaskCanvas&i)return!0;if(this.isSubtreeContainingCompatible(i))return!1}return!1},audit:function(){0},toString:function(){let t=Ro.bitmaskToString(this.bitmask);for(let e=0;e<Lo;e++){const i=Io[e],n=this._counts[i];0!==n&&(t+=" "+Ro.bitToString(i)+":"+n)}return t}},{bitmaskAll:Oo,summaryBitmaskForNodeSelf:function(t){let e=t._rendererBitmask;t.isPainted()?e|=(t._rendererBitmask&An.bitmaskCurrentRendererArea^An.bitmaskCurrentRendererArea)<<An.bitmaskLacksShift:e|=An.bitmaskCurrentRendererArea<<An.bitmaskLacksShift;const i=t._hints.requireElement||t._hints.cssTransform||t._hints.layerSplit,n=t._hints.renderer;return i||!An.isSVG(t._rendererBitmask)||n&&!An.isSVG(n)||(e|=An.bitmaskSingleSVG),i||!An.isCanvas(t._rendererBitmask)||n&&!An.isCanvas(n)||(e|=An.bitmaskSingleCanvas),t.isPainted()||(e|=An.bitmaskNotPainted),t.areSelfBoundsValid()&&(e|=An.bitmaskBoundsValid),t.accessibleContent||t.hasAccessibleOrder()||(e|=An.bitmaskNotAccessible),e},bitToString:function(t){return t===An.bitmaskCanvas?"Canvas":t===An.bitmaskSVG?"SVG":t===An.bitmaskDOM?"DOM":t===An.bitmaskWebGL?"WebGL":t===An.bitmaskLacksCanvas?"(-Canvas)":t===An.bitmaskLacksSVG?"(-SVG)":t===An.bitmaskLacksDOM?"(-DOM)":t===An.bitmaskLacksWebGL?"(-WebGL)":t===An.bitmaskSingleCanvas?"SingleCanvas":t===An.bitmaskSingleSVG?"SingleSVG":t===An.bitmaskNotPainted?"NotPainted":t===An.bitmaskBoundsValid?"BoundsValid":t===An.bitmaskNotAccessible?"NotAccessible":"?"},bitmaskToString:function(t){let e="";for(let i=0;i<Lo;i++){const n=Io[i];t&n&&(e+=Ro.bitToString(n)+" ")}return e}});var No=Ro;class Mo extends Ot{constructor(t,e,i,n){n=Object(s.a)({readOnly:!1},n),super(t[i],n),this.node=t,this.property=e,this.attribute=i,this.nodePropertyReadOnly=n.readOnly,this.changeListener=()=>this.set(t[i]),this.property.lazyLink(this.changeListener)}dispose(){this.property.unlink(this.changeListener),super.dispose(),this.node=null}setPropertyValue(t){this.nodePropertyReadOnly||(this.node[this.attribute]=t),super.setPropertyValue(t)}}we.register("NodeProperty",Mo);var Bo=Mo;class Fo extends A{constructor(t,e){super(t,e);const i=new Bo(t,t.pickableProperty,"pickable",Object(s.a)({phetioReadOnly:t.phetioReadOnly,tandem:t.tandem.createTandem("pickableProperty"),phetioType:Bt(P(Se)),phetioDocumentation:"Sets whether the node will be pickable (and hence interactive), see the NodeIO documentation for more details"},t.phetioComponentOptions,t.phetioComponentOptions.pickableProperty)),r=new jt(t.opacity,Object(s.a)({phetioReadOnly:t.phetioReadOnly,tandem:t.tandem.createTandem("opacityProperty"),range:new n.a(0,1),phetioDocumentation:"Opacity of the parent NodeIO, between 0 (invisible) and 1 (fully visible)"},t.phetioComponentOptions,t.phetioComponentOptions.opacityProperty));r.link((function(e){t.opacity=e})),t.opacityProperty.lazyLink(()=>{r.value=t.opacity}),this.disposeNodeIO=function(){i.dispose(),r.dispose()}}dispose(){this.disposeNodeIO()}}Fo.methods={moveForward:{returnType:V,parameterTypes:[],implementation:function(){return this.phetioObject.moveForward()},documentation:"Move this node one index forward in each of its parents.  If the node is already at the front, this is a no-op."},moveBackward:{returnType:V,parameterTypes:[],implementation:function(){return this.phetioObject.moveBackward()},documentation:"Move this node one index backward in each of its parents.  If the node is already at the back, this is a no-op."}},Fo.validator={valueType:we.Node},Fo.documentation='The base type for graphical and potentially interactive objects.  NodeIO has nested PropertyIO values for visibility, pickability and opacity.<br><br>Pickable can take one of three values:<br><ul><li>null: pass-through behavior. Nodes with input listeners are pickable, but nodes without input listeners won\'t block events for nodes behind it.</li><li>false: The node cannot be interacted with, and it blocks events for nodes behind it.</li><li>true: The node can be interacted with (if it has an input listener).</li></ul>For more about Scenery node pickability, please see <a href="http://phetsims.github.io/scenery/doc/implementation-notes#pickability">http://phetsims.github.io/scenery/doc/implementation-notes#pickability</a>',Fo.typeName="NodeIO",A.validateSubtype(Fo),we.register("NodeIO",Fo);var Vo=Fo;const qo=oe.a.clamp;let Ho=1;const Yo=ne.NOTHING.copy(),jo=new Ye,Go={visible:!0,opacity:1,pickable:null,inputEnabled:!0,clipArea:null,mouseArea:null,touchArea:null,cursor:null,transformBounds:!1,maxWidth:null,maxHeight:null,renderer:null,usesOpacity:!1,layerSplit:!1,cssTransform:!1,excludeInvisible:!1,webglScale:null,preventFit:!1};function zo(t){this._id=Ho++,this._instances=[],this._rootedDisplays=[],this._drawables=[],this._visibleProperty=new Ie(Go.visible),this._visibleProperty.lazyLink(this.onVisiblePropertyChange.bind(this)),this.opacityProperty=new Pe(Go.opacity),this.pickableProperty=new Pe(Go.pickable),this.inputEnabledProperty=new Pe(Go.inputEnabled),this.clipAreaProperty=new Pe(Go.clipArea),this._mouseArea=Go.mouseArea,this._touchArea=Go.touchArea,this._cursor=Go.cursor,this._children=[],this._parents=[],this._transformBounds=Go.transformBounds,this._transform=new Ue,this._transformListener=this.onTransformChange.bind(this),this._transform.changeEmitter.addListener(this._transformListener),this._maxWidth=Go.maxWidth,this._maxHeight=Go.maxHeight,this._appliedScaleFactor=1,this._inputListeners=[];const e=this.onBoundsListenersAddedOrRemoved.bind(this),i=this.validateBounds.bind(this),n=this.validateSelfBounds.bind(this);this.boundsProperty=new Oe(ne.NOTHING.copy()),this.boundsProperty.onAccessAttempt=i,this.boundsProperty.changeCount=e,this.localBoundsProperty=new Oe(ne.NOTHING.copy()),this.localBoundsProperty.onAccessAttempt=i,this.localBoundsProperty.changeCount=e,this.childBoundsProperty=new Oe(ne.NOTHING.copy()),this.childBoundsProperty.onAccessAttempt=i,this.childBoundsProperty.changeCount=e,this.selfBoundsProperty=new Oe(ne.NOTHING.copy()),this.selfBoundsProperty.onAccessAttempt=n,this._localBoundsOverridden=!1,this._excludeInvisibleChildrenFromBounds=!1,this._boundsDirty=!0,this._localBoundsDirty=!0,this._selfBoundsDirty=!0,this._childBoundsDirty=!0,this._hints={renderer:null===Go.renderer?0:An.fromName(Go.renderer),usesOpacity:Go.usesOpacity,layerSplit:Go.layerSplit,cssTransform:Go.cssTransform,fullResolution:!1,excludeInvisible:Go.excludeInvisible,webglScale:Go.webglScale,preventFit:Go.preventFit},this.childrenChangedEmitter=new H,this.childInsertedEmitter=new H,this.childRemovedEmitter=new H,this.childrenReorderedEmitter=new H,this.transformEmitter=new H,this.instanceRefreshEmitter=new H,this.rendererSummaryRefreshEmitter=new H,this.accessibleDisplaysEmitter=new H,this.focusHighlightChangedEmitter=new H,this.changedInstanceEmitter=new H,this.initializeAccessibility(),this._rendererBitmask=An.bitmaskNodeDefault,this._rendererSummary=new No(this),this._boundsEventCount=0,this._boundsEventSelfCount=0,this._picker=new ko(this),this._isGettingRemovedFromParent=!1,vt.call(this),t&&this.mutate(t)}we.register("Node",zo),Object(z.a)(vt,zo,{_mutatorKeys:["children","cursor","visibleProperty","visible","pickable","inputEnabled","inputListeners","opacity","matrix","translation","x","y","rotation","scale","excludeInvisibleChildrenFromBounds","localBounds","maxWidth","maxHeight","leftTop","centerTop","rightTop","leftCenter","center","rightCenter","leftBottom","centerBottom","rightBottom","left","right","top","bottom","centerX","centerY","renderer","layerSplit","usesOpacity","cssTransform","excludeInvisible","webglScale","preventFit","mouseArea","touchArea","clipArea","transformBounds"],drawableMarkFlags:[],insertChild:function(t,e,i){return this._picker.onInsertChild(e),this.changeBoundsEventCount(e._boundsEventCount>0?1:0),this._rendererSummary.summaryChange(No.bitmaskAll,e._rendererSummary.bitmask),e._parents.push(this),this._children.splice(t,0,e),e._rendererSummary.isNotAccessible()||this.onAccessibleAddChild(e),e.invalidateBounds(),this._boundsDirty=!0,this.childInsertedEmitter.emit(e,t),!i&&this.childrenChangedEmitter.emit(),this},addChild:function(t,e){return this.insertChild(this._children.length,t,e),this},removeChild:function(t,e){const i=_.indexOf(this._children,t);return this.removeChildWithIndex(t,i,e),this},removeChildAt:function(t,e){const i=this._children[t];return this.removeChildWithIndex(i,t,e),this},removeChildWithIndex:function(t,e,i){const n=_.indexOf(t._parents,this);t._isGettingRemovedFromParent=!0,t._rendererSummary.isNotAccessible()||this.onAccessibleRemoveChild(t),this._picker.onRemoveChild(t),this.changeBoundsEventCount(t._boundsEventCount>0?-1:0),this._rendererSummary.summaryChange(t._rendererSummary.bitmask,No.bitmaskAll),t._parents.splice(n,1),this._children.splice(e,1),t._isGettingRemovedFromParent=!1,this.invalidateBounds(),this._childBoundsDirty=!0,this.childRemovedEmitter.emit(t,e),!i&&this.childrenChangedEmitter.emit()},moveChildToIndex:function(t,e){const i=this.indexOfChild(t);return this._children[e]!==t&&(this._children.splice(i,1),this._children.splice(e,0,t),this._rendererSummary.isNotAccessible()||this.onAccessibleReorderedChildren(),this.childrenReorderedEmitter.emit(Math.min(i,e),Math.max(i,e)),this.childrenChangedEmitter.emit()),this},removeAllChildren:function(){return this.setChildren([]),this},setChildren:function(t){const e=[],i=[],n=[];let s;for(pn(t,this._children,i,e,n),s=e.length-1;s>=0;s--)this.removeChild(e[s],!0);let r=-1,o=-1;for(s=0;s<n.length;s++){const t=n[s];this._children[s]!==t&&(this._children[s]=t,-1===r&&(r=s),o=s)}const a=-1!==r;if(a&&(this._rendererSummary.isNotAccessible()||this.onAccessibleReorderedChildren(),this.childrenReorderedEmitter.emit(r,o)),i.length){let e=0,n=i[e];for(s=0;s<t.length;s++)t[s]===n&&(this.insertChild(s,n,!0),n=i[++e])}return(0!==e.length||0!==i.length||a)&&this.childrenChangedEmitter.emit(),this},set children(t){this.setChildren(t)},getChildren:function(){return this._children.slice(0)},get children(){return this.getChildren()},getChildrenCount:function(){return this._children.length},getParents:function(){return this._parents.slice(0)},get parents(){return this.getParents()},getParent:function(){return this._parents.length?this._parents[0]:null},get parent(){return this.getParent()},getChildAt:function(t){return this._children[t]},indexOfParent:function(t){return _.indexOf(this._parents,t)},indexOfChild:function(t){return _.indexOf(this._children,t)},moveToFront:function(){const t=this;return _.each(this._parents.slice(),(function(e){e.moveChildToFront(t)})),this},moveChildToFront:function(t){return this.moveChildToIndex(t,this._children.length-1)},moveForward:function(){return this._parents.forEach(t=>t.moveChildForward(this)),this},moveChildForward:function(t){const e=this.indexOfChild(t);return e<this.getChildrenCount()-1&&this.moveChildToIndex(t,e+1),this},moveBackward:function(){return this._parents.forEach(t=>t.moveChildBackward(this)),this},moveChildBackward:function(t){const e=this.indexOfChild(t);return e>0&&this.moveChildToIndex(t,e-1),this},moveToBack:function(){const t=this;return _.each(this._parents.slice(),(function(e){e.moveChildToBack(t)})),this},moveChildToBack:function(t){return this.moveChildToIndex(t,0)},replaceChild:function(t,e){const i=this.indexOfChild(t),n=t.focused;return this.removeChild(t,!0),this.insertChild(i,e,!0),this.childrenChangedEmitter.emit(),n&&e.focusable&&e.focus(),this},detach:function(){const t=this;return _.each(this._parents.slice(0),(function(e){e.removeChild(t)})),this},changeBoundsEventCount:function(t){if(0!==t){const e=0===this._boundsEventCount;if(this._boundsEventCount+=t,e!==(0===this._boundsEventCount)){const t=e?1:-1,i=this._parents.length;for(let e=0;e<i;e++)this._parents[e].changeBoundsEventCount(t)}}},validateSelfBounds:function(){if(this._selfBoundsDirty){const t=Yo.set(this.selfBoundsProperty._value),e=this.updateSelfBounds();return this._selfBoundsDirty=!1,e&&this.selfBoundsProperty.notifyListeners(t),!0}return!1},validateBounds:function(){let t;let e=this.validateSelfBounds();const i=this.childBoundsProperty._value,n=this.localBoundsProperty._value,s=this.selfBoundsProperty._value,r=this.boundsProperty._value;if(this._childBoundsDirty){for(e=!0,t=this._children.length;t--;)this._children[t].validateBounds();const n=Yo.set(i);for(i.set(ne.NOTHING),t=this._children.length;t--;){const e=this._children[t];this._excludeInvisibleChildrenFromBounds&&!e.isVisible()||i.includeBounds(e.bounds)}this._childBoundsDirty=!1,i.equals(n)||i.equalsEpsilon(n,1e-13)||this.childBoundsProperty.notifyListeners(n)}if(this._localBoundsDirty&&!this._localBoundsOverridden){e=!0,this._localBoundsDirty=!1;const t=Yo.set(n);n.set(s).includeBounds(i),this.hasClipArea()&&n.constrainBounds(this.clipArea.bounds),n.equals(t)||(n.equalsEpsilon(t,1e-13)||this.localBoundsProperty.notifyListeners(t),this._boundsDirty=!0),null===this._maxWidth&&null===this._maxHeight||this.updateMaxDimension(n)}if(this._boundsDirty){e=!0,this._boundsDirty=!1;const i=Yo.set(r);if(this._transformBounds&&!this._transform.getMatrix().isAxisAligned()){const t=jo.set(this.getMatrix());r.set(ne.NOTHING),this._includeTransformedSubtreeBounds(t,r),this.hasClipArea()&&r.constrainBounds(this.clipArea.getBoundsWithTransform(t))}else r.set(n),this.transformBoundsFromLocalToParent(r);if(!r.equals(i)){for(t=this._parents.length;t--;)this._parents[t].invalidateBounds();r.equalsEpsilon(i,1e-13)||this.boundsProperty.notifyListeners(i)}}return(this._childBoundsDirty||this._boundsDirty)&&this.validateBounds(),e},_includeTransformedSubtreeBounds:function(t,e){this.selfBounds.isEmpty()||e.includeBounds(this.getTransformedSelfBounds(t));const i=this._children.length;for(let n=0;n<i;n++){const i=this._children[n];t.multiplyMatrix(i._transform.getMatrix()),i._includeTransformedSubtreeBounds(t,e),t.multiplyMatrix(i._transform.getInverse())}return e},validateWatchedBounds:function(){for(;this.watchedBoundsScan(););},watchedBoundsScan:function(){if(0!==this._boundsEventSelfCount)return this.validateBounds();if(this._boundsEventCount>0&&this._childBoundsDirty){let t=!1;const e=this._children.length;for(let i=0;i<e;i++)t=this._children[i].watchedBoundsScan()||t;return t}return!1},invalidateBounds:function(){this._boundsDirty=!0,this._localBoundsDirty=!0;let t=this._parents.length;for(;t--;)this._parents[t].invalidateChildBounds()},invalidateChildBounds:function(){if(!this._childBoundsDirty){this._childBoundsDirty=!0,this._localBoundsDirty=!0;let t=this._parents.length;for(;t--;)this._parents[t].invalidateChildBounds()}},invalidateSelf:function(t){const e=this.selfBoundsProperty._value;if(t){if(this._selfBoundsDirty=!1,!e.equals(t)){const i=Yo.set(e);this.invalidateBounds(),this._picker.onSelfBoundsDirty(),e.set(t),this.selfBoundsProperty.notifyListeners(i)}}else this._selfBoundsDirty=!0,this.invalidateBounds(),this._picker.onSelfBoundsDirty()},updateSelfBounds:function(){return!1},hasChild:function(t){const e=_.includes(this._children,t);return e},getSelfShape:function(){return this.selfBounds.isEmpty()?new cn:cn.bounds(this.selfBounds)},getSelfBounds:function(){return this.selfBoundsProperty.value},get selfBounds(){return this.getSelfBounds()},getSafeSelfBounds:function(){return this.selfBoundsProperty.value},get safeSelfBounds(){return this.getSafeSelfBounds()},getChildBounds:function(){return this.childBoundsProperty.value},get childBounds(){return this.getChildBounds()},getLocalBounds:function(){return this.localBoundsProperty.value},get localBounds(){return this.getLocalBounds()},setLocalBounds:function(t){const e=this.localBoundsProperty._value;if(null===t)this._localBoundsOverridden&&(this._localBoundsOverridden=!1,this.invalidateBounds());else{const i=!t.equals(e)||!this._localBoundsOverridden;i&&e.set(t),this._localBoundsOverridden||(this._localBoundsOverridden=!0),i&&this.invalidateBounds()}return this},set localBounds(t){return this.setLocalBounds(t)},getTransformedSelfBounds:function(t){return this.selfBounds.transformed(t)},getTransformedSafeSelfBounds:function(t){return this.safeSelfBounds.transformed(t)},getSafeTransformedVisibleBounds:function(t){const e=(t||Ye.IDENTITY).timesMatrix(this.matrix),i=ne.NOTHING.copy();if(this.visibleProperty.value&&(this.selfBounds.isEmpty()||i.includeBounds(this.getTransformedSafeSelfBounds(e)),this._children.length))for(let n=0;n<this._children.length;n++)i.includeBounds(this._children[n].getSafeTransformedVisibleBounds(e));return i},get safeTransformedVisibleBounds(){return this.getSafeTransformedVisibleBounds()},setTransformBounds:function(t){return this._transformBounds!==t&&(this._transformBounds=t,this.invalidateBounds()),this},set transformBounds(t){return this.setTransformBounds(t)},getTransformBounds:function(){return this._transformBounds},get transformBounds(){return this.getTransformBounds()},getBounds:function(){return this.boundsProperty.value},get bounds(){return this.getBounds()},getVisibleLocalBounds:function(){const t=this.selfBounds.copy();let e=this._children.length;for(;e--;){const i=this._children[e];i.isVisible()&&t.includeBounds(i.getVisibleBounds())}return t},get visibleLocalBounds(){return this.getVisibleLocalBounds()},getVisibleBounds:function(){return this.getVisibleLocalBounds().transform(this.getMatrix())},get visibleBounds(){return this.getVisibleBounds()},hitTest:function(t,e,i){return this._picker.hitTest(t,!!e,!!i)},trailUnderPointer:function(t){return this.hitTest(t.point,t instanceof So,t instanceof Co||t instanceof Do)},containsPoint:function(t){return null!==this.hitTest(t)},containsPointSelf:function(t){return this.selfBounds.containsPoint(t)},intersectsBoundsSelf:function(t){return this.selfBounds.intersectsBounds(t)},isPainted:function(){return!1},areSelfBoundsValid:function(){return!0},hasParent:function(){return 0!==this._parents.length},hasChildren:function(){return this._children.length>0},isChildIncludedInLayout:function(t){return t.bounds.isValid()&&(!this._excludeInvisibleChildrenFromBounds||t.visible)},walkDepthFirst:function(t){t(this);const e=this._children.length;for(let i=0;i<e;i++)this._children[i].walkDepthFirst(t)},addInputListener:function(t){return _.includes(this._inputListeners,t)||(this._inputListeners.push(t),this._picker.onAddInputListener()),this},removeInputListener:function(t){const e=_.indexOf(this._inputListeners,t);return e>=0&&(this._inputListeners.splice(e,1),this._picker.onRemoveInputListener()),this},hasInputListener:function(t){for(let e=0;e<this._inputListeners.length;e++)if(this._inputListeners[e]===t)return!0;return!1},interruptInput:function(){const t=this.inputListeners;for(let e=0;e<t.length;e++){const i=t[e];i.interrupt&&i.interrupt()}return this},interruptSubtreeInput:function(){this.interruptInput();const t=this._children.slice();for(let e=0;e<t.length;e++)t[e].interruptSubtreeInput();return this},translate:function(t,e,i){if("number"==typeof t){if(!t&&!e)return;i?this.prependTranslation(t,e):this.appendMatrix(jo.setToTranslation(t,e))}else{const i=t;if(!i.x&&!i.y)return;this.translate(i.x,i.y,e)}},scale:function(t,e,i){if("number"==typeof t)if(void 0===e||"boolean"==typeof e)this.scale(t,t,e);else{if(1===t&&1===e)return;i?this.prependMatrix(Ye.scaling(t,e)):this.appendMatrix(Ye.scaling(t,e))}else{const i=t;this.scale(i.x,i.y,e)}},rotate:function(t,e){t%(2*Math.PI)!=0&&(e?this.prependMatrix(Ye.rotation2(t)):this.appendMatrix(Ye.rotation2(t)))},rotateAround:function(t,e){let i=Ye.translation(-t.x,-t.y);return i=Ye.rotation2(e).timesMatrix(i),i=Ye.translation(t.x,t.y).timesMatrix(i),this.prependMatrix(i),this},setX:function(t){return this.translate(t-this.getX(),0,!0),this},set x(t){this.setX(t)},getX:function(){return this._transform.getMatrix().m02()},get x(){return this.getX()},setY:function(t){return this.translate(0,t-this.getY(),!0),this},set y(t){this.setY(t)},getY:function(){return this._transform.getMatrix().m12()},get y(){return this.getY()},setScaleMagnitude:function(t,e){const i=this.getScaleVector();return"number"==typeof t?(void 0===e&&(e=t),this.appendMatrix(Ye.scaling(t/i.x,e/i.y))):this.appendMatrix(Ye.scaling(t.x/i.x,t.y/i.y)),this},getScaleVector:function(){return this._transform.getMatrix().getScaleVector()},setRotation:function(t){return this.appendMatrix(jo.setToRotationZ(t-this.getRotation())),this},set rotation(t){this.setRotation(t)},getRotation:function(){return this._transform.getMatrix().getRotation()},get rotation(){return this.getRotation()},setTranslation:function(t,e){const i=this._transform.getMatrix(),n=i.m02(),s=i.m12();let r,o;return"number"==typeof t?(r=t-n,o=e-s):(r=t.x-n,o=t.y-s),this.translate(r,o,!0),this},set translation(t){this.setTranslation(t)},getTranslation:function(){const t=this._transform.getMatrix();return new te.a(t.m02(),t.m12())},get translation(){return this.getTranslation()},appendMatrix:function(t){this._transform.append(t)},prependMatrix:function(t){this._transform.prepend(t)},prependTranslation:function(t,e){(t||e)&&this._transform.prependTranslation(t,e)},setMatrix:function(t){this._transform.setMatrix(t)},set matrix(t){this.setMatrix(t)},getMatrix:function(){return this._transform.getMatrix()},get matrix(){return this.getMatrix()},getTransform:function(){return this._transform},get transform(){return this.getTransform()},resetTransform:function(){this.setMatrix(Ye.IDENTITY)},onTransformChange:function(){this.invalidateBounds(),this._picker.onTransformChange(),this.transformEmitter.emit()},onSummaryChange:function(t,e){this._accessibleDisplaysInfo.onSummaryChange(t,e)},updateMaxDimension:function(t){const e=this._appliedScaleFactor;let i=1;if(null!==this._maxWidth){const e=t.width;e>this._maxWidth&&(i=Math.min(i,this._maxWidth/e))}if(null!==this._maxHeight){const e=t.height;e>this._maxHeight&&(i=Math.min(i,this._maxHeight/e))}const n=i/e;1!==n&&(this.scale(n),this._appliedScaleFactor=i)},onMaxDimensionChange:function(t,e){null===t&&null!==e?(this.changeBoundsEventCount(1),this._boundsEventSelfCount++):null!==t&&null===e&&(this.changeBoundsEventCount(-1),this._boundsEventSelfCount--)},setMaxWidth:function(t){this._maxWidth!==t&&(this.onMaxDimensionChange(this._maxWidth,t),this._maxWidth=t,this.updateMaxDimension(this.localBoundsProperty.value))},set maxWidth(t){this.setMaxWidth(t)},getMaxWidth:function(){return this._maxWidth},get maxWidth(){return this.getMaxWidth()},setMaxHeight:function(t){this._maxHeight!==t&&(this.onMaxDimensionChange(this._maxHeight,t),this._maxHeight=t,this.updateMaxDimension(this.localBoundsProperty.value))},set maxHeight(t){this.setMaxHeight(t)},getMaxHeight:function(){return this._maxHeight},get maxHeight(){return this.getMaxHeight()},setLeft:function(t){const e=this.getLeft();return isFinite(e)&&this.translate(t-e,0,!0),this},set left(t){this.setLeft(t)},getLeft:function(){return this.getBounds().minX},get left(){return this.getLeft()},setRight:function(t){const e=this.getRight();return isFinite(e)&&this.translate(t-e,0,!0),this},set right(t){this.setRight(t)},getRight:function(){return this.getBounds().maxX},get right(){return this.getRight()},setCenterX:function(t){const e=this.getCenterX();return isFinite(e)&&this.translate(t-e,0,!0),this},set centerX(t){this.setCenterX(t)},getCenterX:function(){return this.getBounds().getCenterX()},get centerX(){return this.getCenterX()},setCenterY:function(t){const e=this.getCenterY();return isFinite(e)&&this.translate(0,t-e,!0),this},set centerY(t){this.setCenterY(t)},getCenterY:function(){return this.getBounds().getCenterY()},get centerY(){return this.getCenterY()},setTop:function(t){const e=this.getTop();return isFinite(e)&&this.translate(0,t-e,!0),this},set top(t){this.setTop(t)},getTop:function(){return this.getBounds().minY},get top(){return this.getTop()},setBottom:function(t){const e=this.getBottom();return isFinite(e)&&this.translate(0,t-e,!0),this},set bottom(t){this.setBottom(t)},getBottom:function(){return this.getBounds().maxY},get bottom(){return this.getBottom()},setLeftTop:function(t){const e=this.getLeftTop();return e.isFinite()&&this.translate(t.minus(e),!0),this},set leftTop(t){this.setLeftTop(t)},getLeftTop:function(){return this.getBounds().getLeftTop()},get leftTop(){return this.getLeftTop()},setCenterTop:function(t){const e=this.getCenterTop();return e.isFinite()&&this.translate(t.minus(e),!0),this},set centerTop(t){this.setCenterTop(t)},getCenterTop:function(){return this.getBounds().getCenterTop()},get centerTop(){return this.getCenterTop()},setRightTop:function(t){const e=this.getRightTop();return e.isFinite()&&this.translate(t.minus(e),!0),this},set rightTop(t){this.setRightTop(t)},getRightTop:function(){return this.getBounds().getRightTop()},get rightTop(){return this.getRightTop()},setLeftCenter:function(t){const e=this.getLeftCenter();return e.isFinite()&&this.translate(t.minus(e),!0),this},set leftCenter(t){this.setLeftCenter(t)},getLeftCenter:function(){return this.getBounds().getLeftCenter()},get leftCenter(){return this.getLeftCenter()},setCenter:function(t){const e=this.getCenter();return e.isFinite()&&this.translate(t.minus(e),!0),this},set center(t){this.setCenter(t)},getCenter:function(){return this.getBounds().getCenter()},get center(){return this.getCenter()},setRightCenter:function(t){const e=this.getRightCenter();return e.isFinite()&&this.translate(t.minus(e),!0),this},set rightCenter(t){this.setRightCenter(t)},getRightCenter:function(){return this.getBounds().getRightCenter()},get rightCenter(){return this.getRightCenter()},setLeftBottom:function(t){const e=this.getLeftBottom();return e.isFinite()&&this.translate(t.minus(e),!0),this},set leftBottom(t){this.setLeftBottom(t)},getLeftBottom:function(){return this.getBounds().getLeftBottom()},get leftBottom(){return this.getLeftBottom()},setCenterBottom:function(t){const e=this.getCenterBottom();return e.isFinite()&&this.translate(t.minus(e),!0),this},set centerBottom(t){this.setCenterBottom(t)},getCenterBottom:function(){return this.getBounds().getCenterBottom()},get centerBottom(){return this.getCenterBottom()},setRightBottom:function(t){const e=this.getRightBottom();return e.isFinite()&&this.translate(t.minus(e),!0),this},set rightBottom(t){this.setRightBottom(t)},getRightBottom:function(){return this.getBounds().getRightBottom()},get rightBottom(){return this.getRightBottom()},getWidth:function(){return this.getBounds().getWidth()},get width(){return this.getWidth()},getHeight:function(){return this.getBounds().getHeight()},get height(){return this.getHeight()},getId:function(){return this._id},get id(){return this.getId()},onVisiblePropertyChange:function(t){this._picker.onVisibilityChange(),this._accessibleDisplaysInfo.onVisibilityChange(t);for(let e=0;e<this._parents.length;e++){const t=this._parents[e];t._excludeInvisibleChildrenFromBounds&&t.invalidateChildBounds()}},linkVisibleProperty(t){this.addLinkedElement(t,{tandem:this.tandem.createTandem("visibleProperty")})},set visibleProperty(t){this.visibleProperty.forwardingProperty&&this.visibleProperty.forwardingProperty.isPhetioInstrumented();this._visibleProperty.setForwardingProperty(t),this.phetioVisibleProperty&&(this.phetioVisibleProperty.dispose(),this.phetioVisibleProperty=null,this.linkVisibleProperty(t))},get visibleProperty(){return this._visibleProperty},setVisible:function(t){return this.visibleProperty.set(t),this},set visible(t){this.setVisible(t)},isVisible:function(){return this.visibleProperty.value},get visible(){return this.isVisible()},swapVisibility:function(t){const e=this.visible?this:t,i=this.visible?t:this,n=e.focused;return e.visible=!1,i.visible=!0,n&&i.focusable&&i.focus(),this},setOpacity:function(t){this.opacityProperty.value=qo(t,0,1)},set opacity(t){this.setOpacity(t)},getOpacity:function(){return this.opacityProperty.value},get opacity(){return this.getOpacity()},setPickable:function(t){if(this.pickable!==t){const e=this.pickable;this.pickableProperty.setPropertyValue(t),this._picker.onPickableChange(e,t),this.pickableProperty.notifyListeners(e)}},set pickable(t){this.setPickable(t)},isPickable:function(){return this.pickableProperty.value},get pickable(){return this.isPickable()},setInputEnabled:function(t){this.inputEnabledProperty.value=t},set inputEnabled(t){this.setInputEnabled(t)},isInputEnabled:function(){return this.inputEnabledProperty.value},get inputEnabled(){return this.isInputEnabled()},setInputListeners:function(t){for(;this._inputListeners.length;)this.removeInputListener(this._inputListeners[0]);for(let e=0;e<t.length;e++)this.addInputListener(t[e]);return this},set inputListeners(t){this.setInputListeners(t)},getInputListeners:function(){return this._inputListeners.slice(0)},get inputListeners(){return this.getInputListeners()},setCursor:function(t){this._cursor="auto"===t?null:t},set cursor(t){this.setCursor(t)},getCursor:function(){return this._cursor},get cursor(){return this.getCursor()},setMouseArea:function(t){this._mouseArea!==t&&(this._mouseArea=t,this._picker.onMouseAreaChange())},set mouseArea(t){this.setMouseArea(t)},getMouseArea:function(){return this._mouseArea},get mouseArea(){return this.getMouseArea()},setTouchArea:function(t){this._touchArea!==t&&(this._touchArea=t,this._picker.onTouchAreaChange())},set touchArea(t){this.setTouchArea(t)},getTouchArea:function(){return this._touchArea},get touchArea(){return this.getTouchArea()},setClipArea:function(t){this.clipArea!==t&&(this.clipAreaProperty.value=t,this.invalidateBounds(),this._picker.onClipAreaChange())},set clipArea(t){this.setClipArea(t)},getClipArea:function(){return this.clipAreaProperty.value},get clipArea(){return this.getClipArea()},hasClipArea:function(){return null!==this.clipArea},setRendererBitmask:function(t){t!==this._rendererBitmask&&(this._rendererBitmask=t,this._rendererSummary.selfChange(),this.instanceRefreshEmitter.emit())},invalidateSupportedRenderers:function(){},invalidateHint:function(){this.rendererSummaryRefreshEmitter.emit(),this.instanceRefreshEmitter.emit()},setRenderer:function(t){let e=0;"canvas"===t?e=An.bitmaskCanvas:"svg"===t?e=An.bitmaskSVG:"dom"===t?e=An.bitmaskDOM:"webgl"===t&&(e=An.bitmaskWebGL),this._hints.renderer!==e&&(this._hints.renderer=e,this.invalidateHint())},set renderer(t){this.setRenderer(t)},getRenderer:function(){return 0===this._hints.renderer?null:this._hints.renderer===An.bitmaskCanvas?"canvas":this._hints.renderer===An.bitmaskSVG?"svg":this._hints.renderer===An.bitmaskDOM?"dom":this._hints.renderer===An.bitmaskWebGL?"webgl":this._hints.renderer},get renderer(){return this.getRenderer()},setLayerSplit:function(t){t!==this._hints.layerSplit&&(this._hints.layerSplit=t,this.invalidateHint())},set layerSplit(t){this.setLayerSplit(t)},isLayerSplit:function(){return this._hints.layerSplit},get layerSplit(){return this.isLayerSplit()},setUsesOpacity:function(t){t!==this._hints.usesOpacity&&(this._hints.usesOpacity=t,this.invalidateHint())},set usesOpacity(t){this.setUsesOpacity(t)},getUsesOpacity:function(){return this._hints.usesOpacity},get usesOpacity(){return this.getUsesOpacity()},setCSSTransform:function(t){t!==this._hints.cssTransform&&(this._hints.cssTransform=t,this.invalidateHint())},set cssTransform(t){this.setCSSTransform(t)},isCSSTransformed:function(){return this._hints.cssTransform},get cssTransform(){return this._hints.cssTransform},setExcludeInvisible:function(t){t!==this._hints.excludeInvisible&&(this._hints.excludeInvisible=t,this.invalidateHint())},set excludeInvisible(t){this.setExcludeInvisible(t)},isExcludeInvisible:function(){return this._hints.excludeInvisible},get excludeInvisible(){return this.isExcludeInvisible()},setExcludeInvisibleChildrenFromBounds:function(t){t!==this._excludeInvisibleChildrenFromBounds&&(this._excludeInvisibleChildrenFromBounds=t,this.invalidateBounds())},set excludeInvisibleChildrenFromBounds(t){this.setExcludeInvisibleChildrenFromBounds(t)},isExcludeInvisibleChildrenFromBounds:function(){return this._excludeInvisibleChildrenFromBounds},get excludeInvisibleChildrenFromBounds(){return this.isExcludeInvisibleChildrenFromBounds()},setPreventFit:function(t){t!==this._hints.preventFit&&(this._hints.preventFit=t,this.invalidateHint())},set preventFit(t){this.setPreventFit(t)},isPreventFit:function(){return this._hints.preventFit},get preventFit(){return this.isPreventFit()},setWebGLScale:function(t){t!==this._hints.webglScale&&(this._hints.webglScale=t,this.invalidateHint())},set webglScale(t){this.setWebGLScale(t)},getWebGLScale:function(){return this._hints.webglScale},get webglScale(){return this.getWebGLScale()},getUniqueTrail:function(t){if(t){const e=this.getTrails(t);return e[0]}{const t=new yn;let e=this;for(;e;)t.addAncestor(e),e=e._parents[0];return t}},getUniqueTrailTo:function(t){return this.getUniqueTrail((function(e){return t===e}))},getTrails:function(t){t=t||zo.defaultTrailPredicate;const e=[],i=new yn(this);return yn.appendAncestorTrailsWithPredicate(e,i,t),e},getTrailsTo:function(t){return this.getTrails((function(e){return e===t}))},getLeafTrails:function(t){t=t||zo.defaultLeafTrailPredicate;const e=[],i=new yn(this);return yn.appendDescendantTrailsWithPredicate(e,i,t),e},getLeafTrailsTo:function(t){return this.getLeafTrails((function(e){return e===t}))},getUniqueLeafTrail:function(t){const e=this.getLeafTrails(t);return e[0]},getUniqueLeafTrailTo:function(t){return this.getUniqueLeafTrail((function(e){return e===t}))},getConnectedNodes:function(){const t=[];let e=this._children.concat(this._parents).concat(this);for(;e.length;){const i=e.pop();_.includes(t,i)||(t.push(i),e=e.concat(i._children,i._parents))}return t},getSubtreeNodes:function(){const t=[];let e=this._children.concat(this);for(;e.length;){const i=e.pop();_.includes(t,i)||(t.push(i),e=e.concat(i._children))}return t},getTopologicallySortedNodes:function(){const t={},e=[],i=[];let n;function s(i){delete t[n.id][i.id],_.every(t,(function(t){return!t[i.id]}))&&e.push(i)}for(_.each(this.getConnectedNodes(),(function(i){t[i.id]={},_.each(i._children,(function(e){t[i.id][e.id]=!0})),i.parents.length||e.push(i)}));e.length;)n=e.pop(),i.push(n),_.each(n._children,s);return i},canAddChild:function(t){if(this===t||_.includes(this._children,t))return!1;const e={},i=[],n=[];let s;function r(t){delete e[s.id][t.id],_.every(e,(function(e){return!e[t.id]}))&&i.push(t)}for(_.each(this.getConnectedNodes().concat(t.getConnectedNodes()),(function(n){e[n.id]={},_.each(n._children,(function(t){e[n.id][t.id]=!0})),n.parents.length||n===t||i.push(n)})),e[this.id][t.id]=!0;i.length;)s=i.pop(),n.push(s),_.each(s._children,r),s===this&&r(t);return _.every(e,(function(t){return _.every(t,(function(t){return!1}))}))},canvasPaintSelf:function(t,e){},renderToCanvasSelf:function(t,e){this.isPainted()&&this._rendererBitmask&An.bitmaskCanvas&&this.canvasPaintSelf(t,e)},renderToCanvasSubtree:function(t,e){e=e||Ye.identity(),t.resetStyles(),this.renderToCanvasSelf(t,e);for(let i=0;i<this._children.length;i++){const n=this._children[i];if(n.isVisible()){const i=1!==n.opacity||n.clipArea;if(t.context.save(),e.multiplyMatrix(n._transform.getMatrix()),e.canvasSetTransform(t.context),i){const i=document.createElement("canvas");i.width=t.canvas.width,i.height=t.canvas.height;const s=i.getContext("2d"),r=new sr(i,s);e.canvasSetTransform(s),n.renderToCanvasSubtree(r,e),t.context.save(),n.clipArea&&(t.context.beginPath(),n.clipArea.writeToContext(t.context),t.context.clip()),t.context.setTransform(1,0,0,1,0,0),t.context.globalAlpha=n.opacity,t.context.drawImage(i,0,0),t.context.restore()}else n.renderToCanvasSubtree(t,e);e.multiplyMatrix(n._transform.getInverse()),t.context.restore()}}},renderToCanvas:function(t,e,i,n){t.width=t.width,n&&(e.fillStyle=n,e.fillRect(0,0,t.width,t.height));const s=new sr(t,e);this.renderToCanvasSubtree(s,Ye.identity()),i&&i()},toCanvas:function(t,e,i,n,s){const r=this.getBounds().union(this.localToParentBounds(this.getSafeSelfBounds()));e=void 0!==e?e:Math.ceil(2-r.minX),i=void 0!==i?i:Math.ceil(2-r.minY),n=void 0!==n?n:Math.ceil(r.getWidth()+4),s=void 0!==s?s:Math.ceil(r.getHeight()+4);const o=document.createElement("canvas");o.width=n,o.height=s;const a=o.getContext("2d");a.translate(e,i),this._transform.getMatrix().canvasAppendTransform(a);const l=new sr(o,a);this.renderToCanvasSubtree(l,Ye.translation(e,i).timesMatrix(this._transform.getMatrix())),t(o,e,i,n,s)},toDataURL:function(t,e,i,n,s){this.toCanvas((function(e,i,n,s,r){t(e.toDataURL(),i,n,s,r)}),e,i,n,s)},toImage:function(t,e,i,n,s){this.toDataURL((function(e,i,n){const s=document.createElement("img");s.onload=function(){t(s,i,n);try{delete s.onload}catch(e){}},s.src=e}),e,i,n,s)},toImageNodeAsynchronous:function(t,e,i,n,s){this.toImage((function(e,i,n){t(new zo({children:[new we.Image(e,{x:-i,y:-n})]}))}),e,i,n,s)},toCanvasNodeSynchronous:function(t,e,i,n){let s=null;return this.toCanvas((function(t,e,i){s=new zo({children:[new we.Image(t,{x:-e,y:-i})]})}),t,e,i,n),s},toDataURLImageSynchronous:function(t,e,i,n){let s;return this.toDataURL((function(t,e,i,n,r){s=new we.Image(t,{x:-e,y:-i,initialWidth:n,initialHeight:r})}),t,e,i,n),s},toDataURLNodeSynchronous:function(t,e,i,n){return new zo({children:[this.toDataURLImageSynchronous(t,e,i,n)]})},rasterized:function(t){const e=(t=Object(s.a)({resolution:1,sourceBounds:null,useTargetBounds:!0,wrap:!0,useCanvas:!1},t)).resolution,i=t.sourceBounds;const n=new zo({scale:e,children:[this]});let r,o=i||this.getSafeTransformedVisibleBounds().dilated(2).roundedOut();1!==e&&(o=new ne(e*o.minX,e*o.minY,e*o.maxX,e*o.maxY),o.width%1!=0&&(o.maxX+=1-o.width%1),o.height%1!=0&&(o.maxY+=1-o.height%1)),n.toCanvas((function(i,n,o,a,l){const h=t.useCanvas?i:i.toDataURL();r=new we.Image(h,Object(s.a)(t,{x:-n,y:-o,initialWidth:a,initialHeight:l})),r.scale(1/e,1/e,!0)}),-o.minX,-o.minY,o.width,o.height),n.dispose();let a=this.getVisibleBounds();if(i&&(a=i.intersection(a)),t.wrap){const e=new zo({children:[r]});return t.useTargetBounds&&(e.localBounds=a),e}return t.useTargetBounds&&(r.localBounds=r.parentToLocalBounds(a)),r},createDOMDrawable:function(t,e){throw new Error("createDOMDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")},createSVGDrawable:function(t,e){throw new Error("createSVGDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")},createCanvasDrawable:function(t,e){throw new Error("createCanvasDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")},createWebGLDrawable:function(t,e){throw new Error("createWebGLDrawable is abstract. The subtype should either override this method, or not support the DOM renderer")},getInstances:function(){return this._instances},get instances(){return this.getInstances()},addInstance:function(t){this._instances.push(t),this.changedInstanceEmitter.emit(t,!0)},removeInstance:function(t){const e=_.indexOf(this._instances,t);this._instances.splice(e,1),this.changedInstanceEmitter.emit(t,!1)},wasDisplayed:function(t){for(let e=0;e<this._instances.length;e++){const i=this._instances[e];if(i.display===t&&i.visible)return!0}return!1},getRootedDisplays:function(){return this._rootedDisplays},get rootedDisplays(){return this.getRootedDisplays()},addRootedDisplay:function(t){this._rootedDisplays.push(t),this._accessibleDisplaysInfo.onAddedRootedDisplay(t)},removeRootedDisplay:function(t){const e=_.indexOf(this._rootedDisplays,t);this._rootedDisplays.splice(e,1),this._accessibleDisplaysInfo.onRemovedRootedDisplay(t)},localToParentPoint:function(t){return this._transform.transformPosition2(t)},localToParentBounds:function(t){return this._transform.transformBounds2(t)},parentToLocalPoint:function(t){return this._transform.inversePosition2(t)},parentToLocalBounds:function(t){return this._transform.inverseBounds2(t)},transformBoundsFromLocalToParent:function(t){return t.transform(this._transform.getMatrix())},transformBoundsFromParentToLocal:function(t){return t.transform(this._transform.getInverse())},getLocalToGlobalMatrix:function(){let t=this;const e=[];for(;t;)e.push(t._transform.getMatrix()),t=t._parents[0];const i=Ye.identity();for(let n=e.length-1;n>=0;n--)i.multiplyMatrix(e[n]);return i},getUniqueTransform:function(){return new Ue(this.getLocalToGlobalMatrix())},getGlobalToLocalMatrix:function(){return this.getLocalToGlobalMatrix().invert()},localToGlobalPoint:function(t){let e=this;const i=t.copy();for(;e;)e._transform.getMatrix().multiplyVector2(i),e=e._parents[0];return i},globalToLocalPoint:function(t){let e=this;const i=[];for(;e;)i.push(e._transform),e=e._parents[0];const n=t.copy();for(let s=i.length-1;s>=0;s--)i[s].getInverse().multiplyVector2(n);return n},localToGlobalBounds:function(t){return t.transformed(this.getLocalToGlobalMatrix())},globalToLocalBounds:function(t){return t.transformed(this.getGlobalToLocalMatrix())},parentToGlobalPoint:function(t){return this.parents.length?this.parents[0].localToGlobalPoint(t):t},parentToGlobalBounds:function(t){return this.parents.length?this.parents[0].localToGlobalBounds(t):t},globalToParentPoint:function(t){return this.parents.length?this.parents[0].globalToLocalPoint(t):t},globalToParentBounds:function(t){return this.parents.length?this.parents[0].globalToLocalBounds(t):t},getGlobalBounds:function(){return this.parentToGlobalBounds(this.getBounds())},get globalBounds(){return this.getGlobalBounds()},boundsOf:function(t){return this.globalToLocalBounds(t.getGlobalBounds())},boundsTo:function(t){return t.globalToLocalBounds(this.getGlobalBounds())},attachDrawable:function(t){return this._drawables.push(t),this},detachDrawable:function(t){const e=_.indexOf(this._drawables,t);return this._drawables.splice(e,1),this},mutate:function(t){if(!t)return this;const e=this;return _.each(this._mutatorKeys,(function(i){if(void 0!==t[i]){const n=Object.getOwnPropertyDescriptor(zo.prototype,i);n&&"function"==typeof n.value?e[i](t[i]):e[i]=t[i]}})),this.initializePhetioObject({phetioType:Vo,phetioState:!1},t),this},initializePhetioObject:function(t,e){const i=this.isPhetioInstrumented();if(vt.prototype.initializePhetioObject.call(this,t,e),!i&&this.isPhetioInstrumented())if(this.visibleProperty.forwardingProperty)this.linkVisibleProperty(this.visibleProperty.forwardingProperty);else{const t=new Ee(this.visible,Object(s.a)({phetioReadOnly:this.phetioReadOnly,tandem:this.tandem.createTandem("visibleProperty"),phetioDocumentation:"Controls whether the Node will be visible (and interactive), see the NodeIO documentation for more details."},this.phetioComponentOptions,this.phetioComponentOptions.visibleProperty,e.visiblePropertyOptions));this.visibleProperty=t,this.phetioVisibleProperty=t}},getDebugHTMLExtras:function(){return""},inspect:function(){localStorage.scenerySnapshot=JSON.stringify({type:"Subtree",rootNodeId:this.id,nodes:we.serializeConnectedNodes(this)})},toString:function(t,e){return this.constructor.name+"#"+this.id},auditInstanceSubtreeForDisplay:function(t){0},onBoundsListenersAddedOrRemoved:function(t){this.changeBoundsEventCount(t),this._boundsEventSelfCount+=t},dispose:function(){this.disposeAccessibility(),this.removeAllChildren(),this.detach(),this.phetioVisibleProperty&&(this.phetioVisibleProperty.dispose(),this.phetioVisibleProperty=null),vt.prototype.dispose.call(this)},disposeSubtree:function(){if(!this.isDisposed){const t=this.children;this.dispose();for(let e=0;e<t.length;e++)t[e].disposeSubtree()}}},{DEFAULT_OPTIONS:Go,defaultTrailPredicate:function(t){return 0===t._parents.length},defaultLeafTrailPredicate:function(t){return 0===t._children.length}}),Ns.compose(zo);var Wo=zo;let Uo=1;function Xo(t){t=Object(s.a)({matchHorizontal:!0,matchVertical:!0},t),this._alignBoxes=[],this._matchHorizontal=t.matchHorizontal,this._matchVertical=t.matchVertical,this._resizeLock=!1,this._maxWidthProperty=new jt(0),this._maxHeightProperty=new jt(0),this.id=Uo++}we.register("AlignGroup",Xo),Object(z.a)(Object,Xo,{getMaxWidth:function(){return this._maxWidthProperty.value},get maxWidth(){return this.getMaxWidth()},getMaxWidthProperty:function(){return this._maxWidthProperty},get maxWidthProperty(){return this.getMaxWidthProperty()},getMaxHeight:function(){return this._maxHeightProperty.value},get maxHeight(){return this.getMaxHeight()},getMaxHeightProperty:function(){return this._maxHeightProperty},get maxHeightProperty(){return this.getMaxHeightProperty()},createBox:function(t,e){return new Zo(t,Object(s.a)({group:this},e))},setMatchHorizontal:function(t){return this._matchHorizontal!==t&&(this._matchHorizontal=t,this.updateLayout()),this},set matchHorizontal(t){this.setMatchHorizontal(t)},getMatchHorizontal:function(){return this._matchHorizontal},get matchHorizontal(){return this.getMatchHorizontal()},setMatchVertical:function(t){return this._matchVertical!==t&&(this._matchVertical=t,this.updateLayout()),this},set matchVertical(t){this.setMatchVertical(t)},getMatchVertical:function(){return this._matchVertical},get matchVertical(){return this.getMatchVertical()},dispose:function(){for(let t=this._alignBoxes.length-1;t>=0;t--)this._alignBoxes[t].dispose()},updateLayout:function(){if(this._resizeLock)return;this._resizeLock=!0;let t=0,e=0;for(var i=0;i<this._alignBoxes.length;i++){const n=this._alignBoxes[i].getContentBounds();!n.isEmpty()&&n.isFinite()&&(t=Math.max(t,n.width),e=Math.max(e,n.height))}if(this._maxWidthProperty.value=t,this._maxHeightProperty.value=e,t>0&&e>0)for(i=0;i<this._alignBoxes.length;i++)this.setBoxBounds(this._alignBoxes[i],t,e);this._resizeLock=!1},setBoxBounds:function(t,e,i){let n;if(this._matchVertical&&this._matchHorizontal)n=new ne(0,0,e,i);else{const s=t.getContentBounds();n=this._matchVertical?new ne(0,0,s.width,i):this._matchHorizontal?new ne(0,0,e,s.height):s}t.alignBounds=n},onAlignBoxResized:function(t){this.updateLayout()},addAlignBox:function(t){this._alignBoxes.push(t),this.updateLayout()},removeAlignBox:function(t){Object(wt.a)(this._alignBoxes,t),this.updateLayout()}});var Ko=Xo;function Qo(t,e){this._content=t,this._alignBounds=null,this._xAlign="center",this._yAlign="center",this._leftMargin=0,this._rightMargin=0,this._topMargin=0,this._bottomMargin=0,this._group=null,this._contentBoundsListener=this.invalidateAlignment.bind(this),this._layoutLock=!1,this._content.boundsProperty.lazyLink(this._contentBoundsListener),Wo.call(this,Object(s.a)({},e,{children:[this._content]}))}we.register("AlignBox",Qo),Object(z.a)(Wo,Qo,{_mutatorKeys:["alignBounds","xAlign","yAlign","margin","xMargin","yMargin","leftMargin","rightMargin","topMargin","bottomMargin","group"].concat(Wo.prototype._mutatorKeys),invalidateAlignment:function(){this._group&&this._group.onAlignBoxResized(this),this.updateLayout()},setAlignBounds:function(t){return this._alignBounds===t||t&&this._alignBounds&&t.equals(this._alignBounds)||(this._alignBounds=t,this.updateLayout()),this},set alignBounds(t){this.setAlignBounds(t)},getAlignBounds:function(){return this._alignBounds},get alignBounds(){return this.getAlignBounds()},setGroup:function(t){return this._group!==t&&(this._group&&this._group.removeAlignBox(this),this._group=t,this._group&&this._group.addAlignBox(this)),this},set group(t){this.setGroup(t)},getGroup:function(){return this._group},get group(){return this.getGroup()},setXAlign:function(t){return this._xAlign!==t&&(this._xAlign=t,this.invalidateAlignment()),this},set xAlign(t){this.setXAlign(t)},getXAlign:function(){return this._xAlign},get xAlign(){return this.getXAlign()},setYAlign:function(t){return this._yAlign!==t&&(this._yAlign=t,this.invalidateAlignment()),this},set yAlign(t){this.setYAlign(t)},getYAlign:function(){return this._yAlign},get yAlign(){return this.getYAlign()},setMargin:function(t){return this._leftMargin===t&&this._rightMargin===t&&this._topMargin===t&&this._bottomMargin===t||(this._leftMargin=this._rightMargin=this._topMargin=this._bottomMargin=t,this.invalidateAlignment()),this},set margin(t){this.setMargin(t)},getMargin:function(){return this._leftMargin},get margin(){return this.getMargin()},setXMargin:function(t){return this._leftMargin===t&&this._rightMargin===t||(this._leftMargin=this._rightMargin=t,this.invalidateAlignment()),this},set xMargin(t){this.setXMargin(t)},getXMargin:function(){return this._leftMargin},get xMargin(){return this.getXMargin()},setYMargin:function(t){return this._topMargin===t&&this._bottomMargin===t||(this._topMargin=this._bottomMargin=t,this.invalidateAlignment()),this},set yMargin(t){this.setYMargin(t)},getYMargin:function(){return this._topMargin},get yMargin(){return this.getYMargin()},setLeftMargin:function(t){return this._leftMargin!==t&&(this._leftMargin=t,this.invalidateAlignment()),this},set leftMargin(t){this.setLeftMargin(t)},getLeftMargin:function(){return this._leftMargin},get leftMargin(){return this.getLeftMargin()},setRightMargin:function(t){return this._rightMargin!==t&&(this._rightMargin=t,this.invalidateAlignment()),this},set rightMargin(t){this.setRightMargin(t)},getRightMargin:function(){return this._rightMargin},get rightMargin(){return this.getRightMargin()},setTopMargin:function(t){return this._topMargin!==t&&(this._topMargin=t,this.invalidateAlignment()),this},set topMargin(t){this.setTopMargin(t)},getTopMargin:function(){return this._topMargin},get topMargin(){return this.getTopMargin()},setBottomMargin:function(t){return this._bottomMargin!==t&&(this._bottomMargin=t,this.invalidateAlignment()),this},set bottomMargin(t){this.setBottomMargin(t)},getBottomMargin:function(){return this._bottomMargin},get bottomMargin(){return this.getBottomMargin()},getContentBounds:function(){const t=this._content.bounds;return new ne(t.left-this._leftMargin,t.top-this._topMargin,t.right+this._rightMargin,t.bottom+this._bottomMargin)},updateProperty:function(t,e){const i=this._content[t],n=this.localBounds[t]+e;Math.abs(i-n)>1e-5&&(this._content[t]=n)},updateLayout:function(){if(!this._layoutLock){if(this._layoutLock=!0,null!==this._alignBounds)this.localBounds=this._alignBounds;else{const t=this._leftMargin+this._content.width+this._rightMargin,e=this._topMargin+this._content.height+this._bottomMargin;this.localBounds=new ne(0,0,t,e)}this._content.localBounds.isEmpty()||("center"===this._xAlign?this.updateProperty("centerX",(this.leftMargin-this.rightMargin)/2):"left"===this._xAlign?this.updateProperty("left",this._leftMargin):"right"===this._xAlign&&this.updateProperty("right",-this._rightMargin),"center"===this._yAlign?this.updateProperty("centerY",(this.topMargin-this.bottomMargin)/2):"top"===this._yAlign?this.updateProperty("top",this._topMargin):"bottom"===this._yAlign&&this.updateProperty("bottom",-this._bottomMargin)),this._layoutLock=!1}},dispose:function(){this._content.boundsProperty.unlink(this._contentBoundsListener),this.group=null,Wo.prototype.dispose.call(this)}});var Zo=Qo;const Jo={vertical:"top",horizontal:"left"},$o={vertical:"height",horizontal:"width"},ta={vertical:{left:"left",center:"centerX",right:"right",origin:"x"},horizontal:{top:"top",center:"centerY",bottom:"bottom",origin:"y"}};function ea(t){t=Object(s.a)({excludeInvisibleChildrenFromBounds:!0},t),this._orientation="vertical",this._spacing=0,this._align="center",this._resize=!0,Wo.call(this),this._updateLayoutListener=this.updateLayoutAutomatically.bind(this),this._updateLayoutLocked=!1,this.childInsertedEmitter.addListener(this.onLayoutBoxChildInserted.bind(this)),this.childRemovedEmitter.addListener(this.onLayoutBoxChildRemoved.bind(this)),this.childrenChangedEmitter.addListener(this.onLayoutBoxChildrenChanged.bind(this)),this._layoutMutating=!0,this.mutate(t),this._layoutMutating=!1}we.register("LayoutBox",ea),Object(z.a)(Wo,ea,{_mutatorKeys:["orientation","spacing","align","resize"].concat(Wo.prototype._mutatorKeys),getAlignmentBounds:function(){let t=Number.NEGATIVE_INFINITY,e=Number.NEGATIVE_INFINITY;for(let i=0;i<this._children.length;i++){const n=this._children[i];this.isChildIncludedInLayout(n)&&(t=Math.max(t,n.width),e=Math.max(e,n.height))}return new ne(0,0,t,e)},layout:function(){const t=this._children,e=Jo[this._orientation],i=$o[this._orientation],n=ta[this._orientation][this._align],s=this.getAlignmentBounds();let r=0;for(let o=0;o<t.length;o++){const a=t[o];this.isChildIncludedInLayout(a)&&(a[e]=r,a[n]="origin"===this._align?0:s[n],r+=a[i]+this._spacing)}},updateLayout:function(){this._updateLayoutLocked||(this._updateLayoutLocked=!0,this.layout(),this._updateLayoutLocked=!1)},updateLayoutAutomatically:function(){(this._layoutMutating||this._resize)&&this.updateLayout()},onLayoutBoxChildInserted:function(t){this._resize&&(t.boundsProperty.lazyLink(this._updateLayoutListener),t.visibleProperty.lazyLink(this._updateLayoutListener))},onLayoutBoxChildRemoved:function(t){this._resize&&(t.boundsProperty.unlink(this._updateLayoutListener),t.visibleProperty.unlink(this._updateLayoutListener))},onLayoutBoxChildrenChanged:function(){this._resize&&this.updateLayoutAutomatically()},setChildren:function(t){if(this._updateLayoutLocked)return Wo.prototype.setChildren.call(this,t);const e=this.getChildren();return this._updateLayoutLocked=!0,Wo.prototype.setChildren.call(this,t),this._updateLayoutLocked=!1,_.isEqual(e,t)||this.updateLayoutAutomatically(),this},setExcludeInvisibleChildrenFromBounds:function(t){Wo.prototype.setExcludeInvisibleChildrenFromBounds.call(this,t),_.some(this._children,t=>!t.visible)&&this.updateLayoutAutomatically()},setOrientation:function(t){return this._orientation!==t&&(this._orientation=t,this.updateLayout()),this},set orientation(t){this.setOrientation(t)},getOrientation:function(){return this._orientation},get orientation(){return this.getOrientation()},setSpacing:function(t){return this._spacing!==t&&(this._spacing=t,this.updateLayout()),this},set spacing(t){this.setSpacing(t)},getSpacing:function(){return this._spacing},get spacing(){return this.getSpacing()},setAlign:function(t){return this._align!==t&&(this._align=t,this.updateLayout()),this},set align(t){this.setAlign(t)},getAlign:function(){return this._align},get align(){return this.getAlign()},setResize:function(t){if(this._resize!==t){this._resize=t;for(let e=0;e<this._children.length;e++){const i=this._children[e];t?(i.boundsProperty.lazyLink(this._updateLayoutListener),i.visibleProperty.lazyLink(this._updateLayoutListener)):(i.boundsProperty.unlink(this._updateLayoutListener),i.visibleProperty.unlink(this._updateLayoutListener))}this.updateLayoutAutomatically()}return this},set resize(t){this.setResize(t)},isResize:function(){return this._resize},get resize(){return this.isResize()}});var ia=ea;function na(t){(t=t||{}).orientation="horizontal",ia.call(this,t)}we.register("HBox",na),Object(z.a)(ia,na);var sa=na;function ra(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}a.a.register("escapeHTML",ra);var oa=ra;function aa(t){return _.each(Array.prototype.slice.call(arguments,1),(function(e){if(e)for(const i in e){const n=Object.getOwnPropertyDescriptor(e,i);!n||"function"!=typeof n.get&&void 0===e[i]||Object.defineProperty(t,i,n)}})),t}a.a.register("extendDefined",aa);var la=aa;function ha(t,e){this.initializeSelfDrawable(t,e)}we.register("SelfDrawable",ha),Object(z.a)(Js,ha,{initializeSelfDrawable:function(t,e){return this.drawableVisibilityListener=this.drawableVisibilityListener||this.updateSelfVisibility.bind(this),this.initializeDrawable(t),this.instance=e,this.node=e.trail.lastNode(),this.node.attachDrawable(this),this.instance.selfVisibleEmitter.addListener(this.drawableVisibilityListener),this.updateSelfVisibility(),this},dispose:function(){this.instance.selfVisibleEmitter.removeListener(this.drawableVisibilityListener),this.node.detachDrawable(this),this.instance=null,this.node=null,Js.prototype.dispose.call(this)},updateSelfVisibility:function(){this.visible=this.instance.selfVisible},toDetailedString:function(){return this.toString()+" ("+this.instance.trail.toPathString()+")"}});var ua=ha;function ca(t,e){throw this.initializeCanvasSelfDrawable(t,e),new Error("Should use initialization and pooling")}we.register("CanvasSelfDrawable",ca),Object(z.a)(ua,ca,{initializeCanvasSelfDrawable:function(t,e){return this.initializeSelfDrawable(t,e),this.transformListener=this.transformListener||this.markTransformDirty.bind(this),e.relativeTransform.addListener(this.transformListener),e.relativeTransform.addPrecompute(),this},markTransformDirty:function(){this.markDirty()},markPaintDirty:function(){this.markDirty()},updateSelfVisibility:function(){ua.prototype.updateSelfVisibility.call(this),this.markDirty()},dispose:function(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),ua.prototype.dispose.call(this)}});var da=ca;const pa=oe.a.clamp,fa=oe.a.linear;function ma(t,e,i,n){this.changeEmitter=new H,this.set(t,e,i,n)}we.register("Color",ma);const ga="(-?\\d{1,3}%?)";function ya(t){let e=1;return"%"===t.charAt(t.length-1)&&(e=2.55,t=t.slice(0,t.length-1)),oe.a.roundSymmetric(parseInt(t,10)*e)}ma.formatParsers=[{regexp:/^transparent$/,apply:function(t,e){t.setRGBA(0,0,0,0)}},{regexp:/^#(\w{1})(\w{1})(\w{1})$/,apply:function(t,e){t.setRGBA(parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),1)}},{regexp:/^#(\w{2})(\w{2})(\w{2})$/,apply:function(t,e){t.setRGBA(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),1)}},{regexp:new RegExp("^rgb\\("+ga+","+ga+","+ga+"\\)$"),apply:function(t,e){t.setRGBA(ya(e[1]),ya(e[2]),ya(e[3]),1)}},{regexp:new RegExp("^rgba\\("+ga+","+ga+","+ga+",(\\d+|\\d*\\.\\d+)\\)$"),apply:function(t,e){t.setRGBA(ya(e[1]),ya(e[2]),ya(e[3]),parseFloat(e[4]))}},{regexp:new RegExp("^hsl\\((\\d{1,3}),(\\d{1,3})%,(\\d{1,3})%\\)$"),apply:function(t,e){t.setHSLA(parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),1)}},{regexp:new RegExp("^hsla\\((\\d{1,3}),(\\d{1,3})%,(\\d{1,3})%,(\\d+|\\d*\\.\\d+)\\)$"),apply:function(t,e){t.setHSLA(parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),parseFloat(e[4]))}}],ma.hueToRGB=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t},ma.toColor=function(t){return t instanceof ma?t:new ma(t)},Object(z.a)(Object,ma,{copy:function(){return new ma(this.r,this.g,this.b,this.a)},set:function(t,e,i,n){if("string"==typeof t)this.setCSS(t);else if(t instanceof ma)this.setRGBA(t.r,t.g,t.b,t.a);else if(void 0===i){const i=t>>16&255,n=t>>8&255,s=t>>0&255,r=void 0===e?1:e;this.setRGBA(i,n,s,r)}else this.setRGBA(t,e,i,void 0===n?1:n);return this},getRed:function(){return this.r},setRed:function(t){return this.setRGBA(t,this.g,this.b,this.a)},get red(){return this.getRed()},set red(t){return this.setRed(t)},getGreen:function(){return this.g},setGreen:function(t){return this.setRGBA(this.r,t,this.b,this.a)},get green(){return this.getGreen()},set green(t){return this.setGreen(t)},getBlue:function(){return this.b},setBlue:function(t){return this.setRGBA(this.r,this.g,t,this.a)},get blue(){return this.getBlue()},set blue(t){return this.setBlue(t)},getAlpha:function(){return this.a},setAlpha:function(t){return this.setRGBA(this.r,this.g,this.b,t)},get alpha(){return this.getAlpha()},set alpha(t){return this.setAlpha(t)},setRGBA:function(t,e,i,n){return this.r=oe.a.roundSymmetric(pa(t,0,255)),this.g=oe.a.roundSymmetric(pa(e,0,255)),this.b=oe.a.roundSymmetric(pa(i,0,255)),this.a=pa(n,0,1),this.updateColor(),this},blend:function(t,e){const i=Math.pow(this.r,2.4),n=Math.pow(t.r,2.4),s=Math.pow(this.g,2.4),r=Math.pow(t.g,2.4),o=Math.pow(this.b,2.4),a=Math.pow(t.b,2.4);return new ma(Math.pow(i+(n-i)*e,1/2.4),Math.pow(s+(r-s)*e,1/2.4),Math.pow(o+(a-o)*e,1/2.4),this.a+(t.a-this.a)*e)},computeCSS:function(){if(1===this.a)return"rgb("+this.r+","+this.g+","+this.b+")";{let t=this.a.toFixed(20);for(;t.length>=2&&"0"===t[t.length-1]&&"."!==t[t.length-2];)t=t.slice(0,t.length-1);const e=0===this.a||1===this.a?this.a:t;return"rgba("+this.r+","+this.g+","+this.b+","+e+")"}},toCSS:function(){return this._css},setCSS:function(t){let e=t.replace(/ /g,"").toLowerCase(),i=!1;const n=ma.colorKeywords[e];n&&(e="#"+n);for(let s=0;s<ma.formatParsers.length;s++){const t=ma.formatParsers[s],n=t.regexp.exec(e);if(n){t.apply(this,n),i=!0;break}}if(!i)throw new Error("Color unable to parse color string: "+t);this.updateColor()},toNumber:function(){return(this.r<<16)+(this.g<<8)+this.b},updateColor:function(){const t=this._css;this._css=this.computeCSS(),t!==this._css&&this.changeEmitter.emit()},setImmutable:function(){return this},getCanvasStyle:function(){return this.toCSS()},setHSLA:function(t,e,i,n){let s;t=t%360/360,e=pa(e/100,0,1),s=(i=pa(i/100,0,1))<.5?i*(e+1):i+e-i*e;const r=2*i-s;return this.r=oe.a.roundSymmetric(255*ma.hueToRGB(r,s,t+1/3)),this.g=oe.a.roundSymmetric(255*ma.hueToRGB(r,s,t)),this.b=oe.a.roundSymmetric(255*ma.hueToRGB(r,s,t-1/3)),this.a=pa(n,0,1),this.updateColor(),this},equals:function(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a},withAlpha:function(t){return new ma(this.r,this.g,this.b,t)},checkFactor:function(t){if(t<0||t>1)throw new Error("factor must be between 0 and 1: "+t);return void 0===t?.7:t},brighterColor:function(t){return t=this.checkFactor(t),new ma(Math.min(255,Math.floor(this.r/t)),Math.min(255,Math.floor(this.g/t)),Math.min(255,Math.floor(this.b/t)),this.a)},colorUtilsBrighter:function(t){return t=this.checkFactor(t),new ma(Math.min(255,this.getRed()+Math.floor(t*(255-this.getRed()))),Math.min(255,this.getGreen()+Math.floor(t*(255-this.getGreen()))),Math.min(255,this.getBlue()+Math.floor(t*(255-this.getBlue()))),this.getAlpha())},darkerColor:function(t){return t=this.checkFactor(t),new ma(Math.max(0,Math.floor(t*this.r)),Math.max(0,Math.floor(t*this.g)),Math.max(0,Math.floor(t*this.b)),this.a)},colorUtilsDarker:function(t){return t=this.checkFactor(t),new ma(Math.max(0,this.getRed()-Math.floor(t*this.getRed())),Math.max(0,this.getGreen()-Math.floor(t*this.getGreen())),Math.max(0,this.getBlue()-Math.floor(t*this.getBlue())),this.getAlpha())},colorUtilsBrightness:function(t){return 0===t?this:t>0?this.colorUtilsBrighter(t):this.colorUtilsDarker(-t)},toString:function(){return this.constructor.name+"[r:"+this.r+" g:"+this.g+" b:"+this.b+" a:"+this.a+"]"},toStateObject:function(){return{r:this.r,g:this.g,b:this.b,a:this.a}}}),ma.basicColorKeywords={aqua:"00ffff",black:"000000",blue:"0000ff",fuchsia:"ff00ff",gray:"808080",green:"008000",lime:"00ff00",maroon:"800000",navy:"000080",olive:"808000",purple:"800080",red:"ff0000",silver:"c0c0c0",teal:"008080",white:"ffffff",yellow:"ffff00"},ma.colorKeywords={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},ma.BLACK=ma.black=new ma(0,0,0).setImmutable(),ma.BLUE=ma.blue=new ma(0,0,255).setImmutable(),ma.CYAN=ma.cyan=new ma(0,255,255).setImmutable(),ma.DARK_GRAY=ma.darkGray=new ma(64,64,64).setImmutable(),ma.GRAY=ma.gray=new ma(128,128,128).setImmutable(),ma.GREEN=ma.green=new ma(0,255,0).setImmutable(),ma.LIGHT_GRAY=ma.lightGray=new ma(192,192,192).setImmutable(),ma.MAGENTA=ma.magenta=new ma(255,0,255).setImmutable(),ma.ORANGE=ma.orange=new ma(255,200,0).setImmutable(),ma.PINK=ma.pink=new ma(255,175,175).setImmutable(),ma.RED=ma.red=new ma(255,0,0).setImmutable(),ma.WHITE=ma.white=new ma(255,255,255).setImmutable(),ma.YELLOW=ma.yellow=new ma(255,255,0).setImmutable(),ma.TRANSPARENT=ma.transparent=new ma(0,0,0,0).setImmutable(),ma.interpolateRGBA=function(t,e,i){if(i<0||i>1)throw new Error("distance must be between 0 and 1: "+i);return new ma(Math.floor(fa(0,1,t.r,e.r,i)),Math.floor(fa(0,1,t.g,e.g,i)),Math.floor(fa(0,1,t.b,e.b,i)),fa(0,1,t.a,e.a,i))},ma.supersampleBlend=function(t){const e=t.map(t=>Math.pow(t.r/255,2.2)),i=t.map(t=>Math.pow(t.g/255,2.2)),n=t.map(t=>Math.pow(t.b/255,2.2)),s=t.map(t=>Math.pow(t.a,2.2)),r=_.sum(s);if(0===r)return new ma(0,0,0,0);const o=_.sum(_.range(0,t.length).map(t=>e[t]*s[t]))/r,a=_.sum(_.range(0,t.length).map(t=>i[t]*s[t]))/r,l=_.sum(_.range(0,t.length).map(t=>n[t]*s[t]))/r,h=r/t.length;return new ma(Math.floor(255*Math.pow(o,1/2.2)),Math.floor(255*Math.pow(a,1/2.2)),Math.floor(255*Math.pow(l,1/2.2)),Math.pow(h,1/2.2))},ma.fromStateObject=function(t){return new ma(t.r,t.g,t.b,t.a)},ma.hsla=function(t,e,i,n){return new ma(0,0,0,1).setHSLA(t,e,i,n)};new ma("blue");ma.checkPaintString=function(t){0},ma.checkPaint=function(t){"string"==typeof t?ma.checkPaintString(t):t instanceof Ot&&"string"==typeof t.value&&ma.checkPaintString(t.value)},ma.getLuminance=function(t){const e=ma.toColor(t),i=.2126*e.red+.7152*e.green+.0722*e.blue;return i},ma.toGrayscale=function(t){const e=ma.getLuminance(t);return new ma(e,e,e)},ma.isDarkColor=function(t,e=186){return ma.getLuminance(t)<e},ma.isLightColor=function(t,e){return!ma.isDarkColor(t,e)};var ba=ma;let va=1;function _a(){this.id="paint"+va++,this.transformMatrix=null}we.register("Paint",_a),Object(z.a)(Object,_a,{isPaint:!0,getCanvasStyle:function(){throw new Error("abstract method")},setTransformMatrix:function(t){return this.transformMatrix!==t&&(this.transformMatrix=t),this}});var Aa=_a;function wa(){Aa.call(this),this.stops=[],this.lastStopRatio=0,this.canvasGradient=null,this.colorStopsDirty=!1,this.lastColorStopValues=[]}we.register("Gradient",wa),Object(z.a)(Aa,wa,{isGradient:!0,addColorStop:function(t,e){if(this.lastStopRatio>t)throw new Error("Color stops not specified in the order of increasing ratios");return this.lastStopRatio=t,this.stops.push({ratio:t,color:e}),this.lastColorStopValues.push(""),this},createCanvasGradient:function(){throw new Error("abstract method")},getSVGStops:function(){return this.stops},invalidateCanvasGradient:function(){this.colorStopsDirty=!0},haveCanvasColorStopsChanged:function(){if(null===this.lastColorStopValues)return!0;for(let t=0;t<this.stops.length;t++)if(wa.colorToString(this.stops[t].color)!==this.lastColorStopValues[t])return!0;return!1},getCanvasStyle:function(){if(!this.canvasGradient||this.colorStopsDirty&&this.haveCanvasColorStopsChanged()){this.colorStopsDirty=!1,Ke(this.lastColorStopValues),this.canvasGradient=this.createCanvasGradient();for(let t=0;t<this.stops.length;t++){const e=this.stops[t],i=wa.colorToString(e.color);this.canvasGradient.addColorStop(e.ratio,i),this.lastColorStopValues.push(i)}}return this.canvasGradient}}),wa.colorToString=function(t){return t instanceof Ot&&(t=t.value),null===t&&(t="transparent"),t instanceof ba&&(t=t.toCSS()),t};var xa=wa;function Sa(t){this.primary=null,this.changeCallback=t,this.notifyChangeCallback=this.notifyChanged.bind(this),this.updateSecondaryListener=this.updateSecondary.bind(this),this.secondaryPropertyCountsMap={}}we.register("PaintObserver",Sa),Object(z.a)(Object,Sa,{setPrimary:function(t){t!==this.primary&&(this.detachPrimary(this.primary),this.primary=t,this.attachPrimary(t),this.notifyChangeCallback())},clean:function(){this.detachPrimary(this.primary),this.primary=null},updateSecondary:function(t,e,i){const n=this.secondaryPropertyCountsMap[i.id];for(let s=0;s<n;s++)this.attachSecondary(t);this.notifyChangeCallback()},attachPrimary:function(t){if(t instanceof Ot)this.secondaryLazyLinkProperty(t),this.attachSecondary(t.get());else if(t instanceof ba)t.setImmutable();else if(t instanceof xa)for(let e=0;e<t.stops.length;e++)this.attachPrimary(t.stops[e].color)},detachPrimary:function(t){if(t instanceof Ot)this.secondaryUnlinkProperty(t);else if(t instanceof xa)for(let e=0;e<t.stops.length;e++)this.detachPrimary(t.stops[e].color)},attachSecondary:function(t){t instanceof ba&&t.setImmutable()},notifyChanged:function(){this.primary instanceof xa&&this.primary.invalidateCanvasGradient(),this.changeCallback()},secondaryLazyLinkProperty:function(t){const e=t.id;this.secondaryPropertyCountsMap[e]?this.secondaryPropertyCountsMap[e]++:(this.secondaryPropertyCountsMap[e]=1,t.lazyLink(this.updateSecondaryListener))},secondaryUnlinkProperty:function(t){const e=t.id,i=--this.secondaryPropertyCountsMap[e];0===i&&(delete this.secondaryPropertyCountsMap[e],t.isDisposed||t.unlink(this.updateSecondaryListener))}});var Ta=Sa;const Da={mixInto:function(t){const e=t.prototype;e.initializePaintableStateless=function(t,e){return this.fillCallback=this.fillCallback||this.markDirtyFill.bind(this),this.strokeCallback=this.strokeCallback||this.markDirtyStroke.bind(this),this.fillObserver=this.fillObserver||new Ta(this.fillCallback),this.strokeObserver=this.strokeObserver||new Ta(this.strokeCallback),this.fillObserver.setPrimary(e.node._fill),this.strokeObserver.setPrimary(e.node._stroke),this},e.disposePaintableStateless=function(){this.fillObserver.clean(),this.strokeObserver.clean()},e.markDirtyFill=function(){this.markPaintDirty(),this.fillObserver.setPrimary(this.instance.node._fill)},e.markDirtyStroke=function(){this.markPaintDirty(),this.strokeObserver.setPrimary(this.instance.node._stroke)},e.markDirtyLineWidth=function(){this.markPaintDirty()},e.markDirtyLineOptions=function(){this.markPaintDirty()},e.markDirtyCachedPaints=function(){this.markPaintDirty()}}};we.register("PaintableStatelessDrawable",Da);var Ea=Da;function Ca(t,e){this.initializeCanvasSelfDrawable(t,e),this.initializePaintableStateless(t,e)}we.register("TextCanvasDrawable",Ca),Object(z.a)(da,Ca,{paintCanvas:function(t,e,i){const n=t.context;(e.hasFill()||e.hasPaintableStroke())&&(t.setFont(e._font.getFont()),t.setDirection("ltr")),e.hasFill()&&(e.beforeCanvasFill(t),n.fillText(e.renderedText,0,0),e.afterCanvasFill(t)),e.hasPaintableStroke()&&(e.beforeCanvasStroke(t),n.strokeText(e.renderedText,0,0),e.afterCanvasStroke(t))},markDirtyText:function(){this.markPaintDirty()},markDirtyFont:function(){this.markPaintDirty()},markDirtyBounds:function(){this.markPaintDirty()},dispose:function(){da.prototype.dispose.call(this),this.disposePaintableStateless()}}),Ea.mixInto(Ca),$t.a.mixInto(Ca);var Pa=Ca;function ka(t,e){throw this.initializeDOMSelfDrawable(t,e),new Error("Should use initialization and pooling")}we.register("DOMSelfDrawable",ka),Object(z.a)(ua,ka,{initializeDOMSelfDrawable:function(t,e){return this.transformListener=this.transformListener||this.markTransformDirty.bind(this),this.initializeSelfDrawable(t,e),this.forceAcceleration=!1,this.markTransformDirty(),this.visibilityDirty=!0,e.relativeTransform.addListener(this.transformListener),e.relativeTransform.addPrecompute(),this},markTransformDirty:function(){this.transformDirty=!0,this.markDirty()},getTransformMatrix:function(){return this.instance.relativeTransform.validate(),this.instance.relativeTransform.matrix},update:function(){return!!ua.prototype.update.call(this)&&(this.updateDOM(),this.visibilityDirty&&(this.visibilityDirty=!1,this.domElement.style.visibility=this.visible?"":"hidden"),this.cleanPaintableState&&this.cleanPaintableState(),!0)},updateDOM:function(){},updateSelfVisibility:function(){ua.prototype.updateSelfVisibility.call(this),this.visibilityDirty||(this.visibilityDirty=!0,this.markDirty())},dispose:function(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),ua.prototype.dispose.call(this)}});var Ia=ka;const La={mixInto:function(t){const e=t.prototype;e.initializePaintableState=function(t,e){return this.dirtyFill=!0,this.hadStroke=!1,this.dirtyStroke=!0,this.dirtyLineWidth=!0,this.dirtyLineOptions=!0,this.dirtyCachedPaints=!0,this.lastCachedPaints=[],this.fillCallback=this.fillCallback||this.markDirtyFill.bind(this),this.strokeCallback=this.strokeCallback||this.markDirtyStroke.bind(this),this.fillObserver=this.fillObserver||new Ta(this.fillCallback),this.strokeObserver=this.strokeObserver||new Ta(this.strokeCallback),this.fillObserver.setPrimary(e.node._fill),this.strokeObserver.setPrimary(e.node._stroke),this},e.cleanPaintableState=function(){this.dirtyFill=!1,this.dirtyStroke=!1,this.dirtyLineWidth=!1,this.dirtyLineOptions=!1,this.dirtyCachedPaints=!1,this.hadStroke=null!==this.node.getStroke()},e.disposePaintableState=function(){this.fillObserver.clean(),this.strokeObserver.clean()},e.markDirtyFill=function(){this.dirtyFill=!0,this.markPaintDirty(),this.fillObserver.setPrimary(this.instance.node._fill)},e.markDirtyStroke=function(){this.dirtyStroke=!0,this.markPaintDirty(),this.strokeObserver.setPrimary(this.instance.node._stroke)},e.markDirtyLineWidth=function(){this.dirtyLineWidth=!0,this.markPaintDirty()},e.markDirtyLineOptions=function(){this.dirtyLineOptions=!0,this.markPaintDirty()},e.markDirtyCachedPaints=function(){this.dirtyCachedPaints=!0,this.markPaintDirty()}}};we.register("PaintableStatefulDrawable",La);var Oa=La;const Ra={mixInto:function(t){const e=t.prototype;e.initializeState=function(t,e){return this.paintDirty=!0,this.dirtyText=!0,this.dirtyFont=!0,this.dirtyBounds=!0,this.initializePaintableState(t,e),this},e.disposeState=function(){this.disposePaintableState()},e.markPaintDirty=function(){this.paintDirty=!0,this.markDirty()},e.markDirtyText=function(){this.dirtyText=!0,this.markPaintDirty()},e.markDirtyFont=function(){this.dirtyFont=!0,this.markPaintDirty()},e.markDirtyBounds=function(){this.dirtyBounds=!0,this.markPaintDirty()},e.setToCleanState=function(){this.paintDirty=!1,this.dirtyText=!1,this.dirtyFont=!1,this.dirtyBounds=!1},Oa.mixInto(t)}};we.register("TextStatefulDrawable",Ra);var Na=Ra;const Ma=Ye.dirtyFromPool();function Ba(t,e){this.initializeDOMSelfDrawable(t,e),this.initializeState(t,e),this.domElement||(this.domElement=document.createElement("div"),this.domElement.style.display="block",this.domElement.style.position="absolute",this.domElement.style.pointerEvents="none",this.domElement.style.left="0",this.domElement.style.top="0",this.domElement.setAttribute("dir","ltr")),Ks.prepareForTransform(this.domElement,this.forceAcceleration)}we.register("TextDOMDrawable",Ba),Object(z.a)(Ia,Ba,{updateDOM:function(){const t=this.node,e=this.domElement;if(this.paintDirty&&(this.dirtyFont&&(e.style.font=t.getFont()),this.dirtyStroke&&(e.style.color=t.getCSSFill()),this.dirtyBounds&&(e.style.width=t.getSelfBounds().width+"px",e.style.height=t.getSelfBounds().height+"px"),this.dirtyText&&(e.textContent=t.renderedText)),this.transformDirty||this.dirtyText||this.dirtyFont||this.dirtyBounds){const i=t.getSelfBounds().minY;Ma.set(this.getTransformMatrix());const n=Ye.translation(0,i);Ma.multiplyMatrix(n),n.freeToPool(),Ks.applyPreparedTransform(Ma,e,this.forceAcceleration)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1},dispose:function(){this.disposeState(),Ia.prototype.dispose.call(this)}}),Na.mixInto(Ba),$t.a.mixInto(Ba);var Fa=Ba;function Va(t,e){return t?t.toCSS?t.toCSS():t.isPaint?"url(#"+t.id+"-"+(e?e.id:"noblock")+")":t:"none"}function qa(){this.initialize()}we.register("PaintSVGState",qa),Object(z.a)(Object,qa,{initialize:function(){this.svgBlock=null,this.fillStyle="none",this.strokeStyle="none",this.fillPaint=null,this.strokePaint=null,this.updateBaseStyle(),this.strokeDetailStyle=""},dispose:function(){this.releaseFillPaint(),this.releaseStrokePaint()},releaseFillPaint:function(){this.fillPaint&&(this.svgBlock.decrementPaint(this.fillPaint),this.fillPaint=null)},releaseStrokePaint:function(){this.strokePaint&&(this.svgBlock.decrementPaint(this.strokePaint),this.strokePaint=null)},updateFill:function(t,e){const i=Va(e,t);e!==this.fillPaint&&(this.releaseFillPaint(),e&&e.isPaint&&(this.fillPaint=e,t.incrementPaint(e))),i!==this.fillStyle&&(this.fillStyle=i,this.updateBaseStyle())},updateStroke:function(t,e){const i=Va(e,t);e!==this.strokePaint&&(this.releaseStrokePaint(),e&&e.isPaint&&(this.strokePaint=e,t.incrementPaint(e))),i!==this.strokeStyle&&(this.strokeStyle=i,this.updateBaseStyle())},updateBaseStyle:function(){this.baseStyle="fill: "+this.fillStyle+"; stroke: "+this.strokeStyle+";"},updateStrokeDetailStyle:function(t){let e="";const i=t.getLineWidth();1!==i&&(e+="stroke-width: "+i+";");const n=t.getLineCap();"butt"!==n&&(e+="stroke-linecap: "+n+";");const s=t.getLineJoin();"miter"!==s&&(e+="stroke-linejoin: "+s+";"),e+="stroke-miterlimit: "+t.getMiterLimit()+";",t.hasLineDash()&&(e+="stroke-dasharray: "+t.getLineDash().join(",")+";",e+="stroke-dashoffset: "+t.getLineDashOffset()+";"),this.strokeDetailStyle=e},updateSVGBlock:function(t){const e=this.svgBlock;e&&(this.fillPaint&&e.decrementPaint(this.fillPaint),this.strokePaint&&e.decrementPaint(this.strokePaint)),this.svgBlock=t,this.fillPaint&&t.incrementPaint(this.fillPaint),this.strokePaint&&t.incrementPaint(this.strokePaint)}});var Ha=qa;function Ya(t,e){throw this.initializeSVGSelfDrawable(t,e),new Error("Should use initialization and pooling")}we.register("SVGSelfDrawable",Ya),Object(z.a)(ua,Ya,{initializeSVGSelfDrawable:function(t,e,i,n){return this.initializeSelfDrawable(t,e),this.usesPaint=i,this.keepElements=n,this.svgElement=null,this.svgBlock=null,this.initializeState(t,e),this.usesPaint&&(this.paintState?this.paintState.initialize():this.paintState=new Ha),this},update:function(){return!!ua.prototype.update.call(this)&&(this.updateSVG(),!0)},updateSVG:function(){if(this.paintDirty&&this.updateSVGSelf(this.node,this.svgElement),this.usesPaint&&this.dirtyCachedPaints){const t=this.node._cachedPaints.slice();let e,i;for(e=0;e<t.length;e++){const n=t[e];let s=!0;for(i=0;i<this.lastCachedPaints.length;i++)if(n===this.lastCachedPaints[i]){s=!1;break}s&&this.svgBlock.incrementPaint(n)}for(e=0;e<this.lastCachedPaints.length;e++){const n=this.lastCachedPaints[e];let s=!0;for(i=0;i<t.length;i++)if(n===t[i]){s=!1;break}s&&this.svgBlock.decrementPaint(n)}this.lastCachedPaints=t}this.setToCleanState()},updateFillStrokeStyle:function(t){if(!this.usesPaint)return;this.dirtyFill&&this.paintState.updateFill(this.svgBlock,this.node.getFillValue()),this.dirtyStroke&&this.paintState.updateStroke(this.svgBlock,this.node.getStrokeValue());const e=this.dirtyLineWidth||this.dirtyLineOptions;e&&this.paintState.updateStrokeDetailStyle(this.node),(this.dirtyFill||this.dirtyStroke||e)&&t.setAttribute("style",this.paintState.baseStyle+this.paintState.strokeDetailStyle),this.cleanPaintableState()},updateSVGBlock:function(t){const e=this.svgBlock;if(this.usesPaint&&e)for(let i=0;i<this.lastCachedPaints.length;i++)e.decrementPaint(this.lastCachedPaints[i]);if(this.svgBlock=t,this.usesPaint)for(let i=0;i<this.lastCachedPaints.length;i++)t.incrementPaint(this.lastCachedPaints[i]);this.updateDefsSelf&&this.updateDefsSelf(t),this.usesPaint&&this.paintState.updateSVGBlock(t),this.usesPaint&&this.markDirtyFill(),this.usesPaint&&this.markDirtyStroke()},dispose:function(){this.disposeState(),this.keepElements||(this.svgElement=null),this.updateDefsSelf&&this.updateDefsSelf(null),this.usesPaint&&this.paintState.dispose(),this.defs=null,this.svgBlock=null,ua.prototype.dispose.call(this)}});var ja=Ya;const Ga=!Pn.ie&&!Pn.edge;function za(t,e){if(this.initializeSVGSelfDrawable(t,e,!0,!0),this.hasLength=!1,!this.svgElement){const t=document.createElementNS(mr,"text");this.svgElement=t,t.appendChild(document.createTextNode("")),t.setAttribute("dominant-baseline","alphabetic"),t.setAttribute("text-rendering","geometricPrecision"),t.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),t.setAttribute("direction","ltr")}}we.register("TextSVGDrawable",za),Object(z.a)(ja,za,{updateSVGSelf:function(){const t=this.svgElement;if(this.dirtyFont&&(t.setAttribute("font-family",this.node._font.getFamily()),t.setAttribute("font-size",this.node._font.getSize()),t.setAttribute("font-style",this.node._font.getStyle()),t.setAttribute("font-weight",this.node._font.getWeight()),t.setAttribute("font-stretch",this.node._font.getStretch())),this.dirtyText&&(t.lastChild.nodeValue=this.node.renderedText),this.dirtyBounds&&Ga){"accurate"!==this.node._boundsMethod&&isFinite(this.node.selfBounds.width)?(this.hasLength||(this.hasLength=!0,t.setAttribute("lengthAdjust","spacingAndGlyphs")),t.setAttribute("textLength",this.node.selfBounds.width)):this.hasLength&&(this.hasLength=!1,t.removeAttribute("lengthAdjust"),t.removeAttribute("textLength"))}this.updateFillStrokeStyle(t)}}),Na.mixInto(za),$t.a.mixInto(za);var Wa=za;class Ua extends A{static toStateObject(t){return y(t,this.validator),{style:t.getStyle(),variant:t.getVariant(),weight:t.getWeight(),stretch:t.getStretch(),size:t.getSize(),lineHeight:t.getLineHeight(),family:t.getFamily()}}static fromStateObject(t){return new we.Font(t)}}Ua.validator={valueType:we.Font},Ua.documentation="Font handling for text drawing. Options:<ul><li><strong>style:</strong> normal      &mdash; normal | italic | oblique </li><li><strong>variant:</strong> normal    &mdash; normal | small-caps </li><li><strong>weight:</strong> normal     &mdash; normal | bold | bolder | lighter | 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900 </li><li><strong>stretch:</strong> normal    &mdash; normal | ultra-condensed | extra-condensed | condensed | semi-condensed | semi-expanded | expanded | extra-expanded | ultra-expanded </li><li><strong>size:</strong> 10px         &mdash; absolute-size | relative-size | length | percentage -- unitless number interpreted as px. absolute suffixes: cm, mm, in, pt, pc, px. relative suffixes: em, ex, ch, rem, vw, vh, vmin, vmax. </li><li><strong>lineHeight:</strong> normal &mdash; normal | number | length | percentage -- NOTE: Canvas spec forces line-height to normal </li><li><strong>family:</strong> sans-serif &mdash; comma-separated list of families, including generic families (serif, sans-serif, cursive, fantasy, monospace). ideally escape with double-quotes</li></ul>",Ua.typeName="FontIO",A.validateSubtype(Ua),we.register("FontIO",Ua);var Xa=Ua;const Ka=["normal","italic","oblique"],Qa=["normal","small-caps"],Za=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"],Ja=["normal","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded"];function $a(t){t=Object(s.a)({style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"10px",lineHeight:"normal",family:"sans-serif",phetioType:Xa,tandem:T.a.OPTIONAL},t),this._style=t.style,this._variant=t.variant,this._weight=""+t.weight,this._stretch=t.stretch,this._size=$a.castSize(t.size),this._lineHeight=t.lineHeight,this._family=t.family,this._font=this.computeShorthand(),vt.call(this,t)}we.register("Font",$a),Object(z.a)(vt,$a,{getFont:function(){return this._font},get font(){return this.getFont()},getStyle:function(){return this._style},get style(){return this.getStyle()},getVariant:function(){return this._variant},get variant(){return this.getVariant()},getWeight:function(){return this._weight},get weight(){return this.getWeight()},getStretch:function(){return this._stretch},get stretch(){return this.getStretch()},getSize:function(){return this._size},get size(){return this.getSize()},getNumericSize:function(){const t=this._size.match(/^(\d+)px$/);if(t)return parseInt(t[1],10);const e=this._size.match(/^(\d+)pt$/);if(e)return.75*parseInt(e[1],10);const i=this._size.match(/^(\d+)em$/);return i?parseInt(i[1],10)/16:12},get numericSize(){return this.getNumericSize()},getLineHeight:function(){return this._lineHeight},get lineHeight(){return this.getLineHeight()},getFamily:function(){return this._family},get family(){return this.getFamily()},copy:function(t){return new $a(Object(s.a)({style:this._style,variant:this._variant,weight:this._weight,stretch:this._stretch,size:this._size,lineHeight:this._lineHeight,family:this._family},t))},computeShorthand:function(){let t="";return"normal"!==this._style&&(t+=this._style+" "),"normal"!==this._variant&&(t+=this._variant+" "),"normal"!==this._weight&&(t+=this._weight+" "),"normal"!==this._stretch&&(t+=this._stretch+" "),t+=this._size,"normal"!==this._lineHeight&&(t+="/"+this._lineHeight),t+=" "+this._family,t},toCSS:function(){return this.getFont()}},{castSize:function(t){return"number"==typeof t?t+"px":t},fromCSS:function(t){const e={},i=_.filter(t.split(/[\x09\x0A\x0C\x0D\x20]/),(function(t){return t.length>0}));for(let n=0;n<i.length;n++){const t=i[n];if("normal"===t);else if(_.includes(Ka,t))e.style=t;else if(_.includes(Qa,t))e.variant=t;else if(_.includes(Za,t))e.weight=t;else{if(!_.includes(Ja,t)){const s=t.split(/\//);e.size=s[0],s[1]&&(e.lineHeight=s[1]),e.family=i.slice(n+1).join(" ");break}e.stretch=t}}return new $a(e)}}),$a.DEFAULT=new $a;var tl=$a;let el,il;const nl={};let sl=!1;var rl={approximateSVGBounds:function(t,e){if(!el.parentNode){if(!document.body)throw new Error("No document.body and trying to get approximate SVG bounds of a Text node");document.body.appendChild(el)}rl.setSVGTextAttributes(il,t,e);const i=il.getBBox();return 0===i.width&&0===i.height&&e.length>0?(sl||(sl=!0,console.log("WARNING: Guessing text bounds, is the simulation hidden? See https://github.com/phetsims/chipper/issues/768")),rl.guessSVGBounds(t,e)):new ne(i.x,i.y,i.x+i.width,i.y+i.height)},guessSVGBounds:function(t,e){const i=t.getNumericSize(),n="bold"===t.weight;return new ne(0,-.9*i,(n?.435:.4)*i*e.length,.22*i)},accurateCanvasBounds:function(t){const e=rl.approximateSVGBounds(t._font,t.renderedText);if(!t.renderedText.length||0===e.width)return e;const i=Ks.canvasAccurateBounds((function(e){if(e.font=t._font.toCSS(),e.direction="ltr",e.fillText(t.renderedText,0,0),t.hasPaintableStroke()){const i=new sr(null,e);t.beforeCanvasStroke(i),e.strokeText(t.renderedText,0,0),t.afterCanvasStroke(i)}}),{precision:.5,resolution:128,initialScale:32/Math.max(Math.abs(e.minX),Math.abs(e.minY),Math.abs(e.maxX),Math.abs(e.maxY))});return i.isFinite()?i:e},getVerticalBounds:function(t){const e=t.toCSS();let i=nl[e];return i||(i=nl[e]=rl.approximateSVGBounds(t,"m")),i},approximateCanvasWidth:function(t,e){const i=we.scratchContext;return i.font=t.toCSS(),i.direction="ltr",i.measureText(e).width},approximateHybridBounds:function(t,e){const i=rl.getVerticalBounds(t),n=rl.approximateCanvasWidth(t,e);return new ne(0,i.minY,n,i.maxY)},approximateDOMBounds:function(t,e){const i=document.createElement("div");$(i).css({position:"absolute",left:0,top:0,padding:"0 !important",margin:"0 !important",display:"hidden"});const n=document.createElement("span");$(n).css("font",t.toCSS()),n.appendChild(e),n.setAttribute("direction","ltr");const s=document.createElement("div");$(s).css({"vertical-align":"baseline",display:"inline-block",width:0,height:"1024px",margin:"0 !important",padding:"0 !important"}),i.appendChild(n),i.appendChild(s),document.body.appendChild(i);const r=n.getBoundingClientRect(),o=i.getBoundingClientRect(),a=new ne(r.left,r.top-1024,r.right+1,r.bottom-1024).shifted(-o.left,-o.top);return document.body.removeChild(i),a},approximateImprovedDOMBounds:function(t,e){const i=document.createElement("div");i.style.display="inline-block",i.style.font=t.toCSS(),i.style.color="transparent",i.style.padding="0 !important",i.style.margin="0 !important",i.style.position="absolute",i.style.left="0",i.style.top="0",i.setAttribute("direction","ltr"),i.appendChild(e),document.body.appendChild(i);const n=new ne(i.offsetLeft,i.offsetTop,i.offsetLeft+i.offsetWidth+1,i.offsetTop+i.offsetHeight+1);document.body.removeChild(i);const s=rl.getVerticalBounds(t);return n.shiftedY(s.minY)},setSVGTextAttributes:function(t,e,i){t.setAttribute("direction","ltr"),t.setAttribute("font-family",e.getFamily()),t.setAttribute("font-size",e.getSize()),t.setAttribute("font-style",e.getStyle()),t.setAttribute("font-weight",e.getWeight()),t.setAttribute("font-stretch",e.getStretch()),t.lastChild.nodeValue=i},initializeTextBounds:function(){el=document.getElementById("sceneryTextSizeContainer"),el||(el=document.createElementNS(mr,"svg"),el.setAttribute("width","2"),el.setAttribute("height","2"),el.setAttribute("id","sceneryTextSizeContainer"),el.setAttribute("style","visibility: hidden; pointer-events: none; position: absolute; left: -65535px; right: -65535px;")),il=document.getElementById("sceneryTextSizeElement"),il||(il=document.createElementNS(mr,"text"),il.appendChild(document.createTextNode("")),il.setAttribute("dominant-baseline","alphabetic"),il.setAttribute("text-rendering","geometricPrecision"),il.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),il.setAttribute("id","sceneryTextSizeElement"),el.appendChild(il))}};we.register("TextBounds",rl);var ol=rl;const al=function(t,e){0};a.a.register("assertHasProperties",al);var ll=al,hl={isPaintDef:function(t){return null===t||"string"==typeof t||t instanceof ba||t instanceof Aa||t instanceof Ot&&(null===t.value||"string"==typeof t.value||t.value instanceof ba)},toColor:function(t){if("string"==typeof t)return new ba(t);if(t instanceof ba)return t.copy();if(t instanceof Ot)return hl.toColor(t.value);if(t instanceof xa){let e=ba.TRANSPARENT;const i=0;return t.stops.forEach((function(t){e=e.blend(hl.toColor(t.color),1/(i+1))})),e}return ba.TRANSPARENT}};we.register("PaintDef",hl);var ul=hl;const cl=Pn.safari5,dl=Pn.ie9,pl=["fill","fillPickable","stroke","strokePickable","lineWidth","lineCap","lineJoin","miterLimit","lineDash","lineDashOffset","cachedPaints"],fl={fill:null,fillPickable:!0,stroke:null,strokePickable:!1,lineWidth:Ri.DEFAULT_OPTIONS.lineWidth,lineCap:Ri.DEFAULT_OPTIONS.lineCap,lineJoin:Ri.DEFAULT_OPTIONS.lineJoin,lineDashOffset:Ri.DEFAULT_OPTIONS.lineDashOffset,miterLimit:Ri.DEFAULT_OPTIONS.miterLimit},ml={mixInto:function(t){const e=t.prototype;function i(){this.invalidateSupportedRenderers();const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyFill()}if(Object(de.a)(e,{drawableMarkFlags:e.drawableMarkFlags.concat(["fill","stroke","lineWidth","lineOptions","cachedPaints"]),_mutatorKeys:pl.concat(e._mutatorKeys),initializePaintable:function(){ll(this,["_drawables"]),this._fill=fl.fill,this._fillPickable=fl.fillPickable,this._stroke=fl.stroke,this._strokePickable=fl.strokePickable,this._cachedPaints=[],this._lineDrawingStyles=new Ri},setFill:function(t){return this._fill!==t&&(this._fill=t,this.invalidateFill()),this},set fill(t){this.setFill(t)},getFill:function(){return this._fill},get fill(){return this.getFill()},hasFill:function(){return null!==this._fill},getFillValue:function(){let t=this.getFill();return t instanceof Ot&&(t=t.get()),t},get fillValue(){return this.getFillValue()},setStroke:function(t){return this._stroke!==t&&(this._stroke=t,this.invalidateStroke()),this},set stroke(t){this.setStroke(t)},getStroke:function(){return this._stroke},get stroke(){return this.getStroke()},hasStroke:function(){return null!==this._stroke},hasPaintableStroke:function(){return this.hasStroke()&&this.getLineWidth()>0},getStrokeValue:function(){let t=this.getStroke();return t instanceof Ot&&(t=t.get()),t},get strokeValue(){return this.getStrokeValue()},setFillPickable:function(t){return this._fillPickable!==t&&(this._fillPickable=t,this.invalidateFill()),this},set fillPickable(t){this.setFillPickable(t)},isFillPickable:function(){return this._fillPickable},get fillPickable(){return this.isFillPickable()},setStrokePickable:function(t){return this._strokePickable!==t&&(this._strokePickable=t,this.invalidateStroke()),this},set strokePickable(t){this.setStrokePickable(t)},isStrokePickable:function(){return this._strokePickable},get strokePickable(){return this.isStrokePickable()},setLineWidth:function(t){if(this.getLineWidth()!==t){this._lineDrawingStyles.lineWidth=t,this.invalidateStroke();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyLineWidth()}return this},set lineWidth(t){this.setLineWidth(t)},getLineWidth:function(){return this._lineDrawingStyles.lineWidth},get lineWidth(){return this.getLineWidth()},setLineCap:function(t){if(this._lineDrawingStyles.lineCap!==t){this._lineDrawingStyles.lineCap=t,this.invalidateStroke();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyLineOptions()}return this},set lineCap(t){this.setLineCap(t)},getLineCap:function(){return this._lineDrawingStyles.lineCap},get lineCap(){return this.getLineCap()},setLineJoin:function(t){if(this._lineDrawingStyles.lineJoin!==t){this._lineDrawingStyles.lineJoin=t,this.invalidateStroke();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyLineOptions()}return this},set lineJoin(t){this.setLineJoin(t)},getLineJoin:function(){return this._lineDrawingStyles.lineJoin},get lineJoin(){return this.getLineJoin()},setMiterLimit:function(t){if(this._lineDrawingStyles.miterLimit!==t){this._lineDrawingStyles.miterLimit=t,this.invalidateStroke();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyLineOptions()}return this},set miterLimit(t){this.setMiterLimit(t)},getMiterLimit:function(){return this._lineDrawingStyles.miterLimit},get miterLimit(){return this.getMiterLimit()},setLineDash:function(t){if(this._lineDrawingStyles.lineDash!==t){this._lineDrawingStyles.lineDash=t||[],this.invalidateStroke();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyLineOptions()}return this},set lineDash(t){this.setLineDash(t)},getLineDash:function(){return this._lineDrawingStyles.lineDash},get lineDash(){return this.getLineDash()},hasLineDash:function(){return!!this._lineDrawingStyles.lineDash.length},setLineDashOffset:function(t){if(this._lineDrawingStyles.lineDashOffset!==t){this._lineDrawingStyles.lineDashOffset=t,this.invalidateStroke();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyLineOptions()}return this},set lineDashOffset(t){this.setLineDashOffset(t)},getLineDashOffset:function(){return this._lineDrawingStyles.lineDashOffset},get lineDashOffset(){return this.getLineDashOffset()},setLineStyles:function(t){return this._lineDrawingStyles=t,this.invalidateStroke(),this},set lineStyles(t){this.setLineStyles(t)},getLineStyles:function(){return this._lineDrawingStyles},get lineStyles(){return this.getLineStyles()},setCachedPaints:function(t){this._cachedPaints=t.filter((function(t){return t&&t.isPaint}));const e=this._drawables.length;for(let i=0;i<e;i++)this._drawables[i].markDirtyCachedPaints();return this},set cachedPaints(t){this.setCachedPaints(t)},getCachedPaints:function(){return this._cachedPaints},get cachedPaints(){return this.getCachedPaints()},addCachedPaint:function(t){if(t&&t.isPaint){this._cachedPaints.push(t);const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyCachedPaints()}},removeCachedPaint:function(t){if(t&&t.isPaint){Object(wt.a)(this._cachedPaints,t);const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyCachedPaints()}},beforeCanvasFill:function(t){const e=this.getFillValue();t.setFillStyle(e),e.transformMatrix&&(t.context.save(),e.transformMatrix.canvasAppendTransform(t.context))},afterCanvasFill:function(t){this.getFillValue().transformMatrix&&t.context.restore()},beforeCanvasStroke:function(t){const e=this.getStrokeValue();t.setStrokeStyle(this._stroke),t.setLineWidth(this.getLineWidth()),t.setLineCap(this.getLineCap()),t.setLineJoin(this.getLineJoin()),t.setMiterLimit(this.getMiterLimit()),t.setLineDash(this.getLineDash()),t.setLineDashOffset(this.getLineDashOffset()),e.transformMatrix&&(t.context.save(),e.transformMatrix.canvasAppendTransform(t.context))},afterCanvasStroke:function(t){this.getStrokeValue().transformMatrix&&t.context.restore()},getCSSFill:function(){const t=this.getFillValue();return t?t.toCSS?t.toCSS():t:"transparent"},getSimpleCSSStroke:function(){const t=this.getStrokeValue();return t?t.toCSS?t.toCSS():t:"transparent"},appendFillablePropString:function(t,e){return this._fill&&(e&&(e+=",\n"),"string"==typeof this.getFillValue()?e+=t+"fill: '"+this.getFillValue()+"'":e+=t+"fill: "+this.getFillValue().toString()),e},appendStrokablePropString:function(t,e){const i=this;function n(i,n,s){e&&(e+=",\n"),e+=s||"string"!=typeof n?t+i+": "+n:t+i+": '"+n+"'"}if(this._stroke){const t=new Ri;"string"==typeof this.getStrokeValue()?n("stroke",this.getStrokeValue()):n("stroke",this.getStrokeValue().toString(),!0),_.each(["lineWidth","lineCap","miterLimit","lineJoin","lineDashOffset"],(function(e){i[e]!==t[e]&&n(e,i[e])})),this.lineDash.length&&n("lineDash",JSON.stringify(this.lineDash),!0)}return e},getFillRendererBitmask:function(){let t=0;return cl&&this._fill&&this._fill.isGradient||(t|=An.bitmaskSVG),t|=An.bitmaskCanvas,this.hasFill()&&(this._fill.isPattern||this._fill.isGradient)||(t|=An.bitmaskDOM,t|=An.bitmaskWebGL),t},getStrokeRendererBitmask:function(){let t=0;return dl&&this.hasStroke()&&this.hasLineDash()||(t|=An.bitmaskCanvas),t|=An.bitmaskSVG,this.hasStroke()||(t|=An.bitmaskDOM,t|=An.bitmaskWebGL),t}}),e.invalidateFill){const t=e.invalidateFill;e.invalidateFill=function(){t.call(this),i.call(this)}}else e.invalidateFill=i;function n(){this.invalidateSupportedRenderers();const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyStroke()}if(e.invalidateStroke){const t=e.invalidateStroke;e.invalidateStroke=function(){t.call(this),n.call(this)}}else e.invalidateStroke=n}};we.register("Paintable",ml),ml.DEFAULT_OPTIONS=fl;var gl=ml;class yl extends Vo{constructor(t,e){super(t,e);const i=new Bo(t,t.textProperty,"text",Object(s.a)({phetioReadOnly:t.phetioReadOnly,phetioType:Bt(O),tandem:t.tandem.createTandem("textProperty"),phetioDocumentation:"Property for the displayed text"},t.phetioComponentOptions,t.phetioComponentOptions.textProperty));this.disposeTextIO=function(){i.dispose()}}dispose(){this.disposeTextIO(),Vo.prototype.dispose.call(this)}}yl.methods={setFontOptions:{returnType:V,parameterTypes:[Xa],implementation:function(t){this.phetioObject.setFont(t)},documentation:"Sets font options for this TextIO instance, e.g. {size: 16, weight: bold}. If increasing the font size does not make the text size larger, you may need to increase the maxWidth of the TextIO also.",invocableForReadOnlyElements:!1},getFontOptions:{returnType:Xa,parameterTypes:[],implementation:function(){return this.phetioObject.getFont()},documentation:"Gets font options for this TextIO instance as an object"},setMaxWidth:{returnType:V,parameterTypes:[I],implementation:function(t){this.phetioObject.setMaxWidth(t)},documentation:"Sets the maximum width of text box. If the text width exceeds maxWidth, it is scaled down to fit.",invocableForReadOnlyElements:!1},getMaxWidth:{returnType:I,parameterTypes:[],implementation:function(){return this.phetioObject.maxWidth},documentation:"Gets the maximum width of text box"}},yl.documentation="Text that is displayed in the simulation. TextIO has a nested PropertyIO.&lt;String&gt; for the current string value.",yl.validator={valueType:we.Text},yl.typeName="TextIO",A.validateSubtype(yl),we.register("TextIO",yl);var bl=yl;const vl=-1!==window.navigator.userAgent.indexOf("like Gecko) Version/5")&&-1!==window.navigator.userAgent.indexOf("Safari/");function _l(t,e){this.textProperty=new Pe(""),this._font=tl.DEFAULT,this._boundsMethod="hybrid",this._isHTML=void 0!==this._isHTML&&this._isHTML,this._cachedRenderedText=null,e=la({fill:"#000000",text:t,tandem:T.a.OPTIONAL,phetioType:bl},e),this.textTandem=e.tandem,Wo.call(this),this.initializePaintable(),this.mutate(e),this.invalidateSupportedRenderers()}we.register("Text",_l),Object(z.a)(Wo,_l,{_mutatorKeys:["boundsMethod","text","font","fontWeight","fontFamily","fontStretch","fontStyle","fontSize"].concat(Wo.prototype._mutatorKeys),drawableMarkFlags:Wo.prototype.drawableMarkFlags.concat(["text","font","bounds"]),setText:function(t){if((t=""+t)!==this.text){const e=this.text;this.textProperty.setPropertyValue(t),this._cachedRenderedText=null;const i=this._drawables.length;for(let t=0;t<i;t++)this._drawables[t].markDirtyText();this.invalidateText(),this.textProperty.notifyListeners(e)}return this},set text(t){this.setText(t)},getText:function(){return this.textProperty.value},get text(){return this.getText()},getRenderedText:function(){return null===this._cachedRenderedText&&(this._cachedRenderedText=this.text.replace(" ",""),Pn.edge&&(this._cachedRenderedText=_l.simplifyEmbeddingMarks(this._cachedRenderedText))),this._cachedRenderedText},get renderedText(){return this.getRenderedText()},setBoundsMethod:function(t){if(t!==this._boundsMethod){this._boundsMethod=t,this.invalidateSupportedRenderers();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyBounds();this.invalidateText(),this.rendererSummaryRefreshEmitter.emit()}return this},set boundsMethod(t){this.setBoundsMethod(t)},getBoundsMethod:function(){return this._boundsMethod},get boundsMethod(){return this.getBoundsMethod()},getTextRendererBitmask:function(){let t=0;return"fast"===this._boundsMethod||this._isHTML||(t|=An.bitmaskCanvas),this._isHTML||(t|=An.bitmaskSVG),t|=An.bitmaskDOM,t},invalidateSupportedRenderers:function(){this.setRendererBitmask(this.getFillRendererBitmask()&this.getStrokeRendererBitmask()&this.getTextRendererBitmask())},invalidateText:function(){this.invalidateSelf();const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyBounds();this.invalidateSupportedRenderers()},updateSelfBounds:function(){let t;t=this._isHTML||vl&&"accurate"!==this._boundsMethod?ol.approximateDOMBounds(this._font,this.getDOMTextNode()):"hybrid"===this._boundsMethod?ol.approximateHybridBounds(this._font,this.renderedText):"accurate"===this._boundsMethod?ol.accurateCanvasBounds(this):ol.approximateSVGBounds(this._font,this.renderedText),this.hasStroke()&&t.dilate(this.getLineWidth()/2);const e=!t.equals(this.selfBoundsProperty._value);return e&&this.selfBoundsProperty._value.set(t),e},invalidateStroke:function(){this.invalidateText()},invalidateFill:function(){this.invalidateText()},canvasPaintSelf:function(t,e){Pa.prototype.paintCanvas(t,this,e)},createDOMDrawable:function(t,e){return Fa.createFromPool(t,e)},createSVGDrawable:function(t,e){return Wa.createFromPool(t,e)},createCanvasDrawable:function(t,e){return Pa.createFromPool(t,e)},getDOMTextNode:function(){if(this._isHTML){const t=document.createElement("span");return t.innerHTML=this.text,t}return document.createTextNode(this.renderedText)},getSafeSelfBounds:function(){const t=this.getSelfBounds();return t.dilatedXY(1*t.width,1*t.height)},setFont:function(t){if(t!==("string"==typeof t?this._font.toCSS():this._font)){this._font="string"==typeof t?tl.fromCSS(t):t;const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyFont();this.invalidateText()}return this},set font(t){this.setFont(t)},getFont:function(){return this._font.getFont()},get font(){return this.getFont()},setFontWeight:function(t){return this.setFont(this._font.copy({weight:t}))},set fontWeight(t){this.setFontWeight(t)},getFontWeight:function(){return this._font.getWeight()},get fontWeight(){return this.getFontWeight()},setFontFamily:function(t){return this.setFont(this._font.copy({family:t}))},set fontFamily(t){this.setFontFamily(t)},getFontFamily:function(){return this._font.getFamily()},get fontFamily(){return this.getFontFamily()},setFontStretch:function(t){return this.setFont(this._font.copy({stretch:t}))},set fontStretch(t){this.setFontStretch(t)},getFontStretch:function(){return this._font.getStretch()},get fontStretch(){return this.getFontStretch()},setFontStyle:function(t){return this.setFont(this._font.copy({style:t}))},set fontStyle(t){this.setFontStyle(t)},getFontStyle:function(){return this._font.getStyle()},get fontStyle(){return this.getFontStyle()},setFontSize:function(t){return this.setFont(this._font.copy({size:t}))},set fontSize(t){this.setFontSize(t)},getFontSize:function(){return this._font.getSize()},get fontSize(){return this.getFontSize()},isPainted:function(){return!0},areSelfBoundsValid:function(){return"accurate"===this._boundsMethod},getDebugHTMLExtras:function(){return' "'+oa(this.renderedText)+'"'+(this._isHTML?" (html)":"")}}),gl.mixInto(_l);_l.embeddedDebugString=function(t){return t.replace(/\u202a/g,"[LTR]").replace(/\u202b/g,"[RTL]").replace(/\u202c/g,"[POP]")},_l.simplifyEmbeddingMarks=function(t){const e={dir:null,children:[],parent:null};let i=e;for(let n=0;n<t.length;n++){const e=t.charAt(n);if(""===e||""===e){const t={dir:e,children:[],parent:i};i.children.push(t),i=t}else""===e?i=i.parent:i.children.push(e)}return function t(e){if("string"==typeof e)return e;const i=e.children.map(t).join("");return e.dir?e.dir+i+"":i}(function t(e){if("string"!=typeof e){for(let i=0;i<e.children.length;i++)t(e.children[i]);return function(t){1===t.children.length&&t.children[0].dir&&(t.dir=t.children[0].dir,t.children=t.children[0].children)}(e),function(t){for(let e=t.children.length-1;e>=0;e--){const i=t.children[e];t.dir===i.dir&&Array.prototype.splice.apply(t.children,[e,1].concat(i.children))}}(e),function t(e){for(let i=e.children.length-1;i>=1;i--){const n=e.children[i-1],s=e.children[i];s.dir&&n.dir===s.dir&&(n.children=n.children.concat(s.children),e.children.splice(i,1),t(n))}}(e),e}}(e))},ol.initializeTextBounds();var Al=_l;function wl(t){(t=t||{}).orientation="vertical",ia.call(this,t)}we.register("VBox",wl),Object(z.a)(ia,wl);var xl=wl;class Sl extends Ot{constructor(t,e){super(ul.toColor(t),e=Object(s.a)({luminanceFactor:0,useDeepEquality:!0},e)),this._paint=null,this._luminanceFactor=e.luminanceFactor,this._changeListener=this.invalidatePaint.bind(this),this._paintObserver=new Ta(this._changeListener),this.setPaint(t)}setPaint(t){this._paint=t,this._paintObserver.setPrimary(t)}set paint(t){this.setPaint(t)}getPaint(){return this._paint}get paint(){return this.getPaint()}setLuminanceFactor(t){this.luminanceFactor!==t&&(this._luminanceFactor=t,this.invalidatePaint())}set luminanceFactor(t){this.setLuminanceFactor(t)}getLuminanceFactor(){return this._luminanceFactor}get luminanceFactor(){return this.getLuminanceFactor()}invalidatePaint(){this.value=ul.toColor(this._paint).colorUtilsBrightness(this._luminanceFactor)}dispose(){this.paint=null,super.dispose()}}we.register("PaintColorProperty",Sl);var Tl=Sl;function Dl(t,e){this.initializeCanvasSelfDrawable(t,e),this.initializePaintableStateless(t,e)}we.register("PathCanvasDrawable",Dl),Object(z.a)(da,Dl,{paintCanvas:function(t,e,i){const n=t.context;e.hasShape()&&(n.beginPath(),e._shape.writeToContext(n),e.hasFill()&&(e.beforeCanvasFill(t),n.fill(),e.afterCanvasFill(t)),e.hasPaintableStroke()&&(e.beforeCanvasStroke(t),n.stroke(),e.afterCanvasStroke(t)))},markDirtyShape:function(){this.markPaintDirty()},dispose:function(){da.prototype.dispose.call(this),this.disposePaintableStateless()}}),Ea.mixInto(Dl),$t.a.mixInto(Dl);var El=Dl;const Cl={mixInto:function(t){const e=t.prototype;e.initializeState=function(t,e){return this.paintDirty=!0,this.dirtyShape=!0,this.initializePaintableState(t,e),this},e.disposeState=function(){this.disposePaintableState()},e.markPaintDirty=function(){this.paintDirty=!0,this.markDirty()},e.markDirtyShape=function(){this.dirtyShape=!0,this.markPaintDirty()},e.setToCleanState=function(){this.paintDirty=!1,this.dirtyShape=!1},Oa.mixInto(t)}};we.register("PathStatefulDrawable",Cl);var Pl=Cl;function kl(t,e){this.initializeSVGSelfDrawable(t,e,!0,!0),this.svgElement=this.svgElement||document.createElementNS(mr,"path")}we.register("PathSVGDrawable",kl),Object(z.a)(ja,kl,{updateSVGSelf:function(){const t=this.svgElement;if(this.dirtyShape){let e=this.node.hasShape()?this.node._shape.getSVGPath():"";e||(e="M0 0"),t.setAttribute("d",e)}this.updateFillStrokeStyle(t)}}),Pl.mixInto(kl),$t.a.mixInto(kl);var Il=kl;const Ll={shape:null,boundsMethod:"accurate"};function Ol(t,e){this._shape=Ll.shape,this._strokedShape=null,this._boundsMethod=Ll.boundsMethod,this._invalidShapeListener=this.invalidateShape.bind(this),this._invalidShapeListenerAttached=!1,Wo.call(this),this.initializePaintable(),this.invalidateSupportedRenderers(),e=la({shape:t},e),this.mutate(e)}we.register("Path",Ol),Object(z.a)(Wo,Ol,{_mutatorKeys:["boundsMethod","shape"].concat(Wo.prototype._mutatorKeys),drawableMarkFlags:Wo.prototype.drawableMarkFlags.concat(["shape"]),setShape:function(t){return this._shape!==t&&(this._invalidShapeListenerAttached&&this.detachShapeListener(),"string"==typeof t&&(t=new cn(t)),this._shape=t,this.invalidateShape(),this._shape&&!this._shape.isImmutable()&&this.attachShapeListener()),this},set shape(t){this.setShape(t)},getShape:function(){return this._shape},get shape(){return this.getShape()},getStrokedShape:function(){return this._strokedShape||(this._strokedShape=this.getShape().getStrokedShape(this._lineDrawingStyles)),this._strokedShape},getPathRendererBitmask:function(){return An.bitmaskCanvas|An.bitmaskSVG},invalidateSupportedRenderers:function(){this.setRendererBitmask(this.getFillRendererBitmask()&this.getStrokeRendererBitmask()&this.getPathRendererBitmask())},invalidateShape:function(){this.invalidatePath();const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirtyShape();this._invalidShapeListenerAttached&&this._shape&&this._shape.isImmutable()&&this.detachShapeListener()},invalidatePath:function(){this._strokedShape=null,this.invalidateSelf()},attachShapeListener:function(){this.isDisposed||(this._shape.invalidatedEmitter.addListener(this._invalidShapeListener),this._invalidShapeListenerAttached=!0)},detachShapeListener:function(){this._shape.invalidatedEmitter.removeListener(this._invalidShapeListener),this._invalidShapeListenerAttached=!1},updateSelfBounds:function(){const t=this.hasShape()?this.computeShapeBounds():ne.NOTHING,e=!t.equals(this.selfBoundsProperty._value);return e&&this.selfBoundsProperty._value.set(t),e},setBoundsMethod:function(t){return this._boundsMethod!==t&&(this._boundsMethod=t,this.invalidatePath(),this.rendererSummaryRefreshEmitter.emit()),this},set boundsMethod(t){this.setBoundsMethod(t)},getBoundsMethod:function(){return this._boundsMethod},get boundsMethod(){return this.getBoundsMethod()},computeShapeBounds:function(){if("none"===this._boundsMethod)return ne.NOTHING;if(this.hasPaintableStroke()&&"unstroked"!==this._boundsMethod){if("accurate"===this._boundsMethod)return this.getShape().getStrokedBounds(this.getLineStyles());{let t;return t="safePadding"===this._boundsMethod&&"miter"===this.getLineJoin()?this.getMiterLimit():"square"===this.getLineCap()?Math.SQRT2:1,this.getShape().bounds.dilated(t*this.getLineWidth()/2)}}return this.getShape().bounds},areSelfBoundsValid:function(){return"accurate"===this._boundsMethod||"safePadding"===this._boundsMethod||"none"!==this._boundsMethod&&!this.hasStroke()},getTransformedSelfBounds:function(t){return(this._stroke?this.getStrokedShape():this.getShape()).getBoundsWithTransform(t)},getTransformedSafeSelfBounds:function(t){return this.getTransformedSelfBounds(t)},invalidateStroke:function(){this.invalidatePath(),this.rendererSummaryRefreshEmitter.emit()},hasShape:function(){return!!this._shape},canvasPaintSelf:function(t,e){El.prototype.paintCanvas(t,this,e)},createSVGDrawable:function(t,e){return Il.createFromPool(t,e)},createCanvasDrawable:function(t,e){return El.createFromPool(t,e)},isPainted:function(){return!0},containsPointSelf:function(t){let e=!1;return this.hasShape()?(this._fillPickable&&(e=this.getShape().containsPoint(t)),!e&&this._strokePickable&&(e=this.getStrokedShape().containsPoint(t)),e):e},getSelfShape:function(){return cn.union([...this.hasShape()&&this._fillPickable?[this.getShape()]:[],...this.hasShape()&&this._strokePickable?[this.getStrokedShape()]:[]])},intersectsBoundsSelf:function(t){return!!this.hasShape()&&this._shape.intersectsBounds(t)},requiresSVGBoundsWorkaround:function(){if(!this._stroke||!this._stroke.isPaint||!this.hasShape())return!1;const t=this.computeShapeBounds();return t.x*t.y==0},getDebugHTMLExtras:function(){return this._shape?" (<span style=\"color: #88f\" onclick=\"window.open( 'data:text/plain;charset=utf-8,' + encodeURIComponent( '"+this._shape.getSVGPath()+"' ) );\">path</span>)":""},dispose:function(){this._invalidShapeListenerAttached&&this.detachShapeListener(),Wo.prototype.dispose.call(this)}}),Ol.DEFAULT_OPTIONS=Object(s.a)({},Wo.DEFAULT_OPTIONS,Ll),gl.mixInto(Ol);var Rl=Ol,Nl=new r.a("sun"),Ml=i(15);var Bl=(t,e)=>{const i=e.replace(new RegExp("^.*,"),""),n=atob(i),s=new Uint8Array(n.length);for(let r=0;r<s.length;r++)s[r]=n.charCodeAt(r);return s};var Fl=class{constructor(){this.audioBufferProperty=new Pe(null)}},Vl=new r.a("tambo");let ql=null;window.AudioContext?ql=new window.AudioContext:window.webkitAudioContext?ql=new window.webkitAudioContext:(ql={},console.error("error: this browser does not support Web Audio")),Vl.register("phetAudioContext",ql);var Hl=ql;const Yl="data:audio/mpeg;base64,//swxAAABlAhPLTAgDE1De+/HoACAH4CwkCAJDo5gDgPRksn2WLHOB8EHShd5cHwfBBwgBBOJw/UCAY/lAxWD/4DB9+CH/6XQjMTIIcYUIQPQIRAIBAACUIawkYq7IQ/BawVqEc7mTjD+OFygBAnHbHq7UkLJ8aCnnrZlPpg3IkRJBgPH/MCQCI985/yAnHAAhmv3lHuAgAgAxJF//syxAOACHQpa7zBAAD8EunxpI3HUCEZHQlA2EYuDsSjE5EkSQGhUDYDxOARLoiBmIgalVgq4qWeWBqsNYKywNO+p/sxFyKwVOlXRFDtZ0S86oQ0C2W+wBOmlaWuS6+BIqZMz+AYy3FuwBkKXM2idVoKlYwUd/oIGgsbLpEbaCsmIyZRtbw6TPwj+mYmGr8QqnGHBLo3LKAAxKabZ//7MsQGAAhsl1OsPMcxAo3mpbCaAvIuuQRmW4WNHhDBJnoBORIlh+I9dvGCTCKP0kzo7rHHTi87diQ2XqnRN77y8lnKUl8zf+X0Fu0iCDV/9AP7el8Cw8raZKqiYShe+6bzYk0zXmEuGnBDcQhyRzPeI4Jbsmj5OxzZVhSX9adVU4Kk9r9esE3etv+/6wUIg3Wm62nA3Ab0EIcLUQ7/+zLECABGICs9oemDMLwEZrQcvFYyDBCUCgUAwQCUSvgROof5poGn9O7o70P/X9P/T+360+lAhIJVtyuNDljXzM7Ek0fGUB/ltZQF8iD7dBcVTs00f31POqR0/V/q/pjEe1z3jyAAQRBHGmSBEEVK6QIYH2miQZKNfgCVtiH9vVLp+w7an/d0jdUx9VnqZIJSvFtsaUFKKFBVCzoe//swxBwABSAhLaDl4nCsA+a0fDyG3vbgKx5OhNXyuPYt7kJJSg9B6heqxP93q/9P6IwSQ8LbYIFBVUF85RwseJPX6+Q7qIq7f/8ayokh7P//V8oyAABbhbGEIBBhOJgEGTBx6KjUiosS54l6y0i3jOz/6f///RVMQU1FMy45OS41VVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//syxDWABEQTMaCF4HCNAmL0EJgGVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",jl=Bl(Hl,Yl),Gl=Ml.a.createLock(Yl),zl=new Fl;Hl.decodeAudioData(jl.buffer,t=>{zl.audioBufferProperty.set(t),Gl()},t=>{console.warn("decode of audio data failed, using stubbed sound, error: "+t),zl.audioBufferProperty.set(Hl.createBuffer(1,0,Hl.sampleRate)),Gl()});var Wl=zl,Ul=new r.a("utteranceQueue");const Xl={isValidValue:t=>"string"==typeof t||Array.isArray(t)&&_.every(t,t=>"string"==typeof t)};class Kl{constructor(t){t=Object(s.a)({alert:null,loopAlerts:!1,predicate:function(){return!0},alertStableDelay:200,alertMaximumDelay:Number.MAX_VALUE},t),this._alert=t.alert,this.loopAlerts=t.loopAlerts,this.numberOfTimesAlerted=0,this.predicate=t.predicate,this.timeInQueue=0,this.stableTime=0,this.alertStableDelay=t.alertStableDelay,this.alertMaximumDelay=t.alertMaximumDelay}getTextToAlert(){let t;if("string"==typeof this._alert)t=this._alert;else if(this.loopAlerts)t=this._alert[this.numberOfTimesAlerted%this._alert.length];else{const e=Math.min(this.numberOfTimesAlerted,this._alert.length-1);t=this._alert[e]}return this.numberOfTimesAlerted++,t}set alert(t){y(t,Xl),this._alert=t}get alert(){return this._alert}setAlertStableDelay(t){this.alertStableDelay=t}resetTimingVariables(){this.timeInQueue=0,this.stableTime=0}reset(){this.numberOfTimesAlerted=0,this.resetTimingVariables()}}Ul.register("Utterance",Kl);var Ql=Kl;const Zl={isAlertableDef:function(t){let e=!0;if(Array.isArray(t))for(let i=0;i<t.length&&(e=Jl(t[i]),e);i++);else e=Jl(t);return e}};var Jl=function(t){return"string"==typeof t||"number"==typeof t||t instanceof Ql};Ul.register("AlertableDef",Zl);let $l=1;class th{constructor(){this.elementIndex=0,this.announcingEmitter=new Br({parameters:[{valueType:"string"}]}),this.ariaLiveContainer=document.createElement("div"),this.ariaLiveContainer.setAttribute("id","aria-live-elements-"+$l),this.ariaLiveContainer.setAttribute("style","position: absolute; left: 0px; top: 0px; width: 0px; height: 0px; clip: rect(0px 0px 0px 0px); pointer-events: none;");for(let t=1;t<=4;t++){const e=document.createElement("p");e.setAttribute("id",`elements-${$l}-polite-${t}`),e.setAttribute("aria-live","polite"),this.ariaLiveContainer.appendChild(e)}this.ariaLiveElements=Array.from(this.ariaLiveContainer.children),this.announcingEmitter.addListener(t=>{const e=this.ariaLiveElements[this.elementIndex];this.updateLiveElement(e,t),this.elementIndex=(this.elementIndex+1)%this.ariaLiveElements.length}),$l++}announcePolite(t){this.announcingEmitter.emit(t)}updateLiveElement(t,e){t.textContent="",t.hidden=!1,j.setTimeout(()=>{ns.setTextContent(t,e),j.setTimeout(()=>{t.hidden=!0},200)},0)}}Ul.register("AriaHerald",th);var eh=th;class ih extends A{}ih.methods={addToBack:{returnType:V,parameterTypes:[O],implementation:function(t){return this.phetioObject.addToBack(t)},documentation:"Add the utterance (string) to the end of the queue.",invocableForReadOnlyElements:!1},addToFront:{returnType:V,parameterTypes:[O],implementation:function(t){return this.phetioObject.addToFront(t)},documentation:"Add the utterance (string) to the beginning of the queue.",invocableForReadOnlyElements:!1},setMuted:{returnType:V,parameterTypes:[Se],implementation:function(t){this.phetioObject.muted(t)},documentation:"Set whether the utteranceQueue will be muted or not. If muted, utterances still move through the queue but will not be read by screen readers.",invocableForReadOnlyElements:!1},getMuted:{returnType:Se,parameterTypes:[V],implementation:function(){return this.phetioObject.muted()},documentation:"Get whether the utteranceQueue is muted. If muted, utterances still move through the queue but will not be read by screen readers."},setEnabled:{returnType:V,parameterTypes:[Se],implementation:function(t){this.phetioObject.enabled(t)},documentation:"Set whether the utteranceQueue will be enabled or not. When enabled, Utterances cannot be added to the queue, and the Queue cannot be cleared. Also nothing will be sent to assistive technology.",invocableForReadOnlyElements:!1},getEnabled:{returnType:Se,parameterTypes:[V],implementation:function(){return this.phetioObject.enabled()},documentation:"Get whether the utteranceQueue is enabled. When enabled, Utterances cannot be added to the queue, and the Queue cannot be cleared. Also nothing will be sent to assistive technology."}},ih.documentation="Manages a queue of Utterances that are read in order by a screen reader.",ih.events=["announced"],ih.validator={valueType:Object},ih.typeName="UtteranceQueueIO",A.validateSubtype(ih),Ul.register("UtteranceQueueIO",ih);var nh=ih;class sh extends vt{constructor(t=!1){let e=null;t||(e={tandem:T.a.GENERAL_VIEW.createTandem("utteranceQueue"),phetioType:nh,phetioState:!1}),super(e),this._initialized=!t,this.queue=[],this._muted=!1,this._enabled=!0,this.ariaHerald=new eh,this._initialized&&j.addListener(this.stepQueue.bind(this))}getAriaLiveContainer(){return this.ariaHerald.ariaLiveContainer}addToBack(t){this.initializedAndEnabled&&(t=this.prepareUtterance(t),this.queue.push(t))}addToBackIfDefined(t){null!=t&&this.addToBack(t)}addToFront(t){this.initializedAndEnabled&&(t=this.prepareUtterance(t),this.queue.unshift(t))}prepareUtterance(t){return"string"==typeof t&&(t=new Ql({alert:t})),this.removeUtterance(t,{assertExists:!1}),t.stableTime=0,t}removeUtterance(t,e){e=Object(s.a)({assertExists:!0},e),_.remove(this.queue,e=>e===t)}get initializedAndEnabled(){return this._enabled&&this._initialized}canAlertUtterance(t){return!this._muted&&t.predicate()}getNextUtterance(){let t=null;for(let e=0;e<this.queue.length;e++){const i=this.queue[e];if(i.stableTime>i.alertStableDelay||i.timeInQueue>i.alertMaximumDelay){t=i,this.queue.splice(e,1);break}}return t}hasUtterance(t){return _.includes(this.queue,t)}clear(){this.queue=[]}setMuted(t){this._muted=t}set muted(t){this.setMuted(t)}getMuted(){return this._muted}get muted(){return this.getMuted()}setEnabled(t){this._enabled=t}set enabled(t){this.setEnabled(t)}getEnabled(){return this._enabled}get enabled(){return this.getEnabled()}stepQueue(t){if(!this._enabled)return;t*=1e3;for(let i=0;i<this.queue.length;i++)this.queue[i].timeInQueue+=t,this.queue[i].stableTime+=t;const e=this.getNextUtterance();if(e&&this.canAlertUtterance(e)){const t=e.getTextToAlert();this.phetioStartEvent("announced",{data:{utterance:t}}),this.ariaHerald.announcePolite(t),e.timeInQueue=0,this.phetioEndEvent()}}static fromFactory(){const t=new sh,e=t.getAriaLiveContainer();document.body?document.body.appendChild(e):document.children[0].appendChild(e);const i=t=>{phet.axon.timer.emit(t/1e3),window.requestAnimationFrame(i)};return window.requestAnimationFrame(i),t}}Ul.register("UtteranceQueue",sh);var rh=sh;function oh(t,e){this.display=t,this.trail=e}we.register("Focus",oh),Object(z.a)(Object,oh);var ah=oh;class lh extends A{static toStateObject(t){y(t,this.validator);const e=[];return t.trail.nodes.forEach((function(t,i){t.isPhetioInstrumented()&&e.push(t.tandem.phetioID)})),{focusedPhetioElement:e}}}lh.validator={valueType:ah},lh.documentation="A IO type for the instance in the simulation which currently has keyboard focus. FocusIO is serialized into and Object with key `focusedPhetioElement` that is a list of PhET-iO elements, from parent-most to child-most cooresponding to the PhET-iO element that was instrumented.",lh.typeName="FocusIO",A.validateSubtype(lh),we.register("FocusIO",lh);var hh=lh;var uh={KEY_SPACE:32,KEY_ENTER:13,KEY_TAB:9,KEY_RIGHT_ARROW:39,KEY_LEFT_ARROW:37,KEY_UP_ARROW:38,KEY_DOWN_ARROW:40,KEY_SHIFT:16,KEY_CTRL:17,KEY_ALT:18,KEY_ESCAPE:27,KEY_DELETE:46,KEY_BACKSPACE:8,KEY_PAGE_UP:33,KEY_PAGE_DOWN:34,KEY_END:35,KEY_HOME:36,KEY_PRINT_SCREEN:44,KEY_0:48,KEY_9:57,KEY_A:65,KEY_D:68,KEY_C:67,KEY_H:72,KEY_J:74,KEY_N:78,KEY_S:83,KEY_W:87,KEY_K:75,KEY_L:76,KEY_EQUALS:Pn.firefox?61:187,KEY_PLUS:Pn.firefox?61:187,KEY_MINUS:Pn.firefox?173:189,ARROW_KEYS:[39,37,39,40],isArrowKey:function(t){return t===uh.KEY_RIGHT_ARROW||t===uh.KEY_LEFT_ARROW||t===uh.KEY_UP_ARROW||t===uh.KEY_DOWN_ARROW},isRangeKey:function(t){return t>=uh.KEY_PAGE_UP&&t<=uh.KEY_DOWN_ARROW},isNumberKey:function(t){return t>uh.KEY_0&&t<uh.KEY_9},isWASDKey:function(t){return t===uh.KEY_W||t===uh.KEY_A||t===uh.KEY_S||t===uh.KEY_D}};we.register("KeyboardUtils",uh);var ch=uh;class dh{constructor(){this.keyState={},this.attachedToDocument=!1,this.documentKeyupListener=null,this.documentKeydownListener=null,this.keydownEmitter=new Br({parameters:[{valueType:Event}]}),this.keyupEmitter=new Br({parameters:[{valueType:Event}]});const t=this.step.bind(this);j.addListener(t),this._disposeKeystateTracker=()=>{j.removeListener(t),this.attachedToDocument&&this.detachFromDocument()}}keydownUpdate(t){this.correctModifierKeys(t),this.isKeyDown(t.keyCode)||(this.keyState[t.keyCode]={keyDown:!0,keyCode:t.keyCode,timeDown:0}),this.keydownEmitter.emit(t)}correctModifierKeys(t){t.shiftKey&&!this.shiftKeyDown&&(this.keyState[ch.KEY_SHIFT]={keyDown:!0,keyCode:t.keyCode,timeDown:0}),t.altKey&&!this.altKeyDown&&(this.keyState[ch.KEY_ALT]={keyDown:!0,keyCode:t.keyCode,timeDown:0}),t.ctrlKey&&!this.ctrlKeyDown&&(this.keyState[ch.KEY_CTRL]={keyDown:!0,keyCode:t.keyCode,timeDown:0}),!t.shiftKey&&this.shiftKeyDown&&delete this.keyState[ch.KEY_SHIFT],!t.altKey&&this.altKeyDown&&delete this.keyState[ch.KEY_ALT],!t.ctrlKey&&this.ctrlKeyDown&&delete this.keyState[ch.KEY_CTRL]}keyupUpdate(t){const e=t.keyCode;this.correctModifierKeys(t),this.isKeyDown(e)&&delete this.keyState[e],this.keyupEmitter.emit(t)}get movementKeysDown(){return this.rightMovementKeysDown()||this.leftMovementKeysDown()||this.upMovementKeysDown()||this.downMovementKeysDown()}isKeyDown(t){return!!this.keyState[t]&&this.keyState[t].keyDown}isAnyKeyInListDown(t){for(let e=0;e<t.length;e++)if(this.isKeyDown(t[e]))return!0;return!1}areKeysDown(t){for(let e=0;e<t.length;e++)if(!this.isKeyDown(t[e]))return!1;return!0}keysAreDown(){return!!Object.keys(this.keyState).length>0}get enterKeyDown(){return this.isKeyDown(ch.KEY_ENTER)}get shiftKeyDown(){return this.isKeyDown(ch.KEY_SHIFT)}get altKeyDown(){return this.isKeyDown(ch.KEY_ALT)}get ctrlKeyDown(){return this.isKeyDown(ch.KEY_CTRL)}timeDownForKey(t){return this.keyState[t].timeDown}clearState(){this.keyState={}}step(t){if(this.keysAreDown()){const e=1e3*t;for(const t in this.keyState)this.keyState.hasOwnProperty(t)&&this.keyState[t].keyDown&&(this.keyState[t].timeDown+=e)}}attachToDocument(){this.documentKeydownListener=t=>{this.blockTrustedEvents&&t.isTrusted||this.keydownUpdate(t)},this.documentKeyupListener=t=>{this.blockTrustedEvents&&t.isTrusted||this.keyupUpdate(t)};const t=()=>{window.addEventListener("keyup",this.documentKeyupListener,!0),window.addEventListener("keydown",this.documentKeydownListener,!0),this.attachedToDocument=!0};if(document)t();else{const e=i=>{t(),window.removeEventListener("load",e)};window.addEventListener("load",e)}}detachFromDocument(){window.removeEventListener("keyuop",this.documentKeyupListener),window.removeEventListener("keydown",this.documentKeydownListener),this.documentKeyupListener=null,this.documentKeydownListener=null,this.attachedToDocument=!1}dispose(){this._disposeKeystateTracker()}}we.register("KeyStateTracker",dh);var ph=dh;class fh extends A{static toStateObject(t){return y(t,this.validator),t.toStateObject()}static fromStateObject(t){return te.a.fromStateObject(t)}}fh.documentation="A numerical object with x and y properties, like {x:3,y:4}",fh.validator={valueType:te.a},fh.typeName="Vector2IO",A.validateSubtype(fh),w.a.register("Vector2IO",fh);var mh=fh;function gh(t,e,i){this.domEvent=t,this.type=e,this.callback=i}we.register("BatchedDOMEvent",gh),gh.POINTER_TYPE=1,gh.MS_POINTER_TYPE=2,gh.TOUCH_TYPE=3,gh.MOUSE_TYPE=4,gh.WHEEL_TYPE=5,Object(z.a)(Object,gh,{run:function(t){const e=this.domEvent,i=this.callback;if(t.validatePointers(),this.type===gh.POINTER_TYPE)i.call(t,e.pointerId,e.pointerType,t.pointFromEvent(e),e);else if(this.type===gh.MS_POINTER_TYPE)i.call(t,e.pointerId,kh.msPointerType(e),t.pointFromEvent(e),e);else if(this.type===gh.TOUCH_TYPE)for(let n=0;n<e.changedTouches.length;n++){const s=e.changedTouches.item(n);i.call(t,s.identifier,t.pointFromEvent(s),e)}else if(this.type===gh.MOUSE_TYPE)i.call(t,t.pointFromEvent(e),e);else{if(this.type!==gh.WHEEL_TYPE)throw new Error("bad type value: "+this.type);i.call(t,e)}},dispose:function(){this.domEvent=null,this.callback=null,this.freeToPool()}}),gh.fromPointerEvent=function(t,e){return gh.createFromPool(t,e(t),t.pointerId)},$t.a.mixInto(gh);var yh=gh;const bh=function(){};var vh={addDisplay:function(t,e,i){this.attachedDisplays.push(t),e?1===this.attachedDisplays.length&&this.connectWindowListeners(i):this.addOrRemoveListeners(t.domElement,!0,i),t.domElement.addEventListener("wheel",this.onwheel,vh.getEventOptions(i,!0))},removeDisplay:function(t,e,i){Object(wt.a)(this.attachedDisplays,t),e?0===this.attachedDisplays.length&&this.disconnectWindowListeners(i):this.addOrRemoveListeners(t.domElement,!1,i),t.domElement.removeEventListener("wheel",this.onwheel,vh.getEventOptions(i,!0))},getEventOptions:function(t,e){return!(!js.passive||null===t)&&(e?{useCapture:!1,passive:t}:{passive:t})},listenersAttachedToWindow:0,listenersAttachedToElement:0,attachedDisplays:[],canUsePointerEvents:!!(window.navigator&&window.navigator.pointerEnabled||window.PointerEvent)&&!Pn.firefox,canUseMSPointerEvents:window.navigator&&window.navigator.msPointerEnabled,pointerListenerTypes:["pointerdown","pointerup","pointermove","pointerover","pointerout","pointercancel"],msPointerListenerTypes:["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerOver","MSPointerOut","MSPointerCancel"],touchListenerTypes:["touchstart","touchend","touchmove","touchcancel"],mouseListenerTypes:["mousedown","mouseup","mousemove","mouseover","mouseout"],wheelListenerTypes:["wheel"],getNonWheelUsedTypes:function(){let t;return t=this.canUsePointerEvents?this.pointerListenerTypes:this.canUseMSPointerEvents?this.msPointerListenerTypes:this.touchListenerTypes.concat(this.mouseListenerTypes),t},connectWindowListeners:function(t){this.addOrRemoveListeners(window,!0,t)},disconnectWindowListeners:function(t){this.addOrRemoveListeners(window,!1,t)},addOrRemoveListeners:function(t,e,i){const n=t===window,s=e?1:-1;n?this.listenersAttachedToWindow+=s:this.listenersAttachedToElement+=s;const r=e?"addEventListener":"removeEventListener",o=this.getNonWheelUsedTypes();for(let a=0;a<o.length;a++){const e=o[a];n&&document[r](e,bh,vh.getEventOptions(i,!1));const s=this["on"+e];t[r](e,s,vh.getEventOptions(i,!0))}},batchWindowEvent:function(t,e,i,n){for(let s=0;s<this.attachedDisplays.length;s++){const r=this.attachedDisplays[s]._input;r.batchEvent(t,e,r[i],n)}},onpointerdown:function(t){"mouse"===t.pointerType&&pu.userGestureEmitter.emit(),vh.batchWindowEvent(t,yh.POINTER_TYPE,"pointerDown",!1)},onpointerup:function(t){pu.userGestureEmitter.emit(),vh.batchWindowEvent(t,yh.POINTER_TYPE,"pointerUp",!0)},onpointermove:function(t){vh.batchWindowEvent(t,yh.POINTER_TYPE,"pointerMove",!1)},onpointerover:function(t){vh.batchWindowEvent(t,yh.POINTER_TYPE,"pointerOver",!1)},onpointerout:function(t){vh.batchWindowEvent(t,yh.POINTER_TYPE,"pointerOut",!1)},onpointercancel:function(t){vh.batchWindowEvent(t,yh.POINTER_TYPE,"pointerCancel",!1)},onMSPointerDown:function(t){vh.batchWindowEvent(t,yh.MS_POINTER_TYPE,"pointerDown",!1)},onMSPointerUp:function(t){vh.batchWindowEvent(t,yh.MS_POINTER_TYPE,"pointerUp",!0)},onMSPointerMove:function(t){vh.batchWindowEvent(t,yh.MS_POINTER_TYPE,"pointerMove",!1)},onMSPointerOver:function(t){vh.batchWindowEvent(t,yh.MS_POINTER_TYPE,"pointerOver",!1)},onMSPointerOut:function(t){vh.batchWindowEvent(t,yh.MS_POINTER_TYPE,"pointerOut",!1)},onMSPointerCancel:function(t){vh.batchWindowEvent(t,yh.MS_POINTER_TYPE,"pointerCancel",!1)},ontouchstart:function(t){vh.batchWindowEvent(t,yh.TOUCH_TYPE,"touchStart",!1)},ontouchend:function(t){pu.userGestureEmitter.emit(),vh.batchWindowEvent(t,yh.TOUCH_TYPE,"touchEnd",!0)},ontouchmove:function(t){vh.batchWindowEvent(t,yh.TOUCH_TYPE,"touchMove",!1)},ontouchcancel:function(t){vh.batchWindowEvent(t,yh.TOUCH_TYPE,"touchCancel",!1)},onmousedown:function(t){pu.userGestureEmitter.emit(),vh.batchWindowEvent(t,yh.MOUSE_TYPE,"mouseDown",!1)},onmouseup:function(t){pu.userGestureEmitter.emit(),vh.batchWindowEvent(t,yh.MOUSE_TYPE,"mouseUp",!0)},onmousemove:function(t){vh.batchWindowEvent(t,yh.MOUSE_TYPE,"mouseMove",!1)},onmouseover:function(t){vh.batchWindowEvent(t,yh.MOUSE_TYPE,"mouseOver",!1)},onmouseout:function(t){vh.batchWindowEvent(t,yh.MOUSE_TYPE,"mouseOut",!1)},onwheel:function(t){vh.batchWindowEvent(t,yh.WHEEL_TYPE,"wheel",!1)}};we.register("BrowserEvents",vh);var _h=vh;class Ah extends A{static toStateObject(t){return y(t,this.validator),we.Input.serializeDomEvent(t)}static fromStateObject(t){return we.Input.deserializeDomEvent(t)}}Ah.documentation="A DOM Event",Ah.validator={valueType:window.Event},Ah.typeName="EventIO",A.validateSubtype(Ah),we.register("EventIO",Ah);var wh=Ah;class xh extends wo{constructor(t){super(null,!1,"a11y"),this.display=t,this.initializeListeners(),this.blockTrustedEvents=!1,this.keydownTargetNode=null}initializeListeners(){this.addInputListener({focus:()=>{this.trail.lastNode().focusable&&(pu.focus=new ah(this.display,As.guessVisualTrail(this.trail,this.display.rootNode)),this.display.pointerFocus=null)},blur:t=>{pu.focus=null,this.keydownTargetNode=null},keydown:t=>{this.blockTrustedEvents&&t.domEvent.isTrusted||(this.keydownTargetNode=t.target)},keyup:t=>{this.blockTrustedEvents&&t.domEvent.isTrusted||this.keydownTargetNode!==t.target&&t.abort()}})}updateTrail(t){if(this.trail&&this.trail.getUniqueId()===t)return this.trail;const e=yn.fromUniqueId(this.display.rootNode,t);return this.trail=e,e}invalidateTrail(t){null!==this.trail&&this.trail.uniqueId===t||(this.trail=yn.fromUniqueId(this.display.rootNode,t))}}we.register("PDOMPointer",xh);var Sh=xh;class Th{constructor(t,e,i,n){this.handled=!1,this.aborted=!1,this.trail=t,this.type=e,this.pointer=i,this.domEvent=n,this.currentTarget=null,this.target=t.lastNode(),this.isPrimary=!(i instanceof So&&n&&0!==n.button),n&&(i.lastDOMEvent=n)}handle(){this.handled=!0}abort(){this.aborted=!0}isFromPDOM(){return this.pointer instanceof Sh}canStartPress(){return!(this.pointer.isAttached()||this.pointer instanceof So&&0!==this.domEvent.button)}}we.register("SceneryEvent",Th);var Dh=Th;const Eh={type:!0,button:!0,keyCode:!0,deltaX:!0,deltaY:!0,deltaZ:!0,deltaMode:!0,pointerId:!0,pointerType:!0,charCode:!0,which:!0,clientX:!0,clientY:!0,changedTouches:!0,target:!0,ctrlKey:!0,shiftKey:!0,altKey:!0,metaKey:!0},Ch=["focus","blur","focusin","focusout"];class Ph{constructor(t,e,i,n,r,o){if(o=Object(s.a)({tandem:T.a.OPTIONAL},o),this.display=t,this.rootNode=t.rootNode,this.attachToWindow=e,this.batchDOMEvents=i,this.assumeFullWindow=n,this.passiveEvents=r,this.batchedEvents=[],this.a11yPointer=null,this.mouse=null,this.pointers=[],this.pointerAddedListeners=[],this.currentlyFiringEvents=!1,this.validatePointersAction=new kr(()=>{let t=this.pointers.length;for(;t--;){const e=this.pointers[t];e.point&&this.branchChangeEvents(e,e.lastDOMEvent,!1)}},{phetioPlayback:!0,tandem:o.tandem.createTandem("validatePointersAction"),phetioHighFrequency:!0}),this.mouseUpAction=new kr((t,e)=>{this.mouse||this.initMouse();const i=this.mouse.up(t,e);this.upEvent(this.mouse,e,i)},{phetioPlayback:!0,tandem:o.tandem.createTandem("mouseUpAction"),parameters:[{name:"point",phetioType:mh},{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when a mouse button is released."}),this.mouseDownAction=new kr((t,e)=>{this.mouse||this.initMouse();const i=this.mouse.down(t,e);this.downEvent(this.mouse,e,i)},{phetioPlayback:!0,tandem:o.tandem.createTandem("mouseDownAction"),parameters:[{name:"point",phetioType:mh},{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when a mouse button is pressed."}),this.mouseMoveAction=new kr((t,e)=>{this.mouse||this.initMouse(),this.mouse.move(t,e),this.moveEvent(this.mouse,e)},{phetioPlayback:!0,tandem:o.tandem.createTandem("mouseMoveAction"),parameters:[{name:"point",phetioType:mh},{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when the mouse is moved.",phetioHighFrequency:!0}),this.mouseOverAction=new kr((t,e)=>{this.mouse||this.initMouse(),this.mouse.over(t,e)},{phetioPlayback:!0,tandem:o.tandem.createTandem("mouseOverAction"),parameters:[{name:"point",phetioType:mh},{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when the mouse is moved while on the sim."}),this.mouseOutAction=new kr((t,e)=>{this.mouse||this.initMouse(),this.mouse.out(t,e)},{phetioPlayback:!0,tandem:o.tandem.createTandem("mouseOutAction"),parameters:[{name:"point",phetioType:mh},{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when the mouse moves out of the display."}),this.wheelScrollAction=new kr(t=>{if(this.mouse||this.initMouse(),this.mouse.wheel(t),this.mouse.point){const e=this.rootNode.trailUnderPointer(this.mouse)||new yn(this.rootNode);this.dispatchEvent(e,"wheel",this.mouse,t,!0)}},{phetioPlayback:!0,tandem:o.tandem.createTandem("wheelScrollAction"),parameters:[{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when the mouse wheel scrolls.",phetioHighFrequency:!0}),this.touchStartAction=new kr((t,e,i)=>{const n=new Co(t,e,i);this.addPointer(n),this.downEvent(n,i,!1)},{phetioPlayback:!0,tandem:o.tandem.createTandem("touchStartAction"),parameters:[{name:"id",phetioType:I},{name:"point",phetioType:mh},{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when a touch begins."}),this.touchEndAction=new kr((t,e,i)=>{const n=this.findPointerById(t);if(n){const t=n.end(e,i);this.upEvent(n,i,t),this.removePointer(n)}},{phetioPlayback:!0,tandem:o.tandem.createTandem("touchEndAction"),parameters:[{name:"id",phetioType:I},{name:"point",phetioType:mh},{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when a touch ends."}),this.touchMoveAction=new kr((t,e,i)=>{const n=this.findPointerById(t);n&&(n.move(e,i),this.moveEvent(n,i))},{phetioPlayback:!0,tandem:o.tandem.createTandem("touchMoveAction"),parameters:[{name:"id",phetioType:I},{name:"point",phetioType:mh},{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when a touch moves.",phetioHighFrequency:!0}),this.touchCancelAction=new kr((t,e,i)=>{const n=this.findPointerById(t);if(n){const t=n.cancel(e,i);this.cancelEvent(n,i,t),this.removePointer(n)}},{phetioPlayback:!0,tandem:o.tandem.createTandem("touchCancelAction"),parameters:[{name:"id",phetioType:I},{name:"point",phetioType:mh},{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when a touch is canceled."}),this.penStartAction=new kr((t,e,i)=>{const n=new Do(t,e,i);this.addPointer(n),this.downEvent(n,i,!1)},{phetioPlayback:!0,tandem:o.tandem.createTandem("penStartAction"),parameters:[{name:"id",phetioType:I},{name:"point",phetioType:mh},{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when a pen touches the screen."}),this.penEndAction=new kr((t,e,i)=>{const n=this.findPointerById(t);if(n){const t=n.end(e,i);this.upEvent(n,i,t),this.removePointer(n)}},{phetioPlayback:!0,tandem:o.tandem.createTandem("penEndAction"),parameters:[{name:"id",phetioType:I},{name:"point",phetioType:mh},{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when a pen is lifted."}),this.penMoveAction=new kr((t,e,i)=>{const n=this.findPointerById(t);n&&(n.move(e,i),this.moveEvent(n,i))},{phetioPlayback:!0,tandem:o.tandem.createTandem("penMoveAction"),parameters:[{name:"id",phetioType:I},{name:"point",phetioType:mh},{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when a pen is moved.",phetioHighFrequency:!0}),this.penCancelAction=new kr((t,e,i)=>{const n=this.findPointerById(t);if(n){const t=n.cancel(e,i);this.cancelEvent(n,i,t),this.removePointer(n)}},{phetioPlayback:!0,tandem:o.tandem.createTandem("penCancelAction"),parameters:[{name:"id",phetioType:I},{name:"point",phetioType:mh},{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when a pen is canceled."}),this.display._accessible){let t=!1;this.focusinAction=new kr(e=>{if(this.display.blockFocusCallbacks)return;if(t)return void(t=!1);const i=this.updateTrailForPDOMDispatch(e);this.dispatchA11yEvent(i,"focus",e,!1),this.dispatchA11yEvent(i,"focusin",e,!0)},{phetioPlayback:!0,tandem:o.tandem.createTandem("focusinAction"),parameters:[{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when the PDOM root gets the focusin DOM event."}),this.focusoutAction=new kr(e=>{if(this.display.blockFocusCallbacks)return;this.a11yPointer||this.initA11yPointer(),this.a11yPointer.invalidateTrail(this.getTrailId(e));const i=this.updateTrailForPDOMDispatch(e);if(this.dispatchA11yEvent(i,"blur",e,!1),this.dispatchA11yEvent(i,"focusout",e,!0),this.a11yPointer.trail=null,e.relatedTarget){const i=this.isTargetUnderPDOM(document.activeElement);ns.isElementFocusable(e.relatedTarget)&&!i&&(Pn.ie&&(t=!0),e.relatedTarget.focus())}},{phetioPlayback:!0,tandem:o.tandem.createTandem("focusoutAction"),parameters:[{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when the PDOM root gets the focusout DOM event."}),this.clickAction=new kr(t=>{const e=this.updateTrailForPDOMDispatch(t);this.dispatchA11yEvent(e,"click",t,!0)},{phetioPlayback:!0,tandem:o.tandem.createTandem("clickAction"),parameters:[{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when the PDOM root gets the click DOM event."}),this.inputAction=new kr(t=>{const e=this.updateTrailForPDOMDispatch(t);this.dispatchA11yEvent(e,"input",t,!0)},{phetioPlayback:!0,tandem:o.tandem.createTandem("inputAction"),parameters:[{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when the PDOM root gets the input DOM event."}),this.changeAction=new kr(t=>{const e=this.updateTrailForPDOMDispatch(t);this.dispatchA11yEvent(e,"change",t,!0)},{phetioPlayback:!0,tandem:o.tandem.createTandem("changeAction"),parameters:[{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when the PDOM root gets the change DOM event."}),this.keydownAction=new kr(t=>{const e=this.updateTrailForPDOMDispatch(t);this.dispatchA11yEvent(e,"keydown",t,!0)},{phetioPlayback:!0,tandem:o.tandem.createTandem("keydownAction"),parameters:[{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when the PDOM root gets the keydown DOM event."}),this.keyupAction=new kr(t=>{const e=this.updateTrailForPDOMDispatch(t);this.dispatchA11yEvent(e,"keyup",t,!0)},{phetioPlayback:!0,tandem:o.tandem.createTandem("keyupAction"),parameters:[{name:"event",phetioType:wh}],phetioEventType:Z.USER,phetioDocumentation:"Emits when the PDOM root gets the keyup DOM event."});const e=!!js.passive&&{useCapture:!1,passive:!1};ns.DOM_EVENTS.forEach(t=>{const i=t+"Action";this.display.accessibleDOMElement.addEventListener(t,t=>{this[i].execute(t)},e)}),document.body.addEventListener("keydown",this.handleDocumentKeydown.bind(this))}}interruptPointers(){_.each(this.pointers,t=>{t.interruptAll()})}batchEvent(t,e,i,n){this.display.interactive&&(this.batchedEvents.push(yh.createFromPool(t,e,i)),!n&&this.batchDOMEvents||this.fireBatchedEvents()),!0!==this.passiveEvents&&(i!==this.mouseDown||Pn.ie||Pn.edge)&&t.preventDefault()}fireBatchedEvents(){if(!this.currentlyFiringEvents&&this.batchedEvents.length){this.currentlyFiringEvents=!0;const t=this.batchedEvents;for(let e=0;e<t.length;e++){const i=t[e];i.run(this),i.dispose()}Ke(t),this.currentlyFiringEvents=!1}}clearBatchedEvents(){this.batchedEvents.length=0}validatePointers(){this.validatePointersAction.execute()}removeTemporaryPointers(){const t={};for(let e=this.pointers.length-1;e>=0;e--){const i=this.pointers[e];if(!(i instanceof So)){this.pointers.splice(e,1);const n=i.trail||new yn(this.rootNode);this.exitEvents(i,t,n,0,!0)}}}connectListeners(){_h.addDisplay(this.display,this.attachToWindow,this.passiveEvents)}disconnectListeners(){_h.removeDisplay(this.display,this.attachToWindow,this.passiveEvents)}pointFromEvent(t){const e=te.a.createFromPool(t.clientX,t.clientY);if(!this.assumeFullWindow){const t=this.display.domElement.getBoundingClientRect();t.width>0&&t.height>0&&(e.subtractXY(t.left,t.top),t.width===this.display.width&&t.height===this.display.height||(e.x*=this.display.width/t.width,e.y*=this.display.height/t.height))}return e}addPointer(t){if(this.pointers.push(t),this.pointerAddedListeners.length)for(let e=0;e<this.pointerAddedListeners.length;e++)this.pointerAddedListeners[e](t)}addPointerAddedListener(t){this.pointerAddedListeners.push(t)}removePointerAddedListener(t){const e=this.pointerAddedListeners.indexOf(t);-1!==e&&this.pointerAddedListeners.splice(e,e+1)}removePointer(t){for(let e=this.pointers.length-1;e>=0;e--)this.pointers[e]===t&&this.pointers.splice(e,1);t.dispose()}findPointerById(t){let e=this.pointers.length;for(;e--;){const i=this.pointers[e];if(i.id===t)return i}return null}initMouse(){this.mouse=new So,this.addPointer(this.mouse)}initA11yPointer(){this.a11yPointer=new Sh(this.display),this.addPointer(this.a11yPointer)}dispatchA11yEvent(t,e,i,n){pu.userGestureEmitter.emit();const s=t.isPickable()||Ch.includes(e);i.target&&i.target.hasAttribute(ns.DATA_EXCLUDE_FROM_INPUT)||!s||(T.a.PHET_IO_ENABLED&&phet.phetio.dataStream.pushNonPlaybackable(),this.dispatchEvent(t,e,this.a11yPointer,i,n),T.a.PHET_IO_ENABLED&&phet.phetio.dataStream.popNonPlaybackable())}updateTrailForPDOMDispatch(t){return this.a11yPointer||this.initA11yPointer(),this.a11yPointer.updateTrail(this.getTrailId(t))}getTrailId(t){return t.targetSubstitute?t.targetSubstitute[ns.DATA_TRAIL_ID]:t.target.getAttribute(ns.DATA_TRAIL_ID)}mouseDown(t,e){this.mouseDownAction.execute(t,e)}mouseUp(t,e){this.mouseUpAction.execute(t,e)}mouseMove(t,e){this.mouseMoveAction.execute(t,e)}mouseOver(t,e){this.mouseOverAction.execute(t,e)}mouseOut(t,e){this.mouseOutAction.execute(t,e)}wheel(t){this.wheelScrollAction.execute(t)}touchStart(t,e,i){this.isTargetUnderPDOM(i.target)||this.touchStartAction.execute(t,e,i)}touchEnd(t,e,i){this.isTargetUnderPDOM(i.target)||this.touchEndAction.execute(t,e,i)}touchMove(t,e,i){this.touchMoveAction.execute(t,e,i)}touchCancel(t,e,i){this.touchCancelAction.execute(t,e,i)}penStart(t,e,i){this.penStartAction.execute(t,e,i)}penEnd(t,e,i){this.penEndAction.execute(t,e,i)}penMove(t,e,i){this.penMoveAction.execute(t,e,i)}penCancel(t,e,i){this.penCancelAction.execute(t,e,i)}pointerDown(t,e,i,n){const s=this.attachToWindow?document.body:this.display.domElement;switch(s.setPointerCapture&&n.pointerId&&s.setPointerCapture(n.pointerId),e=this.handleUnknownPointerType(e,t)){case"mouse":this.mouseDown(i,n),this.mouse.id=t;break;case"touch":this.touchStart(t,i,n);break;case"pen":this.penStart(t,i,n);break;default:0}}pointerUp(t,e,i,n){switch(e=this.handleUnknownPointerType(e,t)){case"mouse":this.mouseUp(i,n),this.mouse.id=null;break;case"touch":this.touchEnd(t,i,n);break;case"pen":this.penEnd(t,i,n);break;default:0}}pointerCancel(t,e,i,n){switch(e=this.handleUnknownPointerType(e,t)){case"mouse":console&&console.log&&console.log("WARNING: Pointer mouse cancel was received");break;case"touch":this.touchCancel(t,i,n);break;case"pen":this.penCancel(t,i,n);break;default:console.log&&console.log("Unknown pointer type: "+e)}}pointerMove(t,e,i,n){switch(e=this.handleUnknownPointerType(e,t)){case"mouse":this.mouseMove(i,n);break;case"touch":this.touchMove(t,i,n);break;case"pen":this.penMove(t,i,n);break;default:console.log&&console.log("Unknown pointer type: "+e)}}pointerOver(t,e,i,n){}pointerOut(t,e,i,n){}pointerEnter(t,e,i,n){}pointerLeave(t,e,i,n){}handleUnknownPointerType(t,e){return""!==t?t:this.mouse&&this.mouse.id===e?"mouse":"touch"}getPointerTrail(t){return this.rootNode.trailUnderPointer(t)||new yn(this.rootNode)}upEvent(t,e,i){if(this.isTargetUnderPDOM(e.target))return;const n=this.branchChangeEvents(t,e,i);this.dispatchEvent(n,"up",t,e,!0),t instanceof Co&&this.exitEvents(t,e,n,0,!0)}downEvent(t,e,i){if(this.isTargetUnderPDOM(e.target))return;const n=this.branchChangeEvents(t,e,i);let s=null;if(!n.rootNode()._rendererSummary.isNotAccessible()){if(this.display.bounds.containsPoint(t.point)){for(let t=n.nodes.length-1;t>=0;t--)if(n.nodes[t].focusable){s=n.nodes[t];break}this.display.pointerFocus=s,pu.focus=null}}this.dispatchEvent(n,"down",t,e,!0)}moveEvent(t,e){this.branchChangeEvents(t,e,!0)}cancelEvent(t,e,i){const n=this.branchChangeEvents(t,e,i);this.dispatchEvent(n,"cancel",t,e,!0),t instanceof Co&&this.exitEvents(t,e,n,0,!0)}branchChangeEvents(t,e,i){const n=this.getPointerTrail(t),s=t.trail||new yn(this.rootNode),r=s.lastNode()!==n.lastNode(),o=yn.branchIndex(n,s),a=o!==n.length||o!==s.length;return i&&this.dispatchEvent(n,"move",t,e,!0),a&&(this.exitEvents(t,e,s,o,r),this.enterEvents(t,e,n,o,r)),t.trail=n,n}enterEvents(t,e,i,n,s){if(i.length>n)for(let r=i.length-1;r>=n;r--)this.dispatchEvent(i.slice(0,r+1),"enter",t,e,!1);s&&this.dispatchEvent(i,"over",t,e,!0)}exitEvents(t,e,i,n,s){if(s&&this.dispatchEvent(i,"out",t,e,!0),i.length>n)for(let r=n;r<i.length;r++)this.dispatchEvent(i.slice(0,r+1),"exit",t,e,!1)}dispatchEvent(t,e,i,n,s){const r=new Dh(t,e,i,n);this.dispatchToListeners(i,i.getListeners(),e,r),this.dispatchToTargets(t,e,i,r,s),this.dispatchToListeners(i,this.display.getInputListeners(),e,r)}dispatchToListeners(t,e,i,n){if(n.handled)return;const s=t.type+i;for(let r=0;r<e.length;r++){const t=e[r];!n.aborted&&t[s]&&t[s](n),!n.aborted&&t[i]&&t[i](n)}}dispatchToTargets(t,e,i,n,s){if(!n.aborted&&!n.handled)for(let r=t.getLastInputEnabledIndex();r>=0;s?r--:r=-1){const s=t.nodes[r];if(!s.isDisposed&&(n.currentTarget=s,this.dispatchToListeners(i,s.getInputListeners(),e,n),n.aborted||n.handled))return}}isTargetUnderPDOM(t){return this.display._accessible&&this.display.accessibleDOMElement.contains(t)}handleDocumentKeydown(t){if(Hn.isFullScreen()&&t.keyCode===ch.KEY_TAB){const e=this.display.accessibleDOMElement;(t.shiftKey?ns.getPreviousFocusable(e):ns.getNextFocusable(e))===t.target&&t.preventDefault()}if(this.display.pointerFocus||this.display.activeNode){const e=this.display.pointerFocus||this.display.activeNode;1===e.getAccessibleInstances().length&&e.focusable&&e.accessibleInstances[0].trail.isVisible()&&t.keyCode===ch.KEY_TAB&&(t.preventDefault(),e.focus(),this.display.pointerFocus=null,this.display.activeNode=null)}}static serializeDomEvent(t){const e={};for(const i in t)if(Eh[i]){const n=t[i];if("touches"===i||"targetTouches"===i||"changedTouches"===i){const t=[];for(let e=0;e<n.length;e++){const i=n.item&&"function"==typeof n.item?n.item(e):n[e];t.push(Ph.serializeDomEvent(i))}e[i]=t}"target"===i&&null!==n&&"function"==typeof n.getAttribute&&n.hasAttribute(ns.DATA_TRAIL_ID)?(e[i]={},e[i][ns.DATA_TRAIL_ID]=n.getAttribute(ns.DATA_TRAIL_ID)):e[i]="object"==typeof n&&null!==n?{}:JSON.parse(JSON.stringify(n))}return e}static deserializeDomEvent(t){const e=Pn.ie?document.createEvent("Event"):new window.Event("Event");for(const i in t)t.hasOwnProperty(i)&&"type"!==i&&("target"===i?e.targetSubstitute=t[i]:e[i]=t[i]);return e}static debugText(t,e){let i=e.timeStamp+" "+e.type;return null!==t&&(i=t.x+","+t.y+" "+i),i}static msPointerType(t){return t.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH?"touch":t.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_PEN?"pen":t.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE?"mouse":t.pointerType}}Ph.BASIC_EVENT_TYPES=()=>["down","up","cancel","move","wheel","enter","exit","over","out"],Ph.A11Y_EVENT_TYPES=()=>["focus","blur","click","input","change","keydown","keyup","focusin","focusout"],Ph.EVENT_PREFIXES=()=>["","mouse","touch","pen"],Ph.ALL_EVENT_TYPES=()=>Ph.EVENT_PREFIXES.map(t=>Ph.BASIC_EVENT_TYPES.map(e=>t+e)).concat([Ph.A11Y_EVENT_TYPES]),we.register("Input",Ph);var kh=Ph;const Ih=[];function Lh(t,e){this.initializeCanvasSelfDrawable(t,e)}we.register("CanvasNodeDrawable",Lh),Object(z.a)(da,Lh,{paintCanvas:function(t,e,i){if(!e.selfBounds.isEmpty()){const i=t.context;i.save(),i.fillStyle="black",i.strokeStyle="black",i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.lineDash=Ih,i.lineDashOffset=0,i.miterLimit=10,e.paintCanvas(i),i.restore()}}}),$t.a.mixInto(Lh);var Oh=Lh;function Rh(t){Wo.call(this,t),this.setRendererBitmask(An.bitmaskCanvas)}we.register("CanvasNode",Rh),Object(z.a)(Wo,Rh,{_mutatorKeys:["canvasBounds"].concat(Wo.prototype._mutatorKeys),setCanvasBounds:function(t){this.invalidateSelf(t)},set canvasBounds(t){this.setCanvasBounds(t)},getCanvasBounds:function(){return this.getSelfBounds()},get canvasBounds(){return this.getCanvasBounds()},isPainted:function(){return!0},paintCanvas:function(t){throw new Error("CanvasNode needs paintCanvas implemented")},invalidatePaint:function(){const t=this._drawables.length;for(let e=0;e<t;e++)this._drawables[e].markDirty()},canvasPaintSelf:function(t,e){this.paintCanvas(t.context)},containsPointSelf:function(t){return!1},getSelfShape:function(){return new cn},createCanvasDrawable:function(t,e){return Oh.createFromPool(t,e)}});var Nh=Rh;function Mh(t,e,i){this.display=t,this.rootNode=e;const n=document.createElementNS(mr,"svg");n.style.position="absolute",n.setAttribute("class",i),n.style.top=0,n.style.left=0,n.style["pointer-events"]="none",this.svg=n,t.sizeProperty.link((function(t){var e,i;e=t.width,i=t.height,n.setAttribute("width",e),n.setAttribute("height",i),n.style.clip="rect(0px,"+e+"px,"+i+"px,0px)"})),this.domElement=n}we.register("ShapeBasedOverlay",Mh),Object(z.a)(Object,Mh,{addShape:function(t,e,i){const n=document.createElementNS(mr,"path");let s=t.getSVGPath();s||(s="M0 0"),s?n.setAttribute("d",s):n.hasAttribute("d")&&n.removeAttribute("d"),n.setAttribute("style","fill: none; stroke: "+e+"; stroke-dasharray: 5, 3; stroke-dashoffset: "+(i?5:0)+"; stroke-width: 3;"),this.svg.appendChild(n)},update:function(){for(;this.svg.childNodes.length;)this.svg.removeChild(this.svg.childNodes[this.svg.childNodes.length-1]);this.addShapes()},addShapes:function(){},dispose:function(){}});var Bh=Mh;function Fh(t,e){Bh.call(this,t,e,"canvasNodeBoundsOverlay")}we.register("CanvasNodeBoundsOverlay",Fh),Object(z.a)(Bh,Fh,{addShapes:function(){const t=this;new yn(this.rootNode).eachTrailUnder((function(e){const i=e.lastNode();if(!i.isVisible())return!0;if(i instanceof Nh&&e.isVisible()){const n=e.getTransform();t.addShape(n.transformShape(cn.bounds(i.selfBounds)),"rgba(0,255,0,0.8)",!0)}}))}});var Vh=Fh;function qh(t,e){Bh.call(this,t,e,"canvasNodeBoundsOverlay")}we.register("FittedBlockBoundsOverlay",qh),Object(z.a)(Bh,qh,{addShapes:function(){const t=this;function e(e,n){e.willApplyTransform&&(n=n.timesMatrix(e.backboneInstance.relativeTransform.matrix)),e.blocks.forEach((function(e){!function(e,n){e.fitBounds&&!e.fitBounds.isEmpty()&&t.addShape(cn.bounds(e.fitBounds).transformed(n),"rgba(255,0,0,0.8)",!0);if(e.firstDrawable&&e.lastDrawable){for(let t=e.firstDrawable;t!==e.lastDrawable;t=t.nextDrawable)i(t,n);i(e.lastDrawable,n)}}(e,n)}))}function i(t,i){t.backboneInstance&&e(t,i)}e(this.display._rootBackbone,Ye.IDENTITY)}});var Hh=qh;const Yh=new ba("rgba(212,19,106,0.5)"),jh=new ba("rgba(250,40,135,0.9)"),Gh=new ba("rgba(233,113,166,1.0)"),zh=new ba("rgba(233,113,166,1.0)"),Wh=new ba("rgba(159,15,80,1.0)"),Uh=new ba("rgba(159,15,80,1.0)");function Xh(t,e){e=Object(s.a)({outerStroke:Yh,innerStroke:jh,outerLineWidth:null,innerLineWidth:null,transformSourceNode:null,lineDash:[],lineCap:Ri.DEFAULT_OPTIONS.lineCap,lineJoin:Ri.DEFAULT_OPTIONS.lineJoin,miterLimit:Ri.DEFAULT_OPTIONS.miterLimit,lineDashOffset:Ri.DEFAULT_OPTIONS.lineDashOffset},e),this._innerHighlightColor=e.innerStroke,this._outerHighlightColor=e.outerStroke,this.highlightChangedEmitter=new Br,Rl.call(this,t),this.options=e,this.transformSourceNode=e.transformSourceNode;const i=Object(s.a)({stroke:e.outerStroke},e);this.mutate(i),this.innerHighlightPath=new Rl(t,{stroke:e.innerStroke,lineDash:e.lineDash,lineCap:e.lineCap,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDashOffset:e.lineDashOffset}),this.addChild(this.innerHighlightPath),this.updateLineWidth()}we.register("FocusHighlightPath",Xh),Object(z.a)(Rl,Xh,{mutateWithInnerHighlight:function(t){Rl.prototype.mutate.call(this,t),this.innerHighlightPath&&this.innerHighlightPath.mutate(t),this.highlightChangedEmitter.emit()},makeDashed:function(){this.mutateWithInnerHighlight({lineDash:[7,7]})},setShape:function(t){Rl.prototype.setShape.call(this,t),this.innerHighlightPath&&this.innerHighlightPath.setShape(t),this.highlightChangedEmitter.emit()},updateLineWidth:function(t){t=t||this,this.lineWidth=this.getOuterLineWidth(t),this.innerHighlightPath.lineWidth=this.getInnerLineWidth(t),this.highlightChangedEmitter.emit()},getOuterLineWidth:function(t){return this.options.outerLineWidth?this.options.outerLineWidth:Xh.getOuterLineWidthFromNode(t)},getInnerLineWidth:function(t){return this.options.innerLineWidth?this.options.innerLineWidth:Xh.getInnerLineWidthFromNode(t)},setInnerHighlightColor:function(t){this._innerHighlightColor=t,this.innerHighlightPath.setStroke(t),this.highlightChangedEmitter.emit()},set innerHighlightColor(t){this.setInnerHighlightColor(t)},getInnerHighlightColor:function(){return this._innerHighlightColor},get innerHighlightColor(){return this.getInnerHighlightColor()},setOuterHighlightColor:function(t){this._outerHighlightColor=t,this.setStroke(t),this.highlightChangedEmitter.emit()},set outerHighlightColor(t){this.setOuterHighlightColor(t)},getOuterHighlightColor:function(){return this._outerHighlightColor},get outerHighlightColor(){return this.getOuterHighlightColor()},getUniqueHighlightTrail:function(){return this.transformSourceNode.getUniqueTrail()}},{OUTER_FOCUS_COLOR:Yh,INNER_FOCUS_COLOR:jh,INNER_LIGHT_GROUP_FOCUS_COLOR:Gh,OUTER_LIGHT_GROUP_FOCUS_COLOR:zh,INNER_DARK_GROUP_FOCUS_COLOR:Wh,OUTER_DARK_GROUP_FOCUS_COLOR:Uh,GROUP_OUTER_LINE_WIDTH:2,GROUP_INNER_LINE_WIDTH:2,getInnerLineWidthFromNode:function(t){return 2.5/Xh.getWidthMagnitudeFromTransform(t)},getOuterLineWidthFromNode:function(t){return 4/Xh.getWidthMagnitudeFromTransform(t)},getWidthMagnitudeFromTransform:function(t){return t.transform.transformDelta2(te.a.X_UNIT).magnitude},getDilationCoefficient:function(t){return.75*Xh.getOuterLineWidthFromNode(t)},getGroupDilationCoefficient:function(t){return 1.9*Xh.getOuterLineWidthFromNode(t)}});var Kh=Xh;function Qh(t,e){e=Object(s.a)({useLocalBounds:!0,transformSourceNode:t,outerLineWidth:null,innerLineWidth:null,dilationCoefficient:null,useGroupDilation:!1},e),this.useLocalBounds=e.useLocalBounds,this.useGroupDilation=e.useGroupDilation,this.dilationCoefficient=e.dilationCoefficient,Kh.call(this,null,e),this.outerLineWidth=e.outerLineWidth,this.innerLineWidth=e.innerLineWidth,this.observedBoundsProperty=null,this.boundsListener=null,t&&this.setShapeFromNode(t)}we.register("FocusHighlightFromNode",Qh),Object(z.a)(Kh,Qh,{setShapeFromNode:function(t){this.observedBoundsProperty&&this.observedBoundsProperty.unlink(this.boundsListener),this.observedBoundsProperty=this.useLocalBounds?t.localBoundsProperty:t.boundsProperty,this.boundsListener=e=>{if(this.observedBoundsProperty.get(),!e.isFinite())return;let i=this.dilationCoefficient;null===this.dilationCoefficient&&(i=this.useGroupDilation?Kh.getGroupDilationCoefficient(t):Kh.getDilationCoefficient(t));const n=e.dilated(i);this.updateLineWidthFromNode(t),this.setShape(cn.bounds(n))},this.observedBoundsProperty.link(this.boundsListener)},updateLineWidthFromNode:function(t){this.lineWidth=this.outerLineWidth||Kh.getOuterLineWidthFromNode(t),this.innerHighlightPath.lineWidth=this.innerLineWidth||Kh.getInnerLineWidthFromNode(t)}});var Zh=Qh;let Jh=Kh.OUTER_FOCUS_COLOR,$h=Kh.INNER_FOCUS_COLOR,tu=Kh.INNER_LIGHT_GROUP_FOCUS_COLOR,eu=Kh.OUTER_LIGHT_GROUP_FOCUS_COLOR;function iu(t,e){this.display=t,this.focusRootNode=e,this.trail=null,this.node=null,this.mode=null,this.groupMode=null,this.groupHighlightNode=null,this.transformTracker=null,this.groupTransformTracker=null,this.nodeFocusHighlight=null,this.transformDirty=!0,this.highlightNode=new Wo,this.focusRootNode.addChild(this.highlightNode),this.focusDisplay=new pu(this.focusRootNode,{width:this.width,height:this.height,allowWebGL:t._allowWebGL,allowCSSHacks:!1,accessibility:!1,interactive:!1}),this.domElement=this.focusDisplay.domElement,this.domElement.style.pointerEvents="none",this.shapeFocusHighlightPath=new Kh(null),this.boundsFocusHighlightPath=new Zh(null,{useLocalBounds:!0}),this.groupFocusHighlightPath=new Zh(null,{useLocalBounds:!0,useGroupDilation:!0,outerLineWidth:Kh.GROUP_OUTER_LINE_WIDTH,innerLineWidth:Kh.GROUP_INNER_LINE_WIDTH,innerStroke:Kh.FOCUS_COLOR}),this.highlightNode.addChild(this.shapeFocusHighlightPath),this.highlightNode.addChild(this.boundsFocusHighlightPath),this.focusRootNode.addChild(this.groupFocusHighlightPath),this.boundsListener=this.onBoundsChange.bind(this),this.transformListener=this.onTransformChange.bind(this),this.focusListener=this.onFocusChange.bind(this),this.focusHighlightListener=this.onFocusHighlightChange.bind(this),pu.focusProperty.link(this.focusListener)}we.register("FocusOverlay",iu),Object(z.a)(Object,iu,{dispose:function(){this.hasHighlight()&&this.deactivateHighlight(),pu.focusProperty.unlink(this.focusListener)},hasHighlight:function(){return!!this.trail},activateHighlight:function(t){this.trail=t,this.node=t.lastNode();const e=this.node.focusHighlight;let i=t;"invisible"===e?this.mode="invisible":e instanceof cn?(this.mode="shape",this.shapeFocusHighlightPath.visible=!0,this.shapeFocusHighlightPath.setShape(e)):e instanceof Wo?(this.mode="node",e.transformSourceNode&&(i=e.getUniqueHighlightTrail()),this.nodeFocusHighlight=e,this.node.focusHighlightLayerable?this.nodeFocusHighlight.visible=!0:(this.nodeFocusHighlight.visible=!0,this.highlightNode.addChild(this.nodeFocusHighlight))):(this.mode="bounds",this.boundsFocusHighlightPath.setShapeFromNode(this.node),this.boundsFocusHighlightPath.visible=!0,this.node.localBoundsProperty.lazyLink(this.boundsListener),this.onBoundsChange()),this.node.focusHighlightChangedEmitter.addListener(this.focusHighlightListener),this.transformTracker=new In(i,{isStatic:!0}),this.transformTracker.addListener(this.transformListener),this.activateGroupHighlights(),this.updateHighlightColors(),this.transformDirty=!0},deactivateHighlight:function(){"shape"===this.mode?this.shapeFocusHighlightPath.visible=!1:"node"===this.mode?this.node.focusHighlightLayerable?this.node.focusHighlight.visible=!1:(this.highlightNode.removeChild(this.nodeFocusHighlight),this.nodeFocusHighlight=null):"bounds"===this.mode&&(this.boundsFocusHighlightPath.visible=!1,this.node.localBoundsProperty.unlink(this.boundsListener)),this.node.focusHighlightChangedEmitter.removeListener(this.focusHighlightListener),this.deactivateGroupHighlights(),this.trail=null,this.node=null,this.mode=null,this.transformTracker.removeListener(this.transformListener),this.transformTracker.dispose()},activateGroupHighlights:function(){const t=this.trail;for(let e=0;e<t.length;e++){const i=t.nodes[e],n=i.groupFocusHighlight;if(n){const e=t.upToNode(i);this.groupTransformTracker=new In(e),this.groupTransformTracker.addListener(this.transformListener),"boolean"==typeof n?(this.groupFocusHighlightPath.setShapeFromNode(i),this.groupFocusHighlightPath.visible=!0,this.groupHighlightNode=this.groupFocusHighlightPath,this.groupMode="bounds"):n instanceof Wo&&(this.groupHighlightNode=n,this.focusRootNode.addChild(n),this.groupMode="node");break}}},updateHighlightColors:function(){"shape"===this.mode?(this.shapeFocusHighlightPath.innerHighlightColor!==iu.innerHighlightColor&&this.shapeFocusHighlightPath.setInnerHighlightColor(iu.innerHighlightColor),this.shapeFocusHighlightPath.outerHighlightColor!==iu.outerHighlightColor&&this.shapeFocusHighlightPath.setOuterHighlightColor(iu.outerHighlightColor)):"bounds"===this.mode&&(this.boundsFocusHighlightPath.innerHighlightColor!==iu.innerHighlightColor&&this.boundsFocusHighlightPath.setInnerHighlightColor(iu.innerHighlightColor),this.boundsFocusHighlightPath.outerHighlightColor!==iu.outerHighlightColor&&this.boundsFocusHighlightPath.setOuterHighlightColor(iu.outerHighlightColor)),this.groupMode&&(this.groupFocusHighlightPath.innerHighlightColor!==iu.innerGroupHighlightColor&&this.groupFocusHighlightPath.setInnerHighlightColor(iu.innerGroupHighlightColor),this.groupFocusHighlightPath.outerHighlightColor!==iu.outerGroupHighlightColor&&this.groupFocusHighlightPath.setOuterHighlightColor(iu.outerGroupHighlightColor))},deactivateGroupHighlights:function(){this.groupMode&&("bounds"===this.groupMode?this.groupFocusHighlightPath.visible=!1:"node"===this.groupMode&&this.focusRootNode.removeChild(this.groupHighlightNode),this.groupMode=null,this.groupHighlightNode=null,this.groupTransformTracker.removeListener(this.transformListener),this.groupTransformTracker.dispose())},afterTransform:function(){"shape"===this.mode?this.shapeFocusHighlightPath.updateLineWidth():"bounds"===this.mode?this.boundsFocusHighlightPath.updateLineWidth():"node"===this.mode&&this.node.focusHighlight.updateLineWidth&&this.node.focusHighlight.updateLineWidth(this.node)},onTransformChange:function(){this.transformDirty=!0},onBoundsChange:function(){this.boundsFocusHighlightPath.setShapeFromNode(this.node)},onFocusChange:function(t){const e=t&&t.display===this.display?t.trail:null;this.hasHighlight()&&this.deactivateHighlight(),e&&this.activateHighlight(e)},onFocusHighlightChange:function(){this.onFocusChange(pu.focus)},update:function(){this.hasHighlight()&&this.transformDirty&&(this.transformDirty=!1,this.highlightNode.setMatrix(this.transformTracker.matrix),this.groupHighlightNode&&this.groupHighlightNode.setMatrix(this.groupTransformTracker.matrix),this.afterTransform()),this.display.size.equals(this.focusDisplay.size)||this.focusDisplay.setWidthHeight(this.display.width,this.display.height),this.focusDisplay.updateDisplay()}},{setInnerHighlightColor:function(t){$h=t},set innerHighlightColor(t){this.setInnerHighlightColor(t)},getInnerHighlightColor:function(){return $h},get innerHighlightColor(){return this.getInnerHighlightColor()},setOuterHilightColor:function(t){Jh=t},set outerHighlightColor(t){this.setOuterHilightColor(t)},getOuterHighlightColor:function(){return Jh},get outerHighlightColor(){return this.getOuterHighlightColor()},setInnerGroupHighlightColor:function(t){tu=t},set innerGroupHighlightColor(t){this.setInnerGroupHighlightColor(t)},getInnerGroupHighlightColor:function(){return tu},get innerGroupHighlightColor(){return this.getInnerGroupHighlightColor()},setOuterGroupHighlightColor:function(t){eu=t},set outerGroupHighlightColor(t){this.setOuterGroupHighlightColor(t)},getOuterGroupHighlightColor:function(){return eu},get outerGroupHighlightColor(){return this.getOuterGroupHighlightColor()}});var nu=iu;class su extends Bh{constructor(t,e){super(t,e,"hitAreaOverlay")}addShapes(){new yn(this.rootNode).eachTrailUnder(t=>{const e=t.lastNode();if(!e.isVisible()||!1===e.pickable)return!0;if(e.inputListeners.length&&t.isVisible()){const i=su.getLocalMouseShape(e),n=su.getLocalTouchShape(e),s=t.getMatrix();i.bounds.isEmpty()||this.addShape(i.transformed(s),"rgba(0,0,255,0.8)",!0),n.bounds.isEmpty()||this.addShape(n.transformed(s),"rgba(255,0,0,0.8)",!1)}})}static getLocalMouseShape(t){let e=cn.union([t.mouseArea?t.mouseArea instanceof cn?t.mouseArea:cn.bounds(t.mouseArea):t.getSelfShape(),...t.children.filter(e=>t.visible&&!1!==t.pickable).map(t=>su.getLocalMouseShape(t).transformed(t.matrix))]);return t.hasClipArea()&&(e=e.shapeIntersection(t.clipArea)),e}static getLocalTouchShape(t){let e=cn.union([t.touchArea?t.touchArea instanceof cn?t.touchArea:cn.bounds(t.touchArea):t.getSelfShape(),...t.children.filter(e=>t.visible&&!1!==t.pickable).map(t=>su.getLocalTouchShape(t).transformed(t.matrix))]);return t.hasClipArea()&&(e=e.shapeIntersection(t.clipArea)),e}}we.register("HitAreaOverlay",su);var ru=su;function ou(t,e){Bh.call(this,t,e,"mouseTouchAreaOverlay")}we.register("PointerAreaOverlay",ou),Object(z.a)(Bh,ou,{addShapes:function(){const t=this;new yn(this.rootNode).eachTrailUnder((function(e){const i=e.lastNode();if(!i.isVisible())return!0;if((i.mouseArea||i.touchArea)&&e.isVisible()){const n=e.getTransform();i.mouseArea&&t.addShape(n.transformShape(i.mouseArea.isBounds?cn.bounds(i.mouseArea):i.mouseArea),"rgba(0,0,255,0.8)",!0),i.touchArea&&t.addShape(n.transformShape(i.touchArea.isBounds?cn.bounds(i.touchArea):i.touchArea),"rgba(255,0,0,0.8)",!1)}}))}});var au=ou;function lu(t,e){const i=this;this.display=t,this.rootNode=e,this.pointerSVGContainer=document.createElement("div"),this.pointerSVGContainer.style.position="absolute",this.pointerSVGContainer.style.top=0,this.pointerSVGContainer.style.left=0,this.pointerSVGContainer.style["pointer-events"]="none";t.sizeProperty.lazyLink((function(t){i.pointerSVGContainer.setAttribute("width",t.width),i.pointerSVGContainer.setAttribute("height",t.height),i.pointerSVGContainer.style.clip="rect(0px,"+t.width+"px,"+t.height+"px,0px)"}));const n=Ye.IDENTITY.copy();this.pointerAdded=function(t){if(t.isKey)return;const e=document.createElementNS(mr,"svg");e.style.position="absolute",e.style.top=0,e.style.left=0,e.style["pointer-events"]="none",Ks.prepareForTransform(e,!1),e.setAttribute("width",21),e.setAttribute("height",21);const s=document.createElementNS(mr,"circle");s.setAttribute("cx",10.5),s.setAttribute("cy",10.5),s.setAttribute("r",10),s.setAttribute("style","fill:black;"),s.setAttribute("style","stroke:white;"),s.setAttribute("opacity","0.4");const r=function(){t instanceof Co&&(i.pointerSVGContainer.removeChild(e),t.removeInputListener(o))};var o={move:function(){t.point&&Ks.applyPreparedTransform(n.setToTranslation(t.point.x-10.5,t.point.y-10.5),e,!1)},up:r,cancel:r};t.addInputListener(o),o.move(),e.appendChild(s),i.pointerSVGContainer.appendChild(e)},t._input.addPointerAddedListener(this.pointerAdded),t._input&&t._input.mouse&&this.pointerAdded(t._input.mouse),this.domElement=this.pointerSVGContainer}we.register("PointerOverlay",lu),Object(z.a)(Object,lu,{dispose:function(){this.display._input.removePointerAddedListener(this.pointerAdded)},update:function(){}});var hu=lu;function uu(t,e){this.initializeDOMSelfDrawable(t,e),this.domElement=this.node._container,Ks.prepareForTransform(this.domElement,this.forceAcceleration)}we.register("DOMDrawable",uu),Object(z.a)(Ia,uu,{updateDOM:function(){this.transformDirty&&!this.node._preventTransform&&Ks.applyPreparedTransform(this.getTransformMatrix(),this.domElement,this.forceAcceleration),this.transformDirty=!1},dispose:function(){Ia.prototype.dispose.call(this),this.domElement=null}}),$t.a.mixInto(uu);var cu=uu;function du(t,e){if(e=Object(s.a)({width:e&&e.container&&e.container.clientWidth||640,height:e&&e.container&&e.container.clientHeight||480,allowCSSHacks:!0,allowSceneOverflow:!1,defaultCursor:"default",backgroundColor:null,preserveDrawingBuffer:!1,allowWebGL:!0,accessibility:!0,interactive:!0,listenToOnlyElement:!1,batchDOMEvents:!1,assumeFullWindow:!1,aggressiveContextRecreation:!0,passiveEvents:!Pn.safari&&null,allowBackingScaleAntialiasing:!0},e),this.options=e,this._accessible=e.accessibility,this._allowWebGL=e.allowWebGL,this.sizeProperty=new Pe(new re(this.options.width,this.options.height),{useDeepEquality:!0}),this._currentSize=new re(-1,-1),this._rootNode=t,this._rootNode.addRootedDisplay(this),this._rootBackbone=null,this._domElement=e&&e.container?oo.repurposeBackboneContainer(e.container):oo.createDivBackbone(),this._sharedCanvasInstances={},this._baseInstance=null,this._frameId=0,this._dirtyTransformRoots=[],this._dirtyTransformRootsWithoutPass=[],this._instanceRootsToDispose=[],this._drawablesToDispose=[],this._drawablesToChangeBlock=[],this._drawablesToUpdateLinks=[],this._changeIntervalsToDispose=[],this._lastCursor=null,this._currentBackgroundCSS=null,this._backgroundColor=null,this._requestAnimationFrameID=0,this._input=null,this._inputListeners=[],this._interactive=this.options.interactive,this._listenToOnlyElement=e.listenToOnlyElement,this._batchDOMEvents=e.batchDOMEvents,this._assumeFullWindow=e.assumeFullWindow,this._passiveEvents=e.passiveEvents,this._aggressiveContextRecreation=e.aggressiveContextRecreation,this._allowBackingScaleAntialiasing=e.allowBackingScaleAntialiasing,this._overlays=[],this._pointerOverlay=null,this._pointerAreaOverlay=null,this._hitAreaOverlay=null,this._canvasAreaBoundsOverlay=null,this._fittedBlockBoundsOverlay=null,this.applyCSSHacks(),this.setBackgroundColor(this.options.backgroundColor),this.scenery=we,this.utteranceQueue=new rh(!this.options.accessibility),this.options.accessibility){this._focusRootNode=new Wo,this._focusOverlay=new nu(this,this._focusRootNode),this.addOverlay(this._focusOverlay),this._unsortedAccessibleInstances=[],this.pointerFocus=null,this.activeNode=null,this.blockFocusCallbacks=!1,this._focusedNodeOnRemoveTrail,this._rootAccessibleInstance=As.createFromPool(null,this,new yn),Ds.rebuildInstanceTree(this._rootAccessibleInstance),this._domElement.appendChild(this._rootAccessibleInstance.peer.primarySibling);const t=this.utteranceQueue.getAriaLiveContainer();this._domElement.appendChild(t),t.style[js.userSelect]="none"}}we.register("Display",du),Object(z.a)(Object,du,Object(de.a)({getDOMElement:function(){return this._domElement},get domElement(){return this.getDOMElement()},updateDisplay:function(){if(window.sceneryDebugPause)return;const t=!!this._baseInstance;for(this._input&&this._input.validatePointers(),this._accessible&&this._rootAccessibleInstance.peer.updateSubtreePositioning(),this._rootNode.validateWatchedBounds(),this._baseInstance=this._baseInstance||vo.createFromPool(this,new yn(this._rootNode),!0,!1),this._baseInstance.baseSyncTree(),t&&this.markTransformRootDirty(this._baseInstance,this._baseInstance.isTransformed);this._drawablesToUpdateLinks.length;)this._drawablesToUpdateLinks.pop().updateLinks();for(;this._changeIntervalsToDispose.length;)this._changeIntervalsToDispose.pop().dispose();for(this._rootBackbone=this._rootBackbone||this._baseInstance.groupDrawable;this._drawablesToChangeBlock.length;){this._drawablesToChangeBlock.pop().updateBlock();0}for(0,this.updateDirtyTransformRoots(),this._baseInstance.updateVisibility(!0,!0,!1);this._instanceRootsToDispose.length;)this._instanceRootsToDispose.pop().dispose();for(0;this._drawablesToDispose.length;)this._drawablesToDispose.pop().dispose();if(this._rootBackbone.update(),this.updateCursor(),this.updateBackgroundColor(),this.updateSize(),this._overlays.length){let t=this._rootBackbone.lastZIndex;for(let e=0;e<this._overlays.length;e++){const i=this._overlays[e];i.domElement.style.zIndex=t++,i.update()}}this._frameId++,Ds.auditAccessibleDisplays(this.rootNode)},updateSize:function(){let t=!1;this.size.width!==this._currentSize.width&&(t=!0,this._currentSize.width=this.size.width,this._domElement.style.width=this.size.width+"px"),this.size.height!==this._currentSize.height&&(t=!0,this._currentSize.height=this.size.height,this._domElement.style.height=this.size.height+"px"),t&&!this.options.allowSceneOverflow&&(this._domElement.style.clip="rect(0px,"+this.size.width+"px,"+this.size.height+"px,0px)")},getRootNode:function(){return this._rootNode},get rootNode(){return this.getRootNode()},getSize:function(){return this.sizeProperty.value},get size(){return this.getSize()},getBounds:function(){return this.size.toBounds()},get bounds(){return this.getBounds()},setSize:function(t){this.sizeProperty.value=t},setWidthHeight:function(t,e){this.setSize(new re(t,e))},getWidth:function(){return this.size.width},get width(){return this.getWidth()},setWidth:function(t){this.getWidth()!==t&&this.setSize(new re(t,this.getHeight()))},set width(t){this.setWidth(t)},getHeight:function(){return this.size.height},get height(){return this.getHeight()},setHeight:function(t){this.getHeight()!==t&&this.setSize(new re(this.getWidth(),t))},set height(t){this.setHeight(t)},setBackgroundColor:function(t){this._backgroundColor=t},set backgroundColor(t){this.setBackgroundColor(t)},getBackgroundColor:function(){return this._backgroundColor},get backgroundColor(){return this.getBackgroundColor()},get interactive(){return this._interactive},set interactive(t){this._interactive=t,!this._interactive&&this._input&&(this._input.interruptPointers(),this._input.clearBatchedEvents(),this._input.removeTemporaryPointers(),this._rootNode.interruptSubtreeInput()),this.options.accessibility&&(this._interactive||(this.activeNode=du.focusedNode,this.activeNode&&this.activeNode.blur()),this.accessibleDOMElement.hidden=!this._interactive)},addOverlay:function(t){this._overlays.push(t),this._domElement.appendChild(t.domElement),t.domElement.setAttribute("aria-hidden",!0)},removeOverlay:function(t){this._domElement.removeChild(t.domElement),this._overlays.splice(_.indexOf(this._overlays,t),1)},markUnsortedAccessibleInstance:function(t){this._unsortedAccessibleInstances.push(t)},sortAccessibleInstances:function(){const t=du.focusedNode;for(;this._unsortedAccessibleInstances.length;)this._unsortedAccessibleInstances.pop().sortChildren();t&&t.focus()},getAccessibleDOMElement:function(){return this._rootAccessibleInstance.peer.primarySibling},get accessibleDOMElement(){return this.getAccessibleDOMElement()},getUsedRenderersBitmask:function(){return function t(e){let i=0;return _.each(e.blocks,(function(e){e instanceof pr&&e.domDrawable instanceof oo?i|=t(e.domDrawable):i|=e.renderer})),i}(this._rootBackbone)&An.bitmaskRendererArea},markTransformRootDirty:function(t,e){e?this._dirtyTransformRoots.push(t):this._dirtyTransformRootsWithoutPass.push(t)},updateDirtyTransformRoots:function(){for(;this._dirtyTransformRoots.length;)this._dirtyTransformRoots.pop().relativeTransform.updateTransformListenersAndCompute(!1,!1,this._frameId,!0);for(;this._dirtyTransformRootsWithoutPass.length;)this._dirtyTransformRootsWithoutPass.pop().relativeTransform.updateTransformListenersAndCompute(!1,!1,this._frameId,!1)},markDrawableChangedBlock:function(t){this._drawablesToChangeBlock.push(t)},markInstanceRootForDisposal:function(t){this._instanceRootsToDispose.push(t)},markDrawableForDisposal:function(t){this._drawablesToDispose.push(t)},markDrawableForLinksUpdate:function(t){this._drawablesToUpdateLinks.push(t)},markChangeIntervalToDispose:function(t){this._changeIntervalsToDispose.push(t)},updateBackgroundColor:function(){const t=null===this._backgroundColor?"":this._backgroundColor.toCSS?this._backgroundColor.toCSS():this._backgroundColor;t!==this._currentBackgroundCSS&&(this._currentBackgroundCSS=t,this._domElement.style.backgroundColor=t)},updateCursor:function(){if(this._input&&this._input.mouse&&this._input.mouse.point){if(this._input.mouse.cursor)return this.setSceneCursor(this._input.mouse.cursor);const t=this._rootNode.trailUnderPointer(this._input.mouse);if(t)for(let e=t.getCursorCheckIndex();e>=0;e--){const i=t.nodes[e],n=i.getCursor();if(n)return this.setSceneCursor(n)}}return this.setSceneCursor(this.options.defaultCursor)},setElementCursor(t){this._domElement.style.cursor=t,this._assumeFullWindow&&(document.body.style.cursor=t)},setSceneCursor:function(t){if(t!==this._lastCursor){this._lastCursor=t;const e=du.customCursors[t];if(e)for(let t=e.length-1;t>=0;t--)this.setElementCursor(e[t]);else this.setElementCursor(t)}},applyCSSHacks:function(){this.options.allowSceneOverflow||(this._domElement.style.overflow="hidden"),document.onselectstart=function(){return!1},this._domElement.style.msTouchAction="none",document.body.style.msContentZooming="none",js.setStyle(this._domElement,js.fontSmoothing,"antialiased"),this.options.allowCSSHacks&&(js.setStyle(this._domElement,js.userDrag,"none"),js.setStyle(this._domElement,js.userSelect,"none"),js.setStyle(this._domElement,js.touchAction,"none"),js.setStyle(this._domElement,js.touchCallout,"none"),js.setStyle(this._domElement,js.tapHighlightColor,"rgba(0,0,0,0)"))},canvasDataURL:function(t){this.canvasSnapshot((function(e){t(e.toDataURL())}))},canvasSnapshot:function(t){const e=document.createElement("canvas");e.width=this.size.width,e.height=this.size.height;const i=e.getContext("2d");this._rootNode.renderToCanvas(e,i,(function(){t(e,i.getImageData(0,0,e.width,e.height))}),this.domElement.style.backgroundColor)},setPointerDisplayVisible:function(t){t!==!!this._pointerOverlay&&(t?(this._pointerOverlay=new hu(this,this._rootNode),this.addOverlay(this._pointerOverlay)):(this.removeOverlay(this._pointerOverlay),this._pointerOverlay.dispose(),this._pointerOverlay=null))},setPointerAreaDisplayVisible:function(t){t!==!!this._pointerAreaOverlay&&(t?(this._pointerAreaOverlay=new au(this,this._rootNode),this.addOverlay(this._pointerAreaOverlay)):(this.removeOverlay(this._pointerAreaOverlay),this._pointerAreaOverlay.dispose(),this._pointerAreaOverlay=null))},setHitAreaDisplayVisible:function(t){t!==!!this._hitAreaOverlay&&(t?(this._hitAreaOverlay=new ru(this,this._rootNode),this.addOverlay(this._hitAreaOverlay)):(this.removeOverlay(this._hitAreaOverlay),this._hitAreaOverlay.dispose(),this._hitAreaOverlay=null))},setCanvasNodeBoundsVisible:function(t){t!==!!this._canvasAreaBoundsOverlay&&(t?(this._canvasAreaBoundsOverlay=new Vh(this,this._rootNode),this.addOverlay(this._canvasAreaBoundsOverlay)):(this.removeOverlay(this._canvasAreaBoundsOverlay),this._canvasAreaBoundsOverlay.dispose(),this._canvasAreaBoundsOverlay=null))},setFittedBlockBoundsVisible:function(t){t!==!!this._fittedBlockBoundsOverlay&&(t?(this._fittedBlockBoundsOverlay=new Hh(this,this._rootNode),this.addOverlay(this._fittedBlockBoundsOverlay)):(this.removeOverlay(this._fittedBlockBoundsOverlay),this._fittedBlockBoundsOverlay.dispose(),this._fittedBlockBoundsOverlay=null))},resizeOnWindowResize:function(){const t=this,e=function(){t.setWidthHeight(window.innerWidth,window.innerHeight)};window.addEventListener("resize",e),e()},updateOnRequestAnimationFrame:function(t){let e=0,i=0;const n=this;!function s(){n._requestAnimationFrameID=window.requestAnimationFrame(s,n._domElement);const r=Date.now();0!==e&&(i=(r-e)/1e3),e=r,j.emit(i),t&&t(i),n.updateDisplay()}()},cancelUpdateOnRequestAnimationFrame:function(){window.cancelAnimationFrame(this._requestAnimationFrameID)},initializeEvents:function(t){const e=new kh(this,!this._listenToOnlyElement,this._batchDOMEvents,this._assumeFullWindow,this._passiveEvents,t);this._input=e,e.connectListeners()},detachEvents:function(){this._input.disconnectListeners(),this._input=null},addInputListener:function(t){return _.includes(this._inputListeners,t)||this._inputListeners.push(t),this},removeInputListener:function(t){return this._inputListeners.splice(_.indexOf(this._inputListeners,t),1),this},hasInputListener:function(t){for(let e=0;e<this._inputListeners.length;e++)if(this._inputListeners[e]===t)return!0;return!1},getInputListeners:function(){return this._inputListeners.slice(0)},get inputListeners(){return this.getInputListeners()},interruptInput:function(){const t=this.inputListeners;for(let e=0;e<t.length;e++){const i=t[e];i.interrupt&&i.interrupt()}return this},ensureNotPainting:function(){},loseWebGLContexts:function(){!function t(e){e.blocks&&e.blocks.forEach((function(e){e.gl&&Ks.loseContext(e.gl);for(let i=e.firstDrawable;null!==i&&(t(i),i!==e.lastDrawable);i=i.nextDrawable);}))}(this._rootBackbone)},inspect:function(){localStorage.scenerySnapshot=JSON.stringify(we.serialize(this))},getDebugHTML:function(){const t="font-weight: bold; font-size: 120%; margin-top: 5px;";let e=0,i="";i+='<div style="'+t+'">Display Summary</div>',i+=this.size.toString()+" frame:"+this._frameId+" input:"+!!this._input+" cursor:"+this._lastCursor+"<br/>",i+="Nodes: "+function t(e){let i=1;for(let n=0;n<e.children.length;n++)i+=t(e.children[n]);return i}(this._rootNode)+"<br/>",i+=this._baseInstance?"Instances: "+function t(e){let i=1;for(let n=0;n<e.children.length;n++)i+=t(e.children[n]);return i}(this._baseInstance)+"<br/>":"",i+=this._rootBackbone?"Drawables: "+function t(e){let i=1;if(e.blocks)_.each(e.blocks,(function(e){i+=t(e)}));else if(e.firstDrawable&&e.lastDrawable){for(let n=e.firstDrawable;n!==e.lastDrawable;n=n.nextDrawable)i+=t(n);i+=t(e.lastDrawable)}return i}(this._rootBackbone)+"<br/>":"";const n={};function s(t){const e=t.constructor.name;n[e]?n[e]++:n[e]=1}i+=this._baseInstance?"Retained Drawables: "+function t(e){let i=0;e.selfDrawable&&(s(e.selfDrawable),i++),e.groupDrawable&&(s(e.groupDrawable),i++),e.sharedCacheDrawable&&(s(e.sharedCacheDrawable),i++);for(let n=0;n<e.children.length;n++)i+=t(e.children[n]);return i}(this._baseInstance)+"<br/>":"";for(const h in n)i+="&nbsp;&nbsp;&nbsp;&nbsp;"+h+": "+n[h]+"<br/>";function r(t){if(!t.firstDrawable||!t.lastDrawable)return;const i=t.domDrawable&&t.domDrawable.blocks;let n='<div style="margin-left: '+20*e+'px">';if(n+=t.toString(),i||(n+=" ("+t.drawableCount+" drawables)"),n+="</div>",e+=1,i)for(let e=0;e<t.domDrawable.blocks.length;e++)n+=r(t.domDrawable.blocks[e]);return e-=1,n}if(this._rootBackbone){i+='<div style="'+t+'">Block Summary</div>';for(let t=0;t<this._rootBackbone.blocks.length;t++)i+=r(this._rootBackbone.blocks[t])}function o(t){let e="";function i(t){e+=' <span style="color: #008">'+t+"</span>"}const n=t.node;e+=t.id,e+=" "+(n.constructor.name?n.constructor.name:"?"),e+=' <span style="font-weight: '+(n.isPainted()?"bold":"normal")+'">'+n.id+"</span>",e+=n.getDebugHTMLExtras(),n.visible||i("invis"),t.visible||i("I-invis"),t.relativeVisible||i("I-rel-invis"),t.selfVisible||i("I-self-invis"),t.fittability.ancestorsFittable||i("nofit-ancestor"),t.fittability.selfFittable||i("nofit-self"),!0===n.pickable&&i("pickable"),!1===n.pickable&&i("unpickable"),t.trail.isPickable()&&i('<span style="color: #808">hits</span>'),n.clipArea&&i("clipArea"),n.mouseArea&&i("mouseArea"),n.touchArea&&i("touchArea"),n.getInputListeners().length&&i("inputListeners"),n.getRenderer()&&i("renderer:"+n.getRenderer()),n.isLayerSplit()&&i("layerSplit"),n.opacity<1&&i("opacity:"+n.opacity),n._boundsEventCount>0&&i('<span style="color: #800">boundsListen:'+n._boundsEventCount+":"+n._boundsEventSelfCount+"</span>");let s="";switch(n.transform.getMatrix().type){case Ye.Types.IDENTITY:s="";break;case Ye.Types.TRANSLATION_2D:s="translated";break;case Ye.Types.SCALING:s="scale";break;case Ye.Types.AFFINE:s="affine";break;case Ye.Types.OTHER:s="other";break;default:throw new Error("invalid matrix type: "+n.transform.getMatrix().type)}var r;return s&&(e+=' <span style="color: #88f" title="'+n.transform.getMatrix().toString().replace("\n","&#10;")+'">'+s+"</span>"),e+=' <span style="color: #888">[Trail '+t.trail.indices.join(".")+"]</span>",e+=' <span style="color: #c88">'+(((r=t.state)?r.toString():r+"")+"</span>"),e+=' <span style="color: #8c8">'+n._rendererSummary.bitmask.toString(16)+(n._rendererBitmask!==An.bitmaskNodeDefault?" ("+n._rendererBitmask.toString(16)+")":"")+"</span>",e}function a(t){let e=t.toString();return t.visible&&(e="<strong>"+e+"</strong>"),t.dirty&&(e+=t.dirty?' <span style="color: #c00;">[x]</span>':""),t.fittable||(e+=t.dirty?' <span style="color: #0c0;">[no-fit]</span>':""),e}function l(t){let n='<div style="margin-left: '+20*e+'px">';function s(t,e){n+=' <span style="color: #888">'+t+":"+a(e)+"</span>"}n+=o(t),t.selfDrawable&&s("self",t.selfDrawable),t.groupDrawable&&s("group",t.groupDrawable),t.sharedCacheDrawable&&s("sharedCache",t.sharedCacheDrawable),n+="</div>",i+=n,e+=1,_.each(t.children,(function(t){l(t)})),e-=1}return this._baseInstance&&(i+='<div style="'+t+'">Root Instance Tree</div>',l(this._baseInstance)),_.each(this._sharedCanvasInstances,(function(e){i+='<div style="'+t+'">Shared Canvas Instance Tree</div>',l(e)})),this._rootBackbone&&(i+='<div style="font-weight: bold;">Root Drawable Tree</div>',function t(n){let s='<div style="margin-left: '+20*e+'px">';if(s+=a(n),n.instance?(s+=' <span style="color: #0a0;">('+n.instance.trail.toPathString()+")</span>",s+="&nbsp;&nbsp;&nbsp;"+o(n.instance)):n.backboneInstance&&(s+=' <span style="color: #a00;">('+n.backboneInstance.trail.toPathString()+")</span>",s+="&nbsp;&nbsp;&nbsp;"+o(n.backboneInstance)),s+="</div>",i+=s,n.blocks)e+=1,_.each(n.blocks,(function(e){t(e)})),e-=1;else if(n.firstDrawable&&n.lastDrawable){e+=1;for(let e=n.firstDrawable;e!==n.lastDrawable;e=e.nextDrawable)t(e);t(n.lastDrawable),e-=1}}(this._rootBackbone)),i},getDebugURI(){return"data:text/html;charset=utf-8,"+encodeURIComponent('<!DOCTYPE html><html lang="en"><head><title>Scenery Debug Snapshot</title></head><body style="font-size: 12px;">'+this.getDebugHTML()+"</body></html>")},popupDebug(){window.open(this.getDebugURI())},iframeDebug(){const t=document.createElement("iframe");t.width=window.innerWidth,t.height=window.innerHeight,t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.zIndex="10000",document.body.appendChild(t),t.contentWindow.document.open(),t.contentWindow.document.write(this.getDebugHTML()),t.contentWindow.document.close(),t.contentWindow.document.body.style.background="white";const e=document.createElement("button");e.style.position="absolute",e.style.top="0",e.style.right="0",e.style.zIndex="10001",document.body.appendChild(e),e.textContent="close",["pointerdown","click","touchdown"].forEach(i=>{e.addEventListener(i,()=>{document.body.removeChild(t),document.body.removeChild(e)},!0)})},getAccessibleDebugHTML:function(){let t="";const e="font-weight: bold; font-size: 120%; margin-top: 5px;",i="&nbsp;&nbsp;&nbsp;&nbsp;";t+='<div style="'+e+'">Accessible Instances</div><br>',function e(n,s){t+=s+oa((n.isRootInstance?"":n.node.tagName)+" "+n.toString())+"<br>",n.children.forEach((function(t){e(t,s+i)}))}(this._rootAccessibleInstance,""),t+='<br><div style="'+e+'">Parallel DOM</div><br>';let n=this._rootAccessibleInstance.peer.primarySibling.outerHTML;n=n.replace(/></g,">\n<");const s=n.split("\n");let r="";for(let o=0;o<s.length;o++){const e=s[o],n="</"===e.slice(0,2);n&&(r=r.slice(i.length)),t+=r+oa(e)+"<br>",n||(r+=i)}return t},foreignObjectRasterization:function(t){const e={};let i=0;function n(t){t.id||(t.id="unknown-canvas-"+i++),e[t.id]=t.toDataURL()}!function t(e){if(e.blocks)_.each(e.blocks,(function(e){t(e)}));else if(e.firstDrawable&&e.lastDrawable){for(let i=e.firstDrawable;i!==e.lastDrawable;i=i.nextDrawable)t(i);t(e.lastDrawable),e.canvas&&e.canvas instanceof window.HTMLCanvasElement&&n(e.canvas)}cu&&e instanceof cu&&(e.domElement instanceof window.HTMLCanvasElement&&n(e.domElement),Array.prototype.forEach.call(e.domElement.getElementsByTagName("canvas"),(function(t){n(t)})))}(this._rootBackbone);const s=document.implementation.createHTMLDocument("");s.documentElement.innerHTML=this.domElement.outerHTML,s.documentElement.setAttribute("xmlns",s.documentElement.namespaceURI);let r=s.documentElement.getElementsByTagName("canvas");r=Array.prototype.slice.call(r);for(let f=0;f<r.length;f++){const t=r[f],i=t.style.cssText,n=s.createElement("img"),o=e[t.id];n.src=o,n.setAttribute("style",i),t.parentNode.replaceChild(n,t)}const o=this.width,a=this.height,l=function(){du.elementToSVGDataURL(s.documentElement,o,a,t)};let h=0,u=!1;const c=Array.prototype.slice.call(s.documentElement.getElementsByTagName("image"));for(let f=0;f<c.length;f++){var d=c[f],p=d.getAttribute("xlink:href");"data:"!==p.slice(0,5)&&(h++,u=!0,function(){const t=new window.Image,e=d;t.onload=function(){const i=document.createElement("canvas");i.width=t.width,i.height=t.height,i.getContext("2d").drawImage(t,0,0),e.setAttribute("xlink:href",i.toDataURL()),0==--h&&l()},t.onerror=function(){0==--h&&l()},t.src=p}())}u||l()},popupRasterization:function(){this.foreignObjectRasterization(window.open)},dispose:function(){this._input&&this.detachEvents(),this._rootNode.removeRootedDisplay(this),this._accessible&&this._rootAccessibleInstance.dispose()}}),{elementToSVGDataURL:function(t,e,i,n){const s=document.createElement("canvas"),r=s.getContext("2d");s.width=e,s.height=i;const o='<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+i+'"><foreignObject width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml">'+(new window.XMLSerializer).serializeToString(t)+"</div></foreignObject></svg>",a=new window.Image;a.onload=function(){r.drawImage(a,0,0),n(s.toDataURL())},a.onerror=function(){n(null)};const l=new window.TextEncoderLite("utf-8").encode(o),h=window.fromByteArray(l);a.src="data:image/svg+xml;base64,"+h},set focus(t){let e;this.focusProperty.value&&(e=this.focusedNode),this.focusProperty.value=t,e&&!t&&e.blur()},get focus(){return this.focusProperty.value},getFocusedNode:function(){let t=null;const e=this.focusProperty.get();return e&&(t=e.trail.lastNode()),t},get focusedNode(){return this.getFocusedNode()}}),du.customCursors={"scenery-grab-pointer":["grab","-moz-grab","-webkit-grab","pointer"],"scenery-grabbing-pointer":["grabbing","-moz-grabbing","-webkit-grabbing","pointer"]},du.focusProperty=new Ot(null,{tandem:T.a.GENERAL_MODEL.createTandem("focusProperty"),phetioDocumentation:"Stores the current focus in the simulation, null if there is nothing focused. This is not updated based on mouse or touch input, only keyboard and other alternative inputs. Note that this only applies to simulations that support alternative input.",phetioType:Bt(P(hh)),phetioState:!1,phetioFeatured:!0,phetioReadOnly:!0}),du.userGestureEmitter=new Br,du.keyStateTracker=new ph,du.keyStateTracker.attachToDocument(),du.assertSubtreeDisposed=function(t){0};var pu=du;class fu extends Ee{constructor(t,e,i){super(!1,i),this.node=t,this.display=e,this.updateListener=this.updateValue.bind(this),this.changedInstanceListener=this.changedInstance.bind(this),t.changedInstanceEmitter.addListener(this.changedInstanceListener);const n=t.instances;for(let s=0;s<n.length;s++)this.changedInstance(n[s],!0)}updateValue(){this.value=this.node.wasDisplayed(this.display)}changedInstance(t,e){e?t.visibleEmitter.addListener(this.updateListener):t.visibleEmitter.removeListener(this.updateListener),this.updateValue()}dispose(){const t=this.node.instances;for(let e=0;e<t.length;e++)this.changedInstance(t[e],!1);this.node.changedInstanceEmitter.removeListener(this.changedInstanceListener),super.dispose()}}we.register("DisplayedProperty",fu);var mu=fu;const gu="data:audio/mpeg;base64,//twxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAvAAA6xgAFBQoKEBAVFRsbICAmJisrKzExNjY7O0FBRkZMTFFRV1dXXFxiYmdnbGxycnd3fX2CgoKIiI2Nk5OYmJ2do6OoqK6urrOzubm+vsTEycnOztTU2dnZ39/k5Orq7+/19fr6//8AAAA5TEFNRTMuOTlyAc0AAAAAAAAAABRgJAW0QgAAYAAAOsbaTGT/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7cMQAAA7dBSqUMwACca6u+zCwACApgAAXXczyPLdxZhAGAydwQABDIj/xEZEREf+Lu7u7/u7ve0Rd3etERv//7EAGAydsYQhyCEf3va73/vdxEREREE78RGRBMmnYPg+DgIHC5QH3rB/EAIHCCgQBAoCDsEFAgCBQ5BAMS4P8Hwff8Tg+/Ln/wfw/dtCpCmhkRCphx5RJJZZeBkRuhKWvyydbusLOy2X0io3WgGaNyeDJBmxPyYwBMkkASVLJiZ9hJJ6AbpW4kk99nJJYE5sSUUDSD0v2Uxg7HWSUR3HErRtlPe9nmg/mKDjSLtiEPSe+7iuGG73WurKU76Uc2rl97P/53S1Zi7F7bTdrqiJq7Yyv/6/4uDVj3sbtRSKhqLrLWf///+W7VaNBODMAAAAAhEmcl8uCdsv/+3LECACSeTVr3PYAAgosbbjzDui0GmTRO96xrR6OSGLxYWzCh0mEDaIBVQ1xdHw5aTTq1RBj58yvaK7kDNUcale1G/E8611+6daha6+Nuve72X/mq1vX4PrMdWcrz6xDa5mtWNdU7m/T6NNo///rm27+dT9a+Zkd6fT/g32p4lBxRRZUUEZkSpCIsNCAtctr9kCSmrzv/66lVQ1EAAAYJYBOUKeF2LY8JcplQlohfTxvMumyOzxtvJFI2I1iV/2+b7RFSrZTO6aJ5MkgHPUtQkCaHAveIIOrPtb93Iau5+y1NzYL9Qj73xM3UbSGUWHvsqfnJ4icIKCqmRkXHi7Fv5s+RbK+5lfBfsWpgmsPoMiQNQhUGq3ftfu6lZEQCAAdhIBYSUm4Mg3UkuGF41iEbgUdPDc0Got2R//7cMQPANKRa2aHsMvSTarsuPYZuF8aBIK5DNG4yVq00SKu45iMbvD0hnRdGZTLhUOlQUHEQxZI0nUJm0eSI9baV9KuyiRjoJrc+33zekx8HOlcjZN4SRow5KvReT0TCBrN5PBctW1DG1BO3JGo6UyE3L+XmU8bx+21n2sOs5ISgSu9fP1RoRMsZ77pdCNCIABRCfq0cp2mW1JA00GjDcnVzET1hxp6vWITR2PwVqBRd95y4yfxk4HlFxmuHsEjwSERbPSaPrt1rjJUq8jTztuqiMIVvokgVZPpldExIjDdS9MOF3tn6v8gSijYMhZdMloS84Dyk4Lsoac1AqaTR5XfbyTuuj6NOqzp1t9l4VzLVkgtFz8qLkpm8bfVkTwqWRSIAENhDHdSKh8TFYPi2SliEOJphuJA5jj/+3LEDQDTVTNihj00Sj4o7Hj2GbhRwjFogi0oCEEKpXkDQ1XO4UdTsldrplPYETbDxQUMN2RoQRERZZJQlaICdRovjetIl4a1AypaO64eFzYtvYbaiI8RsJrwhKL8V0lctGLEIJwUhc2no1E10MGWlobJRcTJOnBVN9RTe8x5xQY8gEhGeivAD9Kj2clnP0/r/o7f29wRGQgQABBRd4DWoKRz9PqW7bVVK8wKpJGy86YXjydIg7IaYyTkMnA2HwkDgymWHRgeURnDAzUiQpfWJbqrP1doW7Dr9JpEmgU3ufBglsjOYkLEluXfsxgU5RIm/ko4vtOUFPCpwXcpak5aDGo/HwkcpnNSBxyquxpaphphuZesaERW8FTYmOECqEVujZJWxNWpYjUiAAAAABXCElsN96SxSHuec//7cMQKANBlN2XHsMvKbSrr0PSbWKeMk7RApAVSWnGtss2qvAuSCo2gVOx7aTWgRwdC5Q5XKyMtVNm2IZy4mpVmLH7NfyhaRF/heeJh3pNkpMM/k7aMTihApGZc84qJyHSjTrYzLy6ivnLwz22bTM7drVPZtI9MRR3bZ+9w9Ltel/97bnYuNAAL8LFCONVLkcZinWN2qQORCmlQaUCJT9lzChDkF0X1hSqptOVIxmM7Ucp0/MfyWQlmdLghBKmIp2aFZWM5lgbPoUhg7qxmN4ISJCKXSnqNpc0uRnPprEOYXgy87ih5UlaYQL6pqaJsUsnzp5QwpzOkSOOOTWFwVqakTZwqdaj2KXRFTV0GKh7T2vvbe5QVFDwHXHqlajd9StYlCSAANRqSAJBoRRGHkjA6TxyIA+vliCT/+3LEDICQrSthZhh6yjIkbDj2DmFDE0z2x0vQCQoOhJx8rFAdFDZ2vbJInVXPpSeDcrLjyPC8sAiemDcKFpMhF92taG4+42EiJE1ZhgSicTrsjfS9/CvbIyoCrYmm3DfNNQ5WB0Q10HLJAbJkFwxC0Fu297fNssCm8QbOdO/tV193CKZmBAABKAVIlF5gMAgpbT/O44z8TDeq2eC+HqA1C7E7YpD9EOHZWJJIXXwqFJafKkaZZdeUkUBCEIBI+mpPYiwjK2c+A8hbbZ0dDQQHEkFHoymLa2AxYcIEUMoBuw5KalXDCLHkaBMydjxmN66RnpVdXDBxME0gEChkjzuO1DfKKlQPTu/9v+13e7u5VEUxAAAABwSD4UiRyLeZiLMih9sA4dhKdcRRCU8+ndKQ1pBGhsvHg3XLlP/7cMQWAI6I0WXHsGvJ8J1sOPYNufuFPYo0x0kMlqhDiah7AJAjhyh6wSZ9Q0zW4Fmbk5MFHDKCNKlXyosaC+UZEVWjIBeXysepCx8o6Hnlw99Pcn/nX7xI527e12HMSMQAAAZLEqHHAhktVh7RELbDJhIhuNWyQT1CWJsxIgkxgwokafXGxUcZiPnYTBebWTDm1GtWn8BaUuo1jFYMPL70cz7M6bZigguUndXaEhoGsIBrC6rofIZiBDspucY46sX9muDoPBsWHSspVvxWp8tep+vi/Pr/m/+qqFZFYiAAAAAFC7hekzJyZZ3DPXJLYJ3K6EgEKRDJAQqAAJ2tQkaMlJ9g2bWUVh9pkiZPrkJGOEC3SpVdVtOL2GV3u3WQKxUQ9pnsyKV0M7o+w7uitfchFc62amXq9jP/+3LEL4COtVtl56RNwc+c7Dj2DXiqImdumXoN5G0qdM1vGNpcQB6SK3stfTuhmYAAAPYxDlISOM0FaYScQ9cogwD5parHpabmJ02cKWFaxEmHzXEWQt1XXoQrr0x03A6yYQuPFiCooDQoADMSKNeSiBcJiFTW14plS3IQzZZ+zGUNiJQcVUyQHrrYTEJwCgUMtvaA5BZxkUNHiDpl1/7aiHJDMQAAAAd0PM3hxAzRwnszI9aOm6rP1Cz4kVEYDTgqjaIxSeFa6JUTE6ZAduaEgJFEQuoH1BUmWcgLonJImk1UGSej060BEKzkSvd3FAAcKYvbC5EajkYJHJt4WhjhkSOtLMnpG+e25jF+2IKxowYeXkTMqCiBRrK62W9MqhmKAAAlC7K4mQvz7bDlZi3uLyY4Cd+ileIl4//7cMRNAM+1J1/HpG3B9CRruPYOKDIUIfKFNyE20aoQMRidQ1TMr1HkdQpAaPaAfR1PmVh0sVsqnUJ9E3dkSwIE7XIhHBDikLgQfUa4kGkJQI4T07WgYkhdNcrlx3ztI6+nclBGyChIsak0m6ooFiykFiMdR02XdDUkEAAAABeVhMT4Q4vBoI4zFeh5yKRRoxZKlFZsZV+6GOTYUBUxsbq1Y/JbetkNqurITwvQn7unrGKo455/2ob/hWM6m/K2g7uR0dnbOk2v8RIzo+5ZUvPe/S9PekVx4v+JhTFxvHYyLuI6bRf3RXMd8HLtv/2qZFQxEAAAOCSHcYCfVg9RYz3cy9lxVSZfsYrcVNAqJH2eCC4rDI4HlSx8aLoAxpoicsqREoYYPB4FugaOFJwZcsVvFP1FeGEMm4T/+3LEYYCPESNh57BtyeElq7z0jbmgrq+MIEqRqRSYi0mPhTPRjNVrXp8LJ+SQ8uW7/DMGDumQ+rrzR3ryX3O92v+RqUY0MwAAAAAXTpGONc3KF+OsOo/FKbx/CSJZsYlI6vpgfMqj4UJDFS9C8Q05xZm37dchmZyevLGlS+Yo6iReBS3DRDRkkBm3NIU8lPqUlznCtWw5w498j/rVjQodLFEpY1rC7gWEYiNlrmpnowi9zVTjPdR42UgAACocAoQwUWABDmfHKCVTQThKTl+iZsqrjmg4BabHZYSJEZZOmEq84Q0z7rCMJCwVIgoYBKhkXK2JiFtvV10kLS9eIdhiKnBNcLuLLowUygguW4sUxbD+VRDovWHHNhlL4Svqcj+ywIECwcC0ofQAkOe4oFBcAXFFrV6V3UgAAP/7cMR7gI6FC1/nsGvB+aSrNMSPCAAAACh+NZyMh+4OMvxbieLOobGtP3q+cbgq0+jm4oFc/aijNyMkGkdgNjokoSXTQ5hQyfUbgoRR+Tp3iWggNLiOswIR29Sco88ct9tesg2pEnxe5uFkt0rIjthHI7d5ffJGfpThc2KGVrJKHCa4Mh0gwadW0Ox2ZoSKdWiFIgAQAAAYYh+qQy04eTISpHduURoTsCseKRCxwOaNwnB3iTifm6Xpf0imclarQ2DoNG8EwhEVgqiMCIQkoTNBBkEonHkC0Jrn4QYWJ1nj0dUbWnFWP1q1zMbapdrVZxU0cjdpCeN5nbFOAudL+0i28rLiM3xqRC9deil6Vf5KkQAAAACqQFnRAnqCJiqy4G8eStQLU9OvMh+TI9hdvWQsZbRmEgcUdZP/+3LElACQAPNXp7DUgfEl6rj0juC4ZUW9LDp0h8wMzLz4SBJfRFw/LqZGl9PZhl15roRZOEmRzzRiqcGgOhSG7TFjGAELhQhp+wZO8opy+7Wf24GvfjvoN+j1NaDpKN6//W/krZAABdHpTpuiQp4hyKKihY2M6WQ3k1ROKM4TDhIyM2uZ1PDFYXaMoxKgfKwxORaRDBIOhQUDJVEDRWOChN7MkK8zk1KZiogKKBMFJ+MIkWHqAsFBaK78t0i8H81vTiNZlGLJTvGfdfXMaGYnd/x37uRfFW83arGaiQAAAAC8JgjCkghYAksA1BQODEenTYS1r4kkIWLzMxtUrFcFyUZDq4PJAsKmDQDOOCQyLlAkCpKZGCY4cHk1Dg+vZ5BsG2LQSyiQEtVdwKBnEA6pOJxxDZkLBcafFf/7cMSoAI8Qz1ensHTJ25rq9PSO0Uk1gFwouoNGCTmqoD8Exh5BdIsR+tygKKJMlXsjtLwikYAcLEd50jhPsnhNEWtnicDOl3E00+hhw4LopmBzOCEc6qG0zzSm6XpLQh4UTPImEJg8MS0hkkKR0Ulcw9cTASAOqjSRJExf3ErpIpmVeRkSbBRmOTz1B2M5oqAWLFA4SYYQ4DaH89IgQXFwkLIBc3HI6rs00gAAAAFOryeKsnirMxGiek0Ql+fUU7FMysiRcyoJqtNypOEXRXjaQtGNsK0hPGEbgllldVShrGD8qB6fLMb+EcGMGHcHAJ2IBQGqS0sEKFgJhGHxSCLmYs2LSlDez/YymmTqRfRDVX58Kg5d6wWY7kR6RY6aLNNZQCiMioe5H7en/mQAS40Er5PinS6cC+P/+3LEwgGPxMVVpiR2gdOZKnz2GsjhwQ9MHYTgvoKnBCyD502kiySOjElIzEpLlvLTxZaBCW4hOPpvJoTBPoopYxFwkOdaciroWFLOf58cz0FjdWNPysc1jQy8uzLnn/9SNtnAuGnBMyre8AHTUOgHRUAAC6DiPU6U+1dRIOOCnAaJaRbhAAuoMUTel4QUIkl4pqyNe9RhhpYl4HnQLUuSeQVGlAo5CQmK3FoKltViaMi7CawAUYhAg4FamyWCOQUNLYoPGWr5qSQWFRqPLvbxSxPmRR6Nny3nOliflHGcEYni+kGEMY6kFXZ8IFeP9NDlc0Y8O9tcTsYSyIRwJGk86QER2vD08MQ9KCZdCZPGDaSKA/cu9pYXYj9bXIENI6y9o4NPcU1iT3vmnIuax/nDff/Po1CgAAry5P/7cMTbAJBZK1OnsHSBp6arKPSNskz4ribKE6ihPw63Iv44UDcDMAJFkHTodUNEPAdCCbH50wVBaJoHS6tfNnj1QwWUg7A4TlBdKa094m+FF4hwIGpCllgVzyXPfB/5xRSkgdVnKd35HakP2fGdZHTctg71l8rn8QHbWwgrOVyO/mQzDerZKjQAAAAAABM9eRVBLx50xGtp3TKVDI5x3aRYRjdHLxkQ6ICkXWpFfS83aaYkikisVazNFb3+T9SeYk01sVmnYc/Jc9RpTJTRfiQK8F7wNDliTLEd2zMe66+3khD800PDu2DqgnE4ycaSkIRSUHA9PH/+qo82UlLxSue6k1BNMJySA2DFwYqAV9OY/77LTLIEAYVNAFhCNInLT1ie1//TqiUwAAFMQUuSCKk8WxHHMlUNUCP/+3LE9oCYMSE8rD2cSeKlKjT2DXksr0uY1l5Dz6NBANsQpUAN8fr5lTLY1OBf09EiLl4uVhxNNYfvSCqBIKNrnq/4UYB7IujT5ZFm1GS1L5p+JJG8aNPztXsM7lPi8zk+CXkED1sET0MFJSmKR0VsV1RW0AAAAAAAxaiRbws7h9PRJNE5IRMZrqdLSwqNCY7zsMbSSXAh4rAk3DgLk4KW6KNCACLvjpapUKQ8nSpqyBSpAFFF5JeoRL6XWXiStXwEFL01GXJmq3rzi0qcR+4BXPEbbt4qh+C0xFAfjkpMk5mcmYvkJQ8iMCcoAYMmSIRjAhWOLCcvbB9hzl5wlNWXKkZEWxmWtW05TbXxJ39x2XvHRyW00uTSNKMgRMGBIWhO1Ob79lgRYIAADqIDuXBLHxMTdsW1CEIdN//7cMTrgJO8/0OMMNxBx54p9PMPSJvncnmFXE9XlS3LBZkqH6HIQDEbA4IiYCa0nICQqjodFNgc1g5FQQkAUCQmLa98f1jR6bIS9EkRHx+sVCJAldbn5ENjene5nEdndlq1o3zPg0oD1LDQBipA293w1Sn7+ffVFCAAAAABSVtlf9ozdYDWi1t9ljtfa+67lLHhhTB2QcovsmKmY2MWSDui4GRFpV5LDMhFQAwaq5ZEasz1kTzhxy4Cxm5BiMEkxEVDrB1M05ujIYeS/guZWrAcANMvuc8VPberlwLNKzChQ+hNlBWNo5hldcTiHsoGTQ+2LmWbNvWRm9R1/kZ4iIbpXRQevcLC5bMcs94buQowHACycWDk3cUcthq+hn0alIABVChRZlL/1mupeoeC31IpqtcN9iJO1kz/+3DE9YCWRSs/TDE8AdgbaXT2GmBVw3wSqeCJHIwAFhBizUymLcPdvHpLGcoz1WcxznUQ0uqcRosJPhOSZui9EEjrtWFmGADAOKiAEoEpOGEzCiE6OFlYtSeuZWWkNPUkLMuWsnMdVJRmsm9Cz/WW3gdAQoWNkQeFEyb2mCrLjRp5xG3zy6F3dn9CcZKSAAAAAKhDzrFtPUQ8bo8VIWwpTiLYWBDxYdQS4rlGoAmsQvhjG+aZbi2LSfTwiitTiUbmPT9acVW8W0PRqNNJDj+YqJPQKCHdI2SHFrdJo4t1uHm7mTkbRHjmE1tLGE45+945jkNBcLNRBtSL7BYLsuYn8iuUMaMvItk1SIggAAArQIuxbbDmXq5bPALE3fdOXuU6DQGDReah0uK0mbhx1iZqaLM0IkiMYsLI//tyxPMBlO0lP0wkfIJBG+h1h6V4cYNomiQTDAXtdxT1RK0uBMYtUG+LCik8hiKiJh+/Tqpgv2ZthPLNxPEFLQI0cLOgiuR3LHyHRqZSpF2fGOxeb0GmNmfjVvaDbLsYgoFAmpJoWBsbJ/1QEkb3JC+mawAAAAHafPSpezA32dVgimyt8Ax9SlaLmoJVeMmIgJ8onr5bopuD1pyjRzMMRRSURbUoDFOOFhLKWO/jzu4FgM3RKcFV6l6SxbllKZSsixWwLGLxW5RA78RVxXIaLAr+rBLnSD2hmUK8PniaIxZHAj1EsiOHR9apWIcb6srmK56s2iskmlQcMMD06RkGTRZc0OkzHaLid5Unv7hNA0PFEEU1m//+pyEB9FhFuVIrgkAZIoQyBzJcnDgRBFog3i5lyQCxBIkssGr/+3DE6YCPxM9Lp6R6EjKfqHWHmphgYgAYAKkoshwlqHFYctOIiFYWlixFzrTnIaHAoTEE72EMTGlWA1ql6n1ornaUwBoKs8prshUdjjW2vxJx2VCwuKLZDYbBKapQmioKhGkkTlRs0SLgtUA0cTkMKtoVp9WSx2a+42wr72KNioRp0u57lmRbyM3mpeAAABDdV3N0jroMbWAYkwVwmgQaoo5a5Iw3RvFRCzCLD+paIrx8DnMZh4AYZKtssQQeQSoNpDUsKehnFIq9+XTQ5AkJepnqLcRT7kac9G3rEk7Hjfj4q3eZ41py6rUplWwuQJHno4oSDvamqj5cTZhIQItdM5G2VaM0NRpbejEmmSCASaJXyPFgupDoklAAY0TNLsbxQqRVheo4fKrBVp9uMn2t1fTW0ZUZR6JY//tyxPYBlLEdOSww3EJkoCcg/CXxMw1YoYIRnKjAvJAanTLXNYoiam+nujSnk1h5Wfp0RBYZQBqa3kWoHBW2w34jcaeEpYFpmEo9jSPpwXx9JZsSLDXeGiGfGSar52VE58vIFTz3uZWKVmr3CvK5lx9/5vCt6rrEFv5ysLmoYblhUkrJiwp1f0JgAAAAA9rkcf1w2qtFRXjUCs5eahgwuYw9ibRy5rAoKZkiBQJ/odHxELJXKVpMvWyw+CkV45Sx9wXheVqDQ1tNSQ+WO/rI36clp7cnWm2ZPyweKVH8m4Dzk9HGzQ+V5wnp7aaIlHGBK3kCOAhW5uRzFnICtUJhoHHRnY6QFE1DuNCZo4EBWpw6kqBJ5hix9n/6pCCwAo+DnR5GTAMuwXReB4OBlKcdCLXZ8EmVxciXiHv/+3DE6QGRmOk6zCTcQk+e5yT8MXhIDMAJBCRXgYgkBvH4iQkSbP5rRDsizeUBJA1IhDAQsQAnJDUUSFzWh3GgTk0yMVgOaijLAkw4ISBwkELHF0xKDRuI95AjgwymZj1p0Xh/iYpqrE9gwwyTGFbzbPQfW0v//s338y2mzAAAAAAAAKhwOo4svV7xnLNXFmlfOU3V4KJXMYZ4ny6yUaGyUTysLTlKEgh0SIa2+4qCuZfo0MGCv42JrrcXYgN22VqaP+qbrhNKUMb567iwEABEpLB+yPTTA/qEIygOZbIKNpVHZrPMTkjUyqMgklYW5cN2TqaJBkSBdoKkoiAzBwZNmW29oox6lf/sT8db78BkQECbNJ9O5j5f5CWFAsGa40lJBiy6HLuLwL6sgFgqDpVg7Cg4rIoqmSud//tyxOqBkijxOywkfEIaHGd09JtAEaPNwDjg5KHjdH/TyWO1pPt41B1g18K1LOCEpsJeQ6gqzpcMfTghxbCbqhWWZ1HALGhR6wsUmRK2ISomIhguqfgyOTDkZyMOP2RRIjxYvWvd24YygNSaWDTwVSQTtvZwoVlB3/1/99UQkEAAAAABXD4wrxOUqOiESyIWFTm2h5hkrVkQTVCUPHahKDXBLiwASAzBfIeW4hafJMQolTSfjSbRPnbc2lsEqYROB3vjnXzBQ2eMUl0fqmahCHf10ioIE8Jlm2+rMQSxRlIiMT6NKdqVGfNKoNDE3iVrg0HyqrPCT3kLLx6adjS52uYIe2XLkADc5pj7Ok/40duJerKCyAbtkCH9LFkfGTpsFt4oiqEFeZYoLUkqdAAcYkNRhrQs8QpLuCP/+3DE8QGSINE7rLDaQkycppWHp0IILRLtgYECs/VtRPUBVhSBR1WSlLARENtFTpfsyHsdZmnasqEwDKWCcnUfsJJJWOVSiZF5DOjj4g+YvjJEojFTRYmLkNNvgjRIzjMW2TBZ3SI4QZzyqOtYxSgFmElB9Cxq3BST+r/t/9v//7f3KkAAABKpXhehmDKWpOrBCCNbLD25IAA5JeFnyqSYKlykAKscM2ES2ZxIYA3ojQgmUBFQslcQAnJkpYvuz+Dy8qtLd0UG9SVf+NoC4mXaWsm85TkNZH49LYabE/J0yK9RoYzh8miCbhIbOSWFh8F2GkZUdnJsggwaMG2LaO2Q4n9WaxvNUVEANPSEhceWFgGhOw+Jm1sjqiv/6zQAbJmTjltgmlfqLttKWfQTCV2OS5sCxJeKkhER//tyxPCBkQTRPaew2gKIH6Yhh6dIY1K5S7SqUukVADwG+Xu+kSUWLgLAQe9q52LSSMrSd8cO2EjRBQ5keryxH91WoTqGbBjuG9HehKtdTHTCRQZZ+qLjqFZLGKnNks0uzqjS7WeeTZNgNITOBoERhguJU3JexPGOddv/7GuotdqqUAAAEhLEDUau3fYQn08Mbchqq+S8S+EIhge6W3En3jcyWoYoIkqDTMOIs010266Y40CtFpiuwcKnbG0rERErXdWIqZA9MmMAY4voxhpS5FZpx3wvGknKvH0Yb9hIeeaPP5WtdKIRlkxbYVJC6/BYyTMaPywtqzA7e+hSSLTNdvLTr3fDiA2DYIsSVQRsc4X/+P6P/X/WsRgHxZruqdOvUYEsUoUoK4a/2Rs4gRZEdXOwtIdK1FFWRDH/+3DE7YGTIOEyzD06AiEZpuWHpwhdqgzWl3kzyyzus2dBLxQNdqLLJCMpWGcpAjJVyoPcyjNJoGpUUROF+uXaMhaOSCLVKqXVS2srIUVBpVFIss1YhgjcdzCHK5RpySUzstgqEjAdCoItm3xMOPzpd1qd5IYY9PPf1/soGQDEC4kylI5g6DZfxYVVVDkj+v5C0HlYiy5JFSwdMkkAYmYKZCnzKwwyNC2XELV0taIQEQyA6cLXHeSQ9j4FjFsEfKI7QDQD4AigwkykBjj4F6+BZmiYxuPzyRKbLcTW7grPtrJgxrUJXPaUb3wRIkDAgtJj0IWRor3JwdPWMgpZIMiEDjSp4WFL63u9fqkGrr/k//Qj//v9SAGpJpXrqiVhWQvU/Tfu4z5fqsaGy/W5oc5YpUGURHQhU0CD//tyxO6BktDXMMy9mgIpmSalh6bQvck8YjGgARpNFqrBUf0aUbFWJRo8QFGFMG0U4YkFwoKUCDDJ2ns1WDbeGcgtQigVR/HsvjmtTJlNrkyREtOEWC5KdPGosNGw+dcussRqIlV1E5p3PGrc8oBkEUiJfsVuqKrFnYwvrk/p39JhAAAAAA5B8WnIp26jeIbL8X4tp52FQwyhRB62oLbLVLQIg7CJlHNL8u+yYvarenbElE3rV6rEvG3RNe677sLBrmiLymQAo9gbAicHRIAOOheGJOPicTyWjLY9GkViSzHEuaedhjxpv2tZqqUL2/ZYYb3mi4aYgzI3OufM0CooKKeZaQW8VIBI3UbUH86VqVGrIRYeoRp36Ekwi4mgYH0nPagyVVJB2GyQUz4OBMVVXcIFDnLZ48Kkm6j/+3DE8IGTDNcuLD02wjoa5hmGJ0B3k/0HJgBJAgg6raSdYNGt11ir2FZE1wCFcz/L3c1aLXkz0ci6aTLsJdLnUtlSwy+C5yPD6P9SPa+jIIgy+VwLDUoqah8ElmWhmBY2e0q9QXiRFGg2SagQnFmUfNEtIWyIZKi7gVOiOSSWUwshCzAwpdu1dL////6P/7scmh1WyAAAADL8UKg50wyM40JkTtqdv4ziUurAt+K0kchpkjvSmNwC66mrxJD5MzYRSAP6u1zk+8yjTlUKVglFl8xUM3LoRAtczJgaLNxea9/LBTH7ur7F9MSHDiQFIhFBG4mRCJQMDkq0KXZHNnn+Wq/s1+1qTYbcAAABRC5aPTDUELUZO0MkHQnNvJmQICRAhzkGZEvcQEEZnEQygAICMIU6S9LyN5Qt//tyxO8Bk4ULM00weMJpmiWVrCW4TTBU6CGpwt0pH0pmkvm+SgDuNKL/obtOVjRPXXTUbZFonwJl8nHpUWloukCivj4yYHtih1diJmOB2+uswmEMV1HH2S8lvvRy8OCxcIg2AX1pHjw4k0SeQz6Fippw/Dn3KnC67Tdm4hIf/9f/VQ6AAAAAAfSxZMHvTFFVkeEP0QVpwIwOCKJc0Qc0lA+pdhAIpiutIQmSSALdpUQh/VTJeSNO9H6BnzcxlSYFOofGA4SBJgK03GRAZ811W5f060sAMkA6dA3sJ5d5ecDofrV50vQzhdBnoTBldZW8EDauI6e9j+vjdKJfp1EI6Vyss1/Lwbjx9+fCb0GnPqOZjxUp3d+LtEyASiWUJj6r2cBfM6MJEYJMvRZSkS/S0YFa0XCYcCAhzmb/+3DE5gCOyM8/rDBywnWaJemcMXhqqOi0YskoEnetpli73RWNCGXqFMCXRhnOZhvGgOAcJMksXEN0B6DUHCXAuC2HRG0F0JCHgbITw8NojpgLCkmxgswuSPHeHJa5CuuUtaRZpeospZ2nuEwcLAlGnw44esUGSNHubs+z1+/V5r/p//boIAAAMgviR7GmPsCgVuF13WGs6fuhVpQXYPDDQHnGRQCj+0xORhoQJFRFBHddilLDxIwkdFxczQoEWHWqjcmqztlTV0VhkLupiIXsVdenjrrCWOFhJNDQrDqqPl5AdZEM9Pw9SRuPahlWEkmeTIkNCDpdkqud+lgAVmDilrzhwXsXbqSKquszs5b/t/Q7/+zoRoD0r0FhTqqq6BwLZWRR9pUGl+lqoDF5v5F1Gk/V1OUtJije//tyxO4Bkt0JL4wweoJEmeWZh6bIiIrRy4IcUtQxKMQ8lZBBZsofF36fhMRWJqMNILtzABHdbit9VzlNLljmPCSCy6OR4OBSD0+PlhiYSElWfhvZlzmlK6HpjSV3ml+WejrjEeRmf9S/OFdFgkOCdwGAjgIlJJhVtKg/eaiv/76vQ3/3chpVNbCIAAAALtguFlbgNzXI01jFmIMMYvHoW2zWIjmSg/AhBLCnu5BHCajKP5Frl6zlqc5vJyAqkSkDvZVYedRwsx2pIgTi9RB+UsRAgMyyJE9LbuxBQpY50+RyXbvdU9lrXK0yjzQUC4fCBGViANgiNAjiMQrp2BqKqDLXHzoEcxi20rndK6V6DCCQQAX5TVhgoBjFRUjRKV5LLq9gV1HXep+4eTHaSDDtgd9eK7EglMxpSXT/+3DE7IGSMMsszDDaQk8fJYmGD1DAtLgdKMElJwYbGUSrXJmK4hQvhlDZJKeaQUKWWXZfIay8dIlKRnHLxxsucHLBgwEZI4tozrslqIT/RSAOLDjC3IK45Qxh28m97U2C6HJC7ulLtFei3P21////WjMAAAM8GWeIgIjJ/o8ww4heVPtlrrP2zGWpf0DQ0dDUoaFAzzIoPyC2AyRHQKjL8WYFwoFV2LHpQq+gKSsibu6LuoOKcIijorK0WYZSIXOqWGC/sAM/fB/qTF1Ij2MUl80wGEMgpouUJIGlhWgWRJLyaPLIm4szrb867RoLhxihG46WRz3yNLp29CH0SqLz/+9yq9u293uXu3rtmKiRUABcQQUHKEOOEV8jjfHadBJGMOAo0+aCNhCZitAPmcxlKcarJOJMLARZ//tyxOuAkOjLNaw9DYIdmSYxh46Yc21SoeCAIYklQah9MyhSzBOzE90LOyj2JChS8O4tALVBCKk5LklZKNhFMXZWsfPGNt3LWxPN1JlOBnHSCQmfXTeB5VqQQAyNMKFwy+ksUE4hQvr18Jtt8w3/7fXVIAAAABZOQ0NmHJ+KJpqYl+mNsTYi1hzX1LJQCvEvgpEkGw5i7JRAYQ1Bigqk4D2RQjxAhdA5ghw/R4rAjCoV5LxSk6MwAiFUPSApl1iIyVPIsZJ2oNUPHJZlX1A+eSmHorDwrR9ddUgaYmiKIdXm5NmvjXi0BC44q8RFjp6lq0mktSNJtkriaBGQPAY8UmhK3yqmd02iRT9HJfFOYUnSolEqULEjXFV+yxsUrW1J0o2XO0w9VRwV/NhbZYBgEJZ204QmMghsJC3/+3DE9oCTmM8pDGUxQh2YZej0m0AWSYtqIXIMEbwQQKyrQDgisCwiSZMJsgnGklI9RBg0VY6HpNLLhdc+oBCYoNqZ8TMtdDFW2ool8jlsq0TYEgKAlh0eGggGQkFmDBcXWeU9DFXzGbU5RDprRqVdEtXli36r/YxaYy93iqoQADgxgjEkHRs9Vy3Bhyr2MKsd9+xCBgShTSnMgN1ZtxnwVuaCDrpnCyRojltBQRIloJUxE9Fyv67SGDc20TL6oUu9bCNbGYU1uHXhayylwDge0E6wxIjRHQTNfXiu/Gs+BxPkOjlUIw+CDbIjCrGgLB6FuUpzi1owfYuOvap6dYoWU//wuq9ISTrY1hbOMb9CqiSJaOekSAv0FCq2tASJUUSvYjEWAsTgGHlDlNLaw8pXiuAv8qVhqbzE//twxPYBk/DHKSw9MwJClmVlh6ZYQFcI8VTp/OpG1uLeVJF005k4j+VxVgvjhZiVsAKISYJAWQ7nzCaiFHupWZUsiHMy0qXiq4PiCFJkEjt3kIIJJvZawmFYjaoJNcTcepl30Idub0bUX/av7b3tvZq9vRjFvSmsWZqOtdKVFwAAAC+GBswXS0xoMKXZH1YoHdyGEefpCcNpK0AKeH2eaXQouopYEcXE0WKQNUbgx3NLFxQ5uOY51WRbYqjmV7IUBC1UolpQvBgWBA4QWYAEUBZ7zDKe9l2kjLU3YqelcuFZ8GySIiBM8KHwoeetrM4O0GDu57w3W1xKmvXx2VAetH/0f6DNASrU6VVTgZejyquXngJXzFCy6IZatH5vaEZIkiAlLQUod0BpJgCEIRBG1w1M1kFkkjjSmP/7csTvgdLY0SisMHpCMpYlIYea0Iv/DyhyewcCIDJRGSrHDUlcBsIA7H0WY8DvBwjhpxTHElkQsjYmg3eJyCvZVQSzZGfmRiZNS3p7jjwNCFAJHw2VKNUH3KFNLhixZjYCUmLlLIIxiVAd+95S3rAtirHsrJm4fmWaxVR1g8XsDzSQ0IAFygYSQQAAAC3GPZkNUfZCVolR2i5OnInLK1nQqFcdaGiUfiwMzC1ikFUayaXCi2RHdHZ0fTo9HAvIsQ6lcnBIWjlgxULgfFRBWMklCYp7MpW/RIs9UbLW82RyAKVCAc8qJcdFMnCmenQ+Paw6o62V6vo0LYxe3///97HD3lDFINv4KWERLmpgCpGGO0iHE5e4CqsAho0OoBcpTdhkAGBogAsMK8Q0hOtBR+mXlvRCJnN+Pt+y//twxPABkLi3LSw8y8KalqRFh7MABs6gDTCgCLTH1XSSFQG+UbnIKWCbtH34h1xo2+tyTROfAofFJ8+qbPQfE43stpuU+RpIH5P6omrxjurqrO6B72a879aHOtpX3ujZWGv3oy07tW/6rt70M/1vob9bpkZJ2ZtnMHV0RVRjoQzXtrV2EZY1ZAAAf8kG5C97ENLFZrGWmSl8I2zkvT7o6zmHpKVpThTNaFi6BykGOR3HbD9JUaKoQijjRgypHA6DzfN8rMpVI/ZWwDBAkCT8Fqob/OUlo0WAwmExskIzyDIxRMY1pBV4u/cozdZKSHL3mX81fvMaK+UzdX9P/p/WQByJhFtvXJnlLgYBJ5X66YYW2zhA4vBKZWgOLcK2sObRoRQZMVKMgaX6rv87adihSl7cWgNq/LclrP/7csTrgI8YtS+nsRSCrT+kBYSLiOkypZcCpGIBkZhoCpVO3/e9ypTKhQsL4+BMOJRPiwSVhaOy6eQ4rcbh+fczSI17PhrPdG7uLPD9aFtOisIm1YhUsHwihgVEAVMmyd7jpJGxdt69uwufyFg9Ghc64KZpyXB4wbAofNBUIJErKghAAAB+RsGKW8oRlBjFyLqWA8CbJdfD/WC5oBpJCSk1zqO00CUGIEfHAfBrKNQExYx6kKL8ZkmpWPLFYXiSTQZiKVIjMQzAMRGKCvIBuAOimCozhGzNrHHBuYOlh4hUTCpONOhmbYbLPuaPFnAqObVsba56EUdybdP7TOP1Z7R2oZFJ1RClxcSeyPyxnCZgnPDqAprQcJCUnU3Fy5SnQteIBgkjC6bUHxEhoTBEImM6CXbIpOpNMFBc//twxOwAjxyTLSw8y8KVmOQVhhtIsyXUkZKDzJKmFGKeCMgORdUwhoXhPhin9NCOs6mhwjL7NBUqjpNICktCR9qVBeI45VNy0kkQpeKlAwpohqVGRj2qfKvZVYGuVoPGgjx1bO+8ipF+00TFAC4TkhUKLeWvJJWB0ng2WEBYQB9tXAADSWDpPMspz1J6eqEJZD181SsBXm8XMt4S0XAPKAPIGcLGHGUQOVyHmaVS4nsuHi0ybUB54XBLTBLGpksSY5EeuaNx9FSFQe1ZJrafaNq6FDJBWWgCLiwGILpItQVVLjoJLwwIkjg/dNiul17XKy96/8tb0+0lvYNUXqCkgcRVHwuNuTNELgKtZF5gqVTdoLvN2WFWHTKcNl87BYypIVTBa8GM7RSFgA7SZUMVYIiaCKzGkkWgtf/7csTugZDoqycnsHZCdZXjxYea0KiK8F5N1WyrYxqVImP45TuytvpC8bYygueJAGORAjT5xhpRVsyQs42pbK58hNBs7Iqo5Wo96/2Lm3t823svuiq2339tPv7Itz9mty3+yr+y6LRybMhWySIDIDRR6hDCjNVZzmKqgKIUY4txRQIQAABmGGhQa7o3OLPbE1t34syZ62IM8THYZ2eeRgLEVfBUj7EARIHItiKRqEyp0xjDEwQ04mV0bxpMrkPlXlzQbSfaEM8y0hCvNHx2Cqgg0njVYE5RimKWio5SPDu7syK9tkSh95b8H9a0Rpa/svfP1odtszIm5mr9v/3+/e/1177EZUUkyFuTUhfS91KxJGQjkPHcQqhMLoYBgbF1VQmot5QQTgS7OZxY3hxHM9MYJo6pW8sSuLcQ//twxO6BkJipIsekegJ9QaNBhItIM6I7sw2E+B6z2iv1cuHSF7e2OguC09IMrlSzOLuR9L4z9q8PPrsSYTp3STB0WCrg+koYEx4Fg7Bxax7GLvexDh6+w1nuZ4s3/pdursotvHkxIoOpey8WELTWF1DwSQCkAAB2WoIuve9bdmRNuwqeWIxmGWDWp5sTb0K0ZQsLAMuhxkwc5kbkw/g9dmbYG9V+ddikaQ89iNNrFlmMQWHjrTpZRzEszuz1adt1Ll+Ynq3SEoT5lxs6UNDLDWWzqE8WymDEk5SAuuMZ3Si9uttab/9moiVevJS7+tudX70bcitalZHsy67qV5yPussiC70VWTRzUd1M62cEwKBUtblBrNWgP+1tQl4narNNVyvN1JM4KtSYivVLZG7SgIwJmy9FrU1LF//7csTugZLaCx8sPFFCABUkJPCPgIfaRLNS7bkSqLO0+Sm79Oa4y468Rgq3KYdfyhm7NemsS6Qclli6Ugo4kzkOHEqLJIjmuqsrKt2L2Stey/+pG7/s6IY3ZOm/TT99/29ao6K19DWUZLsc99W7677UI+dZsPbaskn29eWslcWmMJ1STmmSJ0+0JBQBwB3CHkuLkYgfxxjcliqBkTxxp0g2HNUGc0jyP5JCzIhFGOZLcpELlUrUizlq8W4D9FK05SiJ7EXcRjrZunzeDFhXbWa8sTVcS7vb2xXOtdjiNOCKX/zMn7aVHL/19cv6+//X/+XX6LI2IVjkbPidcstTLfBE8JtYiGx1hZoQICJyEbBDAExQNABVQfiPHQr3BdjFUyyPS2l+fGlHGKu08YB1IUecx0ql+qFtNJaF//twxPWAk3YHHSwMXIp9wSLBgRupz2LkWFpxMxTajVPlQNCEl9WGBXQWHN4keNmWka9N4pm0B7rd/XeM42bKsyEJ5Wj2Qv8lij8R8aczFLIZ9WFbzS8uFo//RYq+d5Kcpl/1Tm9O+hEthuQ0mwzMBDgi0yMaBhaIY6BGECAAM1AD0axcbKMx0y2rqj06TkI2eJ1KI51stxOT6Sb8cYt7YdKNRjgezqEpXzlHmhRoz9V6jxe4s81I6hdqSytcYVXKsDGuFSOYM6tsHL2ZFbbRdva57tVrUZ69bsjMZnfZ2borP9NNbc23b//66PYspVqWoCetmD97O2e4lnoih0WOTlvyWHR9HZzJWrbAZxZIkEokIABkBnEGUjMql+KczfNQ/lajC+mil2JZRqzOonJOn8yOSkXMW+lc2P/7csTqABEaAxinhH8KOMEjGPCP4Y6LXUkeeR+3xFE5xlqFAravpamcQa43q2fnMusZrrOs6yTTmVcfOf6nJfCRSs5VCgy/6bYnRCej+W//mL8Sy+VG8jKUGN8mzXrbq5VM2ukNPKd5kDppMw82z9TyYMCUi5pc0xGHKW5wjR11eGpY6tcWa0CV7NKhs7hBRKNiqtmVVmp+yKp3veu+pbCGtEzdXLx7FpPVgk4eUpxWqlmNZW+h+b06a6J61Wrb6tM07KRN+itqltdNfr+9nka6zGqqIxequWhh0wuVzzWj3GJpwgnUUnqjKNlAcP5aJcsyyKRQqsREy4ofIU6uaIzRUNKxgTmDY+ICBQKEmAELDTZX1WGYk2vJFnBSHuqkhycqwzWtTUfMCwsKm+utfk7/8J/538PPIQsw//twxPEAkroNFMeI3UIowWKk8Jvh4SvCGEn0WisTCEJh/PDFMJC89a/huGxz+W7GHr1NDcSFyzV+KuNXFYVIiIlgiFSMMwKqQOjoJPIhsDKAKoDQpgVJVRSdHQDIyh9g0KYgMIwZJlYkpECwrAlEIQRBE8iZlUxBTUUzLjk5LjNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUECAAACodnazoqLWqX+iqnqi/1RF+5Sy/LLSMjVlBAnQ/n//2Wkf/ZKR+Utl/VgoOOllIzWXsshl/y2X4stIyNWChgQdHlQyrauK2gtzXDef/7csTzAxK+DwwnlTuCM8GghICnaTzRor5hXS6b3kel6brXGab1bP+f7zMxym8dyTTivZGdwVSdUq8xxMvlKulOzuDkyqI0SfFCVBgHWmlUrW6G6ZmJhXTe8fuDNBSqTEFNRTMuOTkuM6qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq//twxLqD0y4KxQEN+0gAADSAAAAEqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==",yu=Bl(Hl,gu),bu=Ml.a.createLock(gu),vu=new Fl;Hl.decodeAudioData(yu.buffer,t=>{vu.audioBufferProperty.set(t),bu()},t=>{console.warn("decode of audio data failed, using stubbed sound, error: "+t),vu.audioBufferProperty.set(Hl.createBuffer(1,0,Hl.sampleRate)),bu()});var _u=vu;const Au=[],wu=[],xu={addStateChangeListener(t,e){let i,n=Au.indexOf(t);-1===n?(Au.push(t),n=Au.length-1,i=[],wu.push(i),t.onstatechange=()=>{_.clone(i).forEach(e=>{e(t.state)})}):i=wu[n],i.push(e)},removeStateChangeListener(t,e){const i=Au.indexOf(t),n=wu[i],s=n.indexOf(e);n.splice(s,1)},hasListener(t,e){let i=!1;const n=Au.indexOf(t);if(n>=0){const t=wu[n];t&&(i=t.indexOf(e)>=0)}return i}};Vl.register("audioContextStateChangeMonitor",xu);var Su=xu;const Tu={DEFAULT_PARAM_CHANGE_TIME_CONSTANT:.015,DEFAULT_LINEAR_GAIN_CHANGE_TIME:.1};Vl.register("soundConstants",Tu);var Du=Tu;const Eu={BASIC:"BASIC",ENHANCED:"ENHANCED"};Vl.register("SoundLevelEnum",Eu);var Cu=Eu;const Pu=Du.DEFAULT_LINEAR_GAIN_CHANGE_TIME;const ku=new class extends vt{constructor(t){super({tandem:t,phetioState:!1,phetioDocumentation:"Controls the simulation's sound. For sims that do not support sound, this element and its children can be ignored."}),this.enabledProperty=new Ee("enabled"===phet.chipper.queryParameters.sound,{tandem:t.createTandem("enabledProperty"),phetioFeatured:!0,phetioDocumentation:"Determines whether sound is enabled."}),this.enhancedSoundEnabledProperty=new Ee(phet.chipper.queryParameters.enhancedSoundInitiallyEnabled,{tandem:t.createTandem("enhancedSoundEnabledProperty"),phetioFeatured:!0,phetioDocumentation:"Determines whether enhanced sound is enabled. Enhanced sound is additional sounds that can serve to improve the learning experience for individuals with visual disabilities. Note that not all simulations that support sound also support enhanced sound. Also note that the value is irrelevant when enabledProperty is false."}),this.soundGeneratorInfoArray=[],this._masterOutputLevel=1,this._reverbLevel=.02,this.gainNodesForCategories={},this.initialized=!1,this.soundGeneratorsAwaitingAdd=[]}initialize(t,e,i){i=Object(s.a)({categories:["sim-specific","user-interface"]},i);const n=Hl.currentTime,r=Hl.createDynamicsCompressor();r.threshold.setValueAtTime(-6,n),r.knee.setValueAtTime(5,n),r.ratio.setValueAtTime(12,n),r.attack.setValueAtTime(0,n),r.release.setValueAtTime(.25,n),r.connect(Hl.destination),this.masterGainNode=Hl.createGain(),this.masterGainNode.connect(r),this.convolver=Hl.createConvolver();const o=t=>{t&&(this.convolver.buffer=t,_u.audioBufferProperty.unlink(o))};if(_u.audioBufferProperty.link(o),this.reverbGainNode=Hl.createGain(),this.reverbGainNode.connect(this.masterGainNode),this.reverbGainNode.gain.setValueAtTime(this._reverbLevel,Hl.currentTime),this.convolver.connect(this.reverbGainNode),this.dryGainNode=Hl.createGain(),this.dryGainNode.gain.setValueAtTime(1-this._reverbLevel,Hl.currentTime),this.dryGainNode.gain.linearRampToValueAtTime(1-this._reverbLevel,Hl.currentTime+Pu),this.dryGainNode.connect(this.masterGainNode),i.categories.forEach(t=>{const e=Hl.createGain();e.connect(this.convolver),e.connect(this.dryGainNode),this.gainNodesForCategories[t]=e}),Ot.multilink([this.enabledProperty,window.phet.joist.sim.isConstructionCompleteProperty,t,e,phet.joist.sim.isSettingPhetioStateProperty],(t,e,i,n,s)=>{const r=t&&e&&i&&n&&!s?this._masterOutputLevel:0;this.masterGainNode.gain.linearRampToValueAtTime(r,Hl.currentTime+Pu)}),!Hl.isStubbed){const t=()=>{window.removeEventListener("touchstart",e,!1),pu.userGestureEmitter.hasListener(e)&&pu.userGestureEmitter.removeListener(e)},e=()=>{"running"!==Hl.state?(phet.log&&phet.log("audio context not running, attempting to resume, state = "+Hl.state),Hl.resume().then(()=>{phet.log&&phet.log("resume appears to have succeeded, phetAudioContext.state = "+Hl.state),t()}).catch(t=>{const e="error when trying to resume audio context, err = "+t;console.error(e)})):t()};window.addEventListener("touchstart",e,!1),pu.userGestureEmitter.addListener(e);let i=Hl.state;Su.addStateChangeListener(Hl,t=>{phet.log&&phet.log("audio context state changed, old state = "+i+", new state = "+t+", audio context time = "+Hl.currentTime),"running"!==t&&(window.addEventListener("touchstart",e,!1),pu.userGestureEmitter.addListener(e)),i=t})}this.initialized=!0,this.soundGeneratorsAwaitingAdd.forEach(t=>{this.addSoundGenerator(t.soundGenerator,t.options)}),this.soundGeneratorsAwaitingAdd.length=0}hasSoundGenerator(t){return _.some(this.soundGeneratorInfoArray,e=>e.soundGenerator===t)}addSoundGenerator(t,e){if(!this.initialized)return void this.soundGeneratorsAwaitingAdd.push({soundGenerator:t,options:e});this.hasSoundGenerator(t);null===(e=Object(s.a)({sonificationLevel:Cu.BASIC,associatedViewNode:null,categoryName:null},e)).categoryName?(t.connect(this.convolver),t.connect(this.dryGainNode)):t.connect(this.gainNodesForCategories[e.categoryName]);const i={soundGenerator:t,sonificationLevel:e.sonificationLevel};this.soundGeneratorInfoArray.push(i),t.addEnableControlProperty(this.enabledProperty),e.sonificationLevel===Cu.ENHANCED&&t.addEnableControlProperty(this.enhancedSoundEnabledProperty),e.associatedViewNode&&t.addEnableControlProperty(new mu(e.associatedViewNode,phet.joist.display))}removeSoundGenerator(t){if(!this.initialized)return console.warn("an attempt was made to remove a sound generator from an uninitialized sound manager, ignoring"),null;let e=null;for(let i=0;i<this.soundGeneratorInfoArray.length;i++)if(this.soundGeneratorInfoArray[i].soundGenerator===t){e=this.soundGeneratorInfoArray[i];break}t.isConnectedTo(this.convolver)&&t.disconnect(this.convolver),t.isConnectedTo(this.dryGainNode)&&t.disconnect(this.dryGainNode),_.values(this.gainNodesForCategories).forEach(e=>{t.isConnectedTo(e)&&t.disconnect(e)}),this.soundGeneratorInfoArray=_.without(this.soundGeneratorInfoArray,e)}setMasterOutputLevel(t){if(!this.initialized)return console.warn("an attempt was made to set the master output level on an uninitialized sound manager, ignoring"),null;this._masterOutputLevel=t,this.enabledProperty.value&&this.masterGainNode.gain.linearRampToValueAtTime(t,Hl.currentTime+Pu)}set masterOutputLevel(t){this.setMasterOutputLevel(t)}getMasterOutputLevel(){return this._masterOutputLevel}get masterOutputLevel(){return this.getMasterOutputLevel()}setOutputLevelForCategory(t,e){if(!this.initialized)return console.warn("an attempt was made to set the output level for a sound category on an uninitialized sound manager, ignoring"),null;this.gainNodesForCategories[t].gain.setValueAtTime(e,Hl.currentTime)}getOutputLevelForCategory(t){return this.initialized?this.gainNodesForCategories[t].value:(console.warn("an attempt was made to get the output level for a sound category on an uninitialized sound manager, returning 0"),0)}setReverbLevel(t){if(!this.initialized)return console.warn("an attempt was made to set the reverb level on an uninitialized sound manager, ignoring"),null;if(t!==this._reverbLevel){const e=Hl.currentTime;this.reverbGainNode.gain.linearRampToValueAtTime(t,e+Pu),this.dryGainNode.gain.linearRampToValueAtTime(1-t,e+Pu),this._reverbLevel=t}}set reverbLevel(t){this.setReverbLevel(t)}getReverbLevel(){return this._reverbLevel}get reverbLevel(){return this.getReverbLevel()}set enabled(t){this.enabledProperty.value=t}get enabled(){return this.enabledProperty.value}set sonificationLevel(t){this.enhancedSoundEnabledProperty.value=t===Cu.ENHANCED}get sonificationLevel(){return this.enhancedSoundEnabledProperty.value?Cu.ENHANCED:Cu.BASIC}logGain(t,e){e=e||1;Date.now()}logMasterGain(t){this.logGain(this.masterGainNode,t)}logReverbGain(t){this.logGain(this.reverbGainNode,t)}}(T.a.GENERAL_VIEW.createTandem("soundManager"));Vl.register("soundManager",ku);var Iu=ku;const Lu={detectSoundBounds:t=>{const e=t.length,i=[],n=[];for(let r=0;r<t.numberOfChannels;r++){const s=t.getChannelData(r);i[r]=Ou(s,e,.05),n[r]=Ru(s,e,.05)}const s=t.sampleRate;return{soundStart:_.min(i)/s,soundEnd:_.max(n)/s}}};function Ou(t,e,i){let n,s=0,r=!1;for(n=0;n<e-1&&!r;n++)t[n]>i&&t[n+1]>t[n]&&(s=n,r=!0);let o=0;for(r=!1,n=s;n>0&&!r;n--){const e=t[n];e<=0&&(o=0===e?n:n+1,r=!0)}let a=0,l=0;for(n=0;n<o;n++)a=Math.max(a,t[n]),l=Math.min(l,t[n]);return o}function Ru(t,e,i){let n,s=e-1,r=!1;for(n=e-1;n>0&&!r;n--)t[n]<=-i&&t[n-1]<t[n]&&(s=n,r=!0);let o=s;for(r=!1,n=s;n<e-1&&!r;n++)t[n+1]>=0&&(o=n,r=!0);let a=0,l=0;for(n=o;n<e;n++)a=Math.max(a,t[n]),l=Math.min(l,t[n]);return o}Vl.register("SoundUtils",Lu);var Nu=Lu;const Mu={isValidValue:t=>t instanceof(window.phet?phet.axon.ObservableArray:o.ObservableArray)},Bu={};function Fu(t){return Bu.hasOwnProperty(t.typeName)||(Bu[t.typeName]=Vu(t)),Bu[t.typeName]}const Vu=t=>{class e extends A{static toStateObject(e){return y(e,this.validator),{array:e.getArray().map(e=>t.toStateObject(e))}}static applyState(e,i){y(e,this.validator),e.clear();const n=i.array.map(e=>t.fromStateObject(e));e.addAll(n)}}return e.methods={addItemAddedListener:{returnType:V,parameterTypes:[B(V,[t])],implementation:function(t){this.phetioObject.addItemAddedListener(t)},documentation:"Add a listener that is called when an item is added to the observable array."},addItemRemovedListener:{returnType:V,parameterTypes:[B(V,[t])],implementation:function(t){this.phetioObject.addItemRemovedListener(t)},documentation:"Add a listener that is called when an item is removed from the observable array."},getLength:{returnType:I,parameterTypes:[],implementation:function(){return this.phetioObject.length},documentation:"Get the number of elements in the observable array"}},e.documentation="An array that sends notifications when its values have changed.",e.validator=Mu,e.events=["itemAdded","itemRemoved"],e.typeName=`ObservableArrayIO<${t.typeName}>`,e.parameterTypes=[t],A.validateSubtype(e),e};o.register("ObservableArrayIO",Fu);const qu=Fu(A);class Hu extends vt{constructor(t){super(t=Object(s.a)({allowDuplicates:!1,phetioType:qu,tandem:T.a.OPTIONAL},t)),this.allowDuplicates=t.allowDuplicates,this._options=t,this._array=[],this.itemAddedEmitter=new Br({parameters:[{isValidValue:_.stubTrue},{valueType:Hu}]}),this.itemRemovedEmitter=new Br({parameters:[{isValidValue:_.stubTrue},{valueType:Hu}]}),this.lengthProperty=new jt(this._array.length,{numberType:"Integer",tandem:t.tandem.createTandem("lengthProperty"),phetioReadOnly:!0})}dispose(){this.lengthProperty.dispose(),vt.prototype.dispose.call(this)}reset(){this.clear()}get length(){return this._array.length}addItemAddedListener(t){this.itemAddedEmitter.addListener(t)}removeItemAddedListener(t){this.itemAddedEmitter.removeListener(t)}addItemRemovedListener(t){this.itemRemovedEmitter.addListener(t)}removeItemRemovedListener(t){this.itemRemovedEmitter.removeListener(t)}_fireItemAdded(t){this.phetioStartEvent("itemAdded",{getData:()=>this.phetioType.parameterTypes[0].toStateObject(t)}),this.itemAddedEmitter.emit(t,this),this.phetioEndEvent()}_fireItemRemoved(t){this.phetioStartEvent("itemRemoved",{getData:()=>this.phetioType.parameterTypes[0].toStateObject(t)}),this.itemRemovedEmitter.emit(t,this),this.phetioEndEvent()}add(t){this.push(t)}addAll(t){for(let e=0;e<t.length;e++)this.add(t[e])}remove(t){const e=this._array.indexOf(t);-1!==e&&(this._array.splice(e,1),this.lengthProperty.set(this._array.length),this._fireItemRemoved(t))}removeAll(t){for(let e=0;e<t.length;e++)this.remove(t[e])}push(t){if(!this.allowDuplicates&&this.includes(t))throw new Error("duplicates are not allowed");this._array.push(t),this.lengthProperty.set(this._array.length),this._fireItemAdded(t)}pop(){const t=this._array.pop();return void 0!==t&&(this.lengthProperty.set(this._array.length),this._fireItemRemoved(t)),t}shift(){const t=this._array.shift();return void 0!==t&&(this.lengthProperty.set(this._array.length),this._fireItemRemoved(t)),t}includes(t){return this._array.includes(t)}get(t){return this._array[t]}indexOf(t){return this._array.indexOf(t)}clear(){for(;this.length>0;)this.pop()}forEach(t){this._array.slice().forEach(t)}map(t){return this._array.map(t)}filter(t){return this._array.filter(t)}count(t){let e=0;for(let i=0;i<this._array.length;i++)t(this._array[i])&&e++;return e}find(t,e){return _.find(this._array,t,e)}some(t){return _.some(this._array,t)}every(t){return _.every(this._array,t)}reduce(t,e){for(let i=0;i<this._array.length;i++)t=e(t,this._array[i]);return t}getArray(){return this._array}getArrayCopy(){return this._array.slice()}splice(t,e,i,n,s){const r=this._array.splice.apply(this._array,arguments),o=Array.prototype.slice.call(arguments);for(let a=0;a<r.length;a++)this._fireItemRemoved(r[a]);for(let a=2;a<o.length;a++)this._fireItemAdded(o[a]);return this.lengthProperty.set(this._array.length),r}shuffle(t){const e=t.shuffle(this._array);this._array.length=0,Array.prototype.push.apply(this._array,e)}}o.register("ObservableArray",Hu);var Yu=Hu;const ju=Du.DEFAULT_PARAM_CHANGE_TIME_CONSTANT;class Gu{constructor(t){(t=Object(s.a)({initialOutputLevel:1,audioContext:Hl,connectImmediately:!1,enableControlProperties:[],additionalAudioNodes:[]},t)).enableControlProperties.forEach(t=>{}),this.audioContext=t.audioContext,this._outputLevel=t.initialOutputLevel,this.connectionList=[],this.enableControlProperties=new Yu,this.fullyEnabledProperty=new Ee(!0);const e=()=>{this.fullyEnabledProperty.value=_.every(this.enableControlProperties.getArray(),t=>t.value)};this.enableControlProperties.addItemAddedListener(t=>{t.link(e);const i=n=>{n===t&&(n.unlink(e),this.enableControlProperties.removeItemRemovedListener(i))};this.enableControlProperties.addItemRemovedListener(i)}),t.enableControlProperties.forEach(t=>{this.addEnableControlProperty(t)}),this.locallyEnabledProperty=new Ee(!0),this.addEnableControlProperty(this.locallyEnabledProperty),this.masterGainNode=this.audioContext.createGain(),this.masterGainNode.gain.setValueAtTime(this._outputLevel,this.audioContext.currentTime),t.connectImmediately&&this.masterGainNode.connect(this.audioContext.destination),this.fullyEnabledProperty.link(t=>{const e=t?0:this._outputLevel,i=t?this._outputLevel:0,n=this.audioContext.currentTime;this.masterGainNode.gain.setValueAtTime(e,n),this.masterGainNode.gain.linearRampToValueAtTime(i,this.audioContext.currentTime+Du.DEFAULT_LINEAR_GAIN_CHANGE_TIME)}),this.soundSourceDestination=this.masterGainNode;for(let i=t.additionalAudioNodes.length-1;i>=0;i--){const e=t.additionalAudioNodes[i];e.connect(this.soundSourceDestination),this.soundSourceDestination=e}this.disposeSoundGenerator=()=>{this.enableControlProperties.clear()}}connect(t){this.masterGainNode.connect(t),this.connectionList.push(t)}disconnect(t){this.masterGainNode.disconnect(t),this.connectionList=_.without(this.connectionList,t)}isConnectedTo(t){return this.connectionList.indexOf(t)>=0}setOutputLevel(t,e){e=void 0===e?ju:e,this._outputLevel=t;const i=this.audioContext.currentTime;0===e?(0===t||this.fullyEnabledProperty.value)&&(this.masterGainNode.gain.cancelScheduledValues(i),this.masterGainNode.gain.setValueAtTime(t,i)):this.fullyEnabledProperty.value&&("running"===this.audioContext.state?this.masterGainNode.gain.setTargetAtTime(t,i,e):this.masterGainNode.gain.linearRampToValueAtTime(t,i+Du.DEFAULT_LINEAR_GAIN_CHANGE_TIME))}set outputLevel(t){this.setOutputLevel(t)}getOutputLevel(){return this._outputLevel}get outputLevel(){return this.getOutputLevel()}addEnableControlProperty(t){this.enableControlProperties.push(t)}removeEnableControlProperty(t){this.enableControlProperties.remove(t)}get locallyEnabled(){return this.locallyEnabledProperty.value}set locallyEnabled(t){this.locallyEnabledProperty.value=t}get fullyEnabled(){return this.fullyEnabledProperty.value}dispose(){this.disposeSoundGenerator()}}Vl.register("SoundGenerator",Gu);var zu=Gu;const Wu=Du.DEFAULT_PARAM_CHANGE_TIME_CONSTANT;class Uu extends zu{constructor(t,e){if(super(e=Object(s.a)({loop:!1,trimSilence:!0,initialPlaybackRate:1,initiateWhenDisabled:!1,rateChangesAffectPlayingSounds:!0},e)),this.wrappedAudioBuffer=t,this.loop=e.loop,this.rateChangesAffectPlayingSounds=e.rateChangesAffectPlayingSounds,this.initiateWhenDisabled=e.initiateWhenDisabled,this.soundStart=0,this.soundEnd=null,e.trimSilence){const t=e=>{if(e){const i=Nu.detectSoundBounds(e);this.soundStart=i.soundStart,this.soundEnd=i.soundEnd,this.wrappedAudioBuffer.audioBufferProperty.unlink(t)}};this.wrappedAudioBuffer.audioBufferProperty.link(t)}this.activeBufferSources=[],this.localGainNode=this.audioContext.createGain(),this.localGainNode.connect(this.soundSourceDestination),this.playbackRate=e.initialPlaybackRate,this.isPlayingProperty=new Ee(!1),this.timeOfDeferredPlayRequest=Number.NEGATIVE_INFINITY,this.audioContextStateChangeListener=t=>{"running"===t&&((this.loop||(Date.now()-this.timeOfDeferredPlayRequest)/1e3<.2)&&this.play(.05),Su.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener))},this.fullyEnabledProperty.lazyLink(t=>{this.loop||t||this.stop()})}play(t){if("running"===this.audioContext.state&&this.wrappedAudioBuffer.audioBufferProperty.value){const e=this.audioContext.currentTime;if(t=void 0===t?0:t,this.loop&&!this.isPlayingProperty.get()||!this.loop&&(this.fullyEnabled||this.initiateWhenDisabled)){const i=this.audioContext.createBufferSource();i.buffer=this.wrappedAudioBuffer.audioBufferProperty.value,i.loop=this.loop,i.loopStart=this.soundStart,this.soundEnd&&(i.loopEnd=this.soundEnd),this.localGainNode.gain.cancelScheduledValues(e),this.localGainNode.gain.setValueAtTime(1,e),i.connect(this.soundSourceDestination),this.activeBufferSources.push(i),this.loop||(i.onended=()=>{const t=this.activeBufferSources.indexOf(i);t>-1&&this.activeBufferSources.splice(t,1),this.isPlayingProperty.value=this.activeBufferSources.length>0}),i.playbackRate.setValueAtTime(this.playbackRate,e),i.start(e+t,this.soundStart),this.isPlayingProperty.value=!0}}else"suspended"===this.audioContext.state&&(this.timeOfDeferredPlayRequest=Date.now(),Su.hasListener(this.audioContext,this.audioContextStateChangeListener)||Su.addStateChangeListener(this.audioContext,this.audioContextStateChangeListener))}stop(t){const e=(t=void 0===t?.1:t)>0?t/4.61:Du.DEFAULT_PARAM_CHANGE_TIME_CONSTANT,i=this.audioContext.currentTime,n=i+t;this.localGainNode.gain.cancelScheduledValues(i),this.localGainNode.gain.setTargetAtTime(0,i,e),this.activeBufferSources.forEach(t=>{t.stop(n)}),this.activeBufferSources.length=0,this.isPlayingProperty.value=!1,Su.hasListener(this.audioContext,this.audioContextStateChangeListener)&&Su.removeStateChangeListener(this.audioContext,this.audioContextStateChangeListener)}setPlaybackRate(t,e){e=void 0===e?Wu:e,this.rateChangesAffectPlayingSounds&&this.activeBufferSources.forEach(i=>{i.playbackRate.setTargetAtTime(t,this.audioContext.currentTime,e)}),this.playbackRate=t}get isPlaying(){return this.isPlayingProperty.value}}Vl.register("SoundClip",Uu);var Xu=Uu;class Ku{constructor(t,e){e=Object(s.a)({soundClipOptions:null,soundManagerOptions:null},e),this.soundClip=new Xu(t,e.soundClipOptions),Iu.addSoundGenerator(this.soundClip,e.soundManagerOptions)}play(){this.soundClip.play()}}Vl.register("SharedSoundClip",Ku);const Qu=new Ku(Wl,{soundClipOptions:{initialOutputLevel:.7},soundManagerOptions:{categoryName:"user-interface"}});Vl.register("pushButtonSoundPlayer",Qu);var Zu=Qu;const Ju={IDLE:"IDLE",OVER:"OVER",PRESSED:"PRESSED",DISABLED:"DISABLED",DISABLED_PRESSED:"DISABLED_PRESSED"};Nl.register("ButtonInteractionState",Ju);var $u=Ju;class tc extends Jt{constructor(t,e){super([t.overProperty,t.looksPressedProperty,t.enabledProperty],(t,e,i)=>i?t&&!e?$u.OVER:t&&e?$u.PRESSED:$u.IDLE:$u.DISABLED,e)}}Nl.register("PushButtonInteractionStateProperty",tc);var ec=tc;function ic(t){t=Object(s.a)({callback:null,delay:400,interval:100},t),this.delay=t.delay,this.interval=t.interval,this.callbacks=[],t.callback&&this.callbacks.push(t.callback),this.delayID=null,this.intervalID=null,this.fired=!1}o.register("CallbackTimer",ic),Object(z.a)(Object,ic,{isRunning:function(){return null!==this.delayID||null!==this.intervalID},start:function(){const t=this;t.isRunning()||(t.fired=!1,t.delayID=j.setTimeout((function(){t.delayID=null,t.intervalID=j.setInterval((function(){t.fire()}),t.interval),t.fire()}),t.delay))},stop:function(t){this.isRunning()&&(this.delayID&&(j.clearTimeout(this.delayID),this.delayID=null),this.intervalID&&(j.clearInterval(this.intervalID),this.intervalID=null),t&&!this.fired&&this.fire())},addCallback:function(t){-1===this.callbacks.indexOf(t)&&this.callbacks.push(t)},removeCallback:function(t){const e=this.callbacks.indexOf(t);-1!==e&&this.callbacks.splice(e,1)},fire:function(){const t=this.callbacks.slice(0);for(let e=0;e<t.length;e++)t[e]();this.fired=!0},dispose:function(){this.stop(),this.callbacks.length=0}});var nc=ic;class sc extends A{static toStateObject(t){y(t,this.validator);const e={type:t.type};return t.domEvent&&(e.domEventType=t.domEvent.type),t.pointer&&t.pointer.point&&(e.point=mh.toStateObject(t.pointer.point)),e}}sc.documentation="An event, with a point",sc.validator={valueType:Dh},sc.typeName="SceneryEventIO",A.validateSubtype(sc),we.register("SceneryEventIO",sc);var rc=sc;let oc=0;const ac=_.constant(!0);function lc(t){t=Object(s.a)({press:_.noop,release:_.noop,drag:_.noop,targetNode:null,attach:!0,mouseButton:0,pressCursor:"pointer",preferTargetCursor:!0,canStartPress:ac,a11yLooksPressedInterval:100,collapseDragEvents:!1,tandem:T.a.REQUIRED,phetioReadOnly:!1,phetioFeatured:vt.DEFAULT_OPTIONS.phetioFeatured},t),this._id=oc++,this._mouseButton=t.mouseButton,this._a11yLooksPressedInterval=t.a11yLooksPressedInterval,this._pressCursor=t.pressCursor,this._pressListener=t.press,this._releaseListener=t.release,this._dragListener=t.drag,this._canStartPress=t.canStartPress,this._targetNode=t.targetNode,this._attach=t.attach,this._collapseDragEvents=t.collapseDragEvents,this._preferTargetCursor=t.preferTargetCursor,this.overPointers=new Yu,this.isPressedProperty=new Ee(!1,{reentrant:!0}),this.isOverProperty=new Ee(!1),this.isHoveringProperty=new Ee(!1),this.isHighlightedProperty=new Ee(!1),this.isFocusedProperty=new Ee(!1),this.pointer=null,this.pressedTrail=null,this.interrupted=!1,this._pendingCollapsedDragEvent=null,this._listeningToPointer=!1,this._isHoveringListener=this.invalidateHovering.bind(this),this._isHighlightedListener=this.invalidateHighlighted.bind(this),this.a11yClickingProperty=new Ee(!1),this.looksPressedProperty=Jt.or([this.a11yClickingProperty,this.isPressedProperty]),this._a11yClickingTimeoutListener=null,this._pointerListener={up:this.pointerUp.bind(this),cancel:this.pointerCancel.bind(this),move:this.pointerMove.bind(this),interrupt:this.pointerInterrupt.bind(this)},this._pressAction=new kr(this.onPress.bind(this),{tandem:t.tandem.createTandem("pressAction"),phetioDocumentation:"Executes whenever a press occurs. The first argument when executing can be used to convey info about the SceneryEvent.",phetioReadOnly:t.phetioReadOnly,phetioFeatured:t.phetioFeatured,phetioEventType:Z.USER,parameters:[{name:"event",phetioType:rc},{phetioPrivate:!0,valueType:[Wo,null]},{phetioPrivate:!0,valueType:["function",null]}]}),this._releaseAction=new kr(this.onRelease.bind(this),{parameters:[{name:"event",phetioType:P(rc)},{phetioPrivate:!0,valueType:["function",null]}],tandem:t.tandem.createTandem("releaseAction"),phetioDocumentation:"Executes whenever a release occurs.",phetioReadOnly:t.phetioReadOnly,phetioFeatured:t.phetioFeatured,phetioEventType:Z.USER}),this.overPointers.lengthProperty.link(this.invalidateOver.bind(this)),this.isFocusedProperty.link(this.invalidateOver.bind(this)),this.overPointers.lengthProperty.link(this._isHoveringListener),this.isPressedProperty.link(this._isHoveringListener),this.overPointers.addItemAddedListener(t=>t.isDownProperty.link(this._isHoveringListener)),this.overPointers.addItemRemovedListener(t=>t.isDownProperty.unlink(this._isHoveringListener)),this.isHoveringProperty.link(this._isHighlightedListener),this.isPressedProperty.link(this._isHighlightedListener)}we.register("PressListener",lc),Object(z.a)(Object,lc,{get isPressed(){return this.isPressedProperty.value},getCurrentTarget(){return this.pressedTrail.lastNode()},get currentTarget(){return this.getCurrentTarget()},canPress(t){return!this.isPressed&&this._canStartPress(t,this)&&(!(t.pointer instanceof So)||t.domEvent.button===this._mouseButton)&&(!this._attach||!t.pointer.isAttached())},canClick(){return!this.isPressed&&this._canStartPress(null,this)},press(t,e,i){return!!this.canPress(t)&&(this.flushCollapsedDrag(),this._pressAction.execute(t,e||null,i||null),!0)},release(t,e){this.flushCollapsedDrag(),this._releaseAction.execute(t||null,e||null)},drag(t){this._dragListener(t,this)},interrupt(){this.a11yClickingProperty.value?(this.interrupted=!0,j.hasListener(this._a11yClickingTimeoutListener)&&(j.clearTimeout(this._a11yClickingTimeoutListener),this.a11yClickingProperty.isDisposed||(this.a11yClickingProperty.value=!1))):this.isPressed&&(this.interrupted=!0,this.release())},clearOverPointers(){this.overPointers.clear()},step(){this.flushCollapsedDrag()},flushCollapsedDrag(){this._pendingCollapsedDragEvent&&this.drag(this._pendingCollapsedDragEvent),this._pendingCollapsedDragEvent=null},invalidateOver(){let t=!1;if(this._listeningToPointer)t=!1;else for(let e=0;e<this.overPointers.length;e++)if(this.overPointers.get(e).isAttached()){t=!0;break}this.isOverProperty.value=this.isFocusedProperty.value||this.overPointers.length>0&&!t},invalidateHovering(){const t=this.overPointers.getArray();for(let e=0;e<t.length;e++){const i=t[e];if(!i.isDown||i===this.pointer)return void(this.isHoveringProperty.value=!0)}this.isHoveringProperty.value=!1},invalidateHighlighted(){this.isHighlightedProperty.value=this.isHoveringProperty.value||this.isPressedProperty.value},onPress(t,e,i){e=e||this._targetNode,this.pointer=t.pointer,this.pressedTrail=e?e.getUniqueTrail():t.trail.subtrailTo(t.currentTarget,!1),this.interrupted=!1,this.pointer.addInputListener(this._pointerListener,this._attach),this._listeningToPointer=!0,this.pointer.cursor=this._preferTargetCursor&&this.pressedTrail.lastNode().cursor||this._pressCursor,this.isPressedProperty.value=!0,this._pressListener(t,this),i&&i()},onRelease(t,e){this.pointer.removeInputListener(this._pointerListener),this._listeningToPointer=!1,this.pointer.cursor=null,this.pointer=null,this.pressedTrail=null,this.isPressedProperty.value=!1,this._releaseListener(t,this),e&&e()},down(t){this.press(t)},up(t){this.invalidateOver(),this.invalidateHovering()},enter(t){this.overPointers.push(t.pointer)},move(t){this.invalidateOver()},exit(t){this.overPointers.remove(t.pointer)},pointerUp(t){this.isPressed&&this.release(t)},pointerCancel(t){this.isPressed&&this.interrupt()},pointerMove(t){this.isPressed&&(this._collapseDragEvents?this._pendingCollapsedDragEvent=t:this.drag(t))},pointerInterrupt(){this.interrupt()},click(t){this.canClick()&&(this.interrupted=!1,this.a11yClickingProperty.value=!0,this.isFocusedProperty.value=!0,this.isPressedProperty.value=!0,this._pressListener(t,this),this.isPressedProperty.value=!1,this._releaseListener(t,this),this.interrupted?this.a11yClickingProperty.value=!1:(j.clearTimeout(this._a11yClickingTimeoutListener),this._a11yClickingTimeoutListener=j.setTimeout(()=>{this.a11yClickingProperty.isDisposed||(this.a11yClickingProperty.value=!1)},this._a11yLooksPressedInterval)))},focus(){this.isFocusedProperty.value=!0},blur(){this.isFocusedProperty.value=!1},dispose(){this.overPointers.clear(),this._listeningToPointer&&this.pointer.removeInputListener(this._pointerListener),this.isPressedProperty.isDisposed||(this.isPressedProperty.unlink(this._isHighlightedListener),this.isPressedProperty.unlink(this._isHoveringListener)),!this.isHoveringProperty.isDisposed&&this.isHoveringProperty.unlink(this._isHighlightedListener),this.overPointers.dispose(),this.isPressedProperty.dispose(),this.isOverProperty.dispose(),this.isHoveringProperty.dispose(),this.isHighlightedProperty.dispose(),this.isFocusedProperty.dispose(),this.a11yClickingProperty.dispose(),this.looksPressedProperty.dispose(),this._pressAction.dispose(),this._releaseAction.dispose()}}),lc.phetioAPI={pressAction:{phetioType:Tr([rc])},releaseAction:{phetioType:Tr([P(rc)])}};var hc=lc;function uc(t){const e=this;(t=Object(s.a)({startCallback:_.noop,endCallback:_.noop,enabled:!0,enabledPropertyOptions:null,tandem:T.a.REQUIRED,phetioState:vt.DEFAULT_OPTIONS.phetioState,phetioReadOnly:vt.DEFAULT_OPTIONS.phetioReadOnly,phetioFeatured:vt.DEFAULT_OPTIONS.phetioFeatured},t))&&t.enabledPropertyOptions,t.enabledPropertyOptions=Object(s.a)({tandem:t.tandem.createTandem("enabledProperty"),phetioState:t.phetioState,phetioReadOnly:t.phetioReadOnly,phetioDocumentation:"When disabled, the button is grayed out and cannot be pressed",phetioFeatured:!0},t.enabledPropertyOptions),this.overProperty=new Ee(!1),this.downProperty=new Ee(!1,{reentrant:!0}),this.a11yClickingProperty=new Ee(!1),this.looksPressedProperty=new Ee(!1),this.enabledProperty=new Ee(t.enabled,t.enabledPropertyOptions),this.produceSoundEmitter=new Br,this.interrupted=!1,this.listeners=[],this.looksPressedMultilink=null,this.downProperty.lazyLink((function(i){i?t.startCallback():t.endCallback(e.overProperty.get())})),this.enabledProperty.link((function(t){if(!t)for(let i=0;i<e.listeners.length;i++){const t=e.listeners[i];t.interrupt&&t.interrupt()}})),this.disposeButtonModel=function(){this.overProperty.dispose(),this.downProperty.dispose(),this.enabledProperty.dispose(),this.looksPressedMultilink&&this.looksPressedMultilink.dispose(),this.listeners=[]}}Nl.register("ButtonModel",uc),Object(z.a)(Object,uc,{dispose:function(){this.disposeButtonModel()},isA11yClicking:function(){return this.a11yClickingProperty.get()},createListener:function(t){const e=this;t=Object(s.a)({phetioDocumentation:"Indicates when the button has been pressed or released",canStartPress:function(){return e.enabledProperty.value}},t);const i=new hc(t);this.listeners.push(i),i.isPressedProperty.lazyLink(t=>{this.interrupted=i.interrupted,this.downProperty.set(t)}),i.isOverProperty.lazyLink(this.overProperty.set.bind(this.overProperty)),i.a11yClickingProperty.link(this.a11yClickingProperty.set.bind(this.a11yClickingProperty)),this.looksPressedMultilink&&this.looksPressedMultilink.dispose();const n=this.listeners.map((function(t){return t.looksPressedProperty}));return n.push(this.downProperty),this.looksPressedMultilink=Ot.multilink(n,(function(){e.looksPressedProperty.value=_.reduce(arguments,(t,e)=>t||e,!1)})),i}});var cc=uc;function dc(t){t=Object(s.a)({fireOnDown:!1,listener:null,fireOnHold:!1,fireOnHoldDelay:400,fireOnHoldInterval:100,tandem:T.a.REQUIRED,phetioReadOnly:vt.DEFAULT_OPTIONS.phetioReadOnly},t);const e=this;cc.call(this,t),this.isFiringProperty=new Ee(!1),this.firedEmitter=new Br({tandem:t.tandem.createTandem("firedEmitter"),phetioDocumentation:"Emits when the button is fired",phetioReadOnly:t.phetioReadOnly,phetioEventType:Z.USER}),null!==t.listener&&this.firedEmitter.addListener(t.listener),t.fireOnHold&&(this.timer=new nc({callback:this.fire.bind(this),delay:t.fireOnHoldDelay,interval:t.fireOnHoldInterval}));const i=function(i){if(i)e.enabledProperty.get()&&(t.fireOnDown&&e.fire(),e.timer&&e.timer.start(),(t.fireOnDown||e.timer)&&e.produceSoundEmitter.emit());else{const i=!t.fireOnDown&&e.overProperty.get()&&e.enabledProperty.get()&&!e.interrupted;e.timer?e.timer.stop(i):i&&(e.fire(),e.produceSoundEmitter.emit())}};this.downProperty.link(i);const n=function(t){!t&&e.timer&&e.timer.stop(!1)};this.enabledProperty.link(n),this.disposePushButtonModel=function(){this.isFiringProperty.value=!1,this.isFiringProperty.dispose(),this.firedEmitter.dispose(),this.downProperty.unlink(i),this.enabledProperty.unlink(n),this.timer&&(this.timer.dispose(),this.timer=null)}}Nl.register("PushButtonModel",dc),Object(z.a)(cc,dc,{dispose:function(){this.disposePushButtonModel(),cc.prototype.dispose.call(this)},addListener:function(t){this.firedEmitter.addListener(t)},removeListener:function(t){this.firedEmitter.removeListener(t)},fire:function(){this.isFiringProperty.value=!0,this.firedEmitter.emit(),this.isFiringProperty.value=!1}});var pc=dc;const fc=new ba("transparent");function mc(t,e,i){this.initialize(t,e,i)}we.register("SVGGradientStop",mc),Object(z.a)(Object,mc,{initialize:function(t,e,i){return this.svgGradient=t,this.color=i,this.ratio=e,this.svgElement=this.svgElement||document.createElementNS(mr,"stop"),this.svgElement.setAttribute("offset",e),this.dirty=!0,this.update(),this.propertyListener=this.propertyListener||this.onPropertyChange.bind(this),this.colorListener=this.colorListener||this.markDirty.bind(this),i instanceof Ot?(i.lazyLink(this.propertyListener),i.value instanceof ba&&i.value.changeEmitter.addListener(this.colorListener)):i instanceof ba&&i.changeEmitter.addListener(this.colorListener),this},onPropertyChange:function(t,e){e instanceof ba&&e.changeEmitter.removeListener(this.colorListener),t instanceof ba&&t.changeEmitter.addListener(this.colorListener),this.markDirty()},markDirty:function(){this.dirty=!0,this.svgGradient.markDirty()},update:function(){if(!this.dirty)return;this.dirty=!1;let t=this.color;t instanceof Ot&&(t=t.value),null===t&&(t="transparent"),"string"==typeof t?fc.setCSS(t):fc.set(t);const e="stop-opacity: "+fc.a.toFixed(20)+";";fc.alpha=1;const i="stop-color: "+fc.toCSS()+";";this.svgElement.setAttribute("style",i+" "+e)},dispose:function(){const t=this.color;t instanceof Ot?(t.hasListener(this.propertyListener)&&t.unlink(this.propertyListener),t.value instanceof ba&&t.value.changeEmitter.removeListener(this.colorListener)):t instanceof ba&&t.changeEmitter.removeListener(this.colorListener),this.color=null,this.svgGradient=null,this.freeToPool()}}),$t.a.mixInto(mc,{initialize:mc.prototype.initialize});var gc=mc;function yc(t,e){this.initialize(t,e)}we.register("SVGGradient",yc),Object(z.a)(Object,yc,{initialize:function(t,e){this.svgBlock=t,this.gradient=e;const i=void 0!==this.definition;this.definition=this.definition||this.createDefinition(),i||this.definition.setAttribute("gradientUnits","userSpaceOnUse"),e.transformMatrix?this.definition.setAttribute("gradientTransform",e.transformMatrix.getSVGTransform()):this.definition.removeAttribute("gradientTransform");const n=e.getSVGStops();this.stops=Ke(this.stops);for(let s=0;s<n.length;s++){const t=new gc(this,n[s].ratio,n[s].color);this.stops.push(t),this.definition.appendChild(t.svgElement)}this.dirty=!1},createDefinition:function(){throw new Error("abstract method")},markDirty:function(){this.dirty||(this.dirty=!0,this.svgBlock.markDirtyGradient(this))},update:function(){if(this.dirty){this.dirty=!1;for(let t=0;t<this.stops.length;t++)this.stops[t].update()}},dispose:function(){for(let t=0;t<this.stops.length;t++){const e=this.stops[t];this.definition.removeChild(e.svgElement),e.dispose()}Ke(this.stops),this.svgBlock=null,this.gradient=null,this.freeToPool()}});var bc=yc;function vc(t,e){this.initialize(t,e)}we.register("SVGLinearGradient",vc),Object(z.a)(bc,vc,{initialize:function(t,e){return bc.prototype.initialize.call(this,t,e),this.definition.setAttribute("x1",e.start.x),this.definition.setAttribute("y1",e.start.y),this.definition.setAttribute("x2",e.end.x),this.definition.setAttribute("y2",e.end.y),this},createDefinition:function(){return document.createElementNS(mr,"linearGradient")}}),$t.a.mixInto(vc,{initialize:vc.prototype.initialize});var _c=vc;function Ac(t,e,i,n){const s=void 0===n;this.start=s?t:new te.a(t,e),this.end=s?e:new te.a(i,n),xa.call(this)}we.register("LinearGradient",Ac),Object(z.a)(xa,Ac,{isLinearGradient:!0,createCanvasGradient:function(){return we.scratchContext.createLinearGradient(this.start.x,this.start.y,this.end.x,this.end.y)},createSVGPaint:function(t){return _c.createFromPool(t,this)},toString:function(){let t="new scenery.LinearGradient( "+this.start.x+", "+this.start.y+", "+this.end.x+", "+this.end.y+" )";return _.each(this.stops,(function(e){t+=".addColorStop( "+e.ratio+", '"+(e.color.toCSS?e.color.toCSS():e.color.toString())+"' )"})),t}});var wc=Ac;function xc(){}Nl.register("ColorConstants",xc),Object(z.a)(Object,xc,{},{LIGHT_BLUE:new ba(153,206,255),LIGHT_GRAY:new ba(220,220,220)});var Sc=xc;const Tc={VALUE_NAMED_PLACEHOLDER:"{{value}}",VALUE_NUMBERED_PLACEHOLDER:"{0}",DISABLED_OPACITY:.45};Nl.register("SunConstants",Tc);var Dc=Tc;const Ec=Sc.LIGHT_BLUE;function Cc(t,e,i){(i=Object(s.a)({content:null,minWidth:10,minHeight:10,cursor:"pointer",baseColor:Ec,disabledBaseColor:Sc.LIGHT_GRAY,xMargin:8,yMargin:5,fireOnDown:!1,touchAreaXDilation:0,touchAreaYDilation:0,mouseAreaXDilation:0,mouseAreaYDilation:0,touchAreaXShift:0,touchAreaYShift:0,mouseAreaXShift:0,mouseAreaYShift:0,stroke:void 0,lineWidth:.5,xAlign:"center",yAlign:"center",cornerRadius:4,leftTopCornerRadius:null,rightTopCornerRadius:null,leftBottomCornerRadius:null,rightBottomCornerRadius:null,buttonAppearanceStrategy:Cc.ThreeDAppearanceStrategy,contentAppearanceStrategy:Cc.FadeContentWhenDisabled,listenerOptions:null,tagName:"button",tandem:T.a.OPTIONAL},i)).listenerOptions=Object(s.a)({tandem:i.tandem.createTandem("pressListener"),accessibleClick:i.accessibleClick},i.listenerOptions),vt.mergePhetioComponentOptions({visibleProperty:{phetioFeatured:!0}},i),this.buttonModel=t,Wo.call(this);const n=i.content;this._pressListener=t.createListener(i.listenerOptions),this.addInputListener(this._pressListener),this.baseColorProperty=new Tl(i.baseColor);const r=Math.max(n?n.width+2*i.xMargin:0,i.minWidth),o=Math.max(n?n.height+2*i.yMargin:0,i.minHeight),a=new Rl(Pc(r,o,i),{fill:i.baseColor,lineWidth:i.lineWidth});if(this.addChild(a),n){n&&(n.pickable=!1);var l=new Zo(n,{alignBounds:new ne(i.xMargin,i.yMargin,a.width-i.xMargin,o-i.yMargin),xAlign:i.xAlign,yAlign:i.yAlign});this.addChild(l)}const h=new i.buttonAppearanceStrategy(a,e,this.baseColorProperty,i),u=new i.contentAppearanceStrategy(n,e,i),c=this;function d(t){c.cursor=t===$u.DISABLED||t===$u.DISABLED_PRESSED?null:"pointer"}e.link(d),this.touchArea=a.localBounds.dilatedXY(i.touchAreaXDilation,i.touchAreaYDilation).shifted(i.touchAreaXShift,i.touchAreaYShift),this.mouseArea=a.localBounds.dilatedXY(i.mouseAreaXDilation,i.mouseAreaYDilation).shifted(i.mouseAreaXShift,i.mouseAreaYShift),this.mutate(i),this.disposeRectangularButtonView=function(){h.dispose(),u.dispose(),this.baseColorProperty.dispose(),this._pressListener.dispose(),e.hasListener(d)&&e.unlink(d),n&&l.dispose()}}function Pc(t,e,i){return cn.roundedRectangleWithRadii(0,0,t,e,{topLeft:null!==i.leftTopCornerRadius?i.leftTopCornerRadius:i.cornerRadius,topRight:null!==i.rightTopCornerRadius?i.rightTopCornerRadius:i.cornerRadius,bottomLeft:null!==i.leftBottomCornerRadius?i.leftBottomCornerRadius:i.cornerRadius,bottomRight:null!==i.rightBottomCornerRadius?i.rightBottomCornerRadius:i.cornerRadius})}Nl.register("RectangularButtonView",Cc),Cc.ThreeDAppearanceStrategy=function(t,e,i,n){const s=t.width,r=t.height,o=Math.min(7/r,1),a=Math.max(1-3/r,0),l=Math.min(7/s,1),h=Math.max(1-3/s,0),u=new ba(255,255,255,.7),c=new Tl(i,{luminanceFactor:.7}),d=new Tl(i,{luminanceFactor:.5}),p=new Tl(i,{luminanceFactor:.2}),f=new Tl(i,{luminanceFactor:-.3}),m=new Tl(i,{luminanceFactor:-.4}),g=new Tl(i,{luminanceFactor:-.5}),y=new Tl(n.disabledBaseColor),b=new Tl(n.disabledBaseColor,{luminanceFactor:.7}),v=new Tl(n.disabledBaseColor,{luminanceFactor:.5}),_=new Tl(n.disabledBaseColor,{luminanceFactor:.2}),A=new Tl(n.disabledBaseColor,{luminanceFactor:-.3}),w=new Tl(n.disabledBaseColor,{luminanceFactor:-.4}),x=new Tl(n.disabledBaseColor,{luminanceFactor:-.5}),S=new Jt([i],(function(t){return t.withAlpha(0)})),T=new Jt([y],(function(t){return t.withAlpha(0)})),D=new wc(0,0,0,r).addColorStop(0,c).addColorStop(o,i).addColorStop(a,i).addColorStop(1,g),E=new wc(0,0,s,0).addColorStop(0,u).addColorStop(l,S).addColorStop(h,S).addColorStop(1,g),C=new wc(0,0,0,r).addColorStop(0,c).addColorStop(o,d).addColorStop(a,d).addColorStop(1,g),P=new wc(0,0,s,0).addColorStop(0,u).addColorStop(l/2,new ba(255,255,255,0)).addColorStop(h,S).addColorStop(1,f),k=new wc(0,0,0,r).addColorStop(0,c).addColorStop(.67*o,f).addColorStop(a,p).addColorStop(1,g),I=new wc(0,0,0,r).addColorStop(0,b).addColorStop(o,v).addColorStop(a,v).addColorStop(1,x),L=new wc(0,0,s,0).addColorStop(0,b).addColorStop(l,T).addColorStop(h,T).addColorStop(1,x),O=new wc(0,0,0,r).addColorStop(0,b).addColorStop(.67*o,A).addColorStop(a,_).addColorStop(1,x);let R,N;null===n.stroke?(R=null,N=null):void 0===n.stroke?(R=m,N=w):(R=n.stroke,N=w);const M=new Rl(Pc(s,r,n),{lineWidth:n.lineWidth,pickable:!1});function B(e){switch(e){case $u.IDLE:t.fill=D,M.stroke=R,M.fill=E;break;case $u.OVER:t.fill=C,M.stroke=R,M.fill=P;break;case $u.PRESSED:t.fill=k,M.stroke=R,M.fill=P;break;case $u.DISABLED:t.fill=I,t.stroke=N,M.stroke=N,M.fill=L;break;case $u.DISABLED_PRESSED:t.fill=O,t.stroke=N,M.stroke=N,M.fill=L;break;default:throw new Error("unsupported interactionState: "+e)}}t.addChild(M),t.cachedPaints=[D,C,k,I,O,N],M.cachedPaints=[E,P,L,R,N],e.link(B),this.dispose=function(){e.hasListener(B)&&e.unlink(B),S.dispose(),T.dispose(),y.dispose(),c.dispose(),d.dispose(),p.dispose(),f.dispose(),m.dispose(),g.dispose(),b.dispose(),v.dispose(),_.dispose(),A.dispose(),w.dispose(),x.dispose()}},Cc.FlatAppearanceStrategy=function(t,e,i,n){const s=new Tl(i,{luminanceFactor:.4}),r=new Tl(i,{luminanceFactor:-.4}),o=new Tl(n.disabledBaseColor,{luminanceFactor:-.4}),a=i,l=s,h=r,u=n.disabledBaseColor,c=u;let d,p;function f(e){switch(e){case $u.IDLE:t.fill=a,t.stroke=d;break;case $u.OVER:t.fill=l,t.stroke=d;break;case $u.PRESSED:t.fill=h,t.stroke=d;break;case $u.DISABLED:t.fill=u,t.stroke=p;break;case $u.DISABLED_PRESSED:t.fill=c,t.stroke=p;break;default:throw new Error("unsupported interactionState: "+e)}}null===n.stroke?(d=null,p=null):void 0===n.stroke?(d=r,p=o):(d=n.stroke,p=o),t.cachedPaints=[a,l,h,u,c,d,p],e.link(f),this.dispose=function(){e.hasListener(f)&&e.unlink(f),s.dispose(),r.dispose(),o.dispose()}},Cc.FadeContentWhenDisabled=function(t,e){function i(e){t&&(t.opacity=e===$u.DISABLED||e===$u.DISABLED_PRESSED?Dc.DISABLED_OPACITY:1)}e.link(i),this.dispose=function(){e.hasListener(i)&&e.unlink(i)}},Object(z.a)(Wo,Cc,{setEnabled:function(t){this.buttonModel.enabledProperty.set(t)},set enabled(t){this.setEnabled(t)},getEnabled:function(){return this.buttonModel.enabledProperty.get()},get enabled(){return this.getEnabled()},getEnabledProperty:function(){return this.buttonModel.enabledProperty},setBaseColor:function(t){this.baseColorProperty.paint=t},set baseColor(t){this.setBaseColor(t)},getBaseColor:function(){return this.baseColorProperty.value},get baseColor(){return this.getBaseColor()},a11yClick:function(){this._pressListener.click()},dispose:function(){this.disposeRectangularButtonView(),Wo.prototype.dispose.call(this)}});var kc=Cc;function Ic(t){const e=(t=Object(s.a)({soundPlayer:null,listener:_.noop,tandem:T.a.REQUIRED},t)).listener;t=_.omit(t,["listener"]),this.buttonModel=new pc(t),this.addListener(e),kc.call(this,this.buttonModel,new ec(this.buttonModel),t);const i=t.soundPlayer||Zu,n=()=>{i.play()};this.buttonModel.produceSoundEmitter.addListener(n),this.disposeRectangularPushButton=function(){this.buttonModel.produceSoundEmitter.removeListener(n),this.buttonModel.dispose()}}Nl.register("RectangularPushButton",Ic),Object(z.a)(kc,Ic,{dispose:function(){kc.prototype.dispose.call(this),this.disposeRectangularPushButton()},addListener:function(t){this.buttonModel.addListener(t)},removeListener:function(t){this.buttonModel.removeListener(t)}});var Lc=Ic;function Oc(t,e,i){(i=Object(s.a)({cursor:"pointer",baseColor:"white",stroke:"black",lineWidth:1,cornerRadius:4,xMargin:7,yMargin:5,touchAreaXDilation:7,touchAreaYDilation:7,arrowHeight:20,arrowWidth:20*Math.sqrt(3)/2,arrowFill:"black",arrowStroke:null,arrowLineWidth:1,numberOfArrows:1,arrowSpacing:-10,fireOnHold:!0,fireOnHoldDelay:400,fireOnHoldInterval:100,startCallback:_.noop,endCallback:_.noop},i)).listener=e;const n=new cn;for(let s=0;s<i.numberOfArrows;s++){const e=s*(i.arrowHeight+i.arrowSpacing);if("up"===t)n.moveTo(i.arrowHeight/2,e).lineTo(i.arrowHeight,i.arrowWidth+e).lineTo(0,i.arrowWidth+e).close();else if("down"===t)n.moveTo(0,e).lineTo(i.arrowHeight,e).lineTo(i.arrowHeight/2,i.arrowWidth+e).close();else if("left"===t)n.moveTo(e,i.arrowHeight/2).lineTo(i.arrowWidth+e,0).lineTo(i.arrowWidth+e,i.arrowHeight).close();else{if("right"!==t)throw new Error("unsupported direction: "+t);n.moveTo(e,0).lineTo(i.arrowWidth+e,i.arrowHeight/2).lineTo(e,i.arrowHeight).close()}}i.content=new Rl(n,{fill:i.arrowFill,stroke:i.arrowStroke,lineWidth:i.arrowLineWidth,pickable:!1}),Lc.call(this,i)}Nl.register("ArrowButton",Oc),Object(z.a)(Lc,Oc);var Rc=Oc;class Nc{constructor(t,e,i,n,s,r,o,a,l){this.coordinate=t,this.centerCoordinate=e,this.minSide=i,this.maxSide=n,this.rectCoordinate=s,this.rectSize=r,this.layoutBoxOrientation=o,this.ariaOrientation=o,this.modelToView=a,this.toVector=l,this.opposite=null}}const Mc=new Nc("x","centerX","left","right","rectX","rectWidth","horizontal",(t,e)=>t.modelToViewX(e),(t,e)=>new te.a(t,e)),Bc=new Nc("y","centerY","top","bottom","rectY","rectHeight","vertical",(t,e)=>t.modelToViewY(e),(t,e)=>new te.a(e,t));Mc.opposite=Bc,Bc.opposite=Mc;const Fc=h.byMap({HORIZONTAL:Mc,VERTICAL:Bc});a.a.register("Orientation",Fc);var Vc=Fc;const qc=new te.a(0,0);function Hc(t){t=Object(s.a)({positionProperty:null,start:null,end:null,transform:null,dragBoundsProperty:null,allowTouchSnag:!0,applyOffset:!0,useParentOffset:!1,trackAncestors:!1,translateNode:!1,mapPosition:null,offsetPosition:null,tandem:T.a.REQUIRED,phetioReadOnly:vt.DEFAULT_OPTIONS.phetioReadOnly,phetioFeatured:vt.DEFAULT_OPTIONS.phetioFeatured},t),hc.call(this,t),this._allowTouchSnag=t.allowTouchSnag,this._applyOffset=t.applyOffset,this._useParentOffset=t.useParentOffset,this._trackAncestors=t.trackAncestors,this._translateNode=t.translateNode,this._transform=t.transform,this._positionProperty=t.positionProperty,this._mapPosition=t.mapPosition,this._offsetPosition=t.offsetPosition,this._dragBoundsProperty=t.dragBoundsProperty||new Ot(null),this._start=t.start,this._end=t.end,this.isUserControlledProperty=this.isPressedProperty,this._globalPoint=new te.a(0,0),this._localPoint=new te.a(0,0),this._parentPoint=new te.a(0,0),this._modelPoint=new te.a(0,0),this._modelDelta=new te.a(0,0),this._parentOffset=new te.a(0,0),this._transformTracker=null,this._transformTrackerListener=this.ancestorTransformed.bind(this),this._lastInterruptedTouchPointer=null,this._dragAction=new kr(t=>{this._globalPoint.equals(this.pointer.point)||this.reposition(this.pointer.point),hc.prototype.drag.call(this,t)},{parameters:[{name:"event",phetioType:rc}],phetioFeatured:t.phetioFeatured,tandem:t.tandem.createTandem("dragAction"),phetioHighFrequency:!0,phetioDocumentation:"Emits whenever a drag occurs with an SceneryEventIO argument.",phetioReadOnly:t.phetioReadOnly,phetioEventType:Z.USER})}we.register("DragListener",Hc),Object(z.a)(hc,Hc,{press(t,e,i){return hc.prototype.press.call(this,t,e,()=>{this.pointer.reserveForDrag(),this.attachTransformTracker();const e=this.globalToParentPoint(this._localPoint.set(this.pointer.point));this._useParentOffset&&this.modelToParentPoint(this._parentOffset.set(this._positionProperty.value)).subtract(e),this.parentToLocalPoint(e),this.reposition(this.pointer.point),this._start&&this._start(t,this),i&&i()})},canClick:()=>!1,release(t,e){hc.prototype.release.call(this,t,()=>{this.detachTransformTracker(),this._end&&this._end(this),e&&e()})},drag(t){this._globalPoint.equals(this.pointer.point)||this._dragAction.execute(t)},tryTouchSnag(t){this._allowTouchSnag&&!t.pointer.isAttached()&&this.press(t)},getGlobalPoint(){return this._globalPoint.copy()},get globalPoint(){return this.getGlobalPoint()},getLocalPoint(){return this._localPoint.copy()},get localPoint(){return this.getLocalPoint()},getParentPoint(){return this._parentPoint.copy()},get parentPoint(){return this.getParentPoint()},getModelPoint(){return this._modelPoint.copy()},get modelPoint(){return this.getModelPoint()},getModelDelta(){return this._modelDelta.copy()},get modelDelta(){return this.getModelDelta()},globalToParentPoint(t){return this.pressedTrail.getParentTransform().getInverse().multiplyVector2(t),t},parentToLocalPoint(t){return this.pressedTrail.lastNode().getTransform().getInverse().multiplyVector2(t),t},localToParentPoint(t){return this.pressedTrail.lastNode().getMatrix().multiplyVector2(t),t},parentToModelPoint(t){return this._transform&&this._transform.getInverse().multiplyVector2(t),t},modelToParentPoint(t){return this._transform&&this._transform.getMatrix().multiplyVector2(t),t},mapModelPoint(t){return this._mapPosition?this._mapPosition(t):this._dragBoundsProperty.value?this._dragBoundsProperty.value.closestPointTo(t):t},applyParentOffset(t){this._offsetPosition&&t.add(this._offsetPosition(t,this)),this._applyOffset&&(this._useParentOffset?t.add(this._parentOffset):(t.subtract(this.localToParentPoint(qc.set(this._localPoint))),t.add(this.localToParentPoint(qc.setXY(0,0)))))},reposition(t){this._globalPoint.set(t),this.applyParentOffset(this.globalToParentPoint(this._parentPoint.set(t))),this._modelDelta.set(this._modelPoint).negate(),this._modelPoint=this.mapModelPoint(this.parentToModelPoint(qc.set(this._parentPoint))),this._modelDelta.add(this._modelPoint),this.modelToParentPoint(this._parentPoint.set(this._modelPoint)),this._translateNode&&(this.pressedTrail.lastNode().translation=this._parentPoint),this._positionProperty&&(this._positionProperty.value=this._modelPoint.copy())},touchenter(t){this.tryTouchSnag(t)},touchmove(t){this.tryTouchSnag(t)},ancestorTransformed(){this.reposition(this.pointer.point)},attachTransformTracker(){this._trackAncestors&&(this._transformTracker=new In(this.pressedTrail.copy().removeDescendant()),this._transformTracker.addListener(this._transformTrackerListener))},detachTransformTracker(){this._transformTracker&&(this._transformTracker.removeListener(this._transformTrackerListener),this._transformTracker.dispose(),this._transformTracker=null)},setDragBounds(t){this._dragBoundsProperty.value=t},set dragBounds(t){this.setDragBounds(t)},getDragBounds(){return this._dragBoundsProperty.value},get dragBounds(){return this.getDragBounds()},setTransform(t){this._transform=t},set transform(t){this.setTransform(t)},getTransform(){return this._transform},get transform(){return this.getTransform()},interrupt(){this.pointer&&this.pointer instanceof Co&&(this._lastInterruptedTouchPointer=this.pointer),hc.prototype.interrupt.call(this)},canPress(t){return t.pointer!==this._lastInterruptedTouchPointer&&hc.prototype.canPress.call(this,t)},dispose(){this._dragAction.dispose(),this.detachTransformTracker(),hc.prototype.dispose.call(this)}},{createForwardingListener:(t,e)=>(e=Object(s.a)({allowTouchSnag:!0},e),{down(e){e.canStartPress()&&t(e)},touchenter(t){e.allowTouchSnag&&this.down(t)},touchmove(t){e.allowTouchSnag&&this.down(t)}})});var Yc=Hc;const jc=t=>t+"",Gc={mixInto:t=>{const e=t.prototype;Object(de.a)(e,{initializeAccessibleValueHandler(t,e,i,n){ll(this,["mutate","inputValue","setAccessibleAttribute"]);const r={startChange:_.noop,endChange:_.noop,change:_.noop,constrainValue:_.identity,keyboardStep:(e.get().max-e.get().min)/20,shiftKeyboardStep:(e.get().max-e.get().min)/100,pageKeyboardStep:(e.get().max-e.get().min)/10,ariaOrientation:Vc.HORIZONTAL,roundToStepSize:!1,a11yMapValue:_.identity,a11yRepeatEqualValueText:!0,a11yCreateAriaValueText:jc,a11yCreateValueChangeAlert:null,a11yDependencies:[]};n=Object(s.a)({},r,n);const o=_.pick(n,_.keys(r));o.tagName="input",o.inputType="range",this.mutate(o),this._valueProperty=t,this._rangeProperty=e,this._enabledProperty=i,this._startChange=n.startChange,this._change=n.change,this._endChange=n.endChange,this._constrainValue=n.constrainValue,this._keyboardStep=null,this.setKeyboardStep(n.keyboardStep),this._shiftKeyboardStep=null,this.setShiftKeyboardStep(n.shiftKeyboardStep),this._pageKeyboardStep=null,this.setPageKeyboardStep(n.pageKeyboardStep),this._shiftKey=!1,this._ariaOrientation=null,this.ariaOrientation=n.ariaOrientation,this.oldValue=null,this.a11yCreateValueChangeAlert=n.a11yCreateValueChangeAlert,this.timesValueTextChangedBeforeAlerting=0,this.endInteractionUtterance=new Ql,this.a11yInputHandled=!1,this.blockInput=!1,this.rangeKeysDown={},this.roundToStepSize=n.roundToStepSize,this.a11yMapValue=n.a11yMapValue,this.a11yCreateAriaValueText=n.a11yCreateAriaValueText,this._dependenciesMultilink=null,this._a11yRepeatEqualValueText=n.a11yRepeatEqualValueText,this.setA11yDependencies(n.a11yDependencies);const a=t=>{const e=this.getMappedValue(t.min),i=this.getMappedValue(t.max);this.setAccessibleAttribute("min",e),this.setAccessibleAttribute("max",i),this.updateSiblingStepAttribute()};this._rangeProperty.link(a);const l=()=>{const t=this.getMappedValue();this.setAccessibleAttribute("aria-valuenow",t),this.inputValue=t};this._valueProperty.link(l),this._disposeAccessibleValueHandler=()=>{this._rangeProperty.unlink(a),this._valueProperty.unlink(l),this._dependenciesMultilink&&this._dependenciesMultilink.dispose()}},setA11yDependencies(t){this._dependenciesMultilink&&this._dependenciesMultilink.dispose(),this._dependenciesMultilink=Ot.multilink(t.concat(this._valueProperty),()=>{this.updateAriaValueText(this.oldValue),this.oldValue=this._valueProperty.value})},updateAriaValueText(t){const e=this.getMappedValue();let i=this.a11yCreateAriaValueText(e,this._valueProperty.value,t);this._a11yRepeatEqualValueText&&i===this.ariaValueText&&(i+=""),this.ariaValueText=i+""},setUtteranceAndAlert(){if(this.a11yCreateValueChangeAlert){const t=phet.joist.sim.utteranceQueue;this.endInteractionUtterance.resetTimingVariables();const e=this.getMappedValue(),i=this.a11yCreateValueChangeAlert(e,this._valueProperty.value,this.oldValue);i&&(this.endInteractionUtterance.alert=i,t.hasUtterance(this.endInteractionUtterance)?this.timesChangedBeforeAlerting++:this.timesChangedBeforeAlerting=1,this.endInteractionUtterance.alertStableDelay=Math.min(700*this.timesChangedBeforeAlerting,2e3),t.addToBack(this.endInteractionUtterance))}},reset(){this.a11yCreateAriaValueText.reset&&this.a11yCreateAriaValueText.reset(),this.updateAriaValueText(null)},setMapValueFunction(t){this.a11yMapValue=t},getMappedValue(t=this._valueProperty.value){const e=this.a11yMapValue(t);return e},getAccessibleValueHandlerInputListener(){return{keydown:this.handleKeyDown.bind(this),keyup:this.handleKeyUp.bind(this),input:this.handleInput.bind(this),change:this.handleChange.bind(this),blur:this.handleBlur.bind(this)}},handleKeyDown(t){const e=t.domEvent,i=e.keyCode;if(this._shiftKey=e.shiftKey,this.blockInput=!0,this._enabledProperty.get()&&ch.isRangeKey(i)){e.preventDefault(),t.pointer.reserveForKeyboardDrag(),this.anyKeysDown()||this._startChange(t),this.rangeKeysDown[i]=!0;let n=this._valueProperty.get();if(i===ch.KEY_END||i===ch.KEY_HOME)i===ch.KEY_END?n=this._rangeProperty.get().max:i===ch.KEY_HOME&&(n=this._rangeProperty.get().min);else{let t;i===ch.KEY_PAGE_UP||i===ch.KEY_PAGE_DOWN?(t=this.pageKeyboardStep,i===ch.KEY_PAGE_UP?n=this._valueProperty.get()+t:i===ch.KEY_PAGE_DOWN&&(n=this._valueProperty.get()-t)):ch.isArrowKey(i)&&(t=e.shiftKey?this.shiftKeyboardStep:this.keyboardStep,i===ch.KEY_RIGHT_ARROW||i===ch.KEY_UP_ARROW?n=this._valueProperty.get()+t:i!==ch.KEY_LEFT_ARROW&&i!==ch.KEY_DOWN_ARROW||(n=this._valueProperty.get()-t),this.roundToStepSize&&(n=zc(n,this._valueProperty.get(),t))),n=oe.a.clamp(n,this._rangeProperty.get().min,this._rangeProperty.get().max)}this._valueProperty.set(this._constrainValue(n)),this._change(t)}},handleKeyUp(t){const e=t.domEvent;this.allKeysUp()||(e.keyCode===ch.KEY_SHIFT&&(this._shiftKey=!1),this._enabledProperty.get()&&ch.isRangeKey(e.keyCode)&&(this.rangeKeysDown[e.keyCode]=!1,this.allKeysUp()&&this.onInteractionEnd(t)))},handleChange(t){this.a11yInputHandled||this.handleInput(t),this.a11yInputHandled=!1},handleInput(t){if(this._enabledProperty.get()&&!this.blockInput){this.a11yInputHandled=!0;let e=this._valueProperty.get();const i=t.domEvent.target.value,n=this._shiftKey?this.shiftKeyboardStep:this.keyboardStep,s=this.getMappedValue();this._startChange(t),i>s?e=this._valueProperty.get()+n:i<s&&(e=this._valueProperty.get()-n),this.roundToStepSize&&(e=zc(e,this._valueProperty.get(),n)),e=oe.a.clamp(e,this._rangeProperty.get().min,this._rangeProperty.get().max),this._valueProperty.set(this._constrainValue(e)),this._change(t),this.onInteractionEnd(t)}},handleBlur(t){this.anyKeysDown()&&this.onInteractionEnd(t),this._shiftKey=!1,this.rangeKeysDown={}},onInteractionEnd(t){this.setUtteranceAndAlert(),this._endChange(t)},setKeyboardStep(t){this._keyboardStep=t},set keyboardStep(t){this.setKeyboardStep(t)},getKeyboardStep(){return this._keyboardStep},get keyboardStep(){return this.getKeyboardStep()},setShiftKeyboardStep(t){this._shiftKeyboardStep=t},set shiftKeyboardStep(t){this.setShiftKeyboardStep(t)},getShiftKeyboardStep(){return this._shiftKeyboardStep},get shiftKeyboardStep(){return this.getShiftKeyboardStep()},getShiftKeyDown(){return this._shiftKey},get shiftKeyDown(){return this.getShiftKeyDown()},setPageKeyboardStep(t){this._pageKeyboardStep=t},set pageKeyboardStep(t){this.setPageKeyboardStep(t)},getPageKeyboardStep(){return this._pageKeyboardStep},get pageKeyboardStep(){return this.getPageKeyboardStep()},setAriaOrientation:function(t){this._ariaOrientation=t,this.setAccessibleAttribute("aria-orientation",t.ariaOrientation)},set ariaOrientation(t){this.setAriaOrientation(t)},getAriaOrientation:function(){return this._ariaOrientation},get ariaOrientation(){return this._ariaOrientation},disposeAccessibleValueHandler(){this._disposeAccessibleValueHandler()},allKeysUp(){return _.every(this.rangeKeysDown,(function(t){return!t}))},anyKeysDown(){return!!_.find(this.rangeKeysDown,(function(t){return t}))},updateSiblingStepAttribute(){const t=Math.min(Math.min(this.keyboardStep,this.shiftKeyboardStep),this.pageKeyboardStep);let e=Math.pow(10,-oe.a.numberOfDecimalPlaces(t));const i=this.getMappedValue(this._rangeProperty.get().min),n=this.getMappedValue(this._rangeProperty.get().max);e/(n-i)<1e-5&&(e=n/100),this.setAccessibleAttribute("step",e)}})}};Nl.register("AccessibleValueHandler",Gc);var zc=function(t,e,i){let n=t;return 0!==i&&(n=oe.a.roundSymmetric(n/i)*i,n=Wc(n,e,i)),n},Wc=function(t,e,i){let n=t;const s=Math.abs(t-e),r=s>i,o=oe.a.equalsEpsilon(s,i,1e-14);return r&&!o&&(n+=t>e?-1*i:i),n};Gc.DEFAULT_TAG_NAME="input";var Uc=Gc;const Xc={mixInto:function(t){const e=t.prototype;Uc.mixInto(t),Object(de.a)(e,{initializeAccessibleSlider:function(t,e,i,n){const r=this;ll(this,["addInputListener","removeInputListener"]),(n=Object(s.a)({startDrag:_.noop,endDrag:_.noop,drag:_.noop,constrainValue:_.identity},n)).startChange=n.startDrag,n.endChange=n.endDrag,n.change=n.drag,this.initializeAccessibleValueHandler(t,e,i,n);const o=this.getAccessibleValueHandlerInputListener();this.addInputListener(o),this._disposeAccessibleSlider=function(){r.removeInputListener(o),r.disposeAccessibleValueHandler()}},disposeAccessibleSlider:function(){this._disposeAccessibleSlider()},resetAccessibleSlider:function(){this.resetAccessibleValueHandler()}})}};Nl.register("AccessibleSlider",Xc);var Kc=Xc;function Qc(t,e){this.initializeCanvasSelfDrawable(t,e),this.initializePaintableStateless(t,e)}we.register("RectangleCanvasDrawable",Qc),Object(z.a)(da,Qc,{writeRectangularPath:function(t,e){t.beginPath(),t.moveTo(e._rectX,e._rectY),t.lineTo(e._rectX+e._rectWidth,e._rectY),t.lineTo(e._rectX+e._rectWidth,e._rectY+e._rectHeight),t.lineTo(e._rectX,e._rectY+e._rectHeight),t.closePath()},paintCanvas:function(t,e,i){const n=t.context;if(e.isRounded()){n.beginPath();const i=e.getMaximumArcSize(),s=Math.min(e._cornerXRadius,i),r=Math.min(e._cornerYRadius,i),o=e._rectX+s,a=e._rectX+e._rectWidth-s,l=e._rectY+r,h=e._rectY+e._rectHeight-r;s===r?(n.arc(a,l,s,-Math.PI/2,0,!1),n.arc(a,h,s,0,Math.PI/2,!1),n.arc(o,h,s,Math.PI/2,Math.PI,!1),n.arc(o,l,s,Math.PI,3*Math.PI/2,!1)):(n.ellipse(a,l,s,r,0,-Math.PI/2,0,!1),n.ellipse(a,h,s,r,0,0,Math.PI/2,!1),n.ellipse(o,h,s,r,0,Math.PI/2,Math.PI,!1),n.ellipse(o,l,s,r,0,Math.PI,3*Math.PI/2,!1)),n.closePath(),e.hasFill()&&(e.beforeCanvasFill(t),n.fill(),e.afterCanvasFill(t)),e.hasPaintableStroke()&&(e.beforeCanvasStroke(t),n.stroke(),e.afterCanvasStroke(t))}else e.hasFill()&&(e.getFillValue().transformMatrix?(this.writeRectangularPath(n,e),e.beforeCanvasFill(t),n.fill(),e.afterCanvasFill(t)):(e.beforeCanvasFill(t),n.fillRect(e._rectX,e._rectY,e._rectWidth,e._rectHeight),e.afterCanvasFill(t))),e.hasPaintableStroke()&&(e.getStrokeValue().transformMatrix?(this.writeRectangularPath(n,e),e.beforeCanvasStroke(t),n.stroke(),e.afterCanvasStroke(t)):(e.beforeCanvasStroke(t),n.strokeRect(e._rectX,e._rectY,e._rectWidth,e._rectHeight),e.afterCanvasStroke(t)))},markDirtyRectangle:function(){this.markPaintDirty()},markDirtyX:function(){this.markDirtyRectangle()},markDirtyY:function(){this.markDirtyRectangle()},markDirtyWidth:function(){this.markDirtyRectangle()},markDirtyHeight:function(){this.markDirtyRectangle()},markDirtyCornerXRadius:function(){this.markDirtyRectangle()},markDirtyCornerYRadius:function(){this.markDirtyRectangle()},dispose:function(){da.prototype.dispose.call(this),this.disposePaintableStateless()}}),Ea.mixInto(Qc),$t.a.mixInto(Qc);var Zc=Qc;const Jc={mixInto:function(t){const e=t.prototype;e.initializeState=function(t,e){return this.paintDirty=!0,this.dirtyX=!0,this.dirtyY=!0,this.dirtyWidth=!0,this.dirtyHeight=!0,this.dirtyCornerXRadius=!0,this.dirtyCornerYRadius=!0,this.initializePaintableState(t,e),this},e.disposeState=function(){this.disposePaintableState()},e.markPaintDirty=function(){this.paintDirty=!0,this.markDirty()},e.markDirtyRectangle=function(){this.dirtyX=!0,this.dirtyY=!0,this.dirtyWidth=!0,this.dirtyHeight=!0,this.dirtyCornerXRadius=!0,this.dirtyCornerYRadius=!0,this.markPaintDirty()},e.markDirtyX=function(){this.dirtyX=!0,this.markPaintDirty()},e.markDirtyY=function(){this.dirtyY=!0,this.markPaintDirty()},e.markDirtyWidth=function(){this.dirtyWidth=!0,this.markPaintDirty()},e.markDirtyHeight=function(){this.dirtyHeight=!0,this.markPaintDirty()},e.markDirtyCornerXRadius=function(){this.dirtyCornerXRadius=!0,this.markPaintDirty()},e.markDirtyCornerYRadius=function(){this.dirtyCornerYRadius=!0,this.markPaintDirty()},e.setToCleanState=function(){this.paintDirty=!1,this.dirtyX=!1,this.dirtyY=!1,this.dirtyWidth=!1,this.dirtyHeight=!1,this.dirtyCornerXRadius=!1,this.dirtyCornerYRadius=!1},Oa.mixInto(t)}};we.register("RectangleStatefulDrawable",Jc);var $c=Jc;const td=Ye.dirtyFromPool();function ed(t,e){if(this.initializeDOMSelfDrawable(t,e),this.initializeState(t,e),!this.fillElement||!this.strokeElement){const t=document.createElement("div");this.fillElement=t,t.style.display="block",t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.pointerEvents="none";const e=document.createElement("div");this.strokeElement=e,e.style.display="block",e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.pointerEvents="none",t.appendChild(e)}this.domElement=this.fillElement,Ks.prepareForTransform(this.domElement,this.forceAcceleration)}we.register("RectangleDOMDrawable",ed),Object(z.a)(Ia,ed,{updateDOM:function(){const t=this.node,e=this.fillElement,i=this.strokeElement;if(this.paintDirty){const n=Math.min(t._cornerXRadius,t._cornerYRadius),s=this.dirtyCornerXRadius||this.dirtyCornerYRadius;if(this.dirtyWidth&&(e.style.width=t._rectWidth+"px"),this.dirtyHeight&&(e.style.height=t._rectHeight+"px"),s&&(e.style[js.borderRadius]=n+"px"),this.dirtyFill&&(e.style.backgroundColor=t.getCSSFill()),this.dirtyStroke&&(t.hasStroke()?i.style.borderStyle="solid":i.style.borderStyle="none"),t.hasStroke()){const e=!this.hadStroke;(e||this.dirtyWidth||this.dirtyLineWidth)&&(i.style.width=t._rectWidth-t.getLineWidth()+"px"),(e||this.dirtyHeight||this.dirtyLineWidth)&&(i.style.height=t._rectHeight-t.getLineWidth()+"px"),(e||this.dirtyLineWidth)&&(i.style.left=-t.getLineWidth()/2+"px",i.style.top=-t.getLineWidth()/2+"px",i.style.borderWidth=t.getLineWidth()+"px"),(e||this.dirtyStroke)&&(i.style.borderColor=t.getSimpleCSSStroke()),(e||s||this.dirtyLineWidth||this.dirtyLineOptions)&&(i.style[js.borderRadius]=t.isRounded()||"round"===t.getLineJoin()?n+t.getLineWidth()/2+"px":"0")}}if(this.transformDirty||this.dirtyX||this.dirtyY){td.set(this.getTransformMatrix());const e=Ye.translation(t._rectX,t._rectY);td.multiplyMatrix(e),e.freeToPool(),Ks.applyPreparedTransform(td,this.fillElement,this.forceAcceleration)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1},dispose:function(){this.disposeState(),Ia.prototype.dispose.call(this)}}),$c.mixInto(ed),$t.a.mixInto(ed);var id=ed;function nd(t,e){this.initializeSVGSelfDrawable(t,e,!0,!0),this.lastArcW=-1,this.lastArcH=-1,this.svgElement=this.svgElement||document.createElementNS(mr,"rect")}we.register("RectangleSVGDrawable",nd),Object(z.a)(ja,nd,{updateSVGSelf:function(){const t=this.svgElement;if(this.dirtyX&&t.setAttribute("x",this.node._rectX),this.dirtyY&&t.setAttribute("y",this.node._rectY),this.dirtyWidth&&t.setAttribute("width",this.node._rectWidth),this.dirtyHeight&&t.setAttribute("height",this.node._rectHeight),this.dirtyCornerXRadius||this.dirtyCornerYRadius||this.dirtyWidth||this.dirtyHeight){let e=0,i=0;if(this.node.isRounded()){const t=this.node.getMaximumArcSize();e=Math.min(this.node._cornerXRadius,t),i=Math.min(this.node._cornerYRadius,t)}e!==this.lastArcW&&(this.lastArcW=e,t.setAttribute("rx",e)),i!==this.lastArcH&&(this.lastArcH=i,t.setAttribute("ry",i))}this.updateFillStrokeStyle(t)}}),$c.mixInto(nd),$t.a.mixInto(nd);var sd=nd;function rd(t,e){throw this.initializeWebGLSelfDrawable(t,e),new Error("Should use initialization and pooling")}we.register("WebGLSelfDrawable",rd),Object(z.a)(ua,rd,{initializeWebGLSelfDrawable:function(t,e){return this.initializeSelfDrawable(t,e),this.transformListener=this.transformListener||this.markTransformDirty.bind(this),e.relativeTransform.addListener(this.transformListener),e.relativeTransform.addPrecompute(),this},markTransformDirty:function(){this.markDirty()},updateSelfVisibility:function(){ua.prototype.updateSelfVisibility.call(this),this.markDirty()},dispose:function(){this.instance.relativeTransform.removeListener(this.transformListener),this.instance.relativeTransform.removePrecompute(),ua.prototype.dispose.call(this)}});var od=rd;const ad=new ba("transparent");function ld(t,e){this.initializeWebGLSelfDrawable(t,e),this.initializeState(t,e),this.vertexArray||(this.vertexArray=new Float32Array(36)),this.upperLeft=new te.a(0,0),this.lowerLeft=new te.a(0,0),this.upperRight=new te.a(0,0),this.lowerRight=new te.a(0,0),this.transformDirty=!0,this.includeVertices=!0}we.register("RectangleWebGLDrawable",ld),Object(z.a)(od,ld,{webglRenderer:An.webglVertexColorPolygons,onAddToBlock:function(t){this.webglBlock=t,this.markDirty()},onRemoveFromBlock:function(t){},markTransformDirty:function(){this.transformDirty=!0,od.prototype.markTransformDirty.call(this)},update:function(){if(!od.prototype.update.call(this))return!1;if(this.dirtyFill&&(this.includeVertices=this.node.hasFill(),this.includeVertices)){const t=this.node.fill instanceof Ot?this.node.fill.value:this.node.fill,e=ad.set(t),i=e.red/255,n=e.green/255,s=e.blue/255,r=e.alpha;for(let o=0;o<6;o++){const t=6*o;this.vertexArray[2+t]=i,this.vertexArray[3+t]=n,this.vertexArray[4+t]=s,this.vertexArray[5+t]=r}}if(this.transformDirty||this.dirtyX||this.dirtyY||this.dirtyWidth||this.dirtyHeight){this.transformDirty=!1;const t=this.node._rectX,e=this.node._rectY,i=this.node._rectWidth,n=this.node._rectHeight,s=this.instance.relativeTransform.matrix;s.multiplyVector2(this.upperLeft.setXY(t,e)),s.multiplyVector2(this.lowerLeft.setXY(t,e+n)),s.multiplyVector2(this.upperRight.setXY(t+i,e)),s.multiplyVector2(this.lowerRight.setXY(t+i,e+n)),this.vertexArray[0]=this.upperLeft.x,this.vertexArray[1]=this.upperLeft.y,this.vertexArray[6]=this.lowerLeft.x,this.vertexArray[7]=this.lowerLeft.y,this.vertexArray[12]=this.upperRight.x,this.vertexArray[13]=this.upperRight.y,this.vertexArray[18]=this.upperRight.x,this.vertexArray[19]=this.upperRight.y,this.vertexArray[24]=this.lowerLeft.x,this.vertexArray[25]=this.lowerLeft.y,this.vertexArray[30]=this.lowerRight.x,this.vertexArray[31]=this.lowerRight.y}return this.setToCleanState(),this.cleanPaintableState(),!0},dispose:function(){this.disposeState(),od.prototype.dispose.call(this)}}),$c.mixInto(ld),$t.a.mixInto(ld);var hd=ld;function ud(t,e,i,n,s,r,o){this._rectX=0,this._rectY=0,this._rectWidth=0,this._rectHeight=0,this._cornerXRadius=0,this._cornerYRadius=0,o="object"==typeof t?t instanceof ne?"number"!=typeof e?la({rectBounds:t},e):la({rectBounds:t,cornerXRadius:e,cornerYRadius:i},n):t:void 0===r?la({rectX:t,rectY:e,rectWidth:i,rectHeight:n},s):la({rectX:t,rectY:e,rectWidth:i,rectHeight:n,cornerXRadius:s,cornerYRadius:r},o),Rl.call(this,null,o)}we.register("Rectangle",ud),Object(z.a)(Rl,ud,{_mutatorKeys:["rectBounds","rectSize","rectX","rectY","rectWidth","rectHeight","cornerRadius","cornerXRadius","cornerYRadius"].concat(Rl.prototype._mutatorKeys),drawableMarkFlags:Rl.prototype.drawableMarkFlags.concat(["x","y","width","height","cornerXRadius","cornerYRadius"]).filter((function(t){return"shape"!==t})),getMaximumArcSize:function(){return Math.min(this._rectWidth/2,this._rectHeight/2)},getStrokeRendererBitmask:function(){let t=Rl.prototype.getStrokeRendererBitmask.call(this);return!this.hasStroke()||this.getStroke().isGradient||this.getStroke().isPattern||this.hasLineDash()||("miter"===this.getLineJoin()||"round"===this.getLineJoin()&&js.borderRadius)&&(t|=An.bitmaskDOM),this.hasStroke()||(t|=An.bitmaskWebGL),t},getPathRendererBitmask:function(){let t=An.bitmaskCanvas|An.bitmaskSVG;const e=this.getMaximumArcSize();return(!this.hasStroke()||this.getLineWidth()<=this._rectHeight&&this.getLineWidth()<=this._rectWidth)&&(!this.isRounded()||js.borderRadius&&this._cornerXRadius===this._cornerYRadius)&&this._cornerYRadius<=e&&this._cornerXRadius<=e&&(t|=An.bitmaskDOM),this.hasStroke()||this.isRounded()||(t|=An.bitmaskWebGL),t},setRect:function(t,e,i,n,s,r){const o=void 0!==s,a=void 0!==r;if(!(this._rectX!==t||this._rectY!==e||this._rectWidth!==i||this._rectHeight!==n||o&&this._cornerXRadius!==s||a&&this._cornerYRadius!==r))return;this._rectX=t,this._rectY=e,this._rectWidth=i,this._rectHeight=n,this._cornerXRadius=o?s:this._cornerXRadius,this._cornerYRadius=a?r:this._cornerYRadius;const l=this._drawables.length;for(let h=0;h<l;h++)this._drawables[h].markDirtyRectangle();return this.invalidateRectangle(),this},setRectX:function(t){if(this._rectX!==t){this._rectX=t;const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyX();this.invalidateRectangle()}return this},set rectX(t){this.setRectX(t)},getRectX:function(){return this._rectX},get rectX(){return this.getRectX()},setRectY:function(t){if(this._rectY!==t){this._rectY=t;const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyY();this.invalidateRectangle()}return this},set rectY(t){this.setRectY(t)},getRectY:function(){return this._rectY},get rectY(){return this.getRectY()},setRectWidth:function(t){if(this._rectWidth!==t){this._rectWidth=t;const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyWidth();this.invalidateRectangle()}return this},set rectWidth(t){this.setRectWidth(t)},getRectWidth:function(){return this._rectWidth},get rectWidth(){return this.getRectWidth()},setRectHeight:function(t){if(this._rectHeight!==t){this._rectHeight=t;const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyHeight();this.invalidateRectangle()}return this},set rectHeight(t){this.setRectHeight(t)},getRectHeight:function(){return this._rectHeight},get rectHeight(){return this.getRectHeight()},setCornerXRadius:function(t){if(this._cornerXRadius!==t){this._cornerXRadius=t;const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyCornerXRadius();this.invalidateRectangle()}return this},set cornerXRadius(t){this.setCornerXRadius(t)},getCornerXRadius:function(){return this._cornerXRadius},get cornerXRadius(){return this.getCornerXRadius()},setCornerYRadius:function(t){if(this._cornerYRadius!==t){this._cornerYRadius=t;const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyCornerYRadius();this.invalidateRectangle()}return this},set cornerYRadius(t){this.setCornerYRadius(t)},getCornerYRadius:function(){return this._cornerYRadius},get cornerYRadius(){return this.getCornerYRadius()},setRectBounds:function(t){return this.setRect(t.x,t.y,t.width,t.height),this},set rectBounds(t){this.setRectBounds(t)},getRectBounds:function(){return ne.rect(this._rectX,this._rectY,this._rectWidth,this._rectHeight)},get rectBounds(){return this.getRectBounds()},setRectSize:function(t){return this.setRectWidth(t.width),this.setRectHeight(t.height),this},set rectSize(t){this.setRectSize(t)},getRectSize:function(){return new re(this._rectWidth,this._rectHeight)},get rectSize(){return this.getRectSize()},setRectWidthFromRight:function(t){if(this._rectWidth!==t){const e=this._rectX+this._rectWidth;this.setRectWidth(t),this.setRectX(e-t)}return this},set rectWidthFromRight(t){this.setRectWidthFromRight(t)},get rectWidthFromRight(){return this.getRectWidth()},setRectHeightFromBottom:function(t){if(this._rectHeight!==t){const e=this._rectY+this._rectHeight;this.setRectHeight(t),this.setRectY(e-t)}return this},set rectHeightFromBottom(t){this.setRectHeightFromBottom(t)},get rectHeightFromBottom(){return this.getRectHeight()},isRounded:function(){return 0!==this._cornerXRadius&&0!==this._cornerYRadius},computeShapeBounds:function(){let t=new ne(this._rectX,this._rectY,this._rectX+this._rectWidth,this._rectY+this._rectHeight);return this._stroke&&(t=t.dilated(this.getLineWidth()/2)),t},createRectangleShape:function(){if(this.isRounded()){const t=Math.min(this._rectWidth/2,this._rectHeight/2);return cn.roundRectangle(this._rectX,this._rectY,this._rectWidth,this._rectHeight,Math.min(t,this._cornerXRadius),Math.min(t,this._cornerYRadius)).makeImmutable()}return cn.rectangle(this._rectX,this._rectY,this._rectWidth,this._rectHeight).makeImmutable()},invalidateRectangle:function(){this._shape=null,this.invalidatePath(),this.invalidateSupportedRenderers()},containsPointSelf:function(t){const e=this._rectX,i=this._rectY,n=this._rectWidth,s=this._rectHeight,r=this._cornerXRadius,o=this._cornerYRadius,a=this.getLineWidth()/2;let l=!0;if(this._strokePickable){const h=this.isRounded();if(!h&&"bevel"===this.getLineJoin())return Rl.prototype.containsPointSelf.call(this,t);const u="miter"===this.getLineJoin()&&!h;l=l&&ud.intersects(e-a,i-a,n+2*a,s+2*a,u?0:r+a,u?0:o+a,t)}return this._fillPickable?this._strokePickable?l:ud.intersects(e,i,n,s,r,o,t):!!this._strokePickable&&(l&&!ud.intersects(e+a,i+a,n-2*a,s-2*a,r-a,o-a,t))},intersectsBoundsSelf:function(t){return!this.computeShapeBounds().intersection(t).isEmpty()},canvasPaintSelf:function(t,e){Zc.prototype.paintCanvas(t,this,e)},createDOMDrawable:function(t,e){return id.createFromPool(t,e)},createSVGDrawable:function(t,e){return sd.createFromPool(t,e)},createCanvasDrawable:function(t,e){return Zc.createFromPool(t,e)},createWebGLDrawable:function(t,e){return hd.createFromPool(t,e)},setShape:function(t){if(null!==t)throw new Error("Cannot set the shape of a Rectangle to something non-null");this.invalidatePath()},getShape:function(){return this._shape||(this._shape=this.createRectangleShape()),this._shape},hasShape:function(){return!0},setCornerRadius:function(t){return this.setCornerXRadius(t),this.setCornerYRadius(t),this},set cornerRadius(t){this.setCornerRadius(t)},getCornerRadius:function(){return this._cornerXRadius},get cornerRadius(){return this.getCornerRadius()}}),ud.intersects=function(t,e,i,n,s,r,o){const a=o.x>=t&&o.x<=t+i&&o.y>=e&&o.y<=e+n;if(!a||s<=0||r<=0)return a;const l=Math.min(i/2,n/2);let h,u;s=Math.min(l,s),r=Math.min(l,r);let c=!1;if(o.x<t+i/2?(h=t+s,c=c||o.x>=h):(h=t+i-s,c=c||o.x<=h),c)return!0;if(o.y<e+n/2?(u=e+r,c=c||o.y>=u):(u=e+n-r,c=c||o.y<=u),c)return!0;let d=o.x-h,p=o.y-u;return d/=s,p/=r,d*=d,p*=p,d+p<=1},ud.rect=function(t,e,i,n,s){return new ud(t,e,i,n,0,0,s)},ud.roundedRect=function(t,e,i,n,s,r,o){return new ud(t,e,i,n,s,r,o)},ud.bounds=function(t,e){return new ud(t.minX,t.minY,t.width,t.height,e)},ud.roundedBounds=function(t,e,i,n){return new ud(t.minX,t.minY,t.width,t.height,e,i,n)},ud.dimension=function(t,e){return new ud(0,0,t.width,t.height,0,0,e)};var cd=ud;function dd(t,e,i,n,s){s=!_.isUndefined(s)&&s;const r=function(t,e,i,n,s,r){let o=oe.a.linear(t,e,i,n,s);if(r){const t=Math.max(i,n),e=Math.min(i,n);o=oe.a.clamp(o,e,t)}return o},o=function(o){return r(t,e,i,n,o,s)};return o.inverse=function(o){return r(i,n,t,e,o,s)},o}w.a.register("LinearFunction",dd);var pd=dd;class fd extends Wo{constructor(t,e,i,r){super(),r=Object(s.a)({size:new re(100,5),fillEnabled:"white",fillDisabled:"gray",stroke:"black",lineWidth:1,cornerRadius:0,startDrag:_.noop,drag:_.noop,endDrag:_.noop,constrainValue:_.identity,enabledRangeProperty:new Ot(new n.a(i.min,i.max)),tandem:T.a.REQUIRED},r),this.size=r.size,this.valueToPosition=new pd(i.min,i.max,0,this.size.width,!0);const o=(t,i)=>{const n=i.subtrailTo(this).getTransform().inversePosition2(t.pointer.point).x,s=this.valueToPosition.inverse(n),o=r.enabledRangeProperty.value.constrainValue(s),a=r.constrainValue(o);e.set(a)};this.addChild(t);const a=new Yc({tandem:r.tandem.createTandem("dragListener"),start:(t,e)=>{r.startDrag(t),o(t,e.pressedTrail)},drag:(t,e)=>{r.drag(t),o(t,e.pressedTrail)},end:t=>{r.endDrag(t)}});t.addInputListener(a),this.mutate(r),this.disposeSliderTrack=()=>{a.dispose()}}dispose(){this.disposeSliderTrack(),super.dispose()}}Nl.register("SliderTrack",fd);var md=fd;class gd extends md{constructor(t,e,i){i=Object(s.a)({size:new re(100,5),fillEnabled:"white",fillDisabled:"gray",stroke:"black",lineWidth:1,cornerRadius:0,startDrag:_.noop,drag:_.noop,endDrag:_.noop,constrainValue:_.identity,enabledRangeProperty:null,tandem:T.a.REQUIRED},i);const n=new cd(0,0,i.size.width,i.size.height,{fill:i.fillDisabled,stroke:i.stroke,lineWidth:i.lineWidth,cornerRadius:i.cornerRadius,cursor:"default",pickable:!1}),r=new cd(0,0,i.size.width,i.size.height,{fill:i.fillEnabled,stroke:i.stroke,lineWidth:i.lineWidth,cornerRadius:i.cornerRadius});super(new Wo({children:[n,r]}),t,e,i),this.enabledTrack=r;const o=t=>{const e=this.valueToPosition(t.min),i=this.valueToPosition(t.max)-e;this.enabledTrack.setRect(e,0,i,this.size.height)};i.enabledRangeProperty.link(o),this.disposeDefaultSliderTrack=()=>i.enabledRangeProperty.unlink(o)}dispose(){this.disposeDefaultSliderTrack(),super.dispose()}}Nl.register("DefaultSliderTrack",gd);var yd=gd;const bd={enabledProperty:null,enabledPropertyOptions:null,tandem:T.a.OPTIONAL},vd={mixInto:function(t){const e=t.prototype;Object(de.a)(e,{initializeEnabledComponent:function(t){const e=!(t=Object(s.a)({},bd,t)).enabledProperty;this.enabledProperty=t.enabledProperty||new Ee(!0,Object(s.a)({tandem:t.tandem.createTandem("enabledProperty"),phetioDocumentation:"When disabled, the component is grayed out and cannot be interacted with.",phetioFeatured:!0},t.enabledPropertyOptions)),this._disposeEnabledComponent=()=>{e&&this.enabledProperty.dispose()}},disposeEnabledComponent:function(){this._disposeEnabledComponent()},setEnabled:function(t){this.enabledProperty.value=t},set enabled(t){this.setEnabled(t)},getEnabled:function(){return this.enabledProperty.value},get enabled(){return this.getEnabled()}})},ENABLED_PROPERTY_TANDEM_NAME:"enabledProperty"};Nl.register("EnabledComponent",vd);var _d=vd;const Ad={mixInto:function(t){const e=t.prototype;_d.mixInto(t),Object(de.a)(e,{initializeEnabledPhetioObject:function(t){ll(this,["isPhetioInstrumented","addLinkedElement","phetioFeatured"]);const e=!(t=Object(s.a)({tandem:T.a.OPTIONAL},t)).enabledProperty;this.initializeEnabledComponent(t),e||(T.a.VALIDATION&&this.isPhetioInstrumented(),this.enabledProperty.isPhetioInstrumented()&&this.addLinkedElement(t.enabledProperty,{tandem:t.tandem.createTandem(_d.ENABLED_PROPERTY_TANDEM_NAME)}))},disposeEnabledPhetioObject:function(){this.disposeEnabledComponent()}})}};Nl.register("EnabledPhetioObject",Ad);var wd=Ad;const xd={mixInto:function(t){const e=t.prototype;wd.mixInto(t),Object(de.a)(e,{initializeEnabledNode:function(t){ll(this,["interruptSubtreeInput","opacity","pickable","cursor"]),t=Object(s.a)({disabledOpacity:Dc.DISABLED_OPACITY},t),this.initializeEnabledPhetioObject(t);const e=this.cursor,i=i=>{this.interruptSubtreeInput(),this.pickable=i,this.opacity=i?1:t.disabledOpacity,this.setAccessibleAttribute("aria-disabled",!i),this.cursor=i?e:"default"};this.enabledProperty.link(i),this._disposeEnabledNode=()=>{this.enabledProperty.unlink(i)}},disposeEnabledNode:function(){this._disposeEnabledNode(),this.disposeEnabledPhetioObject()}})}};Nl.register("EnabledNode",xd);var Sd=xd;class Td extends Vo{}Td.methods={setMajorTicksVisible:{returnType:V,parameterTypes:[Se],implementation:function(t){this.phetioObject.setMajorTicksVisible(t)},documentation:"Set whether the major tick marks should be shown",invocableForReadOnlyElements:!1},setMinorTicksVisible:{returnType:V,parameterTypes:[Se],implementation:function(t){this.phetioObject.setMinorTicksVisible(t)},documentation:"Set whether the minor tick marks should be shown",invocableForReadOnlyElements:!1}},Td.documentation="A traditional slider component, with a knob and possibly tick marks",Td.validator={isValidValue:t=>t instanceof phet.sun.Slider},Td.typeName="SliderIO",A.validateSubtype(Td),Nl.register("SliderIO",Td);var Dd=Td;function Ed(t){const e=.25*(t=Object(s.a)({size:new re(22,45),fill:"rgb(50,145,184)",fillHighlighted:"rgb(71,207,255)",stroke:"black",lineWidth:1,centerLineStroke:"white",tandem:T.a.REQUIRED},t)).size.width;cd.call(this,0,0,t.size.width,t.size.height,e,e,Object(s.a)(t,{fill:t.fill,stroke:t.stroke,lineWidth:t.lineWidth,cachedPaints:[t.fill,t.fillHighlighted]}));const i=cd.bounds(this.bounds.dilated(5),{fill:"transparent",localBounds:this.bounds,pickable:!1});this.addChild(i);this.addChild(new Rl(cn.lineSegment(t.size.width/2,3,t.size.width/2,t.size.height-3),{stroke:t.centerLineStroke}));const n=new hc({attach:!1,tandem:T.a.OPT_OUT});n.isHighlightedProperty.link(e=>{this.fill=e?t.fillHighlighted:t.fill}),this.addInputListener(n)}Nl.register("SliderThumb",Ed),Object(z.a)(cd,Ed);var Cd=Ed;const Pd=-Math.PI/2;function kd(t,e,i){const r=this;(i=Object(s.a)({orientation:Vc.HORIZONTAL,trackNode:null,trackSize:new re(100,5),trackFillEnabled:"white",trackFillDisabled:"gray",trackStroke:"black",trackLineWidth:1,trackCornerRadius:0,thumbNode:null,thumbSize:new re(17,34),thumbFill:"rgb(50,145,184)",thumbFillHighlighted:"rgb(71,207,255)",thumbStroke:"black",thumbLineWidth:1,thumbCenterLineStroke:"white",thumbTouchAreaXDilation:11,thumbTouchAreaYDilation:11,thumbMouseAreaXDilation:0,thumbMouseAreaYDilation:0,thumbYOffset:0,tickLabelSpacing:6,majorTickLength:25,majorTickStroke:"black",majorTickLineWidth:1,minorTickLength:10,minorTickStroke:"black",minorTickLineWidth:1,cursor:"pointer",startDrag:_.noop,drag:_.noop,endDrag:_.noop,constrainValue:_.identity,enabledRangeProperty:null,disabledOpacity:Dc.DISABLED_OPACITY,tandem:T.a.REQUIRED,phetioType:Dd,phetioComponentOptions:null,phetioLinkedProperty:null},i)).enabledProperty||(i=Object(s.a)({enabledPropertyOptions:{phetioFeatured:!0}},i)),vt.mergePhetioComponentOptions({visibleProperty:{phetioFeatured:!0}},i),this.orientation=i.orientation,Wo.call(this);const o=!i.enabledRangeProperty;i.enabledRangeProperty=i.enabledRangeProperty||new Ot(e,{valueType:n.a,isValidValue:t=>t.min>=e.min&&t.max<=e.max,tandem:i.tandem.createTandem("enabledRangeProperty"),phetioType:Bt(S),phetioDocumentation:"Sliders support two ranges: the outer range which specifies the min and max of the track and the enabledRangeProperty, which determines how low and high the thumb can be dragged within the track."}),this.enabledRangeProperty=i.enabledRangeProperty,this.tickOptions=_.pick(i,"tickLabelSpacing","majorTickLength","majorTickStroke","majorTickLineWidth","minorTickLength","minorTickStroke","minorTickLineWidth");const a=[];this.majorTicksParent=new Wo,this.minorTicksParent=new Wo,a.push(this.majorTicksParent),a.push(this.minorTicksParent),this.track=i.trackNode||new yd(t,e,{size:i.trackSize,fillEnabled:i.trackFillEnabled,fillDisabled:i.trackFillDisabled,stroke:i.trackStroke,lineWidth:i.trackLineWidth,cornerRadius:i.trackCornerRadius,startDrag:i.startDrag,drag:i.drag,endDrag:i.endDrag,constrainValue:i.constrainValue,enabledRangeProperty:this.enabledRangeProperty,tandem:i.tandem.createTandem("track")}),this.track.centerX=this.track.valueToPosition((e.max+e.min)/2);const l=i.thumbNode||new Cd({size:i.thumbSize,fill:i.thumbFill,fillHighlighted:i.thumbFillHighlighted,stroke:i.thumbStroke,lineWidth:i.thumbLineWidth,centerLineStroke:i.thumbCenterLineStroke,tandem:i.tandem.createTandem("thumb")});this.track.localBounds=this.track.localBounds.dilatedX(l.width/2),a.push(this.track),l.setCenterY(this.track.centerY+i.thumbYOffset),a.push(l);const h=new Wo({children:a});i.orientation===Vc.VERTICAL&&(h.rotation=Pd),this.addChild(h),i.thumbNode||!i.thumbTouchAreaXDilation&&!i.thumbTouchAreaYDilation||(l.touchArea=l.localBounds.dilatedXY(i.thumbTouchAreaXDilation,i.thumbTouchAreaYDilation)),i.thumbNode||!i.thumbMouseAreaXDilation&&!i.thumbMouseAreaYDilation||(l.mouseArea=l.localBounds.dilatedXY(i.thumbMouseAreaXDilation,i.thumbMouseAreaYDilation));let u=0;const c=new Yc({tandem:l.tandem.createTandem("dragListener"),start:function(t,e){if(r.enabledProperty.get()){i.startDrag(t);const n=e.pressedTrail.subtrailTo(h).getTransform();u=n.inversePosition2(t.pointer.point).x-l.centerX}},drag:function(e,n){if(r.enabledProperty.get()){const s=n.pressedTrail.subtrailTo(h).getTransform().inversePosition2(e.pointer.point).x-u,o=r.track.valueToPosition.inverse(s),a=r.enabledRangeProperty.get().constrainValue(o);t.set(i.constrainValue(a)),i.drag(e)}},end:function(t){r.enabledProperty.get()&&i.endDrag(t)}});l.addInputListener(c);const d=function(t){l.centerX=r.track.valueToPosition(t)};t.link(d);this.enabledRangeProperty.link((function(e){t.set(oe.a.clamp(t.value,e.min,e.max))})),this.mutate(i),this.initializeEnabledNode(i),this.disposeSlider=function(){l.dispose&&l.dispose(),r.track.dispose(),r.disposeAccessibleSlider(),r.disposeEnabledNode(),t.unlink(d),o&&r.enabledRangeProperty.dispose(),c.dispose()},this.focusHighlight=new Zh(l),this.initializeAccessibleSlider(t,this.enabledRangeProperty,this.enabledProperty,Object(s.a)({ariaOrientation:i.orientation},i)),this.addLinkedElement(i.phetioLinkedProperty||t,{tandem:i.tandem.createTandem("valueProperty")})}Nl.register("Slider",kd),Object(z.a)(Wo,kd,{dispose:function(){this.disposeSlider(),Wo.prototype.dispose.call(this)},addMajorTick:function(t,e){this.addTick(this.majorTicksParent,t,e,this.tickOptions.majorTickLength,this.tickOptions.majorTickStroke,this.tickOptions.majorTickLineWidth)},addMinorTick:function(t,e){this.addTick(this.minorTicksParent,t,e,this.tickOptions.minorTickLength,this.tickOptions.minorTickStroke,this.tickOptions.minorTickLineWidth)},addTick:function(t,e,i,n,s,r){const o=this.track.valueToPosition(e),a=new Rl((new cn).moveTo(o,this.track.top).lineTo(o,this.track.top-n),{stroke:s,lineWidth:r});t.addChild(a),i&&(this.orientation===Vc.VERTICAL&&(i.rotation=-Pd),t.addChild(i),i.centerX=a.centerX,i.bottom=a.top-this.tickOptions.tickLabelSpacing,i.pickable=!1)},setEnabledRange:function(t){this.enabledRangeProperty.value=t},set enabledRange(t){this.setEnabledRange(t)},getEnabledRange:function(){return this.enabledRangeProperty.value},get enabledRange(){return this.getEnabledRange()},setMajorTicksVisible:function(t){this.majorTicksParent.visible=t},set majorTicksVisible(t){this.setMajorTicksVisible(t)},getMajorTicksVisible:function(){return this.majorTicksParent.visible},get majorTicksVisible(){return this.getMajorTicksVisible()},setMinorTicksVisible:function(t){this.minorTicksParent.visible=t},set minorTicksVisible(t){this.setMinorTicksVisible(t)},getMinorTicksVisible:function(){return this.minorTicksParent.visible},get minorTicksVisible(){return this.getMinorTicksVisible()}}),Kc.mixInto(kd),Sd.mixInto(kd);var Id=kd;function Ld(t,e,i){Id.call(this,t,e,Object(s.a)({orientation:Vc.HORIZONTAL},i))}Nl.register("HSlider",Ld),Object(z.a)(Id,Ld);var Od=Ld,Rd=new r.a("sceneryPhet");class Nd extends Vo{}Nd.validator={isValidValue:t=>t instanceof phet.sceneryPhet.NumberControl},Nd.documentation="A number control with a title, slider and +/- buttons",Nd.typeName="NumberControlIO",A.validateSubtype(Nd),Rd.register("NumberControlIO",Nd);var Md=Nd,Bd=new r.a("phetcommon");var Fd={format:function(t){const e=arguments;return t.replace(/{(\d)}/g,(function(t,i){return e[+i+1]}))},fillIn:function(t,e){let i=t;const n=t.match(/\{\{[^{}]+\}\}/g)||[];for(let s=0;s<n.length;s++){const t=n[s],r=t.replace("{{","").replace("}}","");void 0!==e[r]&&(i=i.replace(t,e[r]))}return i},isEmbeddingMark:function(t){return""===t||""===t||""===t},embeddedSlice:function(t,e,i){const n=[];let s;for(void 0===i&&(i=t.length),i<0&&(i+=t.length);e<t.length&&Fd.isEmbeddingMark(t.charAt(e));)e++;for(;i>=1&&Fd.isEmbeddingMark(t.charAt(i-1));)i--;if(e>=i||e>=t.length)return"";for(let u=0;u<e;u++)s=t.charAt(u),""===s||""===s?n.push(s):""===s&&n.pop();let r=n.length,o=n.slice();const a=t.slice(e,i);for(let u=0;u<a.length;u++)s=a.charAt(u),""===s||""===s?n.push(s):""===s&&(n.pop(),r=Math.min(n.length,r));let l=n;const h=Math.max(0,r-1);return o=o.slice(h),l=l.slice(h),o.join("")+a+l.join("").replace(/./g,"")},embeddedSplit:function(t,e,i){if(void 0===e)return[t];let n,s=[],r=t;function o(){let t,i;if(e instanceof window.RegExp){const n=r.match(e);n?(t=n.index,i=n[0].length):t=-1}else t=r.indexOf(e),i=e.length;return{index:t,length:i}}let a=0;for(;(n=o()).index>=0;){s.push(Fd.embeddedSlice(t,a,a+n.index));const e=n.index+n.length;r=r.slice(e),a+=e}return s.push(Fd.embeddedSlice(t,a)),void 0!==i&&(s=_.first(s,i)),s},embeddedDebugString:function(t){return t.replace(/\u202a/g,"[LTR]").replace(/\u202b/g,"[RTL]").replace(/\u202c/g,"[POP]")},assertContainsKey(t,e){},capitalize:t=>t[0].toUpperCase()+t.slice(1)};Bd.register("StringUtils",Fd);var Vd=Fd;function qd(t){const e=window.open(t,"_blank");e&&e.focus()}a.a.register("openPopup",qd);var Hd=qd;class Yd extends A{}Yd.documentation="Button listener",Yd.events=["up","over","down","out","fire"],Yd.validator={valueType:we.ButtonListener},Yd.typeName="ButtonListenerIO",A.validateSubtype(Yd),we.register("ButtonListenerIO",Yd);var jd=Yd;function Gd(t){const e=this;t=Object(s.a)({mouseButton:0},t),vt.call(this,t),this.options=t,this.isDown=!1,this.downCurrentTarget=null,this.downTrail=null,this.pointer=null,this.interrupted=!1,this.downListener={up:function(t){t.pointer instanceof So&&t.domEvent.button!==e.options.mouseButton||e.buttonUp(t)},cancel:function(t){e.buttonUp(t)}}}we.register("DownUpListener",Gd),Object(z.a)(vt,Gd,{buttonDown:function(t){this.isDown||t.pointer instanceof So&&t.domEvent.button!==this.options.mouseButton||(t.pointer.addInputListener(this.downListener),this.isDown=!0,this.downCurrentTarget=t.currentTarget,this.downTrail=t.trail.subtrailTo(t.currentTarget,!1),this.pointer=t.pointer,this.options.down&&this.options.down(t,this.downTrail))},buttonUp:function(t){this.isDown=!1,this.pointer.removeInputListener(this.downListener);const e=t.currentTarget;if(t.currentTarget=this.downCurrentTarget,this.options.upInside||this.options.upOutside){const e=t.trail.isExtensionOf(this.downTrail,!0)&&!this.interrupted;e&&this.options.upInside?this.options.upInside(t,this.downTrail):!e&&this.options.upOutside&&this.options.upOutside(t,this.downTrail)}this.options.up&&this.options.up(t,this.downTrail),t.currentTarget=e},down:function(t){this.buttonDown(t)},interrupt:function(){this.isDown&&(this.interrupted=!0,this.buttonUp({trail:new yn,currentTarget:this.downCurrentTarget,pointer:this.pointer}),this.interrupted=!1)}});var zd=Gd;function Wd(t){const e=this;t=Object(s.a)({tandem:T.a.OPTIONAL,phetioType:jd,phetioState:!1,phetioEventType:Z.USER},t),this.buttonState="up",this._overCount=0,this._buttonOptions=t,zd.call(this,{tandem:t.tandem,phetioType:t.phetioType,phetioState:t.phetioState,mouseButton:t.mouseButton||0,down:function(t,i){e.setButtonState(t,"down")},up:function(t,i){e.setButtonState(t,e._overCount>0?"over":"up")}})}we.register("ButtonListener",Wd),Object(z.a)(zd,Wd,{setButtonState:function(t,e){if(e!==this.buttonState){const i=this.buttonState;this.buttonState=e,this._buttonOptions[e]&&(this.phetioStartEvent(e),this._buttonOptions[e](t,i),this.phetioEndEvent()),this._buttonOptions.fire&&this._overCount>0&&(this._buttonOptions.fireOnDown?"down"===e:"down"===i)&&(this.phetioStartEvent("fire"),this._buttonOptions.fire(t),this.phetioEndEvent())}},enter:function(t){this._overCount++,1===this._overCount&&this.setButtonState(t,this.isDown?"down":"over")},exit:function(t){this._overCount--,0===this._overCount&&this.setButtonState(t,this.isDown?"out":"up")},focus:function(t){this.enter(t)},blur:function(t){this.exit(t)},click:function(t){this.setButtonState(t,"down"),this.setButtonState(t,"up")}});var Ud=Wd;function Xd(t,e){this.initializeCanvasSelfDrawable(t,e),this.initializePaintableStateless(t,e)}we.register("LineCanvasDrawable",Xd),Object(z.a)(da,Xd,{paintCanvas:function(t,e,i){const n=t.context;n.beginPath(),n.moveTo(e._x1,e._y1),n.lineTo(e._x2,e._y2),e.hasPaintableStroke()&&(e.beforeCanvasStroke(t),n.stroke(),e.afterCanvasStroke(t))},markDirtyLine:function(){this.markPaintDirty()},markDirtyP1:function(){this.markPaintDirty()},markDirtyP2:function(){this.markPaintDirty()},markDirtyX1:function(){this.markPaintDirty()},markDirtyY1:function(){this.markPaintDirty()},markDirtyX2:function(){this.markPaintDirty()},markDirtyY2:function(){this.markPaintDirty()},dispose:function(){da.prototype.dispose.call(this),this.disposePaintableStateless()}}),Ea.mixInto(Xd),$t.a.mixInto(Xd);var Kd=Xd;const Qd={mixInto:function(t){const e=t.prototype;e.initializeState=function(t,e){return this.paintDirty=!0,this.dirtyX1=!0,this.dirtyY1=!0,this.dirtyX2=!0,this.dirtyY2=!0,this.initializePaintableState(t,e),this},e.disposeState=function(){this.disposePaintableState()},e.markPaintDirty=function(){this.paintDirty=!0,this.markDirty()},e.markDirtyLine=function(){this.dirtyX1=!0,this.dirtyY1=!0,this.dirtyX2=!0,this.dirtyY2=!0,this.markPaintDirty()},e.markDirtyP1=function(){this.dirtyX1=!0,this.dirtyY1=!0,this.markPaintDirty()},e.markDirtyP2=function(){this.dirtyX2=!0,this.dirtyY2=!0,this.markPaintDirty()},e.markDirtyX1=function(){this.dirtyX1=!0,this.markPaintDirty()},e.markDirtyY1=function(){this.dirtyY1=!0,this.markPaintDirty()},e.markDirtyX2=function(){this.dirtyX2=!0,this.markPaintDirty()},e.markDirtyY2=function(){this.dirtyY2=!0,this.markPaintDirty()},e.setToCleanState=function(){this.paintDirty=!1,this.dirtyX1=!1,this.dirtyY1=!1,this.dirtyX2=!1,this.dirtyY2=!1},Oa.mixInto(t)}};we.register("LineStatefulDrawable",Qd);var Zd=Qd;function Jd(t,e){this.initializeSVGSelfDrawable(t,e,!0,!0),this.svgElement=this.svgElement||document.createElementNS(mr,"line")}we.register("LineSVGDrawable",Jd),Object(z.a)(ja,Jd,{updateSVGSelf:function(){const t=this.svgElement;this.dirtyX1&&t.setAttribute("x1",this.node._x1),this.dirtyY1&&t.setAttribute("y1",this.node._y1),this.dirtyX2&&t.setAttribute("x2",this.node._x2),this.dirtyY2&&t.setAttribute("y2",this.node._y2),this.updateFillStrokeStyle(t)}}),Zd.mixInto(Jd),$t.a.mixInto(Jd);var $d=Jd;function tp(t,e,i,n,s){this._x1=0,this._y1=0,this._x2=0,this._y2=0,s="object"==typeof t?t instanceof te.a?la({x1:t.x,y1:t.y,x2:e.x,y2:e.y},i):t:la({x1:t,y1:e,x2:i,y2:n},s),Rl.call(this,null,s)}we.register("Line",tp),Object(z.a)(Rl,tp,{_mutatorKeys:["p1","p2","x1","y1","x2","y2"].concat(Rl.prototype._mutatorKeys),drawableMarkFlags:Rl.prototype.drawableMarkFlags.concat(["line","p1","p2","x1","x2","y1","y2"]).filter((function(t){return"shape"!==t})),setLine:function(t,e,i,n){this._x1=t,this._y1=e,this._x2=i,this._y2=n;const s=this._drawables.length;for(let r=0;r<s;r++){this._drawables[r].markDirtyLine()}return this.invalidateLine(),this},setPoint1:function(t,e){"number"==typeof t?(this._x1=t,this._y1=e):(this._x1=t.x,this._y1=t.y);const i=this._drawables.length;for(let n=0;n<i;n++){this._drawables[n].markDirtyP1()}return this.invalidateLine(),this},set p1(t){this.setPoint1(t)},get p1(){return new te.a(this._x1,this._y1)},setPoint2:function(t,e){"number"==typeof t?(this._x2=t,this._y2=e):(this._x2=t.x,this._y2=t.y);const i=this._drawables.length;for(let n=0;n<i;n++){this._drawables[n].markDirtyP2()}return this.invalidateLine(),this},set p2(t){this.setPoint2(t)},get p2(){return new te.a(this._x2,this._y2)},setX1:function(t){if(this._x1!==t){this._x1=t;const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyX1();this.invalidateLine()}return this},set x1(t){this.setX1(t)},getX1:function(){return this._x1},get x1(){return this.getX1()},setY1:function(t){if(this._y1!==t){this._y1=t;const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyY1();this.invalidateLine()}return this},set y1(t){this.setY1(t)},getY1:function(){return this._y1},get y1(){return this.getY1()},setX2:function(t){if(this._x2!==t){this._x2=t;const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyX2();this.invalidateLine()}return this},set x2(t){this.setX2(t)},getX2:function(){return this._x2},get x2(){return this.getX2()},setY2:function(t){if(this._y2!==t){this._y2=t;const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyY2();this.invalidateLine()}return this},set y2(t){this.setY2(t)},getY2:function(){return this._y2},get y2(){return this.getY2()},createLineShape:function(){return cn.lineSegment(this._x1,this._y1,this._x2,this._y2).makeImmutable()},invalidateLine:function(){this._shape=null,this.invalidatePath()},containsPointSelf:function(t){return!!this._strokePickable&&Rl.prototype.containsPointSelf.call(this,t)},intersectsBoundsSelf:function(t){return new ui(this.p1,this.p2).intersectsBounds(t)},canvasPaintSelf:function(t,e){Kd.prototype.paintCanvas(t,this,e)},computeShapeBounds:function(){if(this._stroke){const t=this.getLineCap(),e=this.getLineWidth()/2;if("round"===t)return new ne(Math.min(this._x1,this._x2)-e,Math.min(this._y1,this._y2)-e,Math.max(this._x1,this._x2)+e,Math.max(this._y1,this._y2)+e);{const i=this._x2-this._x1,n=this._y2-this._y1,s=Math.sqrt(i*i+n*n);if(0===s)return new ne(this._x1-e,this._y1-e,this._x2+e,this._y2+e);const r=e*i/s,o=e*n/s,a=ne.NOTHING.copy();return"butt"===t?(a.addCoordinates(this._x1-o,this._y1+r),a.addCoordinates(this._x1+o,this._y1-r),a.addCoordinates(this._x2-o,this._y2+r),a.addCoordinates(this._x2+o,this._y2-r)):(a.addCoordinates(this._x1-r-o,this._y1-o+r),a.addCoordinates(this._x1-r+o,this._y1-o-r),a.addCoordinates(this._x2+r-o,this._y2+o+r),a.addCoordinates(this._x2+r+o,this._y2+o-r)),a}}{const t=ne.NOTHING.copy();return t.addCoordinates(this._x1,this._y1),t.addCoordinates(this._x2,this._y2),t}},createSVGDrawable:function(t,e){return $d.createFromPool(t,e)},createCanvasDrawable:function(t,e){return Kd.createFromPool(t,e)},setShape:function(t){if(null!==t)throw new Error("Cannot set the shape of a Line to something non-null");this.invalidatePath()},getShape:function(){return this._shape||(this._shape=this.createLineShape()),this._shape},hasShape:function(){return!0},getFillRendererBitmask:function(){return An.bitmaskCanvas|An.bitmaskSVG|An.bitmaskDOM|An.bitmaskWebGL}});var ep=tp;class ip extends Vo{constructor(t,e){super(t,e);const i=new Bo(t,t.textProperty,"text",Object(s.a)({phetioReadOnly:t.phetioReadOnly,phetioType:Bt(O),tandem:t.tandem.createTandem("textProperty"),phetioDocumentation:"Property for the displayed text"},t.phetioComponentOptions,t.phetioComponentOptions.textProperty));this.disposeRichTextIO=function(){i.dispose()}}dispose(){this.disposeRichTextIO(),Vo.prototype.dispose.call(this)}}ip.documentation="The tandem IO type for the scenery RichText node",ip.validator={valueType:we.RichText},ip.typeName="RichTextIO",A.validateSubtype(ip),we.register("RichTextIO",ip);var np=ip;const sp={mixInto:function(t){const e=t.prototype;e.insertChild=function(t,e){throw new Error("Attempt to insert child into Leaf")},e.removeChildWithIndex=function(t,e){throw new Error("Attempt to remove child from Leaf")}}};we.register("Leaf",sp);var rp=sp;function op(t,e,i){Wo.call(this),this.localBounds=new ne(0,0,t,e),this.mutate(i)}we.register("Spacer",op),Object(z.a)(Wo,op),rp.mixInto(op);var ap=op;function lp(t,e){ap.call(this,0,t,e)}we.register("VStrut",lp),Object(z.a)(ap,lp);var hp=lp;const up=new tl({size:20}),cp=["b","strong","i","em","sub","sup","u","s"],dp="COMPLETE",pp="INCOMPLETE",fp="NONE",mp=new Al(""),gp={fontFamily:"family",fontSize:"size",fontStretch:"stretch",fontStyle:"style",fontVariant:"variant",fontWeight:"weight",lineHeight:"lineHeight"},yp=Object.keys(gp);["color"].concat(yp);function bp(t,e){this.textProperty=new Pe(""),this._font=up,this._boundsMethod="hybrid",this._fill="#000000",this._stroke=null,this._lineWidth=1,this._subScale=.75,this._subXSpacing=0,this._subYOffset=0,this._supScale=.75,this._supXSpacing=0,this._supYOffset=0,this._capHeightScale=.75,this._underlineLineWidth=1,this._underlineHeightScale=.15,this._strikethroughLineWidth=1,this._strikethroughHeightScale=.3,this._linkFill="rgb(27,0,241)",this._linkEventsHandled=!1,this._links={},this._align="left",this._leading=0,this._lineWrap=null,this._linkItems=[],this._hasAddedLeafToLine=!1,e=la({fill:"#000000",text:t,tandem:T.a.OPTIONAL,phetioType:np},e),Wo.call(this),this.lineContainer=new Wo({}),this.addChild(this.lineContainer),this.rebuildRichText(),this.mutate(e)}function vp(t){Wo.call(this),this.initialize(t)}function _p(t,e,i,n,s,r,o){Al.call(this,""),this.initialize(t,e,i,n,s,r,o)}function Ap(t,e){Wo.call(this,{cursor:"pointer",tagName:"a"}),this.buttonListener=null,this.accessibleInputListener=null,this.initialize(t,e)}we.register("RichText",bp),Object(z.a)(Wo,bp,{_mutatorKeys:["boundsMethod","font","fill","stroke","lineWidth","subScale","subXSpacing","subYOffset","supScale","supXSpacing","supYOffset","capHeightScale","underlineLineWidth","underlineHeightScale","strikethroughLineWidth","strikethroughHeightScale","linkFill","linkEventsHandled","links","align","leading","lineWrap","text"].concat(Wo.prototype._mutatorKeys),rebuildRichText:function(){const t=this;if(this.freeChildrenToPool(),""===this.text)return void this.appendEmptyLeaf();const e=this.text.replace(/\u202a/g,'<span dir="ltr">').replace(/\u202b/g,'<span dir="rtl">').replace(/\u202c/g,"</span>"),i=himalaya.parse(e);this._linkItems.length=0;const n=null===this._lineWrap?Number.POSITIVE_INFINITY:this._lineWrap;let s=vp.createFromPool(!0);for(this._hasAddedLeafToLine=!1;i.length;){const t=i[0],e=s.bounds.isValid()?s.width:0,r=this.appendElement(s,t,this._font,this._fill,!0,n-e);r!==fp&&(s.bounds.isValid()?this.appendLine(s):this.appendLine(new hp(mp.setText("X").setFont(this._font).height)),s=vp.createFromPool(!0),this._hasAddedLeafToLine=!1),r!==pp&&i.splice(0,1)}for(s.bounds.isValid()&&this.appendLine(s),0===this.lineContainer.getChildrenCount()&&this.appendEmptyLeaf(),this.alignLines();this._linkItems.length;)!function(){const e=t._linkItems[0].element,i=t._linkItems[0].href;let n;const s=[];for(n=t._linkItems.length-1;n>=0;n--){const i=t._linkItems[n];i.element===e&&(s.push(i.node),t._linkItems.splice(n,1))}const r=Ap.createFromPool(e.innerContent,i);for(t.lineContainer.addChild(r),n=0;n<s.length;n++){const e=s[n],i=e.getUniqueTrailTo(t.lineContainer).getMatrix();e.detach(),e.matrix=i,r.addChild(e)}}();this._linkItems.length=0},freeChildrenToPool:function(){for(;this.lineContainer._children.length;){const t=this.lineContainer._children[this.lineContainer._children.length-1];this.lineContainer.removeChild(t),t.clean()}},dispose:function(){this.freeChildrenToPool(),Wo.prototype.dispose.call(this)},appendLine:function(t){this.lineContainer.bounds.isValid()&&(t.top=this.lineContainer.bottom+this._leading,t.left=0),this.lineContainer.addChild(t)},appendEmptyLeaf:function(){this.appendLine(_p.createFromPool("",!0,this._font,this._boundsMethod,this._fill,this._stroke,this._lineWidth))},alignLines:function(){const t="center"===this._align?"centerX":this._align,e=this.lineContainer[t];for(let i=0;i<this.lineContainer.getChildrenCount();i++)this.lineContainer.getChildAt(i)[t]=e},appendElement:function(t,e,i,n,s,r){let o,a=fp;if("Text"===e.type){o=_p.createFromPool(e.content,s,i,this._boundsMethod,n,this._stroke,this._lineWidth);const l=s?t.rightSpacing:t.leftSpacing;if(!o.fitsIn(r-l,this._hasAddedLeafToLine,s)){const t=e.content.split(" ");if(this._hasAddedLeafToLine||t.length>1){const h=[];let u=!1;for(h.unshift(t.pop());t.length;){if(o=_p.createFromPool(t.join(" "),s,i,this._boundsMethod,n,this._stroke,this._lineWidth),o.fitsIn(r-l,this._hasAddedLeafToLine,s)||!(this._hasAddedLeafToLine||t.length>1)){u=!0;break}h.unshift(t.pop())}if(!u)return pp;a=pp,e.content=h.join(" ")}}this._hasAddedLeafToLine=!0}else if("Element"===e.type){if("br"===e.tagName)return dp;if("span"===e.tagName&&e.attributes.dir&&(s="ltr"===e.attributes.dir),o=vp.createFromPool(s),e.attributes.style){const t=e.attributes.style;t.color&&(n=new ba(t.color));const s={};for(let e=0;e<yp.length;e++){const i=yp[e];t[i]&&(s[gp[i]]=t[i])}i=i.copy(s)}if("a"===e.tagName){let t=e.attributes.href;!0!==this._links&&(t=0===t.indexOf("{{")&&t.indexOf("}}")===t.length-2?this._links[t.slice(2,-2)]:null),t&&(null!==this._linkFill&&(n=this._linkFill),e.innerContent||(e.innerContent=bp.himalayaElementToAccessibleString(e,s)),this._linkItems.push({element:e,node:o,href:t}))}else"b"===e.tagName||"strong"===e.tagName?i=i.copy({weight:"bold"}):"i"===e.tagName||"em"===e.tagName?i=i.copy({style:"italic"}):"sub"===e.tagName?(o.scale(this._subScale),o.addExtraBeforeSpacing(this._subXSpacing),o.y+=this._subYOffset):"sup"===e.tagName&&(o.scale(this._supScale),o.addExtraBeforeSpacing(this._supXSpacing),o.y+=this._supYOffset);const t=o.getScaleVector().x;for(;a===fp&&e.children.length;){const l=o.bounds.isValid()?o.width:0,h=e.children[0];a=this.appendElement(o,h,i,n,s,r/t),a!==pp&&e.children.splice(0,1),r+=l-(o.bounds.isValid()?o.width:0)}if(a===dp&&e.children.length&&(a=pp),"sub"===e.tagName)isFinite(o.height)&&(o.centerY=0);else if("sup"===e.tagName)isFinite(o.height)&&(o.centerY=mp.setText("X").setFont(i).top*this._capHeightScale);else if("u"===e.tagName){const t=-o.top*this._underlineHeightScale;isFinite(o.top)&&o.addChild(new ep(o.localBounds.left,t,o.localBounds.right,t,{stroke:n,lineWidth:this._underlineLineWidth}))}else if("s"===e.tagName){const t=o.top*this._strikethroughHeightScale;isFinite(o.top)&&o.addChild(new ep(o.localBounds.left,t,o.localBounds.right,t,{stroke:n,lineWidth:this._strikethroughLineWidth}))}}return t.addElement(o)||(this._linkItems=this._linkItems.filter((function(t){return t.node!==o})),o.clean()),a},setText:function(t){if((t=""+t)!==this.text){const e=this.text;this.textProperty.setPropertyValue(t),this.rebuildRichText(),this.textProperty.notifyListeners(e)}return this},set text(t){this.setText(t)},getText:function(){return this.textProperty.value},get text(){return this.getText()},setBoundsMethod:function(t){return t!==this._boundsMethod&&(this._boundsMethod=t,this.rebuildRichText()),this},set boundsMethod(t){this.setBoundsMethod(t)},getBoundsMethod:function(){return this._boundsMethod},get boundsMethod(){return this.getBoundsMethod()},setFont:function(t){return this._font!==t&&(this._font=t,this.rebuildRichText()),this},set font(t){this.setFont(t)},getFont:function(){return this._font},get font(){return this.getFont()},setFill:function(t){return this._fill!==t&&(this._fill=t,this.rebuildRichText()),this},set fill(t){this.setFill(t)},getFill:function(){return this._fill},get fill(){return this.getFill()},setStroke:function(t){return this._stroke!==t&&(this._stroke=t,this.rebuildRichText()),this},set stroke(t){this.setStroke(t)},getStroke:function(){return this._stroke},get stroke(){return this.getStroke()},setLineWidth:function(t){return this._lineWidth!==t&&(this._lineWidth=t,this.rebuildRichText()),this},set lineWidth(t){this.setLineWidth(t)},getLineWidth:function(){return this._lineWidth},get lineWidth(){return this.getLineWidth()},setSubScale:function(t){return this._subScale!==t&&(this._subScale=t,this.rebuildRichText()),this},set subScale(t){this.setSubScale(t)},getSubScale:function(){return this._subScale},get subScale(){return this.getSubScale()},setSubXSpacing:function(t){return this._subXSpacing!==t&&(this._subXSpacing=t,this.rebuildRichText()),this},set subXSpacing(t){this.setSubXSpacing(t)},getSubXSpacing:function(){return this._subXSpacing},get subXSpacing(){return this.getSubXSpacing()},setSubYOffset:function(t){return this._subYOffset!==t&&(this._subYOffset=t,this.rebuildRichText()),this},set subYOffset(t){this.setSubYOffset(t)},getSubYOffset:function(){return this._subYOffset},get subYOffset(){return this.getSubYOffset()},setSupScale:function(t){return this._supScale!==t&&(this._supScale=t,this.rebuildRichText()),this},set supScale(t){this.setSupScale(t)},getSupScale:function(){return this._supScale},get supScale(){return this.getSupScale()},setSupXSpacing:function(t){return this._supXSpacing!==t&&(this._supXSpacing=t,this.rebuildRichText()),this},set supXSpacing(t){this.setSupXSpacing(t)},getSupXSpacing:function(){return this._supXSpacing},get supXSpacing(){return this.getSupXSpacing()},setSupYOffset:function(t){return this._supYOffset!==t&&(this._supYOffset=t,this.rebuildRichText()),this},set supYOffset(t){this.setSupYOffset(t)},getSupYOffset:function(){return this._supYOffset},get supYOffset(){return this.getSupYOffset()},setCapHeightScale:function(t){return this._capHeightScale!==t&&(this._capHeightScale=t,this.rebuildRichText()),this},set capHeightScale(t){this.setCapHeightScale(t)},getCapHeightScale:function(){return this._capHeightScale},get capHeightScale(){return this.getCapHeightScale()},setUnderlineLineWidth:function(t){return this._underlineLineWidth!==t&&(this._underlineLineWidth=t,this.rebuildRichText()),this},set underlineLineWidth(t){this.setUnderlineLineWidth(t)},getUnderlineLineWidth:function(){return this._underlineLineWidth},get underlineLineWidth(){return this.getUnderlineLineWidth()},setUnderlineHeightScale:function(t){return this._underlineHeightScale!==t&&(this._underlineHeightScale=t,this.rebuildRichText()),this},set underlineHeightScale(t){this.setUnderlineHeightScale(t)},getUnderlineHeightScale:function(){return this._underlineHeightScale},get underlineHeightScale(){return this.getUnderlineHeightScale()},setStrikethroughLineWidth:function(t){return this._strikethroughLineWidth!==t&&(this._strikethroughLineWidth=t,this.rebuildRichText()),this},set strikethroughLineWidth(t){this.setStrikethroughLineWidth(t)},getStrikethroughLineWidth:function(){return this._strikethroughLineWidth},get strikethroughLineWidth(){return this.getStrikethroughLineWidth()},setStrikethroughHeightScale:function(t){return this._strikethroughHeightScale!==t&&(this._strikethroughHeightScale=t,this.rebuildRichText()),this},set strikethroughHeightScale(t){this.setStrikethroughHeightScale(t)},getStrikethroughHeightScale:function(){return this._strikethroughHeightScale},get strikethroughHeightScale(){return this.getStrikethroughHeightScale()},setLinkFill:function(t){return this._linkFill!==t&&(this._linkFill=t,this.rebuildRichText()),this},set linkFill(t){this.setLinkFill(t)},getLinkFill:function(){return this._linkFill},get linkFill(){return this.getLinkFill()},setLinkEventsHandled:function(t){return this._linkEventsHandled!==t&&(this._linkEventsHandled=t,this.rebuildRichText()),this},set linkEventsHandled(t){this.setLinkEventsHandled(t)},getLinkEventsHandled:function(){return this._linkEventsHandled},get linkEventsHandled(){return this.getLinkEventsHandled()},setLinks:function(t){return this._links!==t&&(this._links=t,this.rebuildRichText()),this},set links(t){this.setLinks(t)},getLinks:function(){return this._links},get links(){return this.getLinks()},setAlign:function(t){return this._align!==t&&(this._align=t,this.rebuildRichText()),this},set align(t){this.setAlign(t)},getAlign:function(){return this._align},get align(){return this.getAlign()},setLeading:function(t){return this._leading!==t&&(this._leading=t,this.rebuildRichText()),this},set leading(t){this.setLeading(t)},getLeading:function(){return this._leading},get leading(){return this.getLeading()},setLineWrap:function(t){return this._lineWrap!==t&&(this._lineWrap=t,this.rebuildRichText()),this},set lineWrap(t){this.setLineWrap(t)},getLineWrap:function(){return this._lineWrap},get lineWrap(){return this.getLineWrap()}},{stringWithFont:function(t,e){return"<span style='font-style: "+e.style+";font-variant: "+e.variant+";font-weight: "+e.weight+";font-stretch: "+e.stretch+";font-size: "+e.size+";font-family: "+e.family+";line-height: "+e.lineHeight+";'>"+t+"</span>"},himalayaElementToString:function(t,e){return"Text"===t.type?bp.contentToString(t.content,e):"Element"===t.type?("span"===t.tagName&&t.attributes.dir&&(e="ltr"===t.attributes.dir),t.children.map((function(t){return bp.himalayaElementToString(t,e)})).join("")):""},himalayaElementToAccessibleString:function(t,e){if("Text"===t.type)return bp.contentToString(t.content,e);if("Element"===t.type){"span"===t.tagName&&t.attributes.dir&&(e="ltr"===t.attributes.dir);const i=t.children.map((function(t){return bp.himalayaElementToAccessibleString(t,e)})).join("");return _.includes(cp,t.tagName)?"<"+t.tagName+">"+i+"</"+t.tagName+">":i}return""},contentToString:function(t,e){const i=he.decode(t);return e?""+i+"":""+i+""}}),Object(z.a)(Wo,vp,{initialize:function(t){return this.isLTR=t,this.leftSpacing=0,this.rightSpacing=0,this},clean:function(){for(;this._children.length;){const t=this._children[this._children.length-1];this.removeChild(t),t.clean()}this.matrix=Ye.IDENTITY,this.freeToPool()},addElement:function(t){const e=this.children.length>0,i=t.width>0,n=t.getScaleVector().x,s=t.leftSpacing*n,r=t.rightSpacing*n;if(e||i)return e?i?(this.isLTR?(t.left=this.localBounds.right+this.rightSpacing+s,this.rightSpacing=r):(t.right=this.localBounds.left-this.leftSpacing-r,this.leftSpacing=s),this.addChild(t),!0):(this.isLTR?this.rightSpacing+=s+r:this.leftSpacing+=s+r,!1):(this.isLTR?(t.left=0,this.leftSpacing=s,this.rightSpacing=r):(t.right=0,this.leftSpacing=s,this.rightSpacing=r),this.addChild(t),!0)},addExtraBeforeSpacing:function(t){this.isLTR?this.leftSpacing+=t:this.rightSpacing+=t}}),$t.a.mixInto(vp,{initialize:vp.prototype.initialize}),Object(z.a)(Al,_p,{initialize:function(t,e,i,n,s,r,o){let a="";for(;" "===t[0];)a+=" ",t=t.slice(1);let l="";for(;" "===t[t.length-1];)l=" ",t=t.slice(0,t.length-1);this.text=bp.contentToString(t,e),this.boundsMethod=n,this.font=i,this.fill=s,this.stroke=r,this.lineWidth=o;const h=a.length?mp.setText(a).setFont(i).width:0,u=l.length?mp.setText(l).setFont(i).width:0;return this.leftSpacing=e?h:u,this.rightSpacing=e?u:h,this},clean:function(){this.fill=null,this.stroke=null,this.matrix=Ye.IDENTITY,this.freeToPool()},fitsIn:function(t,e,i){return this.width+(e?i?this.leftSpacing:this.rightSpacing:0)<=t}}),$t.a.mixInto(_p,{initialize:_p.prototype.initialize}),Object(z.a)(Wo,Ap,{initialize:function(t,e){return this.innerContent=t,"function"==typeof e?(this.buttonListener=new Ud({fire:e}),this.addInputListener(this.buttonListener),this.setAccessibleAttribute("href","#"),this.setAccessibleAttribute("target","_self"),this.accessibleInputListener={click:function(t){t.domEvent.preventDefault(),e()}},this.addInputListener(this.accessibleInputListener)):(this.buttonListener=new Ud({fire:function(t){t.isFromPDOM()&&t.domEvent.preventDefault(),self._linkEventsHandled&&t.handle(),Hd(e)}}),this.addInputListener(this.buttonListener),this.setAccessibleAttribute("href",e),this.setAccessibleAttribute("target","_blank")),this},clean:function(){for(;this._children.length;){const t=this._children[this._children.length-1];this.removeChild(t),t.clean()}this.removeInputListener(this.buttonListener),this.buttonListener=null,this.accessibleInputListener&&(this.removeInputListener(this.accessibleInputListener),this.accessibleInputListener=null),this.matrix=Ye.IDENTITY,this.freeToPool()}}),$t.a.mixInto(Ap,{initialize:Ap.prototype.initialize});var wp=bp;const xp=(t=>{const e=["en"],i=t+"/";phet.chipper.locale.indexOf("_")>=0&&"en"!==phet.chipper.locale.slice(0,2)&&e.push(phet.chipper.locale.slice(0,2)),"en"!==phet.chipper.locale&&e.push(phet.chipper.locale);const n={};return e.forEach(t=>{const e=phet.chipper.strings[t];if(e){const t={};Object.keys(e).filter(t=>0===t.indexOf(i)).forEach(n=>{const s=n.slice(i.length).split("."),r=s[s.length-1],o=s.slice(0,s.length-1);let a=t,l=i;o.forEach((t,e)=>{l+=`${e>0?".":""}${t}`,a[t]||(a[t]={}),a=a[t]}),"string"!=typeof a&&(a[r]=phet.chipper.mapString(e[n]))}),_.merge(n,t)}}),n.get=i=>{const n=`${t}/${i}`;for(let t=e.length-1;t>=0;t--){const i=phet.chipper.strings[e[t]];if(i&&i[n])return i[n]}throw new Error(`Unable to find string ${n} in get( '${i}' )`)},n})("SCENERY_PHET");Rd.register("sceneryPhetStrings",xp);var Sp=xp;const Tp={PLUS:"+",MINUS:"",TIMES:"",DIVIDE:"",DOT:"",UNARY_PLUS:"+",UNARY_MINUS:"-",EQUAL_TO:"=",NOT_EQUAL_TO:"",GREATER_THAN:">",LESS_THAN:"<",LESS_THAN_OR_EQUAL:"",GREATER_THAN_OR_EQUAL:"",PERCENT:"%",INFINITY:"",PI:"",PLUS_MINUS:"",THETA:"",NO_VALUE:"",DEGREES:"",OHMS:Sp.symbol.ohms,RESISTIVITY:Sp.symbol.resistivity};Rd.register("MathSymbols",Tp);var Dp=Tp;class Ep extends Vo{}Ep.validator={isValidValue:t=>t instanceof phet.sceneryPhet.NumberDisplay},Ep.documentation="A numeric readout with a background",Ep.typeName="NumberDisplayIO",A.validateSubtype(Ep),Rd.register("NumberDisplayIO",Ep);var Cp=Ep;function Pp(t){"number"!=typeof t&&"string"!=typeof t||(t={size:t}),(t=Object(s.a)({family:"Arial"},t)).family=t.family+", sans-serif",tl.call(this,t)}Rd.register("PhetFont",Pp),Object(z.a)(tl,Pp);var kp=Pp;const Ip=new kp(20);class Lp extends Wo{constructor(t,e,i){(i=Object(s.a)({align:"right",valuePattern:Dc.VALUE_NAMED_PLACEHOLDER,decimalPlaces:0,numberFormatter:null,useRichText:!1,textOptions:{font:Ip,fill:"black",maxWidth:null,phetioReadOnly:!0},xMargin:8,yMargin:2,cornerRadius:0,backgroundFill:"white",backgroundStroke:"lightGray",backgroundLineWidth:1,backgroundLineDash:[],minBackgroundWidth:0,noValueString:Dp.NO_VALUE,noValueAlign:null,noValuePattern:null,tandem:T.a.OPTIONAL,phetioType:Cp},i)).noValueAlign||(i.noValueAlign=i.align),-1!==i.valuePattern.indexOf(Dc.VALUE_NUMBERED_PLACEHOLDER)&&(i.valuePattern=Vd.format(i.valuePattern,Dc.VALUE_NAMED_PLACEHOLDER)),i.noValuePattern||(i.noValuePattern=i.valuePattern);const n=Op(e.min,i.decimalPlaces,i.noValueString,i.numberFormatter),r=Op(e.max,i.decimalPlaces,i.noValueString,i.numberFormatter),o=Vd.fillIn(i.valuePattern,{value:n.length>r.length?n:r}),a=new(i.useRichText?wp:Al)(o,Object(s.a)({tandem:i.tandem.createTandem("valueText")},i.textOptions));null===i.textOptions.maxWidth?a.maxWidth=a.width:a.maxWidth=i.textOptions.maxWidth;const l=Math.max(i.minBackgroundWidth,a.width+2*i.xMargin),h=new cd(0,0,l,a.height+2*i.yMargin,{cornerRadius:i.cornerRadius,fill:i.backgroundFill,stroke:i.backgroundStroke,lineWidth:i.backgroundLineWidth,lineDash:i.backgroundLineDash});i.children=[h,a];const u=t=>{const e=null===t?i.noValuePattern:i.valuePattern,n=Op(t,i.decimalPlaces,i.noValueString,i.numberFormatter),s=null===t?i.noValueAlign:i.align;a.text=Vd.fillIn(e,{value:n}),"center"===s?a.centerX=h.centerX:"left"===s?a.left=h.left+i.xMargin:a.right=h.right-i.xMargin,a.centerY=h.centerY};t.link(u),super(i),this.valueText=a,this.backgroundNode=h,this._recomputeText=()=>u(t.value),this.disposeNumberDisplay=()=>t.unlink(u)}recomputeText(){this._recomputeText()}dispose(){this.disposeNumberDisplay(),super.dispose()}setNumberFont(t){this.valueText.font=t}set numberFont(t){this.setNumberFont(t)}setNumberFill(t){this.valueText.fill=t}set numberFill(t){this.setNumberFill(t)}setBackgroundFill(t){this.backgroundNode.fill=t}set backgroundFill(t){this.setBackgroundFill(t)}setBackgroundStroke(t){this.backgroundNode.stroke=t}set backgroundStroke(t){this.setBackgroundStroke(t)}}Rd.register("NumberDisplay",Lp);const Op=(t,e,i,n)=>{let s=i;return null!==t&&(s=n?n(t):null===e?""+t:oe.a.toFixed(t,e)),s};var Rp=Lp;const Np=["startDrag","endDrag","leftStart","leftEnd","rightStart","rightEnd"],Mp=["touchAreaXDilation","touchAreaYDilation","mouseAreaXDilation","mouseAreaYDilation"];function Bp(t,e,i,n){!function(t){!t.startCallback&&t.endCallback;let e=!1,i=!1;t.arrowButtonOptions&&(e=Fp(t.arrowButtonOptions));t.sliderOptions&&(i=Fp(t.sliderOptions))}(n||{});const r=(n=Object(s.a)({startCallback:_.noop,endCallback:_.noop,delta:1,enabledProperty:new Ot(!0),disabledOpacity:.5,layoutFunction:Bp.createLayoutFunction1(),includeArrowButtons:!0,enabledRangeProperty:null,tandem:T.a.REQUIRED,phetioType:Md,groupFocusHighlight:!0},n)).arrowButtonOptions&&n.arrowButtonOptions.hasOwnProperty("scale"),o=()=>n.enabledRangeProperty?n.enabledRangeProperty.value:i,a=t=>{const e=oe.a.roundToInterval(t,n.delta);return o().constrainValue(e)};(n=Object(s.a)({arrowButtonOptions:{touchAreaXDilation:3.5,touchAreaYDilation:7,mouseAreaXDilation:0,mouseAreaYDilation:0,leftStart:n.startCallback,leftEnd:n.endCallback,rightStart:n.startCallback,rightEnd:n.endCallback},sliderOptions:{startDrag:n.startCallback,endDrag:n.endCallback,majorTickLength:20,minorTickStroke:"rgba( 0, 0, 0, 0.3 )",majorTicks:[],minorTickSpacing:0,constrainValue:a,tandem:n.tandem.createTandem("slider")},numberDisplayOptions:{textOptions:{font:new kp(12)},tandem:n.tandem.createTandem("numberDisplay")},titleNodeOptions:{font:new kp(12),maxWidth:null,fill:"black",tandem:n.tandem.createTandem("titleNode")}},n)).enabledRangeProperty&&(n.sliderOptions.enabledRangeProperty=n.enabledRangeProperty);const l=_.pick(n.arrowButtonOptions,Mp);if(n.arrowButtonOptions=_.omit(n.arrowButtonOptions,Mp),n.arrowButtonOptions.tagName=null,n.sliderOptions.trackNode||(n.sliderOptions=Object(s.a)({trackSize:new re(180,3)},n.sliderOptions)),n.sliderOptions.thumbNode||(n.sliderOptions=Object(s.a)({thumbSize:new re(17,34),thumbTouchAreaXDilation:6},n.sliderOptions)),n.sliderOptions=Object(s.a)({shiftKeyboardStep:n.delta,phetioType:Dd},n.sliderOptions),n.sliderOptions.thumbFill&&!n.sliderOptions.thumbFillHighlighted&&(this.thumbFillProperty=new Tl(n.sliderOptions.thumbFill),n.sliderOptions.thumbFillHighlighted=new Jt([this.thumbFillProperty],t=>t.brighterColor())),n.sliderOptions.constrainValue){const t=n.sliderOptions.constrainValue;n.sliderOptions.constrainValue=e=>this.slider.getShiftKeyDown()?a(e):t(e)}const h=new Al(t,n.titleNodeOptions),u=new Rp(e,i,n.numberDisplayOptions);this.slider=new Od(e,i,n.sliderOptions);let c=null,d=null,p=null;if(n.includeArrowButtons){if(c=new Rc("left",()=>{let t=e.get()-n.delta;t=oe.a.roundToInterval(t,n.delta),t=Math.max(t,o().min),e.set(t)},Object(s.a)({startCallback:n.arrowButtonOptions.leftStart,endCallback:n.arrowButtonOptions.leftEnd,tandem:n.tandem.createTandem("leftArrowButton")},n.arrowButtonOptions)),d=new Rc("right",()=>{let t=e.get()+n.delta;t=oe.a.roundToInterval(t,n.delta),t=Math.min(t,o().max),e.set(t)},Object(s.a)({startCallback:n.arrowButtonOptions.rightStart,endCallback:n.arrowButtonOptions.rightEnd,tandem:n.tandem.createTandem("rightArrowButton")},n.arrowButtonOptions)),!r){c.setScaleMagnitude(1);const t=u.localBounds.height/c.height;c.setScaleMagnitude(t),d.setScaleMagnitude(t)}c.touchArea=c.localBounds.dilatedXY(l.touchAreaXDilation,l.touchAreaYDilation).shiftedX(-l.touchAreaXDilation),d.touchArea=d.localBounds.dilatedXY(l.touchAreaXDilation,l.touchAreaYDilation).shiftedX(l.touchAreaXDilation),c.mouseArea=c.localBounds.dilatedXY(l.mouseAreaXDilation,l.mouseAreaYDilation).shiftedX(-l.mouseAreaXDilation),d.mouseArea=d.localBounds.dilatedXY(l.mouseAreaXDilation,l.mouseAreaYDilation).shiftedX(l.mouseAreaXDilation),p=t=>{c.enabled=t>o().min&&!this.slider.isFocused(),d.enabled=t<o().max&&!this.slider.isFocused()},e.link(p),this.slider.addInputListener({focus:()=>{c.enabled=!1,d.enabled=!1},blur:()=>p(e.value)})}const f=n.sliderOptions.majorTicks;for(let s=0;s<f.length;s++)this.slider.addMajorTick(f[s].value,f[s].label);if(n.sliderOptions.minorTickSpacing>0)for(let s=i.min;s<=i.max;)_.find(f,t=>t.value===s)||this.slider.addMinorTick(s),s+=n.sliderOptions.minorTickSpacing;n.children=[n.layoutFunction(h,u,this.slider,c,d)],Wo.call(this,n),this.enabledProperty=n.enabledProperty;const m=t=>{this.pickable=t,this.opacity=t?1:n.disabledOpacity};this.enabledProperty.link(m),this.disposeNumberControl=()=>{u.dispose(),this.slider.dispose(),this.thumbFillProperty&&this.thumbFillProperty.dispose(),c&&c.dispose(),d&&d.dispose(),p&&e.unlink(p),this.enabledProperty.unlink(m)}}function Fp(t){const e=Object.keys(t);return Np.filter(t=>_.includes(e,t)).length>0}Rd.register("NumberControl",Bp),Object(z.a)(xl,Bp,{dispose:function(){this.disposeNumberControl(),xl.prototype.dispose.call(this)},setEnabled:function(t){this.enabledProperty.set(t)},set enabled(t){this.setEnabled(t)},getEnabled:function(){return this.enabledProperty.get()},get enabled(){return this.getEnabled()}},{withMinMaxTicks:function(t,e,i,n){return(n=Object(s.a)({tickLabelFont:new kp(12)},n)).sliderOptions=Object(s.a)({majorTicks:[{value:i.min,label:new Al(i.min,{font:n.tickLabelFont})},{value:i.max,label:new Al(i.max,{font:n.tickLabelFont})}]},n.sliderOptions),new Bp(t,e,i,n)},createLayoutFunction1:function(t){return t=Object(s.a)({align:"center",titleXSpacing:5,arrowButtonsXSpacing:15,ySpacing:5},t),(e,i,n,s,r)=>new xl({align:t.align,spacing:t.ySpacing,children:[new sa({spacing:t.titleXSpacing,children:[e,i]}),new sa({spacing:t.arrowButtonsXSpacing,resize:!1,children:[s,n,r]})]})},createLayoutFunction2:function(t){return t=Object(s.a)({align:"center",xSpacing:5,ySpacing:5},t),(e,i,n,s,r)=>new xl({align:t.align,spacing:t.ySpacing,resize:!1,children:[new sa({spacing:t.xSpacing,children:[e,s,i,r]}),n]})},createLayoutFunction3:function(t){return t=Object(s.a)({alignTitle:"center",alignNumber:"center",titleLeftIndent:0,xSpacing:5,ySpacing:5},t),(e,i,n,s,r)=>{const o=new xl({spacing:t.ySpacing,resize:!1,align:t.alignTitle,children:[new Zo(e,{leftMargin:t.titleLeftIndent}),new xl({spacing:t.ySpacing,resize:!1,align:t.alignNumber,children:[new sa({spacing:t.xSpacing,children:[s,i,r]}),n]})]});return e.boundsProperty.lazyLink(()=>{o.updateLayout()}),o}},createLayoutFunction4:function(t){return t=Object(s.a)({sliderPadding:0,verticalSpacing:5,arrowButtonSpacing:5,hasReadoutProperty:null,createBottomContent:null},t),(e,i,n,s,r)=>{const o=!!s,a=new sa({resize:!1,spacing:t.arrowButtonSpacing,children:o?[s,n,r]:[n]}),l=t.createBottomContent?t.createBottomContent(a):a,h=new Ko({matchHorizontal:!1}),u=new Zo(e,{group:h}),c=new Zo(i,{group:h});u.bottom=c.bottom=l.top-t.verticalSpacing,u.left=l.left-t.sliderPadding,c.right=l.right+t.sliderPadding;const d=new Wo({children:[l,u,c]});return t.hasReadoutProperty&&t.hasReadoutProperty.link(t=>{c.visible=t}),d}}});var Vp=Bp;const qp={fill:"white",stroke:"black",lineWidth:1,xMargin:5,yMargin:5,cornerRadius:10,resize:!0,backgroundPickable:!1,excludeInvisibleChildrenFromBounds:!0,align:"left",minWidth:0,tandem:T.a.OPTIONAL};function Hp(t,e){e=Object(s.a)({},qp,e),Wo.call(this);const i=new Wo;this.background=new cd(0,0,1,1,{lineWidth:e.lineWidth,pickable:e.backgroundPickable,lineDash:e.lineDash,cornerRadius:e.cornerRadius}),this.setStroke(e.stroke),this.setFill(e.fill),this.addChild(i),this.addChild(t);let n=!1;const r=()=>{if(n)return;const s=this.isChildIncludedInLayout(t);if(i.children=s?[this.background]:[],!s)return;n=!0;const r=Math.max(e.minWidth,t.width+2*e.xMargin);this.background.setRect(0,0,r,t.height+2*e.yMargin),"center"===e.align?t.center=this.background.center:"left"===e.align?(t.left=this.background.centerX-r/2+e.xMargin,t.centerY=this.background.centerY):(t.right=this.background.centerX+r/2-e.xMargin,t.centerY=this.background.centerY),n=!1};e.resize&&(t.boundsProperty.lazyLink(r),t.visibleProperty.lazyLink(r)),r(),this.disposePanel=function(){e.resize&&(t.boundsProperty.unlink(r),t.visibleProperty.unlink(r))},this.mutate(e)}Nl.register("Panel",Hp),Object(z.a)(Wo,Hp,{dispose:function(){this.disposePanel(),Wo.prototype.dispose.call(this)},setStroke:function(t){this.background.stroke=t},getStroke:function(){return this.background.stroke},set stroke(t){this.setStroke(t)},get stroke(){return this.getStroke()},setFill:function(t){this.background.fill=t},getFill:function(){return this.background.fill},set fill(t){this.setFill(t)},get fill(){return this.getFill()}},{DEFAULT_OPTIONS:qp});var Yp=Hp,jp=new r.a("miscworks");function Gp(t,e){return t[0]===e?t[1]:t[0]}window.scenery=we,window.kite=ce,window.dot=w.a,window.phetCore=a.a,window.axon=o,window.miscworks=jp,jp.register("other",Gp);var zp=Gp;class Wp{constructor(t){this.duration=t}}const Up=h.byMap({SWAP:new Wp(0),SELECTION_LEFT:new Wp(.08),SELECTION_RIGHT:new Wp(.08),SELECTION_OUT:new Wp(.08),SELECTION_IN:new Wp(.08),SELECT:new Wp(0),SHIFT_LEFT:new Wp(.08),SHIFT_RIGHT:new Wp(.08),SHIFT_UP:new Wp(.08),SHIFT_DOWN:new Wp(.08),APPLY:new Wp(0),CANCEL:new Wp(0),RESET:new Wp(0)});jp.register("RingAction",Up);var Xp=Up;const Kp={ROWS:12,RINGS:4,LIGHT_BACKGROUND:new ba(180,180,180),DARK_BACKGROUND:new ba(100,100,100),HEART_FOREGROUND:new ba(15667216),HEART_BACKGROUND:new ba(5898240),STAR_FOREGROUND:new ba(14605824),STAR_BACKGROUND:new ba(5392896),DIAMOND_FOREGROUND:new ba(14031103),DIAMOND_BACKGROUND:new ba(4325516),DOWN_TRIANGLE_FOREGROUND:new ba(3761151),DOWN_TRIANGLE_BACKGROUND:new ba(148),UP_TRIANGLE_FOREGROUND:new ba(61423),UP_TRIANGLE_BACKGROUND:new ba(27499),CIRCLE_FOREGROUND:new ba(59136),CIRCLE_BACKGROUND:new ba(23040),INNER_RADIUS:70,OUTER_RADIUS:200};Kp.HALF_ROWS=Kp.ROWS/2,Kp.PIECE_RADIUS=(Kp.OUTER_RADIUS-Kp.INNER_RADIUS)/Kp.RINGS,Kp.PIECE_ANGLE=2*Math.PI/Kp.ROWS,Kp.MIN_RINGY=-.5,Kp.MAX_RINGY=Kp.RINGS-.5,Kp.mod=(t,e)=>{const i=t%e;return i<0?i+e:i},Kp.rowRingDelta=(t,e,i)=>(t+=i.x,(e+=i.y)<0&&(e=1+e,t+=Kp.HALF_ROWS),e>=Kp.RINGS&&(e=2*Kp.RINGS-e-1,t+=Kp.HALF_ROWS),new te.a(Kp.mod(t,Kp.ROWS),Kp.mod(e,Kp.RINGS))),Kp.rowToTheta=t=>(t+.5)*Kp.PIECE_ANGLE-Math.PI/2,Kp.ringToRadius=t=>Kp.INNER_RADIUS+(t+.5)*Kp.PIECE_RADIUS,Kp.rowRingToPlanar=(t,e)=>te.a.createPolar(Kp.ringToRadius(e),Kp.rowToTheta(t)),Kp.sameRow=(t,e)=>0===oe.a.moduloBetweenDown(t-e,0,Kp.ROWS),Kp.sameOrOppositeRow=(t,e)=>0===oe.a.moduloBetweenDown(t-e,0,Kp.HALF_ROWS),jp.register("RingConstants",Kp);var Qp=Kp;const Zp=h.byKeys(["NONE","HEART","STAR","DIAMOND","DOWN_TRIANGLE","UP_TRIANGLE","CIRCLE"]);jp.register("RingContent",Zp);var Jp=Zp;const $p=h.byKeys(["HAMMER","JUMP"]);jp.register("RingMatchType",$p);var tf=$p;class ef{constructor(t,e){this.type=t,this.row=e,this.filter=e=>t===tf.HAMMER?(e.row===this.row||e.row===(this.row+1)%Qp.ROWS)&&e.ring<=1:e.row===this.row}toString(){return`(${this.type} ${this.row})`}}jp.register("RingMatch",ef);var nf=ef;const sf=h.byKeys(["RING","ROW"]);jp.register("RingSliceType",sf);var rf=sf;class of{constructor(t,e){this.slice=t,this.direction=e}getDelta(t,e){return this.slice.includes(t,e)?this.slice.type===rf.RING?new te.a(this.direction,0):Qp.sameRow(this.slice.index,t)?new te.a(0,this.direction):new te.a(0,-this.direction):te.a.ZERO}toString(){return`(${this.slice} ${this.direction})`}}jp.register("RingMove",of);var af=of;class lf{constructor(t,e,i,n){this.row=t,this.ring=e,this.content=i,this.backgroundColor=n}apply(t){if(t.slice.includes(this.row,this.ring)){const e=Qp.rowRingDelta(this.row,this.ring,t.getDelta(this.row,this.ring));return new lf(e.x,e.y,this.content,this.backgroundColor)}return this}withContent(t){return new lf(this.row,this.ring,t,this.backgroundColor)}static filterFrom(t){return e=>_.some(t,t=>e.row===t.row&&e.ring===t.ring)}}jp.register("RingPiece",lf);var hf=lf;class uf{constructor(t,e){this.type=t,this.index=e}includes(t,e){return this.type===rf.RING?this.index===e:Qp.sameOrOppositeRow(this.index,t)}equals(t){return this.type===t.type&&this.index===t.index}toString(){return`(${this.type} ${this.index})`}}jp.register("RingSlice",uf);var cf=uf;class df{constructor(t){this.pieces=t}apply(t){return new df(df.moveMap(this.pieces,t,e=>e.apply(t)))}map(t){return new df(this.pieces.map(t))}withContent(t,e){return this.map(i=>e(i)?i.withContent(t):i)}get emptyPieces(){return this.pieces.filter(t=>t.content===Jp.NONE)}getFourRandomPieces(){const t=this.emptyPieces;return _.shuffle(t).slice(0,4)}attemptRandomAddition(t){const e=this.getFourRandomPieces(),i=_.sample(t);return 0===this.withContent(i,hf.filterFrom(e)).getMatches().length?{content:i,pieces:e}:null}findRandomAddition(t){for(let e=0;e<15;e++){const e=this.attemptRandomAddition(t);if(e)return e}return null}getMatches(){let t=[];const e=[];for(let r=0;r<Qp.ROWS;r++){const i=this.getJumpMatchAt(r);i&&(e.push(new nf(tf.JUMP,r)),t=t.concat(i))}const i=_.range(0,Qp.ROWS).filter(e=>{const i=this.getHammerMatchAt(e);return i&&_.every(i,e=>!t.includes(e))}),n=_.find(_.range(0,Qp.ROWS),t=>!i.includes(t));let s;return s=null==n?i:i.filter(t=>t>n).concat(i.filter(t=>t<n)),s.forEach(i=>{const n=this.getHammerMatchAt(i);_.every(n,e=>!t.includes(e))&&(e.push(new nf(tf.HAMMER,i)),t=t.concat(n))}),e}getJumpMatchPieces(t){return _.range(0,Qp.RINGS).map(e=>this.pieces[df.getIndex(t,e)])}getHammerMatchPieces(t){return[this.pieces[df.getIndex(t,0)],this.pieces[df.getIndex(t,1)],this.pieces[df.getIndex((t+1)%Qp.ROWS,0)],this.pieces[df.getIndex((t+1)%Qp.ROWS,1)]]}hasMatchWithPieces(t){const e=t[0].content;return e!==Jp.NONE&&_.every(t,t=>t.content===e)}getJumpMatchAt(t){const e=this.getJumpMatchPieces(t);return this.hasMatchWithPieces(e)?e:null}getHammerMatchAt(t){const e=this.getHammerMatchPieces(t);return this.hasMatchWithPieces(e)?e:null}static getIndex(t,e){return t+e*Qp.ROWS}static moveMap(t,e,i=_.identity){const n=[];return _.range(0,Qp.RINGS).forEach(s=>_.range(0,Qp.ROWS).forEach(r=>{const o=t[df.getIndex(r,s)];if(e.slice.includes(r,s)){const t=Qp.rowRingDelta(r,s,e.getDelta(r,s));n[df.getIndex(t.x,t.y)]=i(o,t.x,t.y,r,s)}else n[df.getIndex(r,s)]=i(o,r,s,r,s)})),n}static generatePuzzle(t){let e=null;for(;!e;)e=df.generatePuzzleAttempt(t);return e}static generatePuzzleAttempt(t){let e=df.START;t.hammerContents.forEach(t=>{const i=_.range(0,Qp.ROWS).filter(t=>_.every(e.getHammerMatchPieces(t),t=>t.content===Jp.NONE)),n=_.sample(i);e=e.withContent(t,hf.filterFrom(e.getHammerMatchPieces(n)))}),t.jumpContents.forEach(t=>{const i=_.range(0,Qp.ROWS).filter(t=>_.every(e.getJumpMatchPieces(t),t=>t.content===Jp.NONE)),n=_.sample(i);e=e.withContent(t,hf.filterFrom(e.getJumpMatchPieces(n)))});let i=null;return t.sliceTypes.forEach(t=>{let n=_.range(0,t===rf.RING?Qp.RINGS:Qp.HALF_ROWS).map(e=>new cf(t,e));if(i&&(n=n.filter(t=>!t.equals(i))),0===n.length)return null;const s=_.sample(n);i=s;const r=new af(s,1),o=_.sample(_.range(1,t===rf.RING?Qp.ROWS:2*Qp.RINGS-1));_.times(o,()=>{e=e.apply(r)})}),e.getMatches().length?null:e}}df.START=new df(_.flatten(_.range(0,Qp.RINGS).map(t=>_.range(0,Qp.ROWS).map(e=>new hf(e,t,Jp.NONE,(e+t)%2==0?Qp.LIGHT_BACKGROUND:Qp.DARK_BACKGROUND))))),jp.register("RingBoard",df);var pf=df;class ff{constructor(){this.currentSliceIndices={[rf.ROW]:0,[rf.RING]:0},this.currentSlice=new cf(rf.RING,this.currentSliceIndices[rf.RING]),this.nextSlice=null,this.selected=!1,this.currentBoard=pf.START,this.savedBoard=pf.START,this.nextBoard=null,this.currentAction=null,this.pendingActions=[],this.currentRemainingDuration=0,this.currentMove=null,this.beforeEmitter=new H,this.afterEmitter=new H,this.receivedEmitter=new H,this.ratioEmitter=new H,this.appliedEmitter=new H,this.contentChangedEmitter=new H,this.flashEmitter=new H,this.modificationTimeEmitter=new H}appendAction(t){this.pendingActions.push(t),this.receivedEmitter.emit(t)}setContent(t,e){const i=this.currentBoard.pieces.filter(e);this.currentBoard=this.currentBoard.withContent(t,e),this.contentChangedEmitter.emit(t,i)}addContent(t,e){this.setContent(t,e),this.flash(ba.BLACK,e)}clearContent(t){this.setContent(Jp.NONE,t),this.flash(ba.WHITE,t)}flash(t,e){this.flashEmitter.emit(t,this.currentBoard.pieces.filter(e))}addRandomFour(t){const e=this.currentBoard.findRandomAddition(t);e&&this.addContent(e.content,hf.filterFrom(e.pieces))}changeToBoard(t){this.clearContent(t=>t.content!==Jp.NONE),Jp.VALUES.forEach(e=>{e!==Jp.NONE&&this.addContent(e,i=>t.pieces[pf.getIndex(i.row,i.ring)].content===e)})}step(t){let e=t;for(;(this.currentAction||this.pendingActions.length)&&e;)this.currentAction||(this.currentAction=this.pendingActions.shift(),this.before(this.currentAction),this.currentRemainingDuration=this.currentAction.duration),e>=this.currentRemainingDuration?(e-=this.currentRemainingDuration,this.after(this.currentAction),this.currentAction=null,this.currentRemainingDuration=0,this.modificationTimeEmitter.emit()):(this.currentRemainingDuration-=e,e=0,this.ratioEmitter.emit(oe.a.clamp((this.currentAction.duration-this.currentRemainingDuration)/this.currentAction.duration,0,1)));this.currentAction||this.modificationTimeEmitter.emit()}before(t){if(t===Xp.SWAP){const t=zp(rf.VALUES,this.currentSlice.type);this.nextSlice=new cf(t,this.currentSliceIndices[t])}t===Xp.SELECTION_LEFT&&this.currentSlice.type===rf.ROW&&(this.nextSlice=new cf(this.currentSlice.type,Qp.mod(this.currentSlice.index-1,Qp.HALF_ROWS))),t===Xp.SELECTION_RIGHT&&this.currentSlice.type===rf.ROW&&(this.nextSlice=new cf(this.currentSlice.type,Qp.mod(this.currentSlice.index+1,Qp.HALF_ROWS))),t===Xp.SELECTION_OUT&&this.currentSlice.type===rf.RING&&this.currentSlice.index+1<Qp.RINGS&&(this.nextSlice=new cf(this.currentSlice.type,this.currentSlice.index+1)),t===Xp.SELECTION_IN&&this.currentSlice.type===rf.RING&&this.currentSlice.index>0&&(this.nextSlice=new cf(this.currentSlice.type,this.currentSlice.index-1)),this.nextSlice&&(this.currentSliceIndices[this.nextSlice.type]=this.nextSlice.index),t===Xp.SHIFT_LEFT&&(this.currentSlice.type,rf.RING,this.currentMove=new af(this.currentSlice,-1)),t===Xp.SHIFT_RIGHT&&(this.currentSlice.type,rf.RING,this.currentMove=new af(this.currentSlice,1)),t===Xp.SHIFT_UP&&this.currentSlice.type===rf.ROW&&(this.currentMove=new af(this.currentSlice,this.currentSlice.index<Qp.HALF_ROWS/2?1:-1)),t===Xp.SHIFT_DOWN&&this.currentSlice.type===rf.ROW&&(this.currentMove=new af(this.currentSlice,this.currentSlice.index<Qp.HALF_ROWS/2?-1:1)),[Xp.SHIFT_LEFT,Xp.SHIFT_RIGHT,Xp.SHIFT_UP,Xp.SHIFT_DOWN].includes(t)&&this.currentMove&&(this.nextBoard=this.currentBoard.apply(this.currentMove)),this.beforeEmitter.emit(t)}after(t){[Xp.SWAP,Xp.SELECTION_LEFT,Xp.SELECTION_RIGHT,Xp.SELECTION_OUT,Xp.SELECTION_IN].includes(t)&&this.nextSlice&&(this.currentSlice=this.nextSlice,this.nextSlice=null),t===Xp.SELECT&&(this.savedBoard=this.currentBoard,this.selected=!0),[Xp.SHIFT_LEFT,Xp.SHIFT_RIGHT,Xp.SHIFT_UP,Xp.SHIFT_DOWN].includes(t)&&(this.nextBoard&&(this.currentBoard=this.nextBoard),this.currentMove=null,this.nextBoard=null),t===Xp.APPLY&&(this.savedBoard=null,this.selected=!1,this.appliedEmitter.emit()),t===Xp.CANCEL&&(this.savedBoard&&(this.currentBoard=this.savedBoard),this.savedBoard=null,this.selected=!1),this.afterEmitter.emit(t)}}jp.register("Ring",ff);var mf=ff;class gf extends mf{constructor(t){super(),this.specificationGenerator=t,this.puzzleMovesTakenProperty=new jt(0),this.specificationProperty=new Ot(t()),this.startingBoardProperty=new Jt([this.specificationProperty],t=>pf.generatePuzzle(t)),this.startingBoardProperty.link(t=>{this.changeToBoard(t)}),this.afterEmitter.addListener(t=>{t===Xp.SELECT&&(this.puzzleMovesTakenProperty.value+=1)})}after(t){t===Xp.RESET&&(this.selected=!1,this.savedBoard=null,this.resetPuzzle()),super.after(t)}nextPuzzle(){this.specificationProperty.value=this.specificationGenerator(),this.resetPuzzle()}resetPuzzle(){this.puzzleMovesTakenProperty.reset(),this.changeToBoard(this.startingBoardProperty.value)}}jp.register("PuzzleRing",gf);var yf=gf;function bf(t,e){this.initializeCanvasSelfDrawable(t,e),this.initializePaintableStateless(t,e)}we.register("CircleCanvasDrawable",bf),Object(z.a)(da,bf,{paintCanvas:function(t,e,i){const n=t.context;n.beginPath(),n.arc(0,0,e._radius,0,2*Math.PI,!1),n.closePath(),e.hasFill()&&(e.beforeCanvasFill(t),n.fill(),e.afterCanvasFill(t)),e.hasPaintableStroke()&&(e.beforeCanvasStroke(t),n.stroke(),e.afterCanvasStroke(t))},markDirtyRadius:function(){this.markPaintDirty()},dispose:function(){da.prototype.dispose.call(this),this.disposePaintableStateless()}}),Ea.mixInto(bf),$t.a.mixInto(bf);var vf=bf;const _f={mixInto:function(t){const e=t.prototype;e.initializeState=function(t,e){return this.paintDirty=!0,this.dirtyRadius=!0,this.initializePaintableState(t,e),this},e.disposeState=function(){this.disposePaintableState()},e.markPaintDirty=function(){this.paintDirty=!0,this.markDirty()},e.markDirtyRadius=function(){this.dirtyRadius=!0,this.markPaintDirty()},e.setToCleanState=function(){this.paintDirty=!1,this.dirtyRadius=!1},Oa.mixInto(t)}};we.register("CircleStatefulDrawable",_f);var Af=_f;function wf(t,e){if(this.initializeDOMSelfDrawable(t,e),this.initializeState(t,e),this.matrix=this.matrix||Ye.dirtyFromPool(),!this.fillElement||!this.strokeElement){const t=document.createElement("div");this.fillElement=t;const e=document.createElement("div");this.strokeElement=e,t.style.display="block",t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.pointerEvents="none",e.style.display="block",e.style.position="absolute",e.style.left="0",e.style.top="0",e.style.pointerEvents="none",t.appendChild(e)}this.domElement=this.fillElement,Ks.prepareForTransform(this.domElement,this.forceAcceleration)}we.register("CircleDOMDrawable",wf),Object(z.a)(Ia,wf,{updateDOM:function(){const t=this.node,e=this.fillElement,i=this.strokeElement;if(this.paintDirty&&(this.dirtyRadius&&(e.style.width=2*t._radius+"px",e.style.height=2*t._radius+"px",e.style[js.borderRadius]=t._radius+"px"),this.dirtyFill&&(e.style.backgroundColor=t.getCSSFill()),this.dirtyStroke&&(t.hasStroke()?i.style.borderStyle="solid":i.style.borderStyle="none"),t.hasStroke())){const e=!this.hadStroke;(e||this.dirtyLineWidth||this.dirtyRadius)&&(i.style.width=2*t._radius-t.getLineWidth()+"px",i.style.height=2*t._radius-t.getLineWidth()+"px",i.style[js.borderRadius]=t._radius+t.getLineWidth()/2+"px"),(e||this.dirtyLineWidth)&&(i.style.left=-t.getLineWidth()/2+"px",i.style.top=-t.getLineWidth()/2+"px",i.style.borderWidth=t.getLineWidth()+"px"),(e||this.dirtyStroke)&&(i.style.borderColor=t.getSimpleCSSStroke())}if(this.transformDirty||this.dirtyRadius){this.matrix.set(this.getTransformMatrix());const e=Ye.translation(-t._radius,-t._radius);this.matrix.multiplyMatrix(e),e.freeToPool(),Ks.applyPreparedTransform(this.matrix,this.fillElement,this.forceAcceleration)}this.setToCleanState(),this.cleanPaintableState(),this.transformDirty=!1},dispose:function(){this.disposeState(),Ia.prototype.dispose.call(this)}}),Af.mixInto(wf),$t.a.mixInto(wf);var xf=wf;function Sf(t,e){this.initializeSVGSelfDrawable(t,e,!0,!0),this.svgElement=this.svgElement||document.createElementNS(mr,"circle")}we.register("CircleSVGDrawable",Sf),Object(z.a)(ja,Sf,{updateSVGSelf:function(){const t=this.svgElement;this.dirtyRadius&&t.setAttribute("r",this.node._radius),this.updateFillStrokeStyle(t)}}),Af.mixInto(Sf),$t.a.mixInto(Sf);var Tf=Sf;function Df(t,e){this._radius=0,e="object"==typeof t?t:la({radius:t},e),Rl.call(this,null,e)}we.register("Circle",Df),Object(z.a)(Rl,Df,{_mutatorKeys:["radius"].concat(Rl.prototype._mutatorKeys),drawableMarkFlags:Rl.prototype.drawableMarkFlags.concat(["radius"]).filter((function(t){return"shape"!==t})),getStrokeRendererBitmask:function(){let t=Rl.prototype.getStrokeRendererBitmask.call(this);return this.hasStroke()&&!this.getStroke().isGradient&&!this.getStroke().isPattern&&this.getLineWidth()<=this.getRadius()&&(t|=An.bitmaskDOM),t},getPathRendererBitmask:function(){return An.bitmaskCanvas|An.bitmaskSVG|(js.borderRadius?An.bitmaskDOM:0)},invalidateCircle:function(){this._shape=null,this.invalidatePath()},createCircleShape:function(){return cn.circle(0,0,this._radius).makeImmutable()},intersectsBoundsSelf:function(t){let e=Math.abs(t.centerX),i=Math.abs(t.centerY);const n=t.maxX-e,s=t.maxY-i;return!(e>n+this._radius||i>s+this._radius)&&(e<=n||i<=s||(e-=n,i-=s,e*e+i*i<=this._radius*this._radius))},canvasPaintSelf:function(t,e){vf.prototype.paintCanvas(t,this,e)},createDOMDrawable:function(t,e){return xf.createFromPool(t,e)},createSVGDrawable:function(t,e){return Tf.createFromPool(t,e)},createCanvasDrawable:function(t,e){return vf.createFromPool(t,e)},setRadius:function(t){if(this._radius!==t){this._radius=t,this.invalidateCircle();const e=this._drawables.length;for(let t=0;t<e;t++)this._drawables[t].markDirtyRadius()}return this},set radius(t){return this.setRadius(t)},getRadius:function(){return this._radius},get radius(){return this.getRadius()},computeShapeBounds:function(){let t=new ne(-this._radius,-this._radius,this._radius,this._radius);return this._stroke&&(t=t.dilated(this.getLineWidth()/2)),t},containsPointSelf:function(t){const e=t.x*t.x+t.y*t.y;let i,n=!0;if(this._strokePickable){i=this.getLineWidth()/2;const t=this._radius+i;n=n&&e<=t*t}if(this._fillPickable)return this._strokePickable?n:e<=this._radius*this._radius;if(this._strokePickable){const t=this._radius-i;return n&&e>=t*t}return!1},setShape:function(t){if(null!==t)throw new Error("Cannot set the shape of a Circle to something non-null");this.invalidatePath()},getShape:function(){return this._shape||(this._shape=this.createCircleShape()),this._shape},hasShape:function(){return!0}});var Ef=Df;const Cf={CLICK:new Howl({src:["../audio/click_04.mp3"],volume:.2}),CHIME:new Howl({src:["../audio/chime_bell_ding.mp3"],volume:.2}),MARIMBA:new Howl({src:["../audio/music_marimba_chord.mp3"],volume:.2}),PLINK:new Howl({src:["../audio/digi_plink.mp3"],volume:.2}),DRIP:new Howl({src:["../audio/pop_drip.mp3"],volume:.2}),BEEP_ON:new Howl({src:["../audio/beep_short_on.mp3"],volume:.4}),BEEP_OFF:new Howl({src:["../audio/beep_short_off.mp3"],volume:.4}),ZIPPER:new Howl({src:["../audio/tap-zipper.mp3"],volume:.4}),ARRRR:new Howl({src:["../audio/ta-snes_gargantua_blargg.wav"],volume:.4}),BACKGROUND:new Howl({src:["../audio/music-breeze-stage.mp3"],volume:.3,loop:!0}),BACKGROUND_CRITICAL:new Howl({src:["../audio/music-breeze-stage-critical.mp3"],volume:0,loop:!0}),setCritical(t){const e=t?.3:0,i=t?0:.3;Cf.BACKGROUND.fade(e,i,1e3),Cf.BACKGROUND_CRITICAL.fade(i,e,1e3)}};jp.register("RingAudio",Cf);var Pf=Cf;function kf(t){const e=this;t=Object(s.a)({outerRadius:15,innerRadius:7.5,numberStarPoints:5},t),cn.call(this);const i=2*t.numberStarPoints;_.times(i,(function(n){const s=n/i*Math.PI*2-Math.PI/2,r=n%2==0?t.outerRadius:t.innerRadius;e.lineTo(r*Math.cos(s),r*Math.sin(s))})),this.close(),this.makeImmutable()}Rd.register("StarShape",kf),Object(z.a)(cn,kf);var If=kf;const Lf=(new cn).moveTo(0,0).lineTo(-5,-5).cubicCurveTo(-10,-10,-2,-14,0,-8).cubicCurveTo(2,-14,10,-10,5,-5).close().transformed(Ye.affine(1.6,0,0,0,1.6,10)),Of=new If({outerRadius:12,innerRadius:6}),Rf=cn.rect(-7,-7,14,14).transformed(Ye.rotation2(Math.PI/4)),Nf=(new cn).moveTo(0,10).lineTo(-9,-8).lineTo(9,-8).close(),Mf=Nf.transformed(Ye.rotation2(Math.PI)),Bf={[Jp.NONE]:new Wo,[Jp.HEART]:new Rl(Lf,{fill:Qp.HEART_FOREGROUND,stroke:"black"}),[Jp.STAR]:new Rl(Of,{fill:Qp.STAR_FOREGROUND,stroke:"black"}),[Jp.DIAMOND]:new Rl(Rf,{fill:Qp.DIAMOND_FOREGROUND,stroke:"black"}),[Jp.DOWN_TRIANGLE]:new Rl(Nf,{fill:Qp.DOWN_TRIANGLE_FOREGROUND,stroke:"black"}),[Jp.UP_TRIANGLE]:new Rl(Mf,{fill:Qp.UP_TRIANGLE_FOREGROUND,stroke:"black"}),[Jp.CIRCLE]:new Ef(12,{fill:Qp.CIRCLE_FOREGROUND,stroke:"black"})};class Ff extends Wo{constructor(t,e,i){super(),this.positionProperty=new Ot(new te.a(t,e)),this.contentProperty=new Ot(i),this.mainContainer=new Wo,this.oppositeContainer=new Wo,this.children=[this.mainContainer,this.oppositeContainer],Ot.multilink([this.positionProperty,this.contentProperty],(t,e)=>{if(e!==Jp.NONE){this.mainContainer.translation=Qp.rowRingToPlanar(t.x,t.y);const e=t.y<0||t.y>Qp.RINGS-1;this.oppositeContainer.visible=e,e&&(this.oppositeContainer.translation=Qp.rowRingToPlanar(t.x+Qp.HALF_ROWS,t.y<0?-1-t.y:2*Qp.RINGS-t.y-1))}}),this.contentProperty.link(t=>{const e=Ff.getIcon(t);this.mainContainer.children=[e],this.oppositeContainer.children=[e]})}static getIcon(t){return Bf[t]}}jp.register("RingContentNode",Ff);var Vf=Ff;function qf(){}new r.a("twixt").register("Easing",qf),Object(z.a)(Object,qf,{value:function(t){throw new Error("Unimplemented easing value")},derivative:function(t){throw new Error("Unimplemented easing derivative")},secondDerivative:function(t){throw new Error("Unimplemented easing secondDerivative")}}),qf.polynomialEaseInValue=function(t,e){return Math.pow(e,t)},qf.polynomialEaseOutValue=function(t,e){return 1-Math.pow(1-e,t)},qf.polynomialEaseInOutValue=function(t,e){return e<=.5?.5*Math.pow(2*e,t):1-qf.polynomialEaseInOutValue(t,1-e)},qf.polynomialEaseInDerivative=function(t,e){return t*Math.pow(e,t-1)},qf.polynomialEaseOutDerivative=function(t,e){return t*Math.pow(1-e,t-1)},qf.polynomialEaseInOutDerivative=function(t,e){return e<=.5?Math.pow(2,t-1)*t*Math.pow(e,t-1):qf.polynomialEaseInOutDerivative(t,1-e)},qf.polynomialEaseInSecondDerivative=function(t,e){return(t-1)*t*Math.pow(e,t-2)},qf.polynomialEaseOutSecondDerivative=function(t,e){return-(t-1)*t*Math.pow(1-e,t-2)},qf.polynomialEaseInOutSecondDerivative=function(t,e){return e<=.5?Math.pow(2,t-1)*(t-1)*t*Math.pow(e,t-2):-qf.polynomialEaseInOutSecondDerivative(t,1-e)},qf.polynomialEaseIn=function(t){const e=new qf;return e.value=qf.polynomialEaseInValue.bind(e,t),e.derivative=qf.polynomialEaseInDerivative.bind(e,t),e.secondDerivative=qf.polynomialEaseInSecondDerivative.bind(e,t),e},qf.polynomialEaseOut=function(t){const e=new qf;return e.value=qf.polynomialEaseOutValue.bind(e,t),e.derivative=qf.polynomialEaseOutDerivative.bind(e,t),e.secondDerivative=qf.polynomialEaseOutSecondDerivative.bind(e,t),e},qf.polynomialEaseInOut=function(t){const e=new qf;return e.value=qf.polynomialEaseInOutValue.bind(e,t),e.derivative=qf.polynomialEaseInOutDerivative.bind(e,t),e.secondDerivative=qf.polynomialEaseInOutSecondDerivative.bind(e,t),e},qf.LINEAR=qf.polynomialEaseIn(1),qf.QUADRATIC_IN=qf.polynomialEaseIn(2),qf.QUADRATIC_OUT=qf.polynomialEaseOut(2),qf.QUADRATIC_IN_OUT=qf.polynomialEaseInOut(2),qf.CUBIC_IN=qf.polynomialEaseIn(3),qf.CUBIC_OUT=qf.polynomialEaseOut(3),qf.CUBIC_IN_OUT=qf.polynomialEaseInOut(3),qf.QUARTIC_IN=qf.polynomialEaseIn(4),qf.QUARTIC_OUT=qf.polynomialEaseOut(4),qf.QUARTIC_IN_OUT=qf.polynomialEaseInOut(4),qf.QUINTIC_IN=qf.polynomialEaseIn(5),qf.QUINTIC_OUT=qf.polynomialEaseOut(5),qf.QUINTIC_IN_OUT=qf.polynomialEaseInOut(5);var Hf=qf;const Yf={[Jp.HEART]:Qp.HEART_BACKGROUND,[Jp.STAR]:Qp.STAR_BACKGROUND,[Jp.DIAMOND]:Qp.DIAMOND_BACKGROUND,[Jp.DOWN_TRIANGLE]:Qp.DOWN_TRIANGLE_BACKGROUND,[Jp.UP_TRIANGLE]:Qp.UP_TRIANGLE_BACKGROUND,[Jp.CIRCLE]:Qp.CIRCLE_BACKGROUND};class jf extends Wo{constructor(t,e,i,n){super(),this.positionProperty=new Ot(new te.a(t,e)),this.contentProperty=new Ot(i),this.backgroundColorProperty=new Ot(n),this.flashRatioProperty=new jt(1),this.flashColor=ba.WHITE,this.backgroundPath=new Rl(null,{stroke:"black",fill:new Jt([this.contentProperty,this.backgroundColorProperty,this.flashRatioProperty],(t,e,i)=>{let n=Yf[t]||e;return i<1&&(n=this.flashColor.blend(n,Hf.QUADRATIC_OUT.value(i))),n})}),this.addChild(this.backgroundPath),this.positionProperty.link(t=>{this.backgroundPath.shape=jf.drawWrappedPolarRect(new cn,t.x-.5,t.x+.5,t.y-.5,t.y+.5)})}flash(t){this.flashColor=t,this.flashRatioProperty.value=0}step(t){this.flashRatioProperty.value=Math.min(1,this.flashRatioProperty.value+t/.2)}static drawWrappedPolarRect(t,e,i,n,s){const r=Math.max(n,Qp.MIN_RINGY),o=Math.min(s,Qp.MAX_RINGY);return jf.drawPolarRect(t,e,i,r,o),n<Qp.MIN_RINGY&&(t.newSubpath(),jf.drawPolarRect(t,e+Qp.HALF_ROWS,i+Qp.HALF_ROWS,Qp.MIN_RINGY,2*Qp.MIN_RINGY-n)),s>Qp.MAX_RINGY&&(t.newSubpath(),jf.drawPolarRect(t,e+Qp.HALF_ROWS,i+Qp.HALF_ROWS,2*Qp.MAX_RINGY-s,Qp.MAX_RINGY)),t}static drawPolarRect(t,e,i,n,s,r=0){const o=Qp.ringToRadius(n)-r,a=Qp.ringToRadius(s)+r,l=Qp.rowToTheta(e),h=Qp.rowToTheta(i),u=r/o,c=r/a;return t.arc(0,0,o,l-u,h+u,!1),t.arc(0,0,a,h+c,l-c,!0),t.close(),t}}jp.register("RingPieceNode",jf);var Gf=jf;const zf=new ba(16441600,.3),Wf=new ba(16441600,1),Uf=new ba(0,.1),Xf=new ba(0,.3);class Kf extends Wo{constructor(t,e){super(),e=Object(s.a)({preventFit:!0},e),this.addChild(new Ef(Qp.OUTER_RADIUS+50,{fill:"#333",stroke:"black"})),this.localBounds=this.localBounds,this.addChild(new Ef(Qp.INNER_RADIUS,{fill:"#ddd"})),this.addChild(new Ef(Qp.INNER_RADIUS-5,{fill:"#333",stroke:"black"})),this.addChild(new Al("Hey you <3",{center:te.a.ZERO,fill:"#eee",font:new tl({size:50,family:"Brush Script MT, cursive"}),maxWidth:100}));let i=t.currentBoard.pieces.map(t=>new Gf(t.row,t.ring,t.content,t.backgroundColor));i.forEach(t=>this.addChild(t));const n=Gf.drawPolarRect(Gf.drawPolarRect(new cn,-.5,.5,-.5,Qp.RINGS-.5,-2).newSubpath(),-.5+Qp.HALF_ROWS,.5+Qp.HALF_ROWS,-.5,Qp.RINGS-.5,-2),r=new Rl(n),o=new Rl(n,{lineWidth:4}),a=new Rl(null),l=new Rl(null,{lineWidth:4}),h=new Wo;this.addChild(h);const u=new Wo;this.addChild(u),u.clipArea=(new cn).arc(0,0,Qp.OUTER_RADIUS-1,0,2*Math.PI,!1).close().newSubpath().arc(0,0,Qp.INNER_RADIUS+1,2*Math.PI,0,!0).close();const c=new Wo;this.addChild(c);let d=t.currentBoard.pieces.map(t=>new Vf(t.row,t.ring,t.content));d.forEach(t=>u.addChild(t));let p=null,f=null;const m=e=>{const i=t.currentSlice.type;r.fill=i===rf.ROW?zf:Uf,a.fill=i===rf.RING?zf:Uf,o.stroke=i===rf.ROW?Wf:Xf,l.stroke=i===rf.RING?Wf:Xf,h.children=i===rf.ROW?[a,l,r]:[r,o,a],c.children=i===rf.ROW?[o]:[l],(i===rf.ROW?r:a).moveToFront();const n=t.currentSlice.index,s=t.nextSlice?t.nextSlice.index:n,u=(1-e)*n+e*(Math.abs(n-s)>1?s<n?n+1:n-1:s);if(t.currentSlice.type===rf.ROW)r.rotation=u*Qp.PIECE_ANGLE,o.rotation=u*Qp.PIECE_ANGLE;else{const t=Qp.ringToRadius(u-.5)+2,e=Qp.ringToRadius(u+.5)-2,i=(new cn).arc(0,0,e,0,2*Math.PI,!1).close().newSubpath().arc(0,0,t,2*Math.PI,0,!0).close();a.shape=i,l.shape=i}};m(1);t.beforeEmitter.addListener(e=>{[Xp.SHIFT_LEFT,Xp.SHIFT_RIGHT,Xp.SHIFT_UP,Xp.SHIFT_DOWN].includes(e)&&(p=t.currentMove,p&&(f=_.flatten(_.range(0,Qp.RINGS).map(t=>_.range(0,Qp.ROWS).map(e=>p.getDelta(e,t))))),Pf.PLINK.play()),[Xp.SELECTION_LEFT,Xp.SELECTION_RIGHT,Xp.SELECTION_OUT,Xp.SELECTION_IN].includes(e)&&Pf.CLICK.play(),e===Xp.SWAP&&Pf.DRIP.play(),e===Xp.RESET&&Pf.BEEP_ON.play()}),t.afterEmitter.addListener(e=>{[Xp.SHIFT_LEFT,Xp.SHIFT_RIGHT,Xp.SHIFT_UP,Xp.SHIFT_DOWN].includes(e)&&(p&&(i=pf.moveMap(i,p,(t,e,i)=>(t.positionProperty.value=new te.a(e,i),t)),d=pf.moveMap(d,p,(t,e,i)=>(t.positionProperty.value=new te.a(e,i),t))),p=null,f=null),[Xp.SELECTION_LEFT,Xp.SELECTION_RIGHT,Xp.SELECTION_OUT,Xp.SELECTION_IN,Xp.SWAP].includes(t.currentAction)&&m(1)}),t.ratioEmitter.addListener(e=>{if(f){const n=t.currentBoard;_.range(0,Qp.RINGS*Qp.ROWS).forEach(t=>{const s=f[t];if(s.x||s.y){const r=n.pieces[t],o=r.row+s.x*e,a=r.ring+s.y*e,l=new te.a(o,a);i[t].positionProperty.value=l,d[t].positionProperty.value=l}})}[Xp.SELECTION_LEFT,Xp.SELECTION_RIGHT,Xp.SELECTION_OUT,Xp.SELECTION_IN].includes(t.currentAction)&&m(e)}),t.appliedEmitter.addListener(()=>{}),t.contentChangedEmitter.addListener((t,e)=>{e.forEach(e=>{const n=pf.getIndex(e.row,e.ring);i[n].contentProperty.value=t,d[n].contentProperty.value=t})}),t.flashEmitter.addListener((t,e)=>{e.forEach(e=>{const n=pf.getIndex(e.row,e.ring);i[n].flash(t)})}),this.mutate(e),this.step=t=>{i.forEach(e=>e.step(t))}}static getResizeHandler(t,e){let i=!0;const n=()=>{i=!0};return $(window).resize(n),window.addEventListener("resize",n),window.addEventListener("orientationchange",n),window.visualViewport&&window.visualViewport.addEventListener("resize",n),()=>{i&&(i=!1,t.width=window.innerWidth,t.height=window.innerHeight,e.maxWidth=window.innerWidth-20,e.maxHeight=window.innerHeight-20,e.centerX=window.innerWidth/2,e.centerY=window.innerHeight/2)}}static setupDisplay(t,e){const i=new Wo({children:[t]}),n=new pu(i,{width:1024,height:1024,backgroundColor:new ba("#666"),passiveEvents:!0,allowSceneOverflow:!1,assumeFullWindow:!0,accessibility:!1});document.body.appendChild(n.domElement);const s=Kf.getResizeHandler(n,t);n.updateDisplay(),n.initializeEvents(),n.updateOnRequestAnimationFrame(t=>{s(),e(t)})}}jp.register("RingNode",Kf);var Qf=Kf;class Zf extends Qf{constructor(t,e){super(t,e=Object(s.a)({remainingCountSide:"right"},e));const i=new Jt([t.puzzleMovesTakenProperty,t.specificationProperty],(t,e)=>e.sliceCount-t),n=new Al("",{font:new kp({size:23})}),r=new Ef(25,{stroke:"black",lineWidth:2,fill:"#eee",[e.remainingCountSide]:this.localBounds[e.remainingCountSide],top:this.localBounds.top});i.link(t=>{n.text=t>=0?t:":/",n.center=r.center}),this.addChild(r),this.addChild(n)}}jp.register("PuzzleRingNode",Zf);var Jf=Zf;const $f=87,tm=65,em=83,im=68,nm=81,sm=69,rm=32,om=37,am=38,lm=39,hm=40,um=13,cm=191;class dm{constructor(t,e){this.ringProperty=t,this.callback=e,this.listener=t=>{40!==t.keyCode&&38!==t.keyCode&&32!==t.keyCode||t.preventDefault(),e(t,this.ringProperty.value)},this.inApplyMode=!1,this.isRingType=!0}start(){return document.addEventListener("keydown",this.listener),this}stop(){return document.removeEventListener("keydown",this.listener),this}}dm.LEFT_KEYMAP={LEFT:tm,RIGHT:im,UP:$f,DOWN:em,SWAP:rm,RESET:nm},dm.RIGHT_KEYMAP={LEFT:om,RIGHT:lm,UP:am,DOWN:hm,SWAP:um,RESET:cm},dm.getPuzzleStyle=t=>{let e=!1;return new dm(t,(t,i)=>{t.keyCode===rm&&(e?(e=!1,i.appendAction(Xp.APPLY)):(e=!0,i.appendAction(Xp.SELECT))),t.keyCode===$f&&i.appendAction(e?Xp.SHIFT_UP:Xp.SELECTION_OUT),t.keyCode===em&&i.appendAction(e?Xp.SHIFT_DOWN:Xp.SELECTION_IN),t.keyCode===tm&&i.appendAction(e?Xp.SHIFT_LEFT:Xp.SELECTION_LEFT),t.keyCode===im&&i.appendAction(e?Xp.SHIFT_RIGHT:Xp.SELECTION_RIGHT),t.keyCode===nm&&(e||i.appendAction(Xp.SWAP)),t.keyCode===sm&&e&&(i.appendAction(Xp.CANCEL),e=!1)})},dm.getQuickStyle=(t,e)=>{const i=new dm(t,(t,n)=>{const s=()=>{i.inApplyMode&&(n.appendAction(Xp.APPLY),i.inApplyMode=!1)},r=()=>{i.inApplyMode||(n.appendAction(Xp.SELECT),i.inApplyMode=!0)};t.keyCode===e.SWAP&&(i.inApplyMode&&(n.appendAction(Xp.APPLY),i.inApplyMode=!1),n.appendAction(Xp.SWAP),i.isRingType=!i.isRingType),t.keyCode!==e.UP&&t.keyCode!==e.DOWN||(i.isRingType?(s(),n.appendAction(t.keyCode===e.UP?Xp.SELECTION_OUT:Xp.SELECTION_IN)):(r(),n.appendAction(t.keyCode===e.UP?Xp.SHIFT_UP:Xp.SHIFT_DOWN))),t.keyCode!==e.LEFT&&t.keyCode!==e.RIGHT||(i.isRingType?(r(),n.appendAction(t.keyCode===e.LEFT?Xp.SHIFT_LEFT:Xp.SHIFT_RIGHT)):(s(),n.appendAction(t.keyCode===e.LEFT?Xp.SELECTION_LEFT:Xp.SELECTION_RIGHT))),t.keyCode===e.RESET&&(i.inApplyMode=!1,n.appendAction(Xp.RESET))});return i},jp.register("RingController",dm);var pm=dm;class fm{constructor(t,e,i){this.jumpContents=t,this.hammerContents=e,this.sliceTypes=i,this.matchCount=t.length+e.length,this.sliceCount=i.length}static fromParameters(t,e,i){e=Math.min(t-1,e);let n=[Jp.HEART,Jp.STAR,Jp.DIAMOND,Jp.DOWN_TRIANGLE,Jp.UP_TRIANGLE,Jp.CIRCLE];n=_.shuffle(n).slice(0,t-e);let s=n.slice();for(;s.length<t;)s.push(_.sample(n));s=_.shuffle(s);const r=_.sample(_.range(0,s.length+1));return new fm(s.slice(0,r),s.slice(r),_.range(0,i).map(()=>_.sample(rf.VALUES)))}}jp.register("RingPuzzleSpecification",fm);var mm=fm;Pf.BACKGROUND.play();const gm=new jt(2,{range:new n.a(1,6)}),ym=new jt(0,{range:new n.a(0,3)}),bm=new jt(2,{range:new n.a(1,6)}),vm=new yf(()=>mm.fromParameters(gm.value,ym.value,bm.value)),_m=pm.getQuickStyle(new Ot(vm),pm.LEFT_KEYMAP).start(),Am=new Jf(vm,{top:10});gm.lazyLink(()=>vm.nextPuzzle()),ym.lazyLink(()=>vm.nextPuzzle()),bm.lazyLink(()=>vm.nextPuzzle()),vm.afterEmitter.addListener(()=>{vm.currentBoard.getMatches().length===vm.specificationProperty.value.matchCount&&vm.puzzleMovesTakenProperty.value<=vm.specificationProperty.value.sliceCount&&(vm.nextPuzzle(),_m.inApplyMode=!1,Pf.MARIMBA.play())}),Qf.setupDisplay(new xl({spacing:15,children:[Am,new Yp(new xl({spacing:5,children:[new Vp("Groups",gm,gm.range,{}),new Vp("Slices",bm,bm.range,{}),new Vp("Duplicates",ym,ym.range,{})]}),{xMargin:10,yMargin:10})]}),t=>{vm.step(t),Am.step(t)})},function(t,e,i){"use strict";i.r(e);var n=new(i(8).a)("brand"),s=i(15);const r=new Image,o=s.a.createLock(r);r.onload=o,r.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMoAAABgCAYAAABc4u0gAAAAAXNSR0IArs4c6QAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAActpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgSW1hZ2VSZWFkeTwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KKS7NPQAADJRJREFUeAHtW716G8cVlWwV6QJ36Tzp3GnzBBo/gekylVZlKlFPwNETUC5TAezSEe6SalddOkKdO6w6pxLSJZVyDrJX33A8Cyyw/4t7v+9w7sz9m3sWlwBJ6ckTFWVAGVAGlAFlQBlQBpQBZUAZUAbGw8DTHq/iylo5VmJoWeACu54u4co6OVairiRwvAEMwPsWwBtgA6jMlIHP6ItwA/fHF9yy53uc0zuHROL8lfdX6ZmBZz3XG0O5e1zCAm/HcJkDd3jp2dbQP5T7nXeuak8MXOKg9ERt4zJ8R6EUwI9UVIZj4KvhSmvlmgwUNf3UrUMGqgbFoKYDMmAL8DPyA8CPLSlQJfz8fAswTmIcdJ4fEgPjNcC4LSCxVfUMfFwJLF/uKnFLnMl3ZNopFnCAASgvAAekQCgpDlh7CzBnBrAvA1QJe3QAfRnzADDmWO9weSQpdg4wAMUArgR1wpVg7iXwCWA9B/hisaHdv9M99jyPSYpDB1jAAIxlXuZnjhQQsVCYa1viUF64zE9StERiPh8ACQyFL8yquAfYJJ8LAlPsq+IkJgtiLPZiu/d0OZM1hU3EQZFzf83EAStfeNz7dl/nPa+AUA71voWz5HBhYGSfef4SJ6uFjZB96Mv7idxCEb/YSt7Yry+SjytzxeKYN62w0T/GD47nJQbtCEFcU8CWuMYqtpAQEu7bXBlD0h4An3DaRAwUiePKGrZEilVsYT36+Dm32LOWAVLAj7PYUwxggQeAsUvAAgkgkkGhjbgHmNMCvJfk5GoAkQWULSBxDroFGJsBcs7VAcckgYMF5J5cuSdYi6ufk/dhnS1wC1AcID48TwEL8E6Sl/Yl4EuGDc8FtFsgBVhHzrlyfw1YgHXFtoU+e3HoUBq2kW55Jnbn2UmYnKfeuaiZZ3dyiNWPs965qAkUyevkEKsF5JwPbAH4wjh5sPe+AbrcxQXnKfaScxnYuK3KmcImcdd0DIT1xe4C26FtVsZx9cViI/livZML6X0LnftQJDfzsC8R/zzsJYUT/Qnm9+Ow3Q+d2LmftaTozgG3QJUIGc5zeIDOc64xIamxuBTnDji1nkWM5AsfKEx7YU7xWZRnXLLy3HHjyT10+n8CfH/P5dF3TjmXfFs5CFaDPfMSDqgrkperLxYbyRfjLfXsV9BjYnAYyyE1t5EgciIxy4idtcRuI/ZJHz0Lbr8K9tyaEgnWF0BMaKPk+6+//bLB0Q5YBKZVsOfWlGDO58AxySsc3uP8urQxV17qVQt9KAUgOve+/NvbWOg5wJWS77/+9kuBI8IAbQt7DMV4B2tP99UCmw3APmO90h7Kzjv46Omi+nY5m80aDgobWwDXwA9AApwi/gspjNvgwIaH2Depx3TMG5Nd7PDAmSltCdbsgF+VKfbiEd8CipFNi2usR/lmFrP5pY/Zfd+L18NBMWDkAVgEzBTYbwB+B4u93eP4LDGI4ouSqy8FNl3U82tU6axNHBN9oR1jaEb2cFA4BDIkK+h3QA74cmhQfu87BroJ9twyl6ECWQGn1mMc7xt70Uof9KkjzMGYDXDOX8K/PVDk1LscSHXU9B4eFjhW85j9aKFLcvgqaPaq3OdYXwFcfTH+xtM3pW69M1812BChnFvPzyM5/DPq8hGEes4vR+RYDwxnLb4DOsAAlHz/Nf6xkqYFkJQ+fSyFV4T3jYnBodxpE3PQs8cMhIMi1kKUYK16N7kr/Uh+GsRwexM58492/sbTq+p5Lk9eY7PwD6D791gHNtk+F6VcpQfmcoGNW57zPhZgzR1AkTgD/ZoHgRzrPXBvvM29DKzNe4fCPkR+FkXX+gxs4fq5hP/QE5xlno0+S0CED2ML8JxwAM8McA/IudhwtJcHfBVbWC+M417EQpE4rszDO1JS4BMgdjnH0V4yfKWNPg6QugvoW0DiWE9ir6CzhtgcdF/8OAeDKXGLVWK4OqCuZHBkDFdfLDY8J6jHxK/Le/P+FPZzD0h8mJt72sJzHO2FNsLtd4+/WGzFTn3WQkKl2dhK0relD3Vf+BA+AbE4nkucgy5Spx7rMCfjRSwUqVNVk/YUCMXhQGJlFR/2sI3YxY/rUpy99ZzevfComuGU9bj6YrHhOUG9SpYwiF9sJa+LIDgrY7jGRPK4iNHiTOzUZyVfB938gv17gAR+59ly6G+BvwAfgT8A/wHouwMovwJ/BWgzwO8Ayhp4BXAvMRvolF8A5jhU71+wMyfrSD0DPQUofwaY1wCsQb+/Aaz5dyAU1qaf4J/QJe+v0O+A/wK8E+uK5FDelpAzWRknvTOOoKwB3oO1eEfW2QB1JIETY+j/Dy9gAf07oAD4sYm1Y0Lbx9JAf5EcCvvgs2R+X6pqio+FUgCxPureC+EqfTFgUWi23736IlHr1Geg6of5+hnUUxm4AAZ0UC7gIWuLzRnQQWnOoWa4AAaeTbTHHe6dl3enrqIMKAPKgDKgDCgDyoAyoAwoA/Ng4KnXBv8u0bdsUJA/Y3D9AORAAbQhbfXjc9TGvc7NYRGYnRuscWczsH/+Q/8wn5TXt14bBfQ7YAUUgIoyMDgDY/z1sAErN8AWWAIGUFEGBmVgjIPiE5Jiw4G5BRaAijIwCANjHxQh5RoK/7WrfFSTc12VgV4YmMqgkAwDZEAKqCgDvTIwpUEhMfz4xZ9bUkBFGeiNgakNihDDYbGy0VUZ6JqBqQ4KebkHDBUVZaBrBqY8KPIxrGuONL8y8GTKg8LHZ4ErKirKQJcMTH1QyA3/xqKiDHTKwBwGxYAhfVfp9GWiyecwKHyKL/VRKgNdMtDmP4pc4aL8x4zHxMDhOcB3AeptCHMtgF0byWac4w1620yoP36sThrcl72y58bS5qB8xG3yE27EBq6BG2BxQlyVq4VhXWVs8Zx3TQBTAssj2WG3KUF9TMJ75WO60JG7NOWP8a302+agHOk5an5XNpJhXUQ96h8mcF3Xd6/tyXtdAS8ACxigrhRw5J3ugA2gMgMGPqOHJnANOLhuWJv3zoL6TXrpIvYB90uDO56ytXBuei/mmJLwmTbpmfGtyFh+mH+HbnatdDTeJAmutgT48KirTIiBsQwKKcsb8mYbxvcVznvy3cUBKhNhYEyDwv8zf0lyg2bvgcUlNT3VXsc0KN9OlcQG975CLD+K6bA0ILGP0DENim3Y8KZh/FDhCQovhyqudesxMJZBsbiuqXflSq9dpWX8hitc0Y3/mpd7w6H/jkLmF0Ab31E3E3+MN7j/CiiAruQlEtuukiNvXqLDEsOkHnpQErTNITEttD+HXwZwWF61wEVVirTK0OJ53mKu0aQa4qOXQff8qMEB4a9JOSxtSN5GkoFzpKhvBr6Dlo8w0Oag8Lvh5xrYwoe/Fk2BtoQfu4q2kg2c5/XA9bV8hIE2ByWSvrejn3qr1H0hvtuqjIyBOQzKDpyuR8Zrk+sYBCdNEmhs+wzMYVD4bsJhmZPooIzsaU59UArw6QbitMvhfD5QT1q2goGpD8qPFX11dbxGYtZ8CnxTrn/E+hZoc3D0HQWEjkmmPCivQOSmJzI5BBwQYh3ULLB3AAemrfsskEtlRAxMdVBW4JDoS2IDEtbmMH0PtDEsSZhc98MyMMVBWYEyvpv0Je9QKK9ZjMPS591qXkvdmjIwtUHhi7DvF+JPJ5LMd5T1iTHqPnIGpjIofPH9CVj1zCfrFmfU/PmMGA0ZMQND/6PIY9QUcHgLrIAhpDiz6LlxZ5arHcbB39X2Pt2xOD1kGhFjHZQ16ON35dXANHb5ojrWWgKHzTGnE+1v4J+fGKPuYGAsg8KHxxfFB2AN7IAxyMcBL7EYsLaWDhhoc1BWyH0X5D+2zY85qF0ZGAMDbQ4Kv/vmY2hK76AMtM3AVH7r1Xbfmk8ZOIkBHZST6FLnS2VAB+VSn7z2fRIDOign0aXOl8qADsqlPnnt+yQGdFBOokudL5WBNn89fKkcTqnvpOfL8g/Hm55rdlJOB6UTWkeb9Lbnm+Wo933PNTsppx+9OqFVk86NAR2UuT1R7acTBnRQOqFVk86NAR2UuT1R7acTBnRQOqFVk86NAf2t19yeqPZTxUBWYeB/ZuNvA/kfBd95PtfQfwD2v7XTQfGYUXXWDLwvu3uJtQBkv4BuAQP4g/K6PMMynv/huL+MflEGOmTAlblfYOWQyN5CpxggATaABQzwRfRnlC9UqHLhDKzRP99tKFw5MF9EB+ULFapcOAP8GeWq5IDrnc+HDorPhuqXzADfUQzggALQdxSQoKIMhAzscMBhuQEevZvQUd9RyIKKMvB/Bvjxi8KBUVEGlIFTGfgfGBahA+jRCVYAAAAASUVORK5CYII=";var a=r;const l=new Image,h=s.a.createLock(l);l.onload=h,l.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMoAAABgCAYAAABc4u0gAAAAAXNSR0IArs4c6QAAAAlwSFlzAAAXEgAAFxIBZ5/SUgAAActpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgSW1hZ2VSZWFkeTwveG1wOkNyZWF0b3JUb29sPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KKS7NPQAADTNJREFUeAHtXet528gOde53/1/dCpapIEoFYSpYpYLIFUSpwHQF9lYguQIrFZCpwEoFYiqwtoLsOcqAC45JPcw3BXwfjBnM4HVIkNQjytWVkSFgCBgChoAhYAgYAoaAIWAIGAL9QeBNW6n8+vUrcrGSN2/eJG3FLYuDfCbIY1e2Xqf+tbXDboo8bsABeAJOwV+R9wbSaIwI4KALRV3WhyQm4CW4tTwQS+jkmDCYipEn2TBGLSPw35bj9SHcI5IIwbd9SOZADp/V2hrjH5y3dRdUsW0IBC6xUYZy4Kcu0RTN8WkoSY81z/+MtbAR1ZWOqJbBllLYKHgmDsAROAZvwaQn8CN4XlYt1vj8fweOwSTa0M/B52qsM94CHIO3YFJpPKxJfhFzwZwxYjCJdkuwXJH36WIegrk/2Cuurj5wDp67eSaoAz+Ct2BSDL4DB9kmb4A11u7nQZuDtXturrCfsSPoA7cWOL/0zbGeM+YS/Ax+AtMuI8xD8BIcg0nc8wgOs01qAP0cHHEdHICXYNo8g2PwXLZjzD30tXVc6ldsRiVR9BxMYA7R0i8am6fgMrsn5SzSttCfEi/2bHiQhHiAymgudtgQlWzKfGOdJ15cso9q1jcTnyKhO1T7FutCkdiUSWyMZXOBZN26dn/vs/jFvrsCe60ibrkmxjx2GyhZaxHR77xowele4CM5jUai0AAsAFESEB4Y8gIsaxj+e8JgzBNMr0WY02YGfgJrigQwKAOw2FEyBu3Ic7CsYZiLx3VNW0wYKwD7diHjuTXaST5LjDmfqnxizIUeMaBP7mFekgtloGwmmG/BQhEGtKFtDNYUiV2ZxOYpmPaSJyXnZMai1MR8YvAWfEe/kBFYaIvBHEw75iR+MfyVu+BhHlOpaIkx7WjPOJo4X4C5fqcWtmW1jUaPYiNVcOgXhjWCIhTJOhQETGguepFYiGURMlJ6bReKXiT2BiV2Og8eMP/KOIVODizf5coI+hhMijIlBpjP99rff3InEPdBXejTs1ton87uUfmN/PWyOWxiZ5fd8Zy/Y7VPYCe1bzHOYeN8xNALlV0ocrVgs8aH/jM753MpDstqGrLef42Sohi+bXqPd1oSyBwV6dyGz05usGeVM/o9+Vqgo2oHPhQv5aYjdIuY9JMR5htMVk4xwwGcZIvlgz/dEn29yNf3qdxI7Xx36l7pZfjClyzUIFd+7fA5A0u9/HCS9fh0rRSSv1JdFdWyVhvWDg+luvomE+AdyngsMvf2MIpf+YWh6AA68hT8AVxEXCMl+7/eH4IKPzxgE710Qrx3en/JOCnRf4d+4daYX+LGZYJ7SCmYdw+OffpbFDwZkH+Ceeh0HL8g7EmxN8VC8GKxuoI1+hSIArHXMtbS5bSBjjVL3XpLqiccw2anMPnpr2O+K9CNRpVrFFYFMCYQCzCvsEUgQl1K2YlUsGMDXejrK8bjAaTfItoVKQ/oArfGmuMD+8qWik4e2ZtiEMikRllUo1zMitZ06GPreu/Fj3ONgpM2ACJP4ImHTIr5Bswr2B24FnLxeFIGnsMU89rjeTHKpoxNPkZ2oh1DaETruUZBXWwCaZIVxg+4YieQGeHkPtQo/8s2vhwEL1X7eKJfYf3cePs7IHIsOmmljoKwhSr6oA1fZ30q3HFY+ceB5XNzOeDq6BIvZiH4WMxj60cDXdIG/8X8zBWf4GS5BicaDHcH0CoZb9wgFIWWzi7QOjd+bTztSnxoHcfyCMLHs8RfLJgfrIH7UQffGIjBEThwPhInQydzAvsmUExzymYnqbhH7EJsXO6S00b2myxHwG8U2ZnKwJNld5MHt48vgueeDac3BTqt2umJGpfFU1uuvriTMdNhzpNg7hTrbCE/eJefXkkNE9hH3pq8dmM+IfgLWHIWuwB2C+h9Ola7v7/qPFEObpDTRM1lqHHN3q2SRZNHEACoW7BQdtChYAPEsuDkUtxhzpNr6/QUvOJSx5NHf46A6b8nIcZPVDjy4/l2jypeKEZO0s+U65Bz8LPTU+z1yjZ2a9wTgfdxIf0aGF98zjBmDKFI/FFCuZUFSPoMHN8pPYc5O+3DH2NvTANQrNcwD/fa339CvSZjLOm4zHvGNcgp+BEs5PuO3UJOr/yKXSQ6kVg4mpfsHbxEsTwhDhFB37oNT7pg6HgQnt2aL6jfOmUkdpifEo8xSVtlpw9KWUzazMVGJHQRFzSpNdaw1WsF46XsF4k9Z9cutmUSPmMXO3fSQqdrDw/YL519mSCuE22Peew252LKHrdGEYlOJHQn5SX7hyZzj154ll+jgI9gSk0JJnzN8h7yK5jzHcAJIPeEtQ0Gb8Er8A4spH0mUKaycGK8W+xPwKmOJz4gr8ErsMSk5Pw9/FP6dA8FeQPm3kT8uhpYI2NyXVOCyTX2MF6OnN1bKFfgFCy0xuAjmDIBp+BTifETsJ/Hzum5xnEhuTyZ69rbkGDOOoiPb7/BGtcpiyiBkpyCfaKvxLHv199r8zYQGPvVqw0MLcZ5COTuKOeZ2m5D4HIQsEa5nGNtlVZAwBqlAnhmejkI+J/MD6VyeeHIfO2F41COmuVpCBgChoAhYAgYAoaAIWAIHEfgjWzBZxO/ZNyi3CAWX2NQ/gDzy5gpZGWqqx7kk2FUOakKDvjZEcwLPzGv4NZMjyAgx7/rF/NTl2co+eKESDF+AK/qahrxbdIQeC0CfXx7OEAxN+AtmmYJ5tzIEOgUgT42igZkjgkb5g480Qs2NgTaRKDvjSJYLDDgt13lUU30Jg2BVhAYSqMQjAAco1nmkEaGQKsIDKlRCAwfv5bWLK2eIxYMCAytUeSgsVlCmZg0BJpGYKiNQlwe0SxB0wCZf0OACAy5UfaPYXYYDYE2EBhyoxAf/jvtWRtAWYzLRmDojcKjp39657KPplXfGAJjaJTA7iqNnR/m2CEwhkZhKZ/tiBoCTSJQ55ciV0iUX2Y8RgE2vAPztQXHdRB/H2yCL1Hu6nA2Yh/8qanNgOrjY/W0Qr6slTVXpjob5SdO1OSMjL7i5F5gP78AOTnDrmxriIV12WJdejYkfE3BgWOIHO0w25B72LjMKcll2+MJsCaWVWhXV711NsrZBaGIe4CRwJD/zmJytoO8wRTTdV5VfeYaYwZPH8AhOACfRLBNsZE5PaDWzUlGtqmXCHT+GsWdQLc1oMMTuQl6htMleA4OwOdQgM0LML/QSZ5jbDRABDpvFGLGOwvEboD4nZPyFJuXaJYYzLHRgBDoRaM4vJKKuIUV7dsyZ568u0RtBbQ41RHoU6Pw38xfEt2gWfh9tcklFT3UWvvUKH8MFcQKec9gG1uzVECwJdM+NUpYseZNRfuuzPl6hW8WGPUYgV40Cq6oITAKKuK0q2jfpTk/MI26TMBiH0ag089RmJp77KjjijrUO4ocoRtg0fRPNH1GjFACNiD5u2xJA347d9lpo+CgyWNHUAMSY3gz4AY4XNeARZmLedlCjfqkRl+9cdX6oxeaY/9tX0jeRZ7AbJY6KKnDScc+5sSn4xwsfAECdd5RbnCQeUXsgvgdprSLwA3E/AKftXyRr4HcLtZl63eUhpD+qyG/XbiddRHUYh5GYAyNskOJ68NlDmqVj6Z1PY4OqvA+JzuGRvkLj11sljGRNUrPjubQGyVFk0QdYdpkc77rqCYLW4LA0BvlU0ldTanXcPwJzUn6P/9g/hZ8C66zceyOAkD7RENulGucp5uWwGQTsEHIax0Tc7mrsWHqymeiY9i4ewSG2igrnKCrFuF70SB+bOTDZvoIrqNZpr5/m3eLwBAbhU1y3SJs94iXnBLPNUubuZ2Slu2pAYGhNcp1y01CiM/6jAb58Y6yruHYmIseITCURuHJ9x4n4apl7F77if+3lvO0cA0jUOdXWJpINYXT2w4aRGph/NdQ+hqjFmx4wdk1GCdt0HenrvvaKHx0+dZhg8hBafKkkhiFkp/Oo36e2HXSV/hM6nR4Kb760ig8eDwpfoDXOJidnaCIr+mnnrQ8nrQcz8IdQKDORlkhzsOBWC+W7Or2AhJT9BSBOhvlp534PT3KllZlBIbyrlflQs2BIVAFAWuUKuiZ7cUgYI1yMYfaCq2CgDVKFfTM9mIQsEa5mENthVZBwBqlCnpmezEI1Pn28MWANuBCp/jEv830d/jIoO5vF7SZfxbLGiWD4iIGdy1XmSDex5ZjNhLOHr0agdWcjg0Ba5SxHVGrpxEErFEagdWcjg0Ba5SxHVGrpxEErFEagdWcjg0Be9drbEfU6ilEAG+Lx4ULv38Qne8G8h8K3sse7F9g/Cd0+3ftrFEEGZNjR+C7K/AzZAqWOf+BXAgOwFmjYMz/VYC6PVmjCBImR40A7gwRC8Sd4gPEdzUPqQftfxwd+g32hJyDM7LXKBkUNrhwBNaon3cbEuVmP3J/rFE0Gja+ZAT4E1MzBwDlgwbDGkWjYeNLRoB3FD5+RZAp2O4oAMHIEMghgNcmOyjYLDfg3N2EG+2OQhSMDIHfCMgvfLJhjAwBQ+BcBP4BfjdpXUeuWmMAAAAASUVORK5CYII=";const u={id:"adapted-from-phet",name:null,copyright:null,getLinks:function(t,e){return[]},logoOnBlackBackground:l,logoOnWhiteBackground:a};n.register("Brand",u);e.default=u}]);
  </script>
</body>
</html>