<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{% if page.title%}{{ page.title }} - {% endif %}Jonathan Olson</title>
	<link href="/css/bootstrap.min.css" rel="stylesheet" media="screen">
	<link href="/css/bootstrap-responsive.min.css" rel="stylesheet" media="screen">
	<link href="/css/main.css" rel="stylesheet" media="screen">

	<script src="http://code.jquery.com/jquery-latest.js"></script>

	{% if page.mathjax %}
	<!-- initialize MathJax for TeX / LaTeX input -->
	<script type="text/x-mathjax-config">
	MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
	</script>
	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	<!--<script type="text/javascript" src="../../dev/mathjax-2.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>-->
	{% endif %}

	{% if page.syntax %}
	<link href="/css/syntax.css" rel="stylesheet">
	{% endif %}

	<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

	<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push( ["_setAccount","UA-10159461-1"] );
	_gaq.push( ["_setDomainName","jonathan-olson.com"] );
	_gaq.push( ["_trackPageview"] );
	_gaq.push( ['_trackPageLoadTime'] );

	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
	</script>
</head>
<body>
	<div class="sticky-wrapper">
		<div class="navbar navbar-inverse navbar-static-top">
			<div class="navbar-inner">
				<a class="brand" href="/">Jonathan Olson</a>
				<ul class="nav">
					<li {% if page.categories contains 'home' %}class="active"{% endif %}><a href="/">Home</a></li>
					<li {% if page.categories contains 'problem' %}class="active"{% endif %}><a href="/">Problems</a></li>
					<li><a href="https://github.com/jonathanolson">GitHub</a></li>
					<li><a href="https://twitter.com/combinatoric">Twitter</a></li>
					<li {% if page.categories contains 'about' %}class="active"{% endif %}><a href="/about">About</a></li>
				</ul>
			</div>
		</div>
		<script src="/js/main.js"></script>

		<div style="height: 20px;"></div>

		<div id="default-content">
			{{ content }}
		</div>

		<div class="sticky-push"></div>
	</div>
	<div class="footer">
		<div class="footer-main">
			<div class="footer-inner">
				<div class="footer-name">Jonathan Olson</div>
				<dl>
					<dt>Email</dt>
					<dd><script>document.write('<a href="mailto:jonathan.olson' + '@colorado.edu">jonathan.olson' + '@colorado.edu</a>');</script></dd>
					<dt>GitHub</dt>
					<dd><a href="https://github.com/jonathanolson">github.com/jonathanolson</a></dd>
					<dt>Twitter</dt>
					<dd><a href="https://twitter.com/combinatoric">@combinatoric</a></dd>
				</dl>
				<div style="clear: both;"></div>
			</div>
		</div>
		<div id="footer-banner-holder"></div>
	</div>

	<script src="/js/bootstrap.min.js"></script>
	<script>
	(function(){
		var lastWidth = $('.navbar').width();
		var lastHeight = $('.navbar-inner').height();

			// hack for detecting multiple rows and setting to the min-height of the navbar
			if( lastHeight >= 80 ) {
				lastHeight = 40;
			}

			// track the patchwork banner and regenerate it if needed (width being too small)
			var navBanner = null;
			var footBanner = null;
			function updateBanner() {
				var curWidth = $('.navbar').width();

				// remove the banner if the width is too small, and make it regenerate
				if( navBanner !== null && lastWidth < curWidth ) {
					footBanner.remove();
					footBanner = null;
					navBanner.remove();
					navBanner = null;
					while( lastWidth < curWidth && lastWidth > 0 ) {
						lastWidth *= 2;
					}
				}

				// build the banner
				if( navBanner === null ) {
					navBanner = jonathanolson.createPatchwork( lastWidth, lastHeight );
					$('.navbar-inner').append( navBanner );
					footBanner = jonathanolson.createPatchwork( lastWidth + 40, 40 ); // always 40 for the footer
					$('#footer-banner-holder').append( footBanner );
				}
			}

			updateBanner();

			// since this is executed after the bootstrap listeners are added, this should be mostly safe
			$(window).resize( function(){ updateBanner(); } );
		})();
	</script>
</body>
</html>
